---
title: 性能优化
---
## 概述

不同硬件配置、不同操作系统平台上性能表现是不一样的。另外，随着数据增多，性能下降无法避免。所以我们可能需要改变使用方式并调整一些配置项来提升性能，以获得更流畅的使用体验。

### 整体性能

* 内容块数量：内容块数量对性能影响范围较大，比如展开文档树、搜索、数据写入等。但也不必太过担心，通常情况下内容块数量在百万这个量级下不会产生太大影响，除非每个块的大小较大
* 系统环境：操作系统当前负载会影响整体性能
* 网络环境：通过 网络伺服 使用时网络质量会影响请求响应时间

优化建议：

* 将不常用的文档或者剪藏的文档单独放置到 存档笔记本 或 剪藏笔记本 中，关闭它后将减少数据库索引数量以提升性能
* 调小 搜索结果显示数，我们会对搜索请求响应时间进行性能监控，如果响应时间超过阈值，则会弹出提示用户调小该配置项
  性能监控阈值可以通过环境变量 SIYUAN_PERFORMANCE_TIMING 设置，单位毫秒，默认为 15000，即 15 秒
* 保持足够的系统资源
* 使用固态硬盘，将工作空间放置在固态硬盘上能够有效提升整体性能
* 升级硬件，这是提升性能最快的方式

### 编辑器性能

* 叶子块大小：单个叶子块大小会影响编辑器性能，如果一个叶子块包含了大量字符，那么编辑器可能会卡顿
* 动态加载块数：加载块数会影响编辑器性能，特别是对于公式块、代码块和图表块较多的情况，如果加载较多块，那么编辑器可能会卡顿
* 代码块行号：代码块行号会影响编辑器性能，如果一个代码块内容较多且开启了行号显示，那么编辑器可能会卡顿
* 公式、图片和图表：公式、图片和图表会影响编辑器性能，如果文档中包含了大量公式、图片和图表，那么编辑器可能会卡顿

优化建议：

* 避免使用过多软换行，虽然不使用软换行会增加块数，但是少使用软换行可以减小段落块大小避免编辑器卡顿
* 调小 动态加载块数，特别是对于公式块、代码块或图表块较多的使用场景
* 通过 聚焦 减少元素从而提升编辑器性能
