!function(){"use strict";try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode(".command.svelte-1bq7axd{padding:8px 12px}.command.svelte-1bq7axd:hover{cursor:pointer;background-color:#0003;color:var(--b3-theme-primary)}.command-selected.svelte-1bq7axd{color:var(--b3-theme-primary);background-color:#0003}.command-plugin.svelte-1bq7axd{font-size:14px}.command-shortcut.svelte-1bq7axd{font-size:12px;color:var(--color-text-3)}.plugin.svelte-bwhxpp span.remove.svelte-bwhxpp{display:none;color:var(--b3-theme-error);margin-left:4px}.plugin.svelte-bwhxpp:hover span.remove.svelte-bwhxpp{display:inline;cursor:pointer}.plugin.svelte-bwhxpp:hover span.remove.svelte-bwhxpp:hover{text-decoration:underline}.plugin-info.svelte-bj9chc{display:flex;align-items:center}.plugin-detail.svelte-bj9chc{margin-top:12px;width:100%}.plugin-name.svelte-bj9chc{display:inline;margin-right:6px;font-size:24px}.plugin-key.svelte-bj9chc{display:inline;font-size:16px}.plugin-manifest.svelte-bj9chc{margin-top:12px}.plugin-readme.svelte-bj9chc{margin-top:20px}.go-back.svelte-bj9chc{margin-left:12px;font-size:12px;height:24px}.go-back-icon.svelte-bj9chc{height:12px;width:12px;margin-right:4px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();
var _a;
var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Reflect$1;
(function(Reflect2) {
  (function(factory2) {
    var root = typeof commonjsGlobal === "object" ? commonjsGlobal : typeof self === "object" ? self : typeof this === "object" ? this : Function("return this;")();
    var exporter = makeExporter(Reflect2);
    if (typeof root.Reflect === "undefined") {
      root.Reflect = Reflect2;
    } else {
      exporter = makeExporter(root.Reflect, exporter);
    }
    factory2(exporter);
    function makeExporter(target, previous) {
      return function(key, value) {
        if (typeof target[key] !== "function") {
          Object.defineProperty(target, key, { configurable: true, writable: true, value });
        }
        if (previous)
          previous(key, value);
      };
    }
  })(function(exporter) {
    var hasOwn = Object.prototype.hasOwnProperty;
    var supportsSymbol = typeof Symbol === "function";
    var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== "undefined" ? Symbol.toPrimitive : "@@toPrimitive";
    var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== "undefined" ? Symbol.iterator : "@@iterator";
    var supportsCreate = typeof Object.create === "function";
    var supportsProto = { __proto__: [] } instanceof Array;
    var downLevel = !supportsCreate && !supportsProto;
    var HashMap = {
      // create an object in dictionary mode (a.k.a. "slow" mode in v8)
      create: supportsCreate ? function() {
        return MakeDictionary(/* @__PURE__ */ Object.create(null));
      } : supportsProto ? function() {
        return MakeDictionary({ __proto__: null });
      } : function() {
        return MakeDictionary({});
      },
      has: downLevel ? function(map, key) {
        return hasOwn.call(map, key);
      } : function(map, key) {
        return key in map;
      },
      get: downLevel ? function(map, key) {
        return hasOwn.call(map, key) ? map[key] : void 0;
      } : function(map, key) {
        return map[key];
      }
    };
    var functionPrototype = Object.getPrototypeOf(Function);
    var usePolyfill = typeof process === "object" && process.env && process.env["REFLECT_METADATA_USE_MAP_POLYFILL"] === "true";
    var _Map = !usePolyfill && typeof Map === "function" && typeof Map.prototype.entries === "function" ? Map : CreateMapPolyfill();
    var _Set = !usePolyfill && typeof Set === "function" && typeof Set.prototype.entries === "function" ? Set : CreateSetPolyfill();
    var _WeakMap = !usePolyfill && typeof WeakMap === "function" ? WeakMap : CreateWeakMapPolyfill();
    var Metadata2 = new _WeakMap();
    function decorate(decorators, target, propertyKey, attributes) {
      if (!IsUndefined(propertyKey)) {
        if (!IsArray(decorators))
          throw new TypeError();
        if (!IsObject(target))
          throw new TypeError();
        if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))
          throw new TypeError();
        if (IsNull(attributes))
          attributes = void 0;
        propertyKey = ToPropertyKey(propertyKey);
        return DecorateProperty(decorators, target, propertyKey, attributes);
      } else {
        if (!IsArray(decorators))
          throw new TypeError();
        if (!IsConstructor(target))
          throw new TypeError();
        return DecorateConstructor(decorators, target);
      }
    }
    exporter("decorate", decorate);
    function metadata(metadataKey, metadataValue) {
      function decorator(target, propertyKey) {
        if (!IsObject(target))
          throw new TypeError();
        if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))
          throw new TypeError();
        OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);
      }
      return decorator;
    }
    exporter("metadata", metadata);
    function defineMetadata(metadataKey, metadataValue, target, propertyKey) {
      if (!IsObject(target))
        throw new TypeError();
      if (!IsUndefined(propertyKey))
        propertyKey = ToPropertyKey(propertyKey);
      return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);
    }
    exporter("defineMetadata", defineMetadata);
    function hasMetadata(metadataKey, target, propertyKey) {
      if (!IsObject(target))
        throw new TypeError();
      if (!IsUndefined(propertyKey))
        propertyKey = ToPropertyKey(propertyKey);
      return OrdinaryHasMetadata(metadataKey, target, propertyKey);
    }
    exporter("hasMetadata", hasMetadata);
    function hasOwnMetadata(metadataKey, target, propertyKey) {
      if (!IsObject(target))
        throw new TypeError();
      if (!IsUndefined(propertyKey))
        propertyKey = ToPropertyKey(propertyKey);
      return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);
    }
    exporter("hasOwnMetadata", hasOwnMetadata);
    function getMetadata(metadataKey, target, propertyKey) {
      if (!IsObject(target))
        throw new TypeError();
      if (!IsUndefined(propertyKey))
        propertyKey = ToPropertyKey(propertyKey);
      return OrdinaryGetMetadata(metadataKey, target, propertyKey);
    }
    exporter("getMetadata", getMetadata);
    function getOwnMetadata(metadataKey, target, propertyKey) {
      if (!IsObject(target))
        throw new TypeError();
      if (!IsUndefined(propertyKey))
        propertyKey = ToPropertyKey(propertyKey);
      return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);
    }
    exporter("getOwnMetadata", getOwnMetadata);
    function getMetadataKeys(target, propertyKey) {
      if (!IsObject(target))
        throw new TypeError();
      if (!IsUndefined(propertyKey))
        propertyKey = ToPropertyKey(propertyKey);
      return OrdinaryMetadataKeys(target, propertyKey);
    }
    exporter("getMetadataKeys", getMetadataKeys);
    function getOwnMetadataKeys(target, propertyKey) {
      if (!IsObject(target))
        throw new TypeError();
      if (!IsUndefined(propertyKey))
        propertyKey = ToPropertyKey(propertyKey);
      return OrdinaryOwnMetadataKeys(target, propertyKey);
    }
    exporter("getOwnMetadataKeys", getOwnMetadataKeys);
    function deleteMetadata(metadataKey, target, propertyKey) {
      if (!IsObject(target))
        throw new TypeError();
      if (!IsUndefined(propertyKey))
        propertyKey = ToPropertyKey(propertyKey);
      var metadataMap = GetOrCreateMetadataMap(
        target,
        propertyKey,
        /*Create*/
        false
      );
      if (IsUndefined(metadataMap))
        return false;
      if (!metadataMap.delete(metadataKey))
        return false;
      if (metadataMap.size > 0)
        return true;
      var targetMetadata = Metadata2.get(target);
      targetMetadata.delete(propertyKey);
      if (targetMetadata.size > 0)
        return true;
      Metadata2.delete(target);
      return true;
    }
    exporter("deleteMetadata", deleteMetadata);
    function DecorateConstructor(decorators, target) {
      for (var i = decorators.length - 1; i >= 0; --i) {
        var decorator = decorators[i];
        var decorated = decorator(target);
        if (!IsUndefined(decorated) && !IsNull(decorated)) {
          if (!IsConstructor(decorated))
            throw new TypeError();
          target = decorated;
        }
      }
      return target;
    }
    function DecorateProperty(decorators, target, propertyKey, descriptor) {
      for (var i = decorators.length - 1; i >= 0; --i) {
        var decorator = decorators[i];
        var decorated = decorator(target, propertyKey, descriptor);
        if (!IsUndefined(decorated) && !IsNull(decorated)) {
          if (!IsObject(decorated))
            throw new TypeError();
          descriptor = decorated;
        }
      }
      return descriptor;
    }
    function GetOrCreateMetadataMap(O, P2, Create) {
      var targetMetadata = Metadata2.get(O);
      if (IsUndefined(targetMetadata)) {
        if (!Create)
          return void 0;
        targetMetadata = new _Map();
        Metadata2.set(O, targetMetadata);
      }
      var metadataMap = targetMetadata.get(P2);
      if (IsUndefined(metadataMap)) {
        if (!Create)
          return void 0;
        metadataMap = new _Map();
        targetMetadata.set(P2, metadataMap);
      }
      return metadataMap;
    }
    function OrdinaryHasMetadata(MetadataKey, O, P2) {
      var hasOwn2 = OrdinaryHasOwnMetadata(MetadataKey, O, P2);
      if (hasOwn2)
        return true;
      var parent = OrdinaryGetPrototypeOf(O);
      if (!IsNull(parent))
        return OrdinaryHasMetadata(MetadataKey, parent, P2);
      return false;
    }
    function OrdinaryHasOwnMetadata(MetadataKey, O, P2) {
      var metadataMap = GetOrCreateMetadataMap(
        O,
        P2,
        /*Create*/
        false
      );
      if (IsUndefined(metadataMap))
        return false;
      return ToBoolean(metadataMap.has(MetadataKey));
    }
    function OrdinaryGetMetadata(MetadataKey, O, P2) {
      var hasOwn2 = OrdinaryHasOwnMetadata(MetadataKey, O, P2);
      if (hasOwn2)
        return OrdinaryGetOwnMetadata(MetadataKey, O, P2);
      var parent = OrdinaryGetPrototypeOf(O);
      if (!IsNull(parent))
        return OrdinaryGetMetadata(MetadataKey, parent, P2);
      return void 0;
    }
    function OrdinaryGetOwnMetadata(MetadataKey, O, P2) {
      var metadataMap = GetOrCreateMetadataMap(
        O,
        P2,
        /*Create*/
        false
      );
      if (IsUndefined(metadataMap))
        return void 0;
      return metadataMap.get(MetadataKey);
    }
    function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P2) {
      var metadataMap = GetOrCreateMetadataMap(
        O,
        P2,
        /*Create*/
        true
      );
      metadataMap.set(MetadataKey, MetadataValue);
    }
    function OrdinaryMetadataKeys(O, P2) {
      var ownKeys = OrdinaryOwnMetadataKeys(O, P2);
      var parent = OrdinaryGetPrototypeOf(O);
      if (parent === null)
        return ownKeys;
      var parentKeys = OrdinaryMetadataKeys(parent, P2);
      if (parentKeys.length <= 0)
        return ownKeys;
      if (ownKeys.length <= 0)
        return parentKeys;
      var set = new _Set();
      var keys = [];
      for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {
        var key = ownKeys_1[_i];
        var hasKey = set.has(key);
        if (!hasKey) {
          set.add(key);
          keys.push(key);
        }
      }
      for (var _a2 = 0, parentKeys_1 = parentKeys; _a2 < parentKeys_1.length; _a2++) {
        var key = parentKeys_1[_a2];
        var hasKey = set.has(key);
        if (!hasKey) {
          set.add(key);
          keys.push(key);
        }
      }
      return keys;
    }
    function OrdinaryOwnMetadataKeys(O, P2) {
      var keys = [];
      var metadataMap = GetOrCreateMetadataMap(
        O,
        P2,
        /*Create*/
        false
      );
      if (IsUndefined(metadataMap))
        return keys;
      var keysObj = metadataMap.keys();
      var iterator2 = GetIterator(keysObj);
      var k2 = 0;
      while (true) {
        var next = IteratorStep(iterator2);
        if (!next) {
          keys.length = k2;
          return keys;
        }
        var nextValue = IteratorValue(next);
        try {
          keys[k2] = nextValue;
        } catch (e) {
          try {
            IteratorClose(iterator2);
          } finally {
            throw e;
          }
        }
        k2++;
      }
    }
    function Type(x) {
      if (x === null)
        return 1;
      switch (typeof x) {
        case "undefined":
          return 0;
        case "boolean":
          return 2;
        case "string":
          return 3;
        case "symbol":
          return 4;
        case "number":
          return 5;
        case "object":
          return x === null ? 1 : 6;
        default:
          return 6;
      }
    }
    function IsUndefined(x) {
      return x === void 0;
    }
    function IsNull(x) {
      return x === null;
    }
    function IsSymbol(x) {
      return typeof x === "symbol";
    }
    function IsObject(x) {
      return typeof x === "object" ? x !== null : typeof x === "function";
    }
    function ToPrimitive(input, PreferredType) {
      switch (Type(input)) {
        case 0:
          return input;
        case 1:
          return input;
        case 2:
          return input;
        case 3:
          return input;
        case 4:
          return input;
        case 5:
          return input;
      }
      var hint = PreferredType === 3 ? "string" : PreferredType === 5 ? "number" : "default";
      var exoticToPrim = GetMethod(input, toPrimitiveSymbol);
      if (exoticToPrim !== void 0) {
        var result = exoticToPrim.call(input, hint);
        if (IsObject(result))
          throw new TypeError();
        return result;
      }
      return OrdinaryToPrimitive(input, hint === "default" ? "number" : hint);
    }
    function OrdinaryToPrimitive(O, hint) {
      if (hint === "string") {
        var toString_1 = O.toString;
        if (IsCallable(toString_1)) {
          var result = toString_1.call(O);
          if (!IsObject(result))
            return result;
        }
        var valueOf = O.valueOf;
        if (IsCallable(valueOf)) {
          var result = valueOf.call(O);
          if (!IsObject(result))
            return result;
        }
      } else {
        var valueOf = O.valueOf;
        if (IsCallable(valueOf)) {
          var result = valueOf.call(O);
          if (!IsObject(result))
            return result;
        }
        var toString_2 = O.toString;
        if (IsCallable(toString_2)) {
          var result = toString_2.call(O);
          if (!IsObject(result))
            return result;
        }
      }
      throw new TypeError();
    }
    function ToBoolean(argument) {
      return !!argument;
    }
    function ToString(argument) {
      return "" + argument;
    }
    function ToPropertyKey(argument) {
      var key = ToPrimitive(
        argument,
        3
        /* String */
      );
      if (IsSymbol(key))
        return key;
      return ToString(key);
    }
    function IsArray(argument) {
      return Array.isArray ? Array.isArray(argument) : argument instanceof Object ? argument instanceof Array : Object.prototype.toString.call(argument) === "[object Array]";
    }
    function IsCallable(argument) {
      return typeof argument === "function";
    }
    function IsConstructor(argument) {
      return typeof argument === "function";
    }
    function IsPropertyKey(argument) {
      switch (Type(argument)) {
        case 3:
          return true;
        case 4:
          return true;
        default:
          return false;
      }
    }
    function GetMethod(V, P2) {
      var func = V[P2];
      if (func === void 0 || func === null)
        return void 0;
      if (!IsCallable(func))
        throw new TypeError();
      return func;
    }
    function GetIterator(obj) {
      var method = GetMethod(obj, iteratorSymbol);
      if (!IsCallable(method))
        throw new TypeError();
      var iterator2 = method.call(obj);
      if (!IsObject(iterator2))
        throw new TypeError();
      return iterator2;
    }
    function IteratorValue(iterResult) {
      return iterResult.value;
    }
    function IteratorStep(iterator2) {
      var result = iterator2.next();
      return result.done ? false : result;
    }
    function IteratorClose(iterator2) {
      var f = iterator2["return"];
      if (f)
        f.call(iterator2);
    }
    function OrdinaryGetPrototypeOf(O) {
      var proto = Object.getPrototypeOf(O);
      if (typeof O !== "function" || O === functionPrototype)
        return proto;
      if (proto !== functionPrototype)
        return proto;
      var prototype2 = O.prototype;
      var prototypeProto = prototype2 && Object.getPrototypeOf(prototype2);
      if (prototypeProto == null || prototypeProto === Object.prototype)
        return proto;
      var constructor = prototypeProto.constructor;
      if (typeof constructor !== "function")
        return proto;
      if (constructor === O)
        return proto;
      return constructor;
    }
    function CreateMapPolyfill() {
      var cacheSentinel = {};
      var arraySentinel = [];
      var MapIterator = (
        /** @class */
        function() {
          function MapIterator2(keys, values, selector) {
            this._index = 0;
            this._keys = keys;
            this._values = values;
            this._selector = selector;
          }
          MapIterator2.prototype["@@iterator"] = function() {
            return this;
          };
          MapIterator2.prototype[iteratorSymbol] = function() {
            return this;
          };
          MapIterator2.prototype.next = function() {
            var index = this._index;
            if (index >= 0 && index < this._keys.length) {
              var result = this._selector(this._keys[index], this._values[index]);
              if (index + 1 >= this._keys.length) {
                this._index = -1;
                this._keys = arraySentinel;
                this._values = arraySentinel;
              } else {
                this._index++;
              }
              return { value: result, done: false };
            }
            return { value: void 0, done: true };
          };
          MapIterator2.prototype.throw = function(error2) {
            if (this._index >= 0) {
              this._index = -1;
              this._keys = arraySentinel;
              this._values = arraySentinel;
            }
            throw error2;
          };
          MapIterator2.prototype.return = function(value) {
            if (this._index >= 0) {
              this._index = -1;
              this._keys = arraySentinel;
              this._values = arraySentinel;
            }
            return { value, done: true };
          };
          return MapIterator2;
        }()
      );
      return (
        /** @class */
        function() {
          function Map2() {
            this._keys = [];
            this._values = [];
            this._cacheKey = cacheSentinel;
            this._cacheIndex = -2;
          }
          Object.defineProperty(Map2.prototype, "size", {
            get: function() {
              return this._keys.length;
            },
            enumerable: true,
            configurable: true
          });
          Map2.prototype.has = function(key) {
            return this._find(
              key,
              /*insert*/
              false
            ) >= 0;
          };
          Map2.prototype.get = function(key) {
            var index = this._find(
              key,
              /*insert*/
              false
            );
            return index >= 0 ? this._values[index] : void 0;
          };
          Map2.prototype.set = function(key, value) {
            var index = this._find(
              key,
              /*insert*/
              true
            );
            this._values[index] = value;
            return this;
          };
          Map2.prototype.delete = function(key) {
            var index = this._find(
              key,
              /*insert*/
              false
            );
            if (index >= 0) {
              var size = this._keys.length;
              for (var i = index + 1; i < size; i++) {
                this._keys[i - 1] = this._keys[i];
                this._values[i - 1] = this._values[i];
              }
              this._keys.length--;
              this._values.length--;
              if (key === this._cacheKey) {
                this._cacheKey = cacheSentinel;
                this._cacheIndex = -2;
              }
              return true;
            }
            return false;
          };
          Map2.prototype.clear = function() {
            this._keys.length = 0;
            this._values.length = 0;
            this._cacheKey = cacheSentinel;
            this._cacheIndex = -2;
          };
          Map2.prototype.keys = function() {
            return new MapIterator(this._keys, this._values, getKey3);
          };
          Map2.prototype.values = function() {
            return new MapIterator(this._keys, this._values, getValue);
          };
          Map2.prototype.entries = function() {
            return new MapIterator(this._keys, this._values, getEntry);
          };
          Map2.prototype["@@iterator"] = function() {
            return this.entries();
          };
          Map2.prototype[iteratorSymbol] = function() {
            return this.entries();
          };
          Map2.prototype._find = function(key, insert2) {
            if (this._cacheKey !== key) {
              this._cacheIndex = this._keys.indexOf(this._cacheKey = key);
            }
            if (this._cacheIndex < 0 && insert2) {
              this._cacheIndex = this._keys.length;
              this._keys.push(key);
              this._values.push(void 0);
            }
            return this._cacheIndex;
          };
          return Map2;
        }()
      );
      function getKey3(key, _2) {
        return key;
      }
      function getValue(_2, value) {
        return value;
      }
      function getEntry(key, value) {
        return [key, value];
      }
    }
    function CreateSetPolyfill() {
      return (
        /** @class */
        function() {
          function Set2() {
            this._map = new _Map();
          }
          Object.defineProperty(Set2.prototype, "size", {
            get: function() {
              return this._map.size;
            },
            enumerable: true,
            configurable: true
          });
          Set2.prototype.has = function(value) {
            return this._map.has(value);
          };
          Set2.prototype.add = function(value) {
            return this._map.set(value, value), this;
          };
          Set2.prototype.delete = function(value) {
            return this._map.delete(value);
          };
          Set2.prototype.clear = function() {
            this._map.clear();
          };
          Set2.prototype.keys = function() {
            return this._map.keys();
          };
          Set2.prototype.values = function() {
            return this._map.values();
          };
          Set2.prototype.entries = function() {
            return this._map.entries();
          };
          Set2.prototype["@@iterator"] = function() {
            return this.keys();
          };
          Set2.prototype[iteratorSymbol] = function() {
            return this.keys();
          };
          return Set2;
        }()
      );
    }
    function CreateWeakMapPolyfill() {
      var UUID_SIZE = 16;
      var keys = HashMap.create();
      var rootKey = CreateUniqueKey();
      return (
        /** @class */
        function() {
          function WeakMap2() {
            this._key = CreateUniqueKey();
          }
          WeakMap2.prototype.has = function(target) {
            var table = GetOrCreateWeakMapTable(
              target,
              /*create*/
              false
            );
            return table !== void 0 ? HashMap.has(table, this._key) : false;
          };
          WeakMap2.prototype.get = function(target) {
            var table = GetOrCreateWeakMapTable(
              target,
              /*create*/
              false
            );
            return table !== void 0 ? HashMap.get(table, this._key) : void 0;
          };
          WeakMap2.prototype.set = function(target, value) {
            var table = GetOrCreateWeakMapTable(
              target,
              /*create*/
              true
            );
            table[this._key] = value;
            return this;
          };
          WeakMap2.prototype.delete = function(target) {
            var table = GetOrCreateWeakMapTable(
              target,
              /*create*/
              false
            );
            return table !== void 0 ? delete table[this._key] : false;
          };
          WeakMap2.prototype.clear = function() {
            this._key = CreateUniqueKey();
          };
          return WeakMap2;
        }()
      );
      function CreateUniqueKey() {
        var key;
        do
          key = "@@WeakMap@@" + CreateUUID();
        while (HashMap.has(keys, key));
        keys[key] = true;
        return key;
      }
      function GetOrCreateWeakMapTable(target, create) {
        if (!hasOwn.call(target, rootKey)) {
          if (!create)
            return void 0;
          Object.defineProperty(target, rootKey, { value: HashMap.create() });
        }
        return target[rootKey];
      }
      function FillRandomBytes(buffer, size) {
        for (var i = 0; i < size; ++i)
          buffer[i] = Math.random() * 255 | 0;
        return buffer;
      }
      function GenRandomBytes(size) {
        if (typeof Uint8Array === "function") {
          if (typeof crypto !== "undefined")
            return crypto.getRandomValues(new Uint8Array(size));
          if (typeof msCrypto !== "undefined")
            return msCrypto.getRandomValues(new Uint8Array(size));
          return FillRandomBytes(new Uint8Array(size), size);
        }
        return FillRandomBytes(new Array(size), size);
      }
      function CreateUUID() {
        var data = GenRandomBytes(UUID_SIZE);
        data[6] = data[6] & 79 | 64;
        data[8] = data[8] & 191 | 128;
        var result = "";
        for (var offset = 0; offset < UUID_SIZE; ++offset) {
          var byte = data[offset];
          if (offset === 4 || offset === 6 || offset === 8)
            result += "-";
          if (byte < 16)
            result += "0";
          result += byte.toString(16).toLowerCase();
        }
        return result;
      }
    }
    function MakeDictionary(obj) {
      obj.__ = void 0;
      delete obj.__;
      return obj;
    }
  });
})(Reflect$1 || (Reflect$1 = {}));
const VERSION$1 = "0.7.1";
const config = () => ({ token: window.siyuan.config.api.token });
const TYPES = {
  StorageManager: "StorageManager",
  PluginSystem: "PluginSystem",
  SystemManager: "PluginSystemLocalManager",
  PluginLoader: "PluginLoader",
  PluginFileManager: "PluginFileManager",
  EventBus: "EventBus",
  Shortcut: "Shortcut",
  CommandManager: "CommandManager",
  Store: "Store",
  SettingManager: "SettingManager"
};
async function request$1(url2, data) {
  let resData = null;
  await fetch(url2, {
    body: JSON.stringify(data),
    method: "POST",
    headers: {
      Authorization: `Token ${config().token}`
    }
  }).then(function(response) {
    resData = response.json();
  });
  return resData;
}
async function parseBody(response) {
  let r = await response;
  return r.code === 0 ? r.data : null;
}
async function transactions(protyle, transactions2 = []) {
  const url2 = "/api/transactions";
  const ws_url = new URL(protyle.ws.ws.url);
  const data = {
    app: ws_url.searchParams.get("app"),
    session: ws_url.searchParams.get("id"),
    transactions: transactions2
  };
  return parseBody(request$1(url2, data));
}
async function sql(sql2) {
  let sqldata = {
    stmt: sql2
  };
  let url2 = "/api/query/sql";
  return parseBody(request$1(url2, sqldata));
}
async function lsNotebooks(sql2) {
  let sqldata = { stmt: sql2 };
  let url2 = "/api/notebook/lsNotebooks";
  return parseBody(request$1(url2, sqldata));
}
async function getAnchor(anchorText, name2) {
  anchorText = anchorText.replace("((", "").replace("))", "");
  let sqlScript = `select * from blocks where id = '${anchorText}'`;
  let sqlRes = await sql(sqlScript);
  let anchor = "";
  if (sqlRes) {
    try {
      if (sqlRes[0][name2]) {
        anchor = sqlRes[0][name2];
      } else if (sqlRes[0]["content"]) {
        anchor = sqlRes[0]["content"];
      } else {
        anchor = anchorText;
      }
    } catch (e) {
      anchor = "解析错误";
    }
  }
  return anchor;
}
async function openNotebook(notebookId) {
  let data = {
    notebook: notebookId
  };
  let url2 = "/api/notebook/openNotebook";
  return parseBody(request$1(url2, data));
}
async function closeNotebook(notebookId) {
  let data = {
    notebook: notebookId
  };
  let url2 = "/api/notebook/closeNotebook";
  return parseBody(request$1(url2, data));
}
async function renameNotebook(notebookId, notebookNewName) {
  let data = {
    notebook: notebookId,
    name: notebookNewName
  };
  let url2 = "/api/notebook/renameNotebook";
  return parseBody(request$1(url2, data));
}
async function createNotebook(notebookName) {
  let data = {
    name: notebookName
  };
  let url2 = "/api/notebook/createNotebook";
  return parseBody(request$1(url2, data));
}
async function removeNotebook(notebookId) {
  let data = { notebook: notebookId };
  let url2 = "/api/notebook/removeNotebook";
  return parseBody(request$1(url2, data));
}
async function getNotebookConf(notebookId) {
  let data = { notebook: notebookId };
  let url2 = "/api/notebook/getNotebookConf";
  return parseBody(request$1(url2, data));
}
async function setNotebookConf(notebookId) {
  let data = { notebook: notebookId };
  let url2 = "/api/notebook/setNotebookConf";
  return parseBody(request$1(url2, data));
}
async function renameDoc(notebookId, path, title) {
  let data = {
    notebook: notebookId,
    path,
    title
  };
  let url2 = "/api/filetree/renameDoc";
  return parseBody(request$1(url2, data));
}
async function removeDoc(notebookId, path) {
  let data = {
    notebook: notebookId,
    path
  };
  let url2 = "/api/filetree/removeDoc";
  return parseBody(request$1(url2, data));
}
async function moveDoc(srcNotebookId, srcPath, targetNotebookId, targetPath) {
  let data = {
    fromNotebook: srcNotebookId,
    fromPath: srcPath,
    toNotebook: targetNotebookId,
    toPath: targetPath
  };
  let url2 = "/api/filetree/moveDoc";
  return parseBody(request$1(url2, data));
}
async function getHPathByPath(notebookId, path) {
  let data = {
    Notebook: notebookId,
    Path: path
  };
  let url2 = "/api/filetree/getHPathByPath";
  return parseBody(request$1(url2, data));
}
async function getHPathByID(ID) {
  let data = {
    id: ID
  };
  let url2 = "/api/filetree/getHPathByID";
  return parseBody(request$1(url2, data));
}
async function getBlockAttrs(blockId) {
  let data = {
    id: blockId
  };
  let url2 = "/api/attr/getBlockAttrs";
  return parseBody(request$1(url2, data));
}
async function getBlockByID(blockId) {
  let sqlScript = `select * from blocks where id ='${blockId}'`;
  let data = await sql(sqlScript);
  return data[0];
}
async function getBlockKramdown(blockId) {
  const data = {
    id: blockId
  };
  const url2 = "/api/block/getBlockKramdown";
  return parseBody(request$1(url2, data));
}
async function getBlockBreadcrumb(ID) {
  const data = {
    id: ID
  };
  const url2 = "/api/block/getBlockBreadcrumb";
  return parseBody(request$1(url2, data));
}
async function setBlockAttrs(blockId, attrs) {
  let url2 = "/api/attr/setBlockAttrs";
  return parseBody(
    request$1(url2, {
      id: blockId,
      attrs
    })
  );
}
async function exportMdContent(docId) {
  let data = {
    id: docId
  };
  let url2 = "/api/export/exportMdContent";
  return parseBody(request$1(url2, data));
}
async function getDocOutline(docId) {
  let data = {
    id: docId
  };
  let url2 = "/api/outline/getDocOutline";
  return parseBody(request$1(url2, data));
}
async function listDocsByPath(path) {
  let data = {
    path
  };
  let url2 = "/api/filetree/listDocsByPath";
  return parseBody(request$1(url2, data));
}
async function getBacklink(id2) {
  let data = {
    id: id2,
    beforeLen: 10,
    k: "",
    mk: ""
  };
  let url2 = "/api/ref/getBacklink";
  return parseBody(request$1(url2, data));
}
async function searchEmbedBlock(excludeIds, sql2) {
  let data = {
    stmt: sql2,
    excludeIDs: excludeIds
  };
  let url2 = "/api/search/searchEmbedBlock";
  return parseBody(request$1(url2, data));
}
async function getDoc(id2) {
  let data = {
    id: id2,
    k: "",
    mode: 2,
    size: 36
  };
  let url2 = "/api/filetree/getDoc";
  return parseBody(request$1(url2, data));
}
async function getFocusedDoc(id2) {
  let data = {
    id: id2,
    k: "",
    mode: 0,
    size: 36
  };
  let url2 = "/api/filetree/getDoc";
  return parseBody(request$1(url2, data));
}
async function getTag() {
  let data = {};
  let url2 = "/api/tag/getTag";
  return parseBody(request$1(url2, data));
}
async function getLocalGraph(k2, id2, conf, reqId) {
  let data = {
    id: id2,
    k: k2,
    conf,
    reqId
  };
  let url2 = "/api/graph/getLocalGraph";
  return parseBody(request$1(url2, data));
}
async function getGraph(k2, conf, reqId) {
  let data = {
    k: k2,
    conf,
    reqId
  };
  let url2 = "/api/graph/getGraph";
  return parseBody(request$1(url2, data));
}
async function searchDocs(k2) {
  let data = {
    k: k2
  };
  let url2 = "/api/filetree/searchDocs";
  return parseBody(request$1(url2, data));
}
async function searchBlock(query) {
  let data = {
    query
  };
  let url2 = "/api/search/searchBlock";
  return parseBody(request$1(url2, data));
}
async function searchTemplate(k2) {
  let data = {
    k: k2
  };
  let url2 = "/api/search/searchTemplate";
  return parseBody(request$1(url2, data));
}
async function createDocWithMd(notebook, path, markdown) {
  let data = {
    notebook,
    path,
    markdown
  };
  let url2 = "/api/filetree/createDocWithMd";
  return parseBody(request$1(url2, data));
}
async function docSaveAsTemplate(id2, overwrite = false) {
  let url2 = "/api/template/docSaveAsTemplate";
  let data = {
    id: id2,
    overwrite
  };
  return parseBody(request$1(url2, data));
}
async function render(data) {
  let url2 = "/api/template/render";
  return parseBody(request$1(url2, data));
}
async function insertBlock(previousID, dataType, data) {
  let url2 = "/api/block/insertBlock";
  return parseBody(
    request$1(
      url2 = url2,
      data = {
        previousID,
        dataType,
        data
      }
    )
  );
}
async function prependBlock(parentID, dataType, data) {
  let url2 = "/api/block/prependBlock";
  return parseBody(
    request$1(
      url2 = url2,
      data = {
        parentID,
        dataType,
        data
      }
    )
  );
}
async function appendBlock(parentID, dataType, data) {
  let url2 = "/api/block/appendBlock";
  return parseBody(
    request$1(
      url2 = url2,
      data = {
        parentID,
        dataType,
        data
      }
    )
  );
}
async function updateBlock(id2, dataType, data) {
  let url2 = "/api/block/updateBlock";
  return parseBody(
    request$1(
      url2 = url2,
      data = {
        id: id2,
        dataType,
        data
      }
    )
  );
}
async function deleteBlock(id2) {
  let url2 = "/api/block/deleteBlock";
  return parseBody(request$1(url2, { id: id2 }));
}
async function moveBlock(id2, previousID, parentID) {
  let url2 = "/api/block/moveBlock";
  return parseBody(
    request$1(url2, { id: id2, previousID, parentID })
  );
}
async function getSysFonts() {
  let url2 = "/api/system/getSysFonts";
  return parseBody(request$1(url2, null));
}
async function getFile(path, type = "text") {
  const response = await fetch("/api/file/getFile", {
    method: "POST",
    headers: {
      Authorization: `Token ${config().token}`
    },
    body: JSON.stringify({
      path
    })
  });
  if (response.status === 200) {
    if (type === "text") {
      return await response.text();
    }
    if (type === "json") {
      return (await response.json()).data;
    }
  }
  return null;
}
async function putFile(path, filedata, isDir = false, modTime = Date.now()) {
  let blob = new Blob([filedata]);
  let file = new File([blob], path.split("/").pop());
  let formdata = new FormData();
  formdata.append("path", path);
  formdata.append("file", file);
  formdata.append("isDir", String(isDir));
  formdata.append("modTime", String(modTime));
  const response = await fetch("/api/file/putFile", {
    body: formdata,
    method: "POST",
    headers: {
      Authorization: `Token ${config().token}`
    }
  });
  if (response.status === 200)
    return await response.json();
  else
    return null;
}
async function readDir(path) {
  const response = await fetch("/api/file/readDir", {
    method: "POST",
    headers: {
      Authorization: `Token ${config().token}`
    },
    body: JSON.stringify({
      path
    })
  });
  if (response.status === 200) {
    return (await response.json()).data;
  }
  return null;
}
async function removeFile(path) {
  const response = await fetch("/api/file/removeFile", {
    method: "POST",
    headers: {
      Authorization: `Token ${config().token}`
    },
    body: JSON.stringify({
      path
    })
  });
  if (response.status === 200)
    return;
  else
    return null;
}
const language = (_a = window.theme) == null ? void 0 : _a.languageMode;
async function pushMsg(message = null, text2 = null, timeout = 7e3) {
  const url2 = "/api/notification/pushMsg";
  const data = {
    msg: message ? message[language] || message.other : text2,
    timeout
  };
  return parseBody(request$1(url2, data));
}
async function pushErrMsg(message = null, text2 = null, timeout = 7e3) {
  const url2 = "/api/notification/pushErrMsg";
  const data = {
    msg: message ? message[language] || message.other : text2,
    timeout
  };
  return parseBody(request$1(url2, data));
}
async function setStorageVal(key, val) {
  const url2 = "/api/storage/setLocalStorageVal";
  const data = {
    app: genUUID(),
    key,
    val
  };
  return parseBody(request$1(url2, data));
}
async function getLocalStorage() {
  const url2 = "/api/storage/getLocalStorage";
  return parseBody(request$1(url2, null));
}
async function renderSprig(sprig) {
  let url2 = "/api/template/renderSprig";
  return parseBody(request$1(url2, { template: sprig }));
}
async function getBazzarWidget() {
  const url2 = "/api/bazaar/getBazaarWidget";
  return parseBody(request$1(url2, null));
}
const serverApi = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  appendBlock,
  closeNotebook,
  createDocWithMd,
  createNotebook,
  deleteBlock,
  docSaveAsTemplate,
  exportMdContent,
  getAnchor,
  getBacklink,
  getBazzarWidget,
  getBlockAttrs,
  getBlockBreadcrumb,
  getBlockByID,
  getBlockKramdown,
  getDoc,
  getDocOutline,
  getFile,
  getFocusedDoc,
  getGraph,
  getHPathByID,
  getHPathByPath,
  getLocalGraph,
  getLocalStorage,
  getNotebookConf,
  getSysFonts,
  getTag,
  insertBlock,
  listDocsByPath,
  lsNotebooks,
  moveBlock,
  moveDoc,
  openNotebook,
  parseBody,
  prependBlock,
  pushErrMsg,
  pushMsg,
  putFile,
  readDir,
  removeDoc,
  removeFile,
  removeNotebook,
  renameDoc,
  renameNotebook,
  render,
  renderSprig,
  request: request$1,
  searchBlock,
  searchDocs,
  searchEmbedBlock,
  searchTemplate,
  setBlockAttrs,
  setNotebookConf,
  setStorageVal,
  sql,
  transactions,
  updateBlock
}, Symbol.toStringTag, { value: "Module" }));
class Notification {
  constructor(option) {
    this.option = option;
  }
  show() {
    if (this.option.type === "error") {
      pushErrMsg(null, this.option.message, this.option.timeout);
    } else {
      pushMsg(null, this.option.message, this.option.timeout);
    }
  }
}
var z = Object.defineProperty;
var D = (i, e, t2) => e in i ? z(i, e, { enumerable: true, configurable: true, writable: true, value: t2 }) : i[e] = t2;
var _$1 = (i, e, t2) => (D(i, typeof e != "symbol" ? e + "" : e, t2), t2);
var P = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, b = {}, W = {
  get exports() {
    return b;
  },
  set exports(i) {
    b = i;
  }
};
(function(i) {
  (function(e, t2) {
    i.exports ? i.exports = t2() : e.log = t2();
  })(P, function() {
    var e = function() {
    }, t2 = "undefined", l = typeof window !== t2 && typeof window.navigator !== t2 && /Trident\/|MSIE /.test(window.navigator.userAgent), p = [
      "trace",
      "debug",
      "info",
      "warn",
      "error"
    ];
    function c(a2, s) {
      var f = a2[s];
      if (typeof f.bind == "function")
        return f.bind(a2);
      try {
        return Function.prototype.bind.call(f, a2);
      } catch {
        return function() {
          return Function.prototype.apply.apply(f, [a2, arguments]);
        };
      }
    }
    function g() {
      console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();
    }
    function w(a2) {
      return a2 === "debug" && (a2 = "log"), typeof console === t2 ? false : a2 === "trace" && l ? g : console[a2] !== void 0 ? c(console, a2) : console.log !== void 0 ? c(console, "log") : e;
    }
    function E(a2, s) {
      for (var f = 0; f < p.length; f++) {
        var o = p[f];
        this[o] = f < a2 ? e : this.methodFactory(o, a2, s);
      }
      this.log = this.debug;
    }
    function F(a2, s, f) {
      return function() {
        typeof console !== t2 && (E.call(this, s, f), this[a2].apply(this, arguments));
      };
    }
    function r(a2, s, f) {
      return w(a2) || F.apply(this, arguments);
    }
    function v(a2, s, f) {
      var o = this, O;
      s = s ?? "WARN";
      var u = "loglevel";
      typeof a2 == "string" ? u += ":" + a2 : typeof a2 == "symbol" && (u = void 0);
      function C(n) {
        var d = (p[n] || "silent").toUpperCase();
        if (!(typeof window === t2 || !u)) {
          try {
            window.localStorage[u] = d;
            return;
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(u) + "=" + d + ";";
          } catch {
          }
        }
      }
      function k2() {
        var n;
        if (!(typeof window === t2 || !u)) {
          try {
            n = window.localStorage[u];
          } catch {
          }
          if (typeof n === t2)
            try {
              var d = window.document.cookie, m = d.indexOf(
                encodeURIComponent(u) + "="
              );
              m !== -1 && (n = /^([^;]+)/.exec(d.slice(m))[1]);
            } catch {
            }
          return o.levels[n] === void 0 && (n = void 0), n;
        }
      }
      function V() {
        if (!(typeof window === t2 || !u)) {
          try {
            window.localStorage.removeItem(u);
            return;
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(u) + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          } catch {
          }
        }
      }
      o.name = a2, o.levels = {
        TRACE: 0,
        DEBUG: 1,
        INFO: 2,
        WARN: 3,
        ERROR: 4,
        SILENT: 5
      }, o.methodFactory = f || r, o.getLevel = function() {
        return O;
      }, o.setLevel = function(n, d) {
        if (typeof n == "string" && o.levels[n.toUpperCase()] !== void 0 && (n = o.levels[n.toUpperCase()]), typeof n == "number" && n >= 0 && n <= o.levels.SILENT) {
          if (O = n, d !== false && C(n), E.call(o, n, a2), typeof console === t2 && n < o.levels.SILENT)
            return "No console available for logging";
        } else
          throw "log.setLevel() called with invalid level: " + n;
      }, o.setDefaultLevel = function(n) {
        s = n, k2() || o.setLevel(n, false);
      }, o.resetLevel = function() {
        o.setLevel(s, false), V();
      }, o.enableAll = function(n) {
        o.setLevel(o.levels.TRACE, n);
      }, o.disableAll = function(n) {
        o.setLevel(o.levels.SILENT, n);
      };
      var y = k2();
      y == null && (y = s), o.setLevel(y, false);
    }
    var L = new v(), h = {};
    L.getLogger = function(s) {
      if (typeof s != "symbol" && typeof s != "string" || s === "")
        throw new TypeError("You must supply a name when creating a logger.");
      var f = h[s];
      return f || (f = h[s] = new v(
        s,
        L.getLevel(),
        L.methodFactory
      )), f;
    };
    var G = typeof window !== t2 ? window.log : void 0;
    return L.noConflict = function() {
      return typeof window !== t2 && window.log === L && (window.log = G), L;
    }, L.getLoggers = function() {
      return h;
    }, L.default = L, L;
  });
})(W);
var R = {}, B = {
  get exports() {
    return R;
  },
  set exports(i) {
    R = i;
  }
};
(function(i) {
  (function(e, t2) {
    i.exports ? i.exports = t2() : e.prefix = t2(e);
  })(P, function(e) {
    var t2 = function(r) {
      for (var v = 1, L = arguments.length, h; v < L; v++)
        for (h in arguments[v])
          Object.prototype.hasOwnProperty.call(arguments[v], h) && (r[h] = arguments[v][h]);
      return r;
    }, l = {
      template: "[%t] %l:",
      levelFormatter: function(r) {
        return r.toUpperCase();
      },
      nameFormatter: function(r) {
        return r || "root";
      },
      timestampFormatter: function(r) {
        return r.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1");
      },
      format: void 0
    }, p, c = {}, g = function(r) {
      if (!r || !r.getLogger)
        throw new TypeError("Argument is not a root logger");
      p = r;
    }, w = function(r, v) {
      if (!r || !r.setLevel)
        throw new TypeError("Argument is not a logger");
      var L = r.methodFactory, h = r.name || "", G = c[h] || c[""] || l;
      function a2(s, f, o) {
        var O = L(s, f, o), u = c[o] || c[""], C = u.template.indexOf("%t") !== -1, k2 = u.template.indexOf("%l") !== -1, V = u.template.indexOf("%n") !== -1;
        return function() {
          for (var y = "", n = arguments.length, d = Array(n), m = 0; m < n; m++)
            d[m] = arguments[m];
          if (h || !c[o]) {
            var x = u.timestampFormatter(new Date()), U = u.levelFormatter(s), A = u.nameFormatter(o);
            u.format ? y += u.format(U, A, x) : (y += u.template, C && (y = y.replace(/%t/, x)), k2 && (y = y.replace(/%l/, U)), V && (y = y.replace(/%n/, A))), d.length && typeof d[0] == "string" ? d[0] = y + " " + d[0] : d.unshift(y);
          }
          O.apply(void 0, d);
        };
      }
      return c[h] || (r.methodFactory = a2), v = v || {}, v.template && (v.format = void 0), c[h] = t2({}, G, v), r.setLevel(r.getLevel()), p || r.warn(
        "It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"
      ), r;
    }, E = {
      reg: g,
      apply: w
    }, F;
    return e && (F = e.prefix, E.noConflict = function() {
      return e.prefix === E && (e.prefix = F), E;
    }), E;
  });
})(B);
class T {
}
_$1(T, "LOG_LEVEL_KEY", "VITE_LOG_LEVEL"), _$1(T, "LOG_PREFIX_KEY", "VITE_LOG_PREFIX");
var S = /* @__PURE__ */ ((i) => (i.LOG_LEVEL_DEBUG = "DEBUG", i.LOG_LEVEL_INFO = "INFO", i.LOG_LEVEL_WARN = "WARN", i.LOG_LEVEL_ERROR = "ERROR", i))(S || {});
function K() {
  const i = Error.prepareStackTrace;
  Error.prepareStackTrace = (t2, l) => l;
  const e = new Error().stack.slice(1);
  return Error.prepareStackTrace = i, e;
}
class I {
  /**
   * 解析日志级别为枚举
   *
   * @param enumObj 枚举对象
   * @param value 配置的值
   */
  static stringToEnumValue(e, t2) {
    return e[Object.keys(e).filter(
      (l) => e[l].toString() === t2
    )[0]];
  }
  /**
   * 获取配置的日志级别
   */
  static getEnvLevel(e) {
    if (!e)
      return;
    const t2 = e.getEnvOrDefault(
      T.LOG_LEVEL_KEY,
      S.LOG_LEVEL_INFO
    ), l = I.stringToEnumValue(
      S,
      t2.toUpperCase()
    );
    return l || console.warn(
      "[zhi-log] LOG_LEVEL is invalid in you .env file.Must be either debug, info, warn or error, fallback to default info level"
    ), l;
  }
  /**
   * 获取默认日志
   */
  static getEnvLogger(e) {
    if (e)
      return e.getEnv(T.LOG_PREFIX_KEY);
  }
}
class Y {
  constructor(e, t2, l) {
    _$1(this, "consoleLogger", "console");
    _$1(this, "stackSize", 1);
    _$1(this, "getLogger", (e2) => {
      let t3;
      if (e2)
        t3 = e2;
      else {
        const l2 = this.getCallStack(), p2 = [], c2 = [];
        for (let g = 0; g < l2.length; g++) {
          const w = l2[g], E = w.getFileName() ?? "none";
          if (g > this.stackSize - 1)
            break;
          const F = E + "-" + w.getLineNumber() + ":" + w.getColumnNumber();
          p2.push(F);
        }
        c2.length > 0 && (t3 = p2.join(" -> "));
      }
      return (!t3 || t3.trim().length === 0) && (t3 = this.consoleLogger), b.getLogger(t3);
    });
    this.stackSize = 1;
    let p;
    e ? p = e : p = I.getEnvLevel(l), p = p ?? S.LOG_LEVEL_INFO, b.setLevel(p);
    const c = {
      gray: (g) => g.toString(),
      green: (g) => g.toString(),
      yellow: (g) => g.toString(),
      red: (g) => g.toString()
    };
    R.reg(b), R.apply(b, {
      format(g, w, E) {
        const r = ["[" + (t2 ?? I.getEnvLogger(l) ?? "zhi") + "]"];
        switch (r.push(
          c.gray("[") + c.green(E).toString() + c.gray("]")
        ), g) {
          case S.LOG_LEVEL_DEBUG:
            r.push(c.gray(g.toUpperCase().toString()));
            break;
          case S.LOG_LEVEL_INFO:
            r.push(c.green(g.toUpperCase().toString()));
            break;
          case S.LOG_LEVEL_WARN:
            r.push(c.yellow(g.toUpperCase().toString()));
            break;
          case S.LOG_LEVEL_ERROR:
            r.push(c.red(g.toUpperCase().toString()));
            break;
        }
        return r.push(c.green(w).toString()), r.push(c.gray(":")), r.join(" ");
      }
    });
  }
  /**
   * 设置输出栈的深度，默认1
   *
   * @param stackSize - 栈的深度
   */
  setStackSize(e) {
    this.stackSize = e ?? 1;
  }
  /**
   * 获取调用堆栈，若未获取到直接返回空数组
   *
   * @author terwer
   * @since 1.6.0
   */
  getCallStack() {
    let e;
    try {
      e = K();
    } catch {
      e = [];
    }
    return e;
  }
}
class X {
  /**
   * 默认日志级别
   *
   * @param level - 可选，未设置默认INFO
   * @param sign - 可选前缀，默认zhi
   * @param env - 可选环境变量实例
   */
  constructor(e, t2, l) {
    _$1(this, "logger");
    this.logger = new Y(e, t2, l);
  }
  /**
   * 获取日志记录器
   *
   * @param loggerName - 日志记录器名称
   * @param stackSize - 打印栈的深度
   * @protected
   */
  getLogger(e, t2) {
    return this.logger.setStackSize(t2), this.logger.getLogger(e);
  }
}
class N extends X {
  constructor(e, t2, l) {
    super(e, t2, l);
  }
  /**
   * 获取默认的日志记录器
   *
   * @param loggerName - 日志记录器名称
   * @param stackSize - 打印栈的深度
   */
  getLogger(e, t2) {
    return super.getLogger(e, t2);
  }
}
class M {
  /**
   * 默认日志记录器
   *
   * @param stackSize - 栈的深度
   * @param env - 环境变量实例
   */
  static defaultLogger(e, t2) {
    return M.customLogFactory(void 0, void 0, e).getLogger(
      void 0,
      t2
    );
  }
  /**
   * 自定义日志工厂
   */
  static customLogFactory(e, t2, l) {
    return new N(e, t2, l);
  }
  /**
   * 自定义日志工厂，自定义前缀
   */
  static customSignLogFactory(e, t2) {
    return new N(void 0, e, t2);
  }
}
function insertBefore(positionEl, el) {
  return positionEl.insertAdjacentElement("beforebegin", el);
}
function insertAfter(positionEl, el) {
  return positionEl.insertAdjacentElement("afterend", el);
}
function addToolbarLeft(el) {
  var _a2;
  const title = (_a2 = document.getElementById("toolbar")) == null ? void 0 : _a2.getElementsByClassName("fn__ellipsis");
  if (!title) {
    return;
  }
  insertBefore(title[0], el);
}
function addToolbarRight(el) {
  var _a2;
  const title = (_a2 = document.getElementById("toolbar")) == null ? void 0 : _a2.getElementsByClassName("fn__ellipsis");
  if (!title) {
    return;
  }
  insertAfter(title[0], el);
}
const createLogger = (name2) => getLogger(name2);
const clientApi = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  addToolbarLeft,
  addToolbarRight,
  createLogger
}, Symbol.toStringTag, { value: "Module" }));
class Menu {
  constructor(id2) {
    var _a2, _b;
    const menu = (_b = (_a2 = window.siyuan) == null ? void 0 : _a2.menus) == null ? void 0 : _b.menu;
    if (!menu) {
      throw Error("Siyuan internal menu not found!");
    }
    this.menu = menu;
    if (!id2) {
      throw Error("Menu must has an id, got empty or undefined!");
    }
    menu.remove();
    menu.element.setAttribute("data-name", id2);
  }
  addItem(item) {
    this.menu.append(item.element);
    return this;
  }
  addSeparator() {
    this.addItem(new MenuItem({ type: "separator" }));
    return this;
  }
  showAtMouseEvent(event) {
    this.menu.popup({ x: event.clientX, y: event.clientY });
    return this;
  }
  showAtPosition(position) {
    this.menu.popup({ x: position.x, y: position.y });
    return this;
  }
  close() {
    this.menu.remove();
  }
}
class MenuItem {
  constructor(options) {
    this.element = document.createElement("button");
    if (options.disabled) {
      this.element.setAttribute("disabled", "disabled");
    }
    if (options.type === "separator") {
      this.element.classList.add("b3-menu__separator");
      return;
    }
    this.element.classList.add("b3-menu__item");
    if (options.current) {
      this.element.classList.add("b3-menu__item--selected");
    }
    if (options.click) {
      this.element.addEventListener("click", (event) => {
        if (this.element.getAttribute("disabled")) {
          return;
        }
        options.click(this.element);
        event.preventDefault();
        event.stopImmediatePropagation();
        event.stopPropagation();
        window.siyuan.menus.menu.remove();
      });
    }
    let html = `<span class="b3-menu__label">${options.label}</span>`;
    if (options.iconHTML) {
      html = options.iconHTML + html;
    } else {
      html = `<svg class="b3-menu__icon${["HTML (SiYuan)", window.siyuan.languages.template].includes(options.label) ? " ft__error" : ""}" style="${options.icon === "iconClose" ? "height:10px;" : ""}"><use xlink:href="#${options.icon || ""}"></use></svg>${html}`;
    }
    if (options.action) {
      html += `<svg class="b3-menu__action"><use xlink:href="#${options.action}"></use></svg>`;
    }
    if (options.id) {
      this.element.setAttribute("data-id", options.id);
    }
    if (options.type === "readonly") {
      this.element.classList.add("b3-menu__item--readonly");
    }
    this.element.innerHTML = html;
    if (options.bind) {
      this.element.classList.add("b3-menu__item--custom");
      options.bind(this.element);
    }
    if (options.submenu) {
      const submenuElement = document.createElement("div");
      submenuElement.classList.add("b3-menu__submenu");
      options.submenu.forEach((item) => {
        submenuElement.append(new MenuItem(item).element);
      });
      this.element.insertAdjacentHTML("beforeend", '<svg class="b3-menu__icon b3-menu__icon--arrow"><use xlink:href="#iconRight"></use></svg>');
      this.element.append(submenuElement);
    }
  }
}
class MenuSeparator {
}
class Dialog {
  constructor(options) {
    this.disableClose = options.disableClose;
    this.id = genUUID();
    window.siyuan.dialogs.push(this);
    this.destroyCallback = options.destroyCallback;
    this.element = document.createElement("div");
    this.element.innerHTML = `<div class="b3-dialog">
<div class="b3-dialog__scrim"${options.transparent ? 'style="background-color:transparent"' : ""}></div>
<div class="b3-dialog__container" style="width:${options.width || "auto"}">
  <svg class="b3-dialog__close fn__a${this.disableClose ? " fn__none" : ""}"><use xlink:href="#iconClose"></use></svg>
  <div class="b3-dialog__header${options.title ? "" : " fn__none"}" onselectstart="return false;">${options.title || ""}</div>
  <div style="height:${options.height || "auto"}">${options.content}</div>
</div></div>`;
    this.element.querySelector(".b3-dialog__scrim").addEventListener("click", (event) => {
      if (!this.disableClose) {
        this.destroy();
      }
      event.preventDefault();
      event.stopPropagation();
      window.siyuan.menus.menu.remove();
    });
    if (!this.disableClose) {
      this.element.querySelector(".b3-dialog__close").addEventListener("click", (event) => {
        this.destroy();
        event.preventDefault();
        event.stopPropagation();
      });
    }
    document.body.append(this.element);
    if (options.disableAnimation) {
      this.element.classList.add("b3-dialog--open");
    } else {
      setTimeout(() => {
        this.element.classList.add("b3-dialog--open");
      });
    }
    window.siyuan.menus.menu.remove();
  }
  static destroyAll() {
    window.siyuan.dialogs.forEach((p) => p.destroy());
  }
  destroy() {
    this.element.remove();
    window.siyuan.menus.menu.remove();
    if (this.destroyCallback) {
      this.destroyCallback();
    }
    window.siyuan.dialogs.find((item, index) => {
      if (item.id === this.id) {
        window.siyuan.dialogs.splice(index, 1);
        return true;
      }
    });
  }
  bindInput(inputElement, enterEvent) {
    inputElement.focus();
    inputElement.addEventListener("keydown", (event) => {
      if (event.isComposing) {
        event.preventDefault();
        return;
      }
      if (event.key === "Escape") {
        this.destroy();
        event.preventDefault();
        event.stopPropagation();
        return;
      }
      if (event.key === "Enter" && enterEvent) {
        enterEvent();
        event.preventDefault();
      }
    });
  }
}
class Plugin {
  onload() {
  }
  onunload() {
  }
  registerCommand(command) {
  }
  registerSettingRender(settingRender) {
  }
  async loadStorage(filename) {
    return null;
  }
  async writeStorage(filename, content) {
  }
}
const api = {
  clientApi,
  serverApi,
  Plugin,
  Menu,
  MenuItem,
  MenuSeparator,
  Notification,
  Dialog
};
class FileClient {
  constructor() {
    this.electronApi = {
      readDir(p) {
        const fs = window.require("fs");
        const path = window.require("path");
        const SIYUAN_WORKSPACE = path.join(window.siyuan.config.system.dataDir, "..");
        return new Promise((resolve2) => {
          fs.readdir(path.join(SIYUAN_WORKSPACE, p), (err, files) => {
            if (err) {
              resolve2([]);
              return;
            }
            const result = files.map((f) => ({
              isDir: fs.statSync(path.join(SIYUAN_WORKSPACE, p, f)).isDirectory(),
              name: f
            }));
            resolve2(result);
          });
        });
      },
      getFile(f, type = "text") {
        return new Promise((resolve2, reject) => {
          const fs = window.require("fs");
          const path = window.require("path");
          const SIYUAN_WORKSPACE = path.join(window.siyuan.config.system.dataDir, "..");
          fs.readFile(path.join(SIYUAN_WORKSPACE, f), (err, data) => {
            if (err) {
              return reject(err);
            }
            const text2 = data.toString("utf8");
            if (type === "json") {
              try {
                return resolve2(JSON.parse(text2));
              } catch (e) {
                reject(e);
                return;
              }
            }
            return resolve2(text2);
          });
        });
      },
      putFile,
      removeFile(f) {
        return new Promise((resolve2, reject) => {
          const fs = window.require("fs");
          const path = window.require("path");
          const SIYUAN_WORKSPACE = path.join(window.siyuan.config.system.dataDir, "..");
          const p = path.join(SIYUAN_WORKSPACE, f);
          log("Remove files from", p);
          fs.rm(p, { recursive: true, force: true }, (err) => {
            if (err) {
              return reject(err);
            }
            resolve2(null);
          });
        });
      }
    };
    this.serverApi = {
      readDir,
      getFile,
      putFile,
      removeFile
    };
    this.fileApi = this.serverApi;
  }
  getVersion() {
    return window.siyuan.config.system.kernelVersion;
  }
  static getInstanceApi() {
    if (!this.fileClient) {
      this.fileClient = new FileClient();
    }
    return this.fileClient;
  }
}
const author$1 = "作者";
const version$1 = "版本";
const description$1 = "描述";
const goBack$1 = "返回";
const url$1 = "地址";
const readme$1 = "README";
const loading$1 = "加载中";
const downloading$1 = "下载中";
const downloaded$1 = "已下载";
const download$1 = "下载";
const upgrade$1 = "升级";
const nodescription$1 = "无描述内容";
const safemode$1 = "安全模式";
const safemodetip$1 = "关闭安全模式允许第三方插件加载";
const autoupgrade$1 = "自动更新";
const autoupgradetip$1 = "从固定位置获取版本并更新本地存储的插件系统脚本";
const store_url$1 = "插件商店地址";
const store_url_tip$1 = "线上插件系统仓库地址, 默认为";
const menu_common$1 = "通用配置";
const menu_list$1 = "插件列表";
const menu_store$1 = "插件商店";
const plugin_system$1 = "插件系统";
const plugin_system_setting$1 = "插件系统设置";
const reload$1 = "重载";
const show_plugin_system_config$1 = "显示插件系统配置";
const reload_window$1 = "重载当前窗口";
const shortcut$1 = "快捷键";
const show_command_panel$1 = "显示控制面板";
const uninstall$1 = "卸载";
const new_version_widget$1 = "集市发现新版本的插件系统,请前往更新并重载";
const zh_CN = {
  author: author$1,
  version: version$1,
  description: description$1,
  goBack: goBack$1,
  url: url$1,
  readme: readme$1,
  loading: loading$1,
  downloading: downloading$1,
  downloaded: downloaded$1,
  download: download$1,
  upgrade: upgrade$1,
  nodescription: nodescription$1,
  safemode: safemode$1,
  safemodetip: safemodetip$1,
  autoupgrade: autoupgrade$1,
  autoupgradetip: autoupgradetip$1,
  store_url: store_url$1,
  store_url_tip: store_url_tip$1,
  menu_common: menu_common$1,
  menu_list: menu_list$1,
  menu_store: menu_store$1,
  plugin_system: plugin_system$1,
  plugin_system_setting: plugin_system_setting$1,
  reload: reload$1,
  show_plugin_system_config: show_plugin_system_config$1,
  reload_window: reload_window$1,
  shortcut: shortcut$1,
  show_command_panel: show_command_panel$1,
  uninstall: uninstall$1,
  new_version_widget: new_version_widget$1
};
const author = "Author";
const version = "Version";
const description = "Description";
const goBack = "Go Back";
const url = "URL";
const readme = "README";
const loading = "Loading";
const downloading = "Downloading";
const downloaded = "Downloaded";
const download = "Download";
const upgrade = "Upgrade";
const nodescription = "No Description content";
const safemode = "Safe Mode";
const safemodetip = "Turn off safe mode to enable third party plugins.";
const autoupgrade = "Auto Upgrade";
const autoupgradetip = "Auto upgrade plugin system online.";
const store_url = "Plugin Store URL";
const store_url_tip = "Plugin Store URL, default is";
const menu_common = "Common Setting";
const menu_list = "Plugins";
const menu_store = "Store";
const plugin_system = "Plugin System";
const plugin_system_setting = "Plugin System Setting";
const reload = "Reload";
const show_plugin_system_config = "Show plugin system config";
const reload_window = "Reload current window";
const shortcut = "Shortcut";
const show_command_panel = "Show command panel";
const uninstall = "Uninstall";
const new_version_widget = "New version plugin system found in Bazzar, please upgrade and reload.";
const en_US = {
  author,
  version,
  description,
  goBack,
  url,
  readme,
  loading,
  downloading,
  downloaded,
  download,
  upgrade,
  nodescription,
  safemode,
  safemodetip,
  autoupgrade,
  autoupgradetip,
  store_url,
  store_url_tip,
  menu_common,
  menu_list,
  menu_store,
  plugin_system,
  plugin_system_setting,
  reload,
  show_plugin_system_config,
  reload_window,
  shortcut,
  show_command_panel,
  uninstall,
  new_version_widget
};
function bind(fn, thisArg) {
  return function wrap() {
    return fn.apply(thisArg, arguments);
  };
}
const { toString } = Object.prototype;
const { getPrototypeOf } = Object;
const kindOf = ((cache) => (thing) => {
  const str = toString.call(thing);
  return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());
})(/* @__PURE__ */ Object.create(null));
const kindOfTest = (type) => {
  type = type.toLowerCase();
  return (thing) => kindOf(thing) === type;
};
const typeOfTest = (type) => (thing) => typeof thing === type;
const { isArray } = Array;
const isUndefined = typeOfTest("undefined");
function isBuffer(val) {
  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);
}
const isArrayBuffer = kindOfTest("ArrayBuffer");
function isArrayBufferView(val) {
  let result;
  if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
    result = ArrayBuffer.isView(val);
  } else {
    result = val && val.buffer && isArrayBuffer(val.buffer);
  }
  return result;
}
const isString = typeOfTest("string");
const isFunction = typeOfTest("function");
const isNumber = typeOfTest("number");
const isObject = (thing) => thing !== null && typeof thing === "object";
const isBoolean = (thing) => thing === true || thing === false;
const isPlainObject = (val) => {
  if (kindOf(val) !== "object") {
    return false;
  }
  const prototype2 = getPrototypeOf(val);
  return (prototype2 === null || prototype2 === Object.prototype || Object.getPrototypeOf(prototype2) === null) && !(Symbol.toStringTag in val) && !(Symbol.iterator in val);
};
const isDate = kindOfTest("Date");
const isFile = kindOfTest("File");
const isBlob = kindOfTest("Blob");
const isFileList = kindOfTest("FileList");
const isStream = (val) => isObject(val) && isFunction(val.pipe);
const isFormData = (thing) => {
  const pattern = "[object FormData]";
  return thing && (typeof FormData === "function" && thing instanceof FormData || toString.call(thing) === pattern || isFunction(thing.toString) && thing.toString() === pattern);
};
const isURLSearchParams = kindOfTest("URLSearchParams");
const trim = (str) => str.trim ? str.trim() : str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
function forEach(obj, fn, { allOwnKeys = false } = {}) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  let i;
  let l;
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray(obj)) {
    for (i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);
    const len = keys.length;
    let key;
    for (i = 0; i < len; i++) {
      key = keys[i];
      fn.call(null, obj[key], key, obj);
    }
  }
}
function findKey(obj, key) {
  key = key.toLowerCase();
  const keys = Object.keys(obj);
  let i = keys.length;
  let _key;
  while (i-- > 0) {
    _key = keys[i];
    if (key === _key.toLowerCase()) {
      return _key;
    }
  }
  return null;
}
const _global = (() => {
  if (typeof globalThis !== "undefined")
    return globalThis;
  return typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : global;
})();
const isContextDefined = (context) => !isUndefined(context) && context !== _global;
function merge() {
  const { caseless } = isContextDefined(this) && this || {};
  const result = {};
  const assignValue = (val, key) => {
    const targetKey = caseless && findKey(result, key) || key;
    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {
      result[targetKey] = merge(result[targetKey], val);
    } else if (isPlainObject(val)) {
      result[targetKey] = merge({}, val);
    } else if (isArray(val)) {
      result[targetKey] = val.slice();
    } else {
      result[targetKey] = val;
    }
  };
  for (let i = 0, l = arguments.length; i < l; i++) {
    arguments[i] && forEach(arguments[i], assignValue);
  }
  return result;
}
const extend = (a2, b2, thisArg, { allOwnKeys } = {}) => {
  forEach(b2, (val, key) => {
    if (thisArg && isFunction(val)) {
      a2[key] = bind(val, thisArg);
    } else {
      a2[key] = val;
    }
  }, { allOwnKeys });
  return a2;
};
const stripBOM = (content) => {
  if (content.charCodeAt(0) === 65279) {
    content = content.slice(1);
  }
  return content;
};
const inherits = (constructor, superConstructor, props, descriptors2) => {
  constructor.prototype = Object.create(superConstructor.prototype, descriptors2);
  constructor.prototype.constructor = constructor;
  Object.defineProperty(constructor, "super", {
    value: superConstructor.prototype
  });
  props && Object.assign(constructor.prototype, props);
};
const toFlatObject = (sourceObj, destObj, filter3, propFilter) => {
  let props;
  let i;
  let prop;
  const merged = {};
  destObj = destObj || {};
  if (sourceObj == null)
    return destObj;
  do {
    props = Object.getOwnPropertyNames(sourceObj);
    i = props.length;
    while (i-- > 0) {
      prop = props[i];
      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {
        destObj[prop] = sourceObj[prop];
        merged[prop] = true;
      }
    }
    sourceObj = filter3 !== false && getPrototypeOf(sourceObj);
  } while (sourceObj && (!filter3 || filter3(sourceObj, destObj)) && sourceObj !== Object.prototype);
  return destObj;
};
const endsWith = (str, searchString, position) => {
  str = String(str);
  if (position === void 0 || position > str.length) {
    position = str.length;
  }
  position -= searchString.length;
  const lastIndex = str.indexOf(searchString, position);
  return lastIndex !== -1 && lastIndex === position;
};
const toArray = (thing) => {
  if (!thing)
    return null;
  if (isArray(thing))
    return thing;
  let i = thing.length;
  if (!isNumber(i))
    return null;
  const arr = new Array(i);
  while (i-- > 0) {
    arr[i] = thing[i];
  }
  return arr;
};
const isTypedArray = ((TypedArray) => {
  return (thing) => {
    return TypedArray && thing instanceof TypedArray;
  };
})(typeof Uint8Array !== "undefined" && getPrototypeOf(Uint8Array));
const forEachEntry = (obj, fn) => {
  const generator = obj && obj[Symbol.iterator];
  const iterator2 = generator.call(obj);
  let result;
  while ((result = iterator2.next()) && !result.done) {
    const pair = result.value;
    fn.call(obj, pair[0], pair[1]);
  }
};
const matchAll = (regExp, str) => {
  let matches;
  const arr = [];
  while ((matches = regExp.exec(str)) !== null) {
    arr.push(matches);
  }
  return arr;
};
const isHTMLForm = kindOfTest("HTMLFormElement");
const toCamelCase = (str) => {
  return str.toLowerCase().replace(
    /[-_\s]([a-z\d])(\w*)/g,
    function replacer(m, p1, p2) {
      return p1.toUpperCase() + p2;
    }
  );
};
const hasOwnProperty = (({ hasOwnProperty: hasOwnProperty2 }) => (obj, prop) => hasOwnProperty2.call(obj, prop))(Object.prototype);
const isRegExp = kindOfTest("RegExp");
const reduceDescriptors = (obj, reducer) => {
  const descriptors2 = Object.getOwnPropertyDescriptors(obj);
  const reducedDescriptors = {};
  forEach(descriptors2, (descriptor, name2) => {
    if (reducer(descriptor, name2, obj) !== false) {
      reducedDescriptors[name2] = descriptor;
    }
  });
  Object.defineProperties(obj, reducedDescriptors);
};
const freezeMethods = (obj) => {
  reduceDescriptors(obj, (descriptor, name2) => {
    if (isFunction(obj) && ["arguments", "caller", "callee"].indexOf(name2) !== -1) {
      return false;
    }
    const value = obj[name2];
    if (!isFunction(value))
      return;
    descriptor.enumerable = false;
    if ("writable" in descriptor) {
      descriptor.writable = false;
      return;
    }
    if (!descriptor.set) {
      descriptor.set = () => {
        throw Error("Can not rewrite read-only method '" + name2 + "'");
      };
    }
  });
};
const toObjectSet = (arrayOrString, delimiter) => {
  const obj = {};
  const define = (arr) => {
    arr.forEach((value) => {
      obj[value] = true;
    });
  };
  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));
  return obj;
};
const noop$1 = () => {
};
const toFiniteNumber = (value, defaultValue) => {
  value = +value;
  return Number.isFinite(value) ? value : defaultValue;
};
const ALPHA = "abcdefghijklmnopqrstuvwxyz";
const DIGIT = "0123456789";
const ALPHABET = {
  DIGIT,
  ALPHA,
  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT
};
const generateString = (size = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {
  let str = "";
  const { length } = alphabet;
  while (size--) {
    str += alphabet[Math.random() * length | 0];
  }
  return str;
};
function isSpecCompliantForm(thing) {
  return !!(thing && isFunction(thing.append) && thing[Symbol.toStringTag] === "FormData" && thing[Symbol.iterator]);
}
const toJSONObject = (obj) => {
  const stack = new Array(10);
  const visit = (source, i) => {
    if (isObject(source)) {
      if (stack.indexOf(source) >= 0) {
        return;
      }
      if (!("toJSON" in source)) {
        stack[i] = source;
        const target = isArray(source) ? [] : {};
        forEach(source, (value, key) => {
          const reducedValue = visit(value, i + 1);
          !isUndefined(reducedValue) && (target[key] = reducedValue);
        });
        stack[i] = void 0;
        return target;
      }
    }
    return source;
  };
  return visit(obj, 0);
};
const utils = {
  isArray,
  isArrayBuffer,
  isBuffer,
  isFormData,
  isArrayBufferView,
  isString,
  isNumber,
  isBoolean,
  isObject,
  isPlainObject,
  isUndefined,
  isDate,
  isFile,
  isBlob,
  isRegExp,
  isFunction,
  isStream,
  isURLSearchParams,
  isTypedArray,
  isFileList,
  forEach,
  merge,
  extend,
  trim,
  stripBOM,
  inherits,
  toFlatObject,
  kindOf,
  kindOfTest,
  endsWith,
  toArray,
  forEachEntry,
  matchAll,
  isHTMLForm,
  hasOwnProperty,
  hasOwnProp: hasOwnProperty,
  // an alias to avoid ESLint no-prototype-builtins detection
  reduceDescriptors,
  freezeMethods,
  toObjectSet,
  toCamelCase,
  noop: noop$1,
  toFiniteNumber,
  findKey,
  global: _global,
  isContextDefined,
  ALPHABET,
  generateString,
  isSpecCompliantForm,
  toJSONObject
};
function AxiosError(message, code3, config2, request2, response) {
  Error.call(this);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack;
  }
  this.message = message;
  this.name = "AxiosError";
  code3 && (this.code = code3);
  config2 && (this.config = config2);
  request2 && (this.request = request2);
  response && (this.response = response);
}
utils.inherits(AxiosError, Error, {
  toJSON: function toJSON() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: utils.toJSONObject(this.config),
      code: this.code,
      status: this.response && this.response.status ? this.response.status : null
    };
  }
});
const prototype$1 = AxiosError.prototype;
const descriptors = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL"
  // eslint-disable-next-line func-names
].forEach((code3) => {
  descriptors[code3] = { value: code3 };
});
Object.defineProperties(AxiosError, descriptors);
Object.defineProperty(prototype$1, "isAxiosError", { value: true });
AxiosError.from = (error2, code3, config2, request2, response, customProps) => {
  const axiosError = Object.create(prototype$1);
  utils.toFlatObject(error2, axiosError, function filter3(obj) {
    return obj !== Error.prototype;
  }, (prop) => {
    return prop !== "isAxiosError";
  });
  AxiosError.call(axiosError, error2.message, code3, config2, request2, response);
  axiosError.cause = error2;
  axiosError.name = error2.name;
  customProps && Object.assign(axiosError, customProps);
  return axiosError;
};
const httpAdapter = null;
function isVisitable(thing) {
  return utils.isPlainObject(thing) || utils.isArray(thing);
}
function removeBrackets(key) {
  return utils.endsWith(key, "[]") ? key.slice(0, -2) : key;
}
function renderKey(path, key, dots) {
  if (!path)
    return key;
  return path.concat(key).map(function each(token, i) {
    token = removeBrackets(token);
    return !dots && i ? "[" + token + "]" : token;
  }).join(dots ? "." : "");
}
function isFlatArray(arr) {
  return utils.isArray(arr) && !arr.some(isVisitable);
}
const predicates = utils.toFlatObject(utils, {}, null, function filter2(prop) {
  return /^is[A-Z]/.test(prop);
});
function toFormData(obj, formData, options) {
  if (!utils.isObject(obj)) {
    throw new TypeError("target must be an object");
  }
  formData = formData || new FormData();
  options = utils.toFlatObject(options, {
    metaTokens: true,
    dots: false,
    indexes: false
  }, false, function defined(option, source) {
    return !utils.isUndefined(source[option]);
  });
  const metaTokens = options.metaTokens;
  const visitor = options.visitor || defaultVisitor;
  const dots = options.dots;
  const indexes = options.indexes;
  const _Blob = options.Blob || typeof Blob !== "undefined" && Blob;
  const useBlob = _Blob && utils.isSpecCompliantForm(formData);
  if (!utils.isFunction(visitor)) {
    throw new TypeError("visitor must be a function");
  }
  function convertValue(value) {
    if (value === null)
      return "";
    if (utils.isDate(value)) {
      return value.toISOString();
    }
    if (!useBlob && utils.isBlob(value)) {
      throw new AxiosError("Blob is not supported. Use a Buffer instead.");
    }
    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {
      return useBlob && typeof Blob === "function" ? new Blob([value]) : Buffer.from(value);
    }
    return value;
  }
  function defaultVisitor(value, key, path) {
    let arr = value;
    if (value && !path && typeof value === "object") {
      if (utils.endsWith(key, "{}")) {
        key = metaTokens ? key : key.slice(0, -2);
        value = JSON.stringify(value);
      } else if (utils.isArray(value) && isFlatArray(value) || (utils.isFileList(value) || utils.endsWith(key, "[]")) && (arr = utils.toArray(value))) {
        key = removeBrackets(key);
        arr.forEach(function each(el, index) {
          !(utils.isUndefined(el) || el === null) && formData.append(
            // eslint-disable-next-line no-nested-ternary
            indexes === true ? renderKey([key], index, dots) : indexes === null ? key : key + "[]",
            convertValue(el)
          );
        });
        return false;
      }
    }
    if (isVisitable(value)) {
      return true;
    }
    formData.append(renderKey(path, key, dots), convertValue(value));
    return false;
  }
  const stack = [];
  const exposedHelpers = Object.assign(predicates, {
    defaultVisitor,
    convertValue,
    isVisitable
  });
  function build(value, path) {
    if (utils.isUndefined(value))
      return;
    if (stack.indexOf(value) !== -1) {
      throw Error("Circular reference detected in " + path.join("."));
    }
    stack.push(value);
    utils.forEach(value, function each(el, key) {
      const result = !(utils.isUndefined(el) || el === null) && visitor.call(
        formData,
        el,
        utils.isString(key) ? key.trim() : key,
        path,
        exposedHelpers
      );
      if (result === true) {
        build(el, path ? path.concat(key) : [key]);
      }
    });
    stack.pop();
  }
  if (!utils.isObject(obj)) {
    throw new TypeError("data must be an object");
  }
  build(obj);
  return formData;
}
function encode$1(str) {
  const charMap = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0"
  };
  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {
    return charMap[match];
  });
}
function AxiosURLSearchParams(params, options) {
  this._pairs = [];
  params && toFormData(params, this, options);
}
const prototype = AxiosURLSearchParams.prototype;
prototype.append = function append2(name2, value) {
  this._pairs.push([name2, value]);
};
prototype.toString = function toString2(encoder) {
  const _encode = encoder ? function(value) {
    return encoder.call(this, value, encode$1);
  } : encode$1;
  return this._pairs.map(function each(pair) {
    return _encode(pair[0]) + "=" + _encode(pair[1]);
  }, "").join("&");
};
function encode(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function buildURL(url2, params, options) {
  if (!params) {
    return url2;
  }
  const _encode = options && options.encode || encode;
  const serializeFn = options && options.serialize;
  let serializedParams;
  if (serializeFn) {
    serializedParams = serializeFn(params, options);
  } else {
    serializedParams = utils.isURLSearchParams(params) ? params.toString() : new AxiosURLSearchParams(params, options).toString(_encode);
  }
  if (serializedParams) {
    const hashmarkIndex = url2.indexOf("#");
    if (hashmarkIndex !== -1) {
      url2 = url2.slice(0, hashmarkIndex);
    }
    url2 += (url2.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url2;
}
class InterceptorManager {
  constructor() {
    this.handlers = [];
  }
  /**
   * Add a new interceptor to the stack
   *
   * @param {Function} fulfilled The function to handle `then` for a `Promise`
   * @param {Function} rejected The function to handle `reject` for a `Promise`
   *
   * @return {Number} An ID used to remove interceptor later
   */
  use(fulfilled, rejected, options) {
    this.handlers.push({
      fulfilled,
      rejected,
      synchronous: options ? options.synchronous : false,
      runWhen: options ? options.runWhen : null
    });
    return this.handlers.length - 1;
  }
  /**
   * Remove an interceptor from the stack
   *
   * @param {Number} id The ID that was returned by `use`
   *
   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise
   */
  eject(id2) {
    if (this.handlers[id2]) {
      this.handlers[id2] = null;
    }
  }
  /**
   * Clear all interceptors from the stack
   *
   * @returns {void}
   */
  clear() {
    if (this.handlers) {
      this.handlers = [];
    }
  }
  /**
   * Iterate over all the registered interceptors
   *
   * This method is particularly useful for skipping over any
   * interceptors that may have become `null` calling `eject`.
   *
   * @param {Function} fn The function to call for each interceptor
   *
   * @returns {void}
   */
  forEach(fn) {
    utils.forEach(this.handlers, function forEachHandler(h) {
      if (h !== null) {
        fn(h);
      }
    });
  }
}
const InterceptorManager$1 = InterceptorManager;
const transitionalDefaults = {
  silentJSONParsing: true,
  forcedJSONParsing: true,
  clarifyTimeoutError: false
};
const URLSearchParams$1 = typeof URLSearchParams !== "undefined" ? URLSearchParams : AxiosURLSearchParams;
const FormData$1 = typeof FormData !== "undefined" ? FormData : null;
const Blob$1 = typeof Blob !== "undefined" ? Blob : null;
const isStandardBrowserEnv = (() => {
  let product;
  if (typeof navigator !== "undefined" && ((product = navigator.product) === "ReactNative" || product === "NativeScript" || product === "NS")) {
    return false;
  }
  return typeof window !== "undefined" && typeof document !== "undefined";
})();
const isStandardBrowserWebWorkerEnv = (() => {
  return typeof WorkerGlobalScope !== "undefined" && // eslint-disable-next-line no-undef
  self instanceof WorkerGlobalScope && typeof self.importScripts === "function";
})();
const platform = {
  isBrowser: true,
  classes: {
    URLSearchParams: URLSearchParams$1,
    FormData: FormData$1,
    Blob: Blob$1
  },
  isStandardBrowserEnv,
  isStandardBrowserWebWorkerEnv,
  protocols: ["http", "https", "file", "blob", "url", "data"]
};
function toURLEncodedForm(data, options) {
  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({
    visitor: function(value, key, path, helpers) {
      if (platform.isNode && utils.isBuffer(value)) {
        this.append(key, value.toString("base64"));
        return false;
      }
      return helpers.defaultVisitor.apply(this, arguments);
    }
  }, options));
}
function parsePropPath(name2) {
  return utils.matchAll(/\w+|\[(\w*)]/g, name2).map((match) => {
    return match[0] === "[]" ? "" : match[1] || match[0];
  });
}
function arrayToObject(arr) {
  const obj = {};
  const keys = Object.keys(arr);
  let i;
  const len = keys.length;
  let key;
  for (i = 0; i < len; i++) {
    key = keys[i];
    obj[key] = arr[key];
  }
  return obj;
}
function formDataToJSON(formData) {
  function buildPath(path, value, target, index) {
    let name2 = path[index++];
    const isNumericKey = Number.isFinite(+name2);
    const isLast = index >= path.length;
    name2 = !name2 && utils.isArray(target) ? target.length : name2;
    if (isLast) {
      if (utils.hasOwnProp(target, name2)) {
        target[name2] = [target[name2], value];
      } else {
        target[name2] = value;
      }
      return !isNumericKey;
    }
    if (!target[name2] || !utils.isObject(target[name2])) {
      target[name2] = [];
    }
    const result = buildPath(path, value, target[name2], index);
    if (result && utils.isArray(target[name2])) {
      target[name2] = arrayToObject(target[name2]);
    }
    return !isNumericKey;
  }
  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {
    const obj = {};
    utils.forEachEntry(formData, (name2, value) => {
      buildPath(parsePropPath(name2), value, obj, 0);
    });
    return obj;
  }
  return null;
}
const DEFAULT_CONTENT_TYPE = {
  "Content-Type": void 0
};
function stringifySafely(rawValue, parser, encoder) {
  if (utils.isString(rawValue)) {
    try {
      (parser || JSON.parse)(rawValue);
      return utils.trim(rawValue);
    } catch (e) {
      if (e.name !== "SyntaxError") {
        throw e;
      }
    }
  }
  return (encoder || JSON.stringify)(rawValue);
}
const defaults = {
  transitional: transitionalDefaults,
  adapter: ["xhr", "http"],
  transformRequest: [function transformRequest(data, headers) {
    const contentType = headers.getContentType() || "";
    const hasJSONContentType = contentType.indexOf("application/json") > -1;
    const isObjectPayload = utils.isObject(data);
    if (isObjectPayload && utils.isHTMLForm(data)) {
      data = new FormData(data);
    }
    const isFormData2 = utils.isFormData(data);
    if (isFormData2) {
      if (!hasJSONContentType) {
        return data;
      }
      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;
    }
    if (utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data) || utils.isFile(data) || utils.isBlob(data)) {
      return data;
    }
    if (utils.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils.isURLSearchParams(data)) {
      headers.setContentType("application/x-www-form-urlencoded;charset=utf-8", false);
      return data.toString();
    }
    let isFileList2;
    if (isObjectPayload) {
      if (contentType.indexOf("application/x-www-form-urlencoded") > -1) {
        return toURLEncodedForm(data, this.formSerializer).toString();
      }
      if ((isFileList2 = utils.isFileList(data)) || contentType.indexOf("multipart/form-data") > -1) {
        const _FormData = this.env && this.env.FormData;
        return toFormData(
          isFileList2 ? { "files[]": data } : data,
          _FormData && new _FormData(),
          this.formSerializer
        );
      }
    }
    if (isObjectPayload || hasJSONContentType) {
      headers.setContentType("application/json", false);
      return stringifySafely(data);
    }
    return data;
  }],
  transformResponse: [function transformResponse(data) {
    const transitional2 = this.transitional || defaults.transitional;
    const forcedJSONParsing = transitional2 && transitional2.forcedJSONParsing;
    const JSONRequested = this.responseType === "json";
    if (data && utils.isString(data) && (forcedJSONParsing && !this.responseType || JSONRequested)) {
      const silentJSONParsing = transitional2 && transitional2.silentJSONParsing;
      const strictJSONParsing = !silentJSONParsing && JSONRequested;
      try {
        return JSON.parse(data);
      } catch (e) {
        if (strictJSONParsing) {
          if (e.name === "SyntaxError") {
            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);
          }
          throw e;
        }
      }
    }
    return data;
  }],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: platform.classes.FormData,
    Blob: platform.classes.Blob
  },
  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  },
  headers: {
    common: {
      "Accept": "application/json, text/plain, */*"
    }
  }
};
utils.forEach(["delete", "get", "head"], function forEachMethodNoData(method) {
  defaults.headers[method] = {};
});
utils.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
});
const defaults$1 = defaults;
const ignoreDuplicateOf = utils.toObjectSet([
  "age",
  "authorization",
  "content-length",
  "content-type",
  "etag",
  "expires",
  "from",
  "host",
  "if-modified-since",
  "if-unmodified-since",
  "last-modified",
  "location",
  "max-forwards",
  "proxy-authorization",
  "referer",
  "retry-after",
  "user-agent"
]);
const parseHeaders = (rawHeaders) => {
  const parsed = {};
  let key;
  let val;
  let i;
  rawHeaders && rawHeaders.split("\n").forEach(function parser(line) {
    i = line.indexOf(":");
    key = line.substring(0, i).trim().toLowerCase();
    val = line.substring(i + 1).trim();
    if (!key || parsed[key] && ignoreDuplicateOf[key]) {
      return;
    }
    if (key === "set-cookie") {
      if (parsed[key]) {
        parsed[key].push(val);
      } else {
        parsed[key] = [val];
      }
    } else {
      parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
    }
  });
  return parsed;
};
const $internals = Symbol("internals");
function normalizeHeader(header) {
  return header && String(header).trim().toLowerCase();
}
function normalizeValue(value) {
  if (value === false || value == null) {
    return value;
  }
  return utils.isArray(value) ? value.map(normalizeValue) : String(value);
}
function parseTokens(str) {
  const tokens = /* @__PURE__ */ Object.create(null);
  const tokensRE = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;
  let match;
  while (match = tokensRE.exec(str)) {
    tokens[match[1]] = match[2];
  }
  return tokens;
}
function isValidHeaderName(str) {
  return /^[-_a-zA-Z]+$/.test(str.trim());
}
function matchHeaderValue(context, value, header, filter3, isHeaderNameFilter) {
  if (utils.isFunction(filter3)) {
    return filter3.call(this, value, header);
  }
  if (isHeaderNameFilter) {
    value = header;
  }
  if (!utils.isString(value))
    return;
  if (utils.isString(filter3)) {
    return value.indexOf(filter3) !== -1;
  }
  if (utils.isRegExp(filter3)) {
    return filter3.test(value);
  }
}
function formatHeader(header) {
  return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (w, char, str) => {
    return char.toUpperCase() + str;
  });
}
function buildAccessors(obj, header) {
  const accessorName = utils.toCamelCase(" " + header);
  ["get", "set", "has"].forEach((methodName) => {
    Object.defineProperty(obj, methodName + accessorName, {
      value: function(arg1, arg2, arg3) {
        return this[methodName].call(this, header, arg1, arg2, arg3);
      },
      configurable: true
    });
  });
}
class AxiosHeaders {
  constructor(headers) {
    headers && this.set(headers);
  }
  set(header, valueOrRewrite, rewrite) {
    const self2 = this;
    function setHeader(_value, _header, _rewrite) {
      const lHeader = normalizeHeader(_header);
      if (!lHeader) {
        throw new Error("header name must be a non-empty string");
      }
      const key = utils.findKey(self2, lHeader);
      if (!key || self2[key] === void 0 || _rewrite === true || _rewrite === void 0 && self2[key] !== false) {
        self2[key || _header] = normalizeValue(_value);
      }
    }
    const setHeaders = (headers, _rewrite) => utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));
    if (utils.isPlainObject(header) || header instanceof this.constructor) {
      setHeaders(header, valueOrRewrite);
    } else if (utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {
      setHeaders(parseHeaders(header), valueOrRewrite);
    } else {
      header != null && setHeader(valueOrRewrite, header, rewrite);
    }
    return this;
  }
  get(header, parser) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils.findKey(this, header);
      if (key) {
        const value = this[key];
        if (!parser) {
          return value;
        }
        if (parser === true) {
          return parseTokens(value);
        }
        if (utils.isFunction(parser)) {
          return parser.call(this, value, key);
        }
        if (utils.isRegExp(parser)) {
          return parser.exec(value);
        }
        throw new TypeError("parser must be boolean|regexp|function");
      }
    }
  }
  has(header, matcher) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils.findKey(this, header);
      return !!(key && this[key] !== void 0 && (!matcher || matchHeaderValue(this, this[key], key, matcher)));
    }
    return false;
  }
  delete(header, matcher) {
    const self2 = this;
    let deleted = false;
    function deleteHeader(_header) {
      _header = normalizeHeader(_header);
      if (_header) {
        const key = utils.findKey(self2, _header);
        if (key && (!matcher || matchHeaderValue(self2, self2[key], key, matcher))) {
          delete self2[key];
          deleted = true;
        }
      }
    }
    if (utils.isArray(header)) {
      header.forEach(deleteHeader);
    } else {
      deleteHeader(header);
    }
    return deleted;
  }
  clear(matcher) {
    const keys = Object.keys(this);
    let i = keys.length;
    let deleted = false;
    while (i--) {
      const key = keys[i];
      if (!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {
        delete this[key];
        deleted = true;
      }
    }
    return deleted;
  }
  normalize(format) {
    const self2 = this;
    const headers = {};
    utils.forEach(this, (value, header) => {
      const key = utils.findKey(headers, header);
      if (key) {
        self2[key] = normalizeValue(value);
        delete self2[header];
        return;
      }
      const normalized = format ? formatHeader(header) : String(header).trim();
      if (normalized !== header) {
        delete self2[header];
      }
      self2[normalized] = normalizeValue(value);
      headers[normalized] = true;
    });
    return this;
  }
  concat(...targets) {
    return this.constructor.concat(this, ...targets);
  }
  toJSON(asStrings) {
    const obj = /* @__PURE__ */ Object.create(null);
    utils.forEach(this, (value, header) => {
      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(", ") : value);
    });
    return obj;
  }
  [Symbol.iterator]() {
    return Object.entries(this.toJSON())[Symbol.iterator]();
  }
  toString() {
    return Object.entries(this.toJSON()).map(([header, value]) => header + ": " + value).join("\n");
  }
  get [Symbol.toStringTag]() {
    return "AxiosHeaders";
  }
  static from(thing) {
    return thing instanceof this ? thing : new this(thing);
  }
  static concat(first, ...targets) {
    const computed = new this(first);
    targets.forEach((target) => computed.set(target));
    return computed;
  }
  static accessor(header) {
    const internals = this[$internals] = this[$internals] = {
      accessors: {}
    };
    const accessors = internals.accessors;
    const prototype2 = this.prototype;
    function defineAccessor(_header) {
      const lHeader = normalizeHeader(_header);
      if (!accessors[lHeader]) {
        buildAccessors(prototype2, _header);
        accessors[lHeader] = true;
      }
    }
    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);
    return this;
  }
}
AxiosHeaders.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]);
utils.freezeMethods(AxiosHeaders.prototype);
utils.freezeMethods(AxiosHeaders);
const AxiosHeaders$1 = AxiosHeaders;
function transformData(fns, response) {
  const config2 = this || defaults$1;
  const context = response || config2;
  const headers = AxiosHeaders$1.from(context.headers);
  let data = context.data;
  utils.forEach(fns, function transform(fn) {
    data = fn.call(config2, data, headers.normalize(), response ? response.status : void 0);
  });
  headers.normalize();
  return data;
}
function isCancel(value) {
  return !!(value && value.__CANCEL__);
}
function CanceledError(message, config2, request2) {
  AxiosError.call(this, message == null ? "canceled" : message, AxiosError.ERR_CANCELED, config2, request2);
  this.name = "CanceledError";
}
utils.inherits(CanceledError, AxiosError, {
  __CANCEL__: true
});
function settle(resolve2, reject, response) {
  const validateStatus2 = response.config.validateStatus;
  if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
    resolve2(response);
  } else {
    reject(new AxiosError(
      "Request failed with status code " + response.status,
      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],
      response.config,
      response.request,
      response
    ));
  }
}
const cookies = platform.isStandardBrowserEnv ? (
  // Standard browser envs support document.cookie
  function standardBrowserEnv() {
    return {
      write: function write(name2, value, expires, path, domain, secure) {
        const cookie = [];
        cookie.push(name2 + "=" + encodeURIComponent(value));
        if (utils.isNumber(expires)) {
          cookie.push("expires=" + new Date(expires).toGMTString());
        }
        if (utils.isString(path)) {
          cookie.push("path=" + path);
        }
        if (utils.isString(domain)) {
          cookie.push("domain=" + domain);
        }
        if (secure === true) {
          cookie.push("secure");
        }
        document.cookie = cookie.join("; ");
      },
      read: function read(name2) {
        const match = document.cookie.match(new RegExp("(^|;\\s*)(" + name2 + ")=([^;]*)"));
        return match ? decodeURIComponent(match[3]) : null;
      },
      remove: function remove(name2) {
        this.write(name2, "", Date.now() - 864e5);
      }
    };
  }()
) : (
  // Non standard browser env (web workers, react-native) lack needed support.
  function nonStandardBrowserEnv() {
    return {
      write: function write() {
      },
      read: function read() {
        return null;
      },
      remove: function remove() {
      }
    };
  }()
);
function isAbsoluteURL(url2) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url2);
}
function combineURLs(baseURL, relativeURL) {
  return relativeURL ? baseURL.replace(/\/+$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
}
function buildFullPath(baseURL, requestedURL) {
  if (baseURL && !isAbsoluteURL(requestedURL)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
}
const isURLSameOrigin = platform.isStandardBrowserEnv ? (
  // Standard browser envs have full support of the APIs needed to test
  // whether the request URL is of the same origin as current location.
  function standardBrowserEnv2() {
    const msie = /(msie|trident)/i.test(navigator.userAgent);
    const urlParsingNode = document.createElement("a");
    let originURL;
    function resolveURL(url2) {
      let href = url2;
      if (msie) {
        urlParsingNode.setAttribute("href", href);
        href = urlParsingNode.href;
      }
      urlParsingNode.setAttribute("href", href);
      return {
        href: urlParsingNode.href,
        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, "") : "",
        host: urlParsingNode.host,
        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, "") : "",
        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, "") : "",
        hostname: urlParsingNode.hostname,
        port: urlParsingNode.port,
        pathname: urlParsingNode.pathname.charAt(0) === "/" ? urlParsingNode.pathname : "/" + urlParsingNode.pathname
      };
    }
    originURL = resolveURL(window.location.href);
    return function isURLSameOrigin2(requestURL) {
      const parsed = utils.isString(requestURL) ? resolveURL(requestURL) : requestURL;
      return parsed.protocol === originURL.protocol && parsed.host === originURL.host;
    };
  }()
) : (
  // Non standard browser envs (web workers, react-native) lack needed support.
  function nonStandardBrowserEnv2() {
    return function isURLSameOrigin2() {
      return true;
    };
  }()
);
function parseProtocol(url2) {
  const match = /^([-+\w]{1,25})(:?\/\/|:)/.exec(url2);
  return match && match[1] || "";
}
function speedometer(samplesCount, min) {
  samplesCount = samplesCount || 10;
  const bytes = new Array(samplesCount);
  const timestamps = new Array(samplesCount);
  let head = 0;
  let tail = 0;
  let firstSampleTS;
  min = min !== void 0 ? min : 1e3;
  return function push(chunkLength) {
    const now = Date.now();
    const startedAt = timestamps[tail];
    if (!firstSampleTS) {
      firstSampleTS = now;
    }
    bytes[head] = chunkLength;
    timestamps[head] = now;
    let i = tail;
    let bytesCount = 0;
    while (i !== head) {
      bytesCount += bytes[i++];
      i = i % samplesCount;
    }
    head = (head + 1) % samplesCount;
    if (head === tail) {
      tail = (tail + 1) % samplesCount;
    }
    if (now - firstSampleTS < min) {
      return;
    }
    const passed = startedAt && now - startedAt;
    return passed ? Math.round(bytesCount * 1e3 / passed) : void 0;
  };
}
function progressEventReducer(listener, isDownloadStream) {
  let bytesNotified = 0;
  const _speedometer = speedometer(50, 250);
  return (e) => {
    const loaded = e.loaded;
    const total = e.lengthComputable ? e.total : void 0;
    const progressBytes = loaded - bytesNotified;
    const rate = _speedometer(progressBytes);
    const inRange = loaded <= total;
    bytesNotified = loaded;
    const data = {
      loaded,
      total,
      progress: total ? loaded / total : void 0,
      bytes: progressBytes,
      rate: rate ? rate : void 0,
      estimated: rate && total && inRange ? (total - loaded) / rate : void 0,
      event: e
    };
    data[isDownloadStream ? "download" : "upload"] = true;
    listener(data);
  };
}
const isXHRAdapterSupported = typeof XMLHttpRequest !== "undefined";
const xhrAdapter = isXHRAdapterSupported && function(config2) {
  return new Promise(function dispatchXhrRequest(resolve2, reject) {
    let requestData = config2.data;
    const requestHeaders = AxiosHeaders$1.from(config2.headers).normalize();
    const responseType = config2.responseType;
    let onCanceled;
    function done() {
      if (config2.cancelToken) {
        config2.cancelToken.unsubscribe(onCanceled);
      }
      if (config2.signal) {
        config2.signal.removeEventListener("abort", onCanceled);
      }
    }
    if (utils.isFormData(requestData) && (platform.isStandardBrowserEnv || platform.isStandardBrowserWebWorkerEnv)) {
      requestHeaders.setContentType(false);
    }
    let request2 = new XMLHttpRequest();
    if (config2.auth) {
      const username = config2.auth.username || "";
      const password = config2.auth.password ? unescape(encodeURIComponent(config2.auth.password)) : "";
      requestHeaders.set("Authorization", "Basic " + btoa(username + ":" + password));
    }
    const fullPath = buildFullPath(config2.baseURL, config2.url);
    request2.open(config2.method.toUpperCase(), buildURL(fullPath, config2.params, config2.paramsSerializer), true);
    request2.timeout = config2.timeout;
    function onloadend() {
      if (!request2) {
        return;
      }
      const responseHeaders = AxiosHeaders$1.from(
        "getAllResponseHeaders" in request2 && request2.getAllResponseHeaders()
      );
      const responseData = !responseType || responseType === "text" || responseType === "json" ? request2.responseText : request2.response;
      const response = {
        data: responseData,
        status: request2.status,
        statusText: request2.statusText,
        headers: responseHeaders,
        config: config2,
        request: request2
      };
      settle(function _resolve(value) {
        resolve2(value);
        done();
      }, function _reject(err) {
        reject(err);
        done();
      }, response);
      request2 = null;
    }
    if ("onloadend" in request2) {
      request2.onloadend = onloadend;
    } else {
      request2.onreadystatechange = function handleLoad() {
        if (!request2 || request2.readyState !== 4) {
          return;
        }
        if (request2.status === 0 && !(request2.responseURL && request2.responseURL.indexOf("file:") === 0)) {
          return;
        }
        setTimeout(onloadend);
      };
    }
    request2.onabort = function handleAbort() {
      if (!request2) {
        return;
      }
      reject(new AxiosError("Request aborted", AxiosError.ECONNABORTED, config2, request2));
      request2 = null;
    };
    request2.onerror = function handleError() {
      reject(new AxiosError("Network Error", AxiosError.ERR_NETWORK, config2, request2));
      request2 = null;
    };
    request2.ontimeout = function handleTimeout() {
      let timeoutErrorMessage = config2.timeout ? "timeout of " + config2.timeout + "ms exceeded" : "timeout exceeded";
      const transitional2 = config2.transitional || transitionalDefaults;
      if (config2.timeoutErrorMessage) {
        timeoutErrorMessage = config2.timeoutErrorMessage;
      }
      reject(new AxiosError(
        timeoutErrorMessage,
        transitional2.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,
        config2,
        request2
      ));
      request2 = null;
    };
    if (platform.isStandardBrowserEnv) {
      const xsrfValue = (config2.withCredentials || isURLSameOrigin(fullPath)) && config2.xsrfCookieName && cookies.read(config2.xsrfCookieName);
      if (xsrfValue) {
        requestHeaders.set(config2.xsrfHeaderName, xsrfValue);
      }
    }
    requestData === void 0 && requestHeaders.setContentType(null);
    if ("setRequestHeader" in request2) {
      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {
        request2.setRequestHeader(key, val);
      });
    }
    if (!utils.isUndefined(config2.withCredentials)) {
      request2.withCredentials = !!config2.withCredentials;
    }
    if (responseType && responseType !== "json") {
      request2.responseType = config2.responseType;
    }
    if (typeof config2.onDownloadProgress === "function") {
      request2.addEventListener("progress", progressEventReducer(config2.onDownloadProgress, true));
    }
    if (typeof config2.onUploadProgress === "function" && request2.upload) {
      request2.upload.addEventListener("progress", progressEventReducer(config2.onUploadProgress));
    }
    if (config2.cancelToken || config2.signal) {
      onCanceled = (cancel) => {
        if (!request2) {
          return;
        }
        reject(!cancel || cancel.type ? new CanceledError(null, config2, request2) : cancel);
        request2.abort();
        request2 = null;
      };
      config2.cancelToken && config2.cancelToken.subscribe(onCanceled);
      if (config2.signal) {
        config2.signal.aborted ? onCanceled() : config2.signal.addEventListener("abort", onCanceled);
      }
    }
    const protocol = parseProtocol(fullPath);
    if (protocol && platform.protocols.indexOf(protocol) === -1) {
      reject(new AxiosError("Unsupported protocol " + protocol + ":", AxiosError.ERR_BAD_REQUEST, config2));
      return;
    }
    request2.send(requestData || null);
  });
};
const knownAdapters = {
  http: httpAdapter,
  xhr: xhrAdapter
};
utils.forEach(knownAdapters, (fn, value) => {
  if (fn) {
    try {
      Object.defineProperty(fn, "name", { value });
    } catch (e) {
    }
    Object.defineProperty(fn, "adapterName", { value });
  }
});
const adapters = {
  getAdapter: (adapters2) => {
    adapters2 = utils.isArray(adapters2) ? adapters2 : [adapters2];
    const { length } = adapters2;
    let nameOrAdapter;
    let adapter;
    for (let i = 0; i < length; i++) {
      nameOrAdapter = adapters2[i];
      if (adapter = utils.isString(nameOrAdapter) ? knownAdapters[nameOrAdapter.toLowerCase()] : nameOrAdapter) {
        break;
      }
    }
    if (!adapter) {
      if (adapter === false) {
        throw new AxiosError(
          `Adapter ${nameOrAdapter} is not supported by the environment`,
          "ERR_NOT_SUPPORT"
        );
      }
      throw new Error(
        utils.hasOwnProp(knownAdapters, nameOrAdapter) ? `Adapter '${nameOrAdapter}' is not available in the build` : `Unknown adapter '${nameOrAdapter}'`
      );
    }
    if (!utils.isFunction(adapter)) {
      throw new TypeError("adapter is not a function");
    }
    return adapter;
  },
  adapters: knownAdapters
};
function throwIfCancellationRequested(config2) {
  if (config2.cancelToken) {
    config2.cancelToken.throwIfRequested();
  }
  if (config2.signal && config2.signal.aborted) {
    throw new CanceledError(null, config2);
  }
}
function dispatchRequest(config2) {
  throwIfCancellationRequested(config2);
  config2.headers = AxiosHeaders$1.from(config2.headers);
  config2.data = transformData.call(
    config2,
    config2.transformRequest
  );
  if (["post", "put", "patch"].indexOf(config2.method) !== -1) {
    config2.headers.setContentType("application/x-www-form-urlencoded", false);
  }
  const adapter = adapters.getAdapter(config2.adapter || defaults$1.adapter);
  return adapter(config2).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config2);
    response.data = transformData.call(
      config2,
      config2.transformResponse,
      response
    );
    response.headers = AxiosHeaders$1.from(response.headers);
    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config2);
      if (reason && reason.response) {
        reason.response.data = transformData.call(
          config2,
          config2.transformResponse,
          reason.response
        );
        reason.response.headers = AxiosHeaders$1.from(reason.response.headers);
      }
    }
    return Promise.reject(reason);
  });
}
const headersToObject = (thing) => thing instanceof AxiosHeaders$1 ? thing.toJSON() : thing;
function mergeConfig(config1, config2) {
  config2 = config2 || {};
  const config3 = {};
  function getMergedValue(target, source, caseless) {
    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {
      return utils.merge.call({ caseless }, target, source);
    } else if (utils.isPlainObject(source)) {
      return utils.merge({}, source);
    } else if (utils.isArray(source)) {
      return source.slice();
    }
    return source;
  }
  function mergeDeepProperties(a2, b2, caseless) {
    if (!utils.isUndefined(b2)) {
      return getMergedValue(a2, b2, caseless);
    } else if (!utils.isUndefined(a2)) {
      return getMergedValue(void 0, a2, caseless);
    }
  }
  function valueFromConfig2(a2, b2) {
    if (!utils.isUndefined(b2)) {
      return getMergedValue(void 0, b2);
    }
  }
  function defaultToConfig2(a2, b2) {
    if (!utils.isUndefined(b2)) {
      return getMergedValue(void 0, b2);
    } else if (!utils.isUndefined(a2)) {
      return getMergedValue(void 0, a2);
    }
  }
  function mergeDirectKeys(a2, b2, prop) {
    if (prop in config2) {
      return getMergedValue(a2, b2);
    } else if (prop in config1) {
      return getMergedValue(void 0, a2);
    }
  }
  const mergeMap = {
    url: valueFromConfig2,
    method: valueFromConfig2,
    data: valueFromConfig2,
    baseURL: defaultToConfig2,
    transformRequest: defaultToConfig2,
    transformResponse: defaultToConfig2,
    paramsSerializer: defaultToConfig2,
    timeout: defaultToConfig2,
    timeoutMessage: defaultToConfig2,
    withCredentials: defaultToConfig2,
    adapter: defaultToConfig2,
    responseType: defaultToConfig2,
    xsrfCookieName: defaultToConfig2,
    xsrfHeaderName: defaultToConfig2,
    onUploadProgress: defaultToConfig2,
    onDownloadProgress: defaultToConfig2,
    decompress: defaultToConfig2,
    maxContentLength: defaultToConfig2,
    maxBodyLength: defaultToConfig2,
    beforeRedirect: defaultToConfig2,
    transport: defaultToConfig2,
    httpAgent: defaultToConfig2,
    httpsAgent: defaultToConfig2,
    cancelToken: defaultToConfig2,
    socketPath: defaultToConfig2,
    responseEncoding: defaultToConfig2,
    validateStatus: mergeDirectKeys,
    headers: (a2, b2) => mergeDeepProperties(headersToObject(a2), headersToObject(b2), true)
  };
  utils.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {
    const merge2 = mergeMap[prop] || mergeDeepProperties;
    const configValue = merge2(config1[prop], config2[prop], prop);
    utils.isUndefined(configValue) && merge2 !== mergeDirectKeys || (config3[prop] = configValue);
  });
  return config3;
}
const VERSION = "1.3.4";
const validators$1 = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach((type, i) => {
  validators$1[type] = function validator2(thing) {
    return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
  };
});
const deprecatedWarnings = {};
validators$1.transitional = function transitional(validator2, version2, message) {
  function formatMessage(opt, desc) {
    return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
  }
  return (value, opt, opts2) => {
    if (validator2 === false) {
      throw new AxiosError(
        formatMessage(opt, " has been removed" + (version2 ? " in " + version2 : "")),
        AxiosError.ERR_DEPRECATED
      );
    }
    if (version2 && !deprecatedWarnings[opt]) {
      deprecatedWarnings[opt] = true;
      console.warn(
        formatMessage(
          opt,
          " has been deprecated since v" + version2 + " and will be removed in the near future"
        )
      );
    }
    return validator2 ? validator2(value, opt, opts2) : true;
  };
};
function assertOptions(options, schema, allowUnknown) {
  if (typeof options !== "object") {
    throw new AxiosError("options must be an object", AxiosError.ERR_BAD_OPTION_VALUE);
  }
  const keys = Object.keys(options);
  let i = keys.length;
  while (i-- > 0) {
    const opt = keys[i];
    const validator2 = schema[opt];
    if (validator2) {
      const value = options[opt];
      const result = value === void 0 || validator2(value, opt, options);
      if (result !== true) {
        throw new AxiosError("option " + opt + " must be " + result, AxiosError.ERR_BAD_OPTION_VALUE);
      }
      continue;
    }
    if (allowUnknown !== true) {
      throw new AxiosError("Unknown option " + opt, AxiosError.ERR_BAD_OPTION);
    }
  }
}
const validator = {
  assertOptions,
  validators: validators$1
};
const validators = validator.validators;
class Axios {
  constructor(instanceConfig) {
    this.defaults = instanceConfig;
    this.interceptors = {
      request: new InterceptorManager$1(),
      response: new InterceptorManager$1()
    };
  }
  /**
   * Dispatch a request
   *
   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)
   * @param {?Object} config
   *
   * @returns {Promise} The Promise to be fulfilled
   */
  request(configOrUrl, config2) {
    if (typeof configOrUrl === "string") {
      config2 = config2 || {};
      config2.url = configOrUrl;
    } else {
      config2 = configOrUrl || {};
    }
    config2 = mergeConfig(this.defaults, config2);
    const { transitional: transitional2, paramsSerializer, headers } = config2;
    if (transitional2 !== void 0) {
      validator.assertOptions(transitional2, {
        silentJSONParsing: validators.transitional(validators.boolean),
        forcedJSONParsing: validators.transitional(validators.boolean),
        clarifyTimeoutError: validators.transitional(validators.boolean)
      }, false);
    }
    if (paramsSerializer !== void 0) {
      validator.assertOptions(paramsSerializer, {
        encode: validators.function,
        serialize: validators.function
      }, true);
    }
    config2.method = (config2.method || this.defaults.method || "get").toLowerCase();
    let contextHeaders;
    contextHeaders = headers && utils.merge(
      headers.common,
      headers[config2.method]
    );
    contextHeaders && utils.forEach(
      ["delete", "get", "head", "post", "put", "patch", "common"],
      (method) => {
        delete headers[method];
      }
    );
    config2.headers = AxiosHeaders$1.concat(contextHeaders, headers);
    const requestInterceptorChain = [];
    let synchronousRequestInterceptors = true;
    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
      if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config2) === false) {
        return;
      }
      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
    });
    const responseInterceptorChain = [];
    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
    });
    let promise;
    let i = 0;
    let len;
    if (!synchronousRequestInterceptors) {
      const chain = [dispatchRequest.bind(this), void 0];
      chain.unshift.apply(chain, requestInterceptorChain);
      chain.push.apply(chain, responseInterceptorChain);
      len = chain.length;
      promise = Promise.resolve(config2);
      while (i < len) {
        promise = promise.then(chain[i++], chain[i++]);
      }
      return promise;
    }
    len = requestInterceptorChain.length;
    let newConfig = config2;
    i = 0;
    while (i < len) {
      const onFulfilled = requestInterceptorChain[i++];
      const onRejected = requestInterceptorChain[i++];
      try {
        newConfig = onFulfilled(newConfig);
      } catch (error2) {
        onRejected.call(this, error2);
        break;
      }
    }
    try {
      promise = dispatchRequest.call(this, newConfig);
    } catch (error2) {
      return Promise.reject(error2);
    }
    i = 0;
    len = responseInterceptorChain.length;
    while (i < len) {
      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);
    }
    return promise;
  }
  getUri(config2) {
    config2 = mergeConfig(this.defaults, config2);
    const fullPath = buildFullPath(config2.baseURL, config2.url);
    return buildURL(fullPath, config2.params, config2.paramsSerializer);
  }
}
utils.forEach(["delete", "get", "head", "options"], function forEachMethodNoData2(method) {
  Axios.prototype[method] = function(url2, config2) {
    return this.request(mergeConfig(config2 || {}, {
      method,
      url: url2,
      data: (config2 || {}).data
    }));
  };
});
utils.forEach(["post", "put", "patch"], function forEachMethodWithData2(method) {
  function generateHTTPMethod(isForm) {
    return function httpMethod(url2, data, config2) {
      return this.request(mergeConfig(config2 || {}, {
        method,
        headers: isForm ? {
          "Content-Type": "multipart/form-data"
        } : {},
        url: url2,
        data
      }));
    };
  }
  Axios.prototype[method] = generateHTTPMethod();
  Axios.prototype[method + "Form"] = generateHTTPMethod(true);
});
const Axios$1 = Axios;
class CancelToken {
  constructor(executor) {
    if (typeof executor !== "function") {
      throw new TypeError("executor must be a function.");
    }
    let resolvePromise;
    this.promise = new Promise(function promiseExecutor(resolve2) {
      resolvePromise = resolve2;
    });
    const token = this;
    this.promise.then((cancel) => {
      if (!token._listeners)
        return;
      let i = token._listeners.length;
      while (i-- > 0) {
        token._listeners[i](cancel);
      }
      token._listeners = null;
    });
    this.promise.then = (onfulfilled) => {
      let _resolve;
      const promise = new Promise((resolve2) => {
        token.subscribe(resolve2);
        _resolve = resolve2;
      }).then(onfulfilled);
      promise.cancel = function reject() {
        token.unsubscribe(_resolve);
      };
      return promise;
    };
    executor(function cancel(message, config2, request2) {
      if (token.reason) {
        return;
      }
      token.reason = new CanceledError(message, config2, request2);
      resolvePromise(token.reason);
    });
  }
  /**
   * Throws a `CanceledError` if cancellation has been requested.
   */
  throwIfRequested() {
    if (this.reason) {
      throw this.reason;
    }
  }
  /**
   * Subscribe to the cancel signal
   */
  subscribe(listener) {
    if (this.reason) {
      listener(this.reason);
      return;
    }
    if (this._listeners) {
      this._listeners.push(listener);
    } else {
      this._listeners = [listener];
    }
  }
  /**
   * Unsubscribe from the cancel signal
   */
  unsubscribe(listener) {
    if (!this._listeners) {
      return;
    }
    const index = this._listeners.indexOf(listener);
    if (index !== -1) {
      this._listeners.splice(index, 1);
    }
  }
  /**
   * Returns an object that contains a new `CancelToken` and a function that, when called,
   * cancels the `CancelToken`.
   */
  static source() {
    let cancel;
    const token = new CancelToken(function executor(c) {
      cancel = c;
    });
    return {
      token,
      cancel
    };
  }
}
const CancelToken$1 = CancelToken;
function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
}
function isAxiosError(payload) {
  return utils.isObject(payload) && payload.isAxiosError === true;
}
const HttpStatusCode = {
  Continue: 100,
  SwitchingProtocols: 101,
  Processing: 102,
  EarlyHints: 103,
  Ok: 200,
  Created: 201,
  Accepted: 202,
  NonAuthoritativeInformation: 203,
  NoContent: 204,
  ResetContent: 205,
  PartialContent: 206,
  MultiStatus: 207,
  AlreadyReported: 208,
  ImUsed: 226,
  MultipleChoices: 300,
  MovedPermanently: 301,
  Found: 302,
  SeeOther: 303,
  NotModified: 304,
  UseProxy: 305,
  Unused: 306,
  TemporaryRedirect: 307,
  PermanentRedirect: 308,
  BadRequest: 400,
  Unauthorized: 401,
  PaymentRequired: 402,
  Forbidden: 403,
  NotFound: 404,
  MethodNotAllowed: 405,
  NotAcceptable: 406,
  ProxyAuthenticationRequired: 407,
  RequestTimeout: 408,
  Conflict: 409,
  Gone: 410,
  LengthRequired: 411,
  PreconditionFailed: 412,
  PayloadTooLarge: 413,
  UriTooLong: 414,
  UnsupportedMediaType: 415,
  RangeNotSatisfiable: 416,
  ExpectationFailed: 417,
  ImATeapot: 418,
  MisdirectedRequest: 421,
  UnprocessableEntity: 422,
  Locked: 423,
  FailedDependency: 424,
  TooEarly: 425,
  UpgradeRequired: 426,
  PreconditionRequired: 428,
  TooManyRequests: 429,
  RequestHeaderFieldsTooLarge: 431,
  UnavailableForLegalReasons: 451,
  InternalServerError: 500,
  NotImplemented: 501,
  BadGateway: 502,
  ServiceUnavailable: 503,
  GatewayTimeout: 504,
  HttpVersionNotSupported: 505,
  VariantAlsoNegotiates: 506,
  InsufficientStorage: 507,
  LoopDetected: 508,
  NotExtended: 510,
  NetworkAuthenticationRequired: 511
};
Object.entries(HttpStatusCode).forEach(([key, value]) => {
  HttpStatusCode[value] = key;
});
const HttpStatusCode$1 = HttpStatusCode;
function createInstance(defaultConfig2) {
  const context = new Axios$1(defaultConfig2);
  const instance2 = bind(Axios$1.prototype.request, context);
  utils.extend(instance2, Axios$1.prototype, context, { allOwnKeys: true });
  utils.extend(instance2, context, null, { allOwnKeys: true });
  instance2.create = function create(instanceConfig) {
    return createInstance(mergeConfig(defaultConfig2, instanceConfig));
  };
  return instance2;
}
const axios = createInstance(defaults$1);
axios.Axios = Axios$1;
axios.CanceledError = CanceledError;
axios.CancelToken = CancelToken$1;
axios.isCancel = isCancel;
axios.VERSION = VERSION;
axios.toFormData = toFormData;
axios.AxiosError = AxiosError;
axios.Cancel = axios.CanceledError;
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = spread;
axios.isAxiosError = isAxiosError;
axios.mergeConfig = mergeConfig;
axios.AxiosHeaders = AxiosHeaders$1;
axios.formToJSON = (thing) => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);
axios.HttpStatusCode = HttpStatusCode$1;
axios.default = axios;
const axios$1 = axios;
const factory = M.customLogFactory(S.LOG_LEVEL_INFO, "PluginSystem");
const pluginSystemLogger = factory.getLogger("plugin system");
const log = (...p) => {
  pluginSystemLogger.info(...p);
};
const request = axios$1.create({
  withCredentials: false,
  headers: {
    "Cache-Control": "no-cache",
    Pragma: "no-cache",
    Expires: "0"
  }
});
const sleep = async (t2) => {
  return new Promise((resolve2) => {
    setTimeout(() => resolve2(null), t2);
  });
};
const error = (...p) => pluginSystemLogger.error(...p);
const genUUID = () => ([1e7].toString() + -1e3 + -4e3 + -8e3 + -1e11).replace(
  /[018]/g,
  (c) => (parseInt(c, 10) ^ window.crypto.getRandomValues(new Uint32Array(1))[0] & 15 >> parseInt(c, 10) / 4).toString(16)
);
async function isExists(p) {
  try {
    const res = await FileClient.getInstanceApi().fileApi.getFile(p);
    return res !== null;
  } catch {
    return false;
  }
}
let Error$1 = class Error2 {
  constructor(message) {
    this.message = message;
  }
};
class Warning {
  constructor(message) {
    this.message = message;
  }
}
const showErrorMessage = (message, timeout) => new Notification({ type: "error", message, timeout }).show();
const getLogger = (name2) => factory.getLogger(name2);
const langs = {
  zh_CN,
  en_US
};
const _ = (v) => {
  return langs[window.siyuan.config.lang][v] || "not defined";
};
var NAMED_TAG = "named";
var NAME_TAG = "name";
var UNMANAGED_TAG = "unmanaged";
var OPTIONAL_TAG = "optional";
var INJECT_TAG = "inject";
var MULTI_INJECT_TAG = "multi_inject";
var TAGGED = "inversify:tagged";
var TAGGED_PROP = "inversify:tagged_props";
var PARAM_TYPES = "inversify:paramtypes";
var DESIGN_PARAM_TYPES = "design:paramtypes";
var POST_CONSTRUCT = "post_construct";
var PRE_DESTROY = "pre_destroy";
function getNonCustomTagKeys() {
  return [
    INJECT_TAG,
    MULTI_INJECT_TAG,
    NAME_TAG,
    UNMANAGED_TAG,
    NAMED_TAG,
    OPTIONAL_TAG
  ];
}
var NON_CUSTOM_TAG_KEYS = getNonCustomTagKeys();
var BindingScopeEnum = {
  Request: "Request",
  Singleton: "Singleton",
  Transient: "Transient"
};
var BindingTypeEnum = {
  ConstantValue: "ConstantValue",
  Constructor: "Constructor",
  DynamicValue: "DynamicValue",
  Factory: "Factory",
  Function: "Function",
  Instance: "Instance",
  Invalid: "Invalid",
  Provider: "Provider"
};
var TargetTypeEnum = {
  ClassProperty: "ClassProperty",
  ConstructorArgument: "ConstructorArgument",
  Variable: "Variable"
};
var idCounter = 0;
function id() {
  return idCounter++;
}
var Binding = function() {
  function Binding2(serviceIdentifier, scope) {
    this.id = id();
    this.activated = false;
    this.serviceIdentifier = serviceIdentifier;
    this.scope = scope;
    this.type = BindingTypeEnum.Invalid;
    this.constraint = function(request2) {
      return true;
    };
    this.implementationType = null;
    this.cache = null;
    this.factory = null;
    this.provider = null;
    this.onActivation = null;
    this.onDeactivation = null;
    this.dynamicValue = null;
  }
  Binding2.prototype.clone = function() {
    var clone = new Binding2(this.serviceIdentifier, this.scope);
    clone.activated = clone.scope === BindingScopeEnum.Singleton ? this.activated : false;
    clone.implementationType = this.implementationType;
    clone.dynamicValue = this.dynamicValue;
    clone.scope = this.scope;
    clone.type = this.type;
    clone.factory = this.factory;
    clone.provider = this.provider;
    clone.constraint = this.constraint;
    clone.onActivation = this.onActivation;
    clone.onDeactivation = this.onDeactivation;
    clone.cache = this.cache;
    return clone;
  };
  return Binding2;
}();
var DUPLICATED_INJECTABLE_DECORATOR = "Cannot apply @injectable decorator multiple times.";
var DUPLICATED_METADATA = "Metadata key was used more than once in a parameter:";
var NULL_ARGUMENT = "NULL argument";
var KEY_NOT_FOUND = "Key Not Found";
var AMBIGUOUS_MATCH = "Ambiguous match found for serviceIdentifier:";
var CANNOT_UNBIND = "Could not unbind serviceIdentifier:";
var NOT_REGISTERED = "No matching bindings found for serviceIdentifier:";
var MISSING_INJECTABLE_ANNOTATION = "Missing required @injectable annotation in:";
var MISSING_INJECT_ANNOTATION = "Missing required @inject or @multiInject annotation in:";
var UNDEFINED_INJECT_ANNOTATION = function(name2) {
  return "@inject called with undefined this could mean that the class " + name2 + " has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation.";
};
var CIRCULAR_DEPENDENCY = "Circular dependency found:";
var INVALID_BINDING_TYPE = "Invalid binding type:";
var NO_MORE_SNAPSHOTS_AVAILABLE = "No snapshot available to restore.";
var INVALID_MIDDLEWARE_RETURN = "Invalid return type in middleware. Middleware must return!";
var INVALID_FUNCTION_BINDING = "Value provided to function binding must be a function!";
var LAZY_IN_SYNC = function(key) {
  return "You are attempting to construct '" + key + "' in a synchronous way\n but it has asynchronous dependencies.";
};
var INVALID_TO_SELF_VALUE = "The toSelf function can only be applied when a constructor is used as service identifier";
var INVALID_DECORATOR_OPERATION = "The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";
var ARGUMENTS_LENGTH_MISMATCH = function() {
  var values = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    values[_i] = arguments[_i];
  }
  return "The number of constructor arguments in the derived class " + (values[0] + " must be >= than the number of constructor arguments of its base class.");
};
var CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = "Invalid Container constructor argument. Container options must be an object.";
var CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = "Invalid Container option. Default scope must be a string ('singleton' or 'transient').";
var CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = "Invalid Container option. Auto bind injectable must be a boolean";
var CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = "Invalid Container option. Skip base check must be a boolean";
var ASYNC_UNBIND_REQUIRED = "Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)";
var POST_CONSTRUCT_ERROR = function(clazz, errorMessage) {
  return "@postConstruct error in class " + clazz + ": " + errorMessage;
};
var PRE_DESTROY_ERROR = function(clazz, errorMessage) {
  return "@preDestroy error in class " + clazz + ": " + errorMessage;
};
var ON_DEACTIVATION_ERROR = function(clazz, errorMessage) {
  return "onDeactivation() error in class " + clazz + ": " + errorMessage;
};
var CIRCULAR_DEPENDENCY_IN_FACTORY = function(factoryType, serviceIdentifier) {
  return "It looks like there is a circular dependency in one of the '" + factoryType + "' bindings. Please investigate bindings with" + ("service identifier '" + serviceIdentifier + "'.");
};
var STACK_OVERFLOW = "Maximum call stack size exceeded";
var MetadataReader = function() {
  function MetadataReader2() {
  }
  MetadataReader2.prototype.getConstructorMetadata = function(constructorFunc) {
    var compilerGeneratedMetadata = Reflect.getMetadata(PARAM_TYPES, constructorFunc);
    var userGeneratedMetadata = Reflect.getMetadata(TAGGED, constructorFunc);
    return {
      compilerGeneratedMetadata,
      userGeneratedMetadata: userGeneratedMetadata || {}
    };
  };
  MetadataReader2.prototype.getPropertiesMetadata = function(constructorFunc) {
    var userGeneratedMetadata = Reflect.getMetadata(TAGGED_PROP, constructorFunc) || [];
    return userGeneratedMetadata;
  };
  return MetadataReader2;
}();
var BindingCount = {
  MultipleBindingsAvailable: 2,
  NoBindingsAvailable: 0,
  OnlyOneBindingAvailable: 1
};
function isStackOverflowExeption(error2) {
  return error2 instanceof RangeError || error2.message === STACK_OVERFLOW;
}
var tryAndThrowErrorIfStackOverflow = function(fn, errorCallback) {
  try {
    return fn();
  } catch (error2) {
    if (isStackOverflowExeption(error2)) {
      error2 = errorCallback();
    }
    throw error2;
  }
};
function getServiceIdentifierAsString(serviceIdentifier) {
  if (typeof serviceIdentifier === "function") {
    var _serviceIdentifier = serviceIdentifier;
    return _serviceIdentifier.name;
  } else if (typeof serviceIdentifier === "symbol") {
    return serviceIdentifier.toString();
  } else {
    var _serviceIdentifier = serviceIdentifier;
    return _serviceIdentifier;
  }
}
function listRegisteredBindingsForServiceIdentifier(container2, serviceIdentifier, getBindings2) {
  var registeredBindingsList = "";
  var registeredBindings = getBindings2(container2, serviceIdentifier);
  if (registeredBindings.length !== 0) {
    registeredBindingsList = "\nRegistered bindings:";
    registeredBindings.forEach(function(binding) {
      var name2 = "Object";
      if (binding.implementationType !== null) {
        name2 = getFunctionName(binding.implementationType);
      }
      registeredBindingsList = registeredBindingsList + "\n " + name2;
      if (binding.constraint.metaData) {
        registeredBindingsList = registeredBindingsList + " - " + binding.constraint.metaData;
      }
    });
  }
  return registeredBindingsList;
}
function alreadyDependencyChain(request2, serviceIdentifier) {
  if (request2.parentRequest === null) {
    return false;
  } else if (request2.parentRequest.serviceIdentifier === serviceIdentifier) {
    return true;
  } else {
    return alreadyDependencyChain(request2.parentRequest, serviceIdentifier);
  }
}
function dependencyChainToString(request2) {
  function _createStringArr(req, result) {
    if (result === void 0) {
      result = [];
    }
    var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);
    result.push(serviceIdentifier);
    if (req.parentRequest !== null) {
      return _createStringArr(req.parentRequest, result);
    }
    return result;
  }
  var stringArr = _createStringArr(request2);
  return stringArr.reverse().join(" --> ");
}
function circularDependencyToException(request2) {
  request2.childRequests.forEach(function(childRequest) {
    if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {
      var services = dependencyChainToString(childRequest);
      throw new Error(CIRCULAR_DEPENDENCY + " " + services);
    } else {
      circularDependencyToException(childRequest);
    }
  });
}
function listMetadataForTarget(serviceIdentifierString, target) {
  if (target.isTagged() || target.isNamed()) {
    var m_1 = "";
    var namedTag = target.getNamedTag();
    var otherTags = target.getCustomTags();
    if (namedTag !== null) {
      m_1 += namedTag.toString() + "\n";
    }
    if (otherTags !== null) {
      otherTags.forEach(function(tag) {
        m_1 += tag.toString() + "\n";
      });
    }
    return " " + serviceIdentifierString + "\n " + serviceIdentifierString + " - " + m_1;
  } else {
    return " " + serviceIdentifierString;
  }
}
function getFunctionName(func) {
  if (func.name) {
    return func.name;
  } else {
    var name_1 = func.toString();
    var match = name_1.match(/^function\s*([^\s(]+)/);
    return match ? match[1] : "Anonymous function: " + name_1;
  }
}
function getSymbolDescription(symbol) {
  return symbol.toString().slice(7, -1);
}
var Context = function() {
  function Context2(container2) {
    this.id = id();
    this.container = container2;
  }
  Context2.prototype.addPlan = function(plan2) {
    this.plan = plan2;
  };
  Context2.prototype.setCurrentRequest = function(currentRequest) {
    this.currentRequest = currentRequest;
  };
  return Context2;
}();
var Metadata = function() {
  function Metadata2(key, value) {
    this.key = key;
    this.value = value;
  }
  Metadata2.prototype.toString = function() {
    if (this.key === NAMED_TAG) {
      return "named: " + String(this.value).toString() + " ";
    } else {
      return "tagged: { key:" + this.key.toString() + ", value: " + String(this.value) + " }";
    }
  };
  return Metadata2;
}();
var Plan = function() {
  function Plan2(parentContext, rootRequest) {
    this.parentContext = parentContext;
    this.rootRequest = rootRequest;
  }
  return Plan2;
}();
var LazyServiceIdentifer = function() {
  function LazyServiceIdentifer2(cb) {
    this._cb = cb;
  }
  LazyServiceIdentifer2.prototype.unwrap = function() {
    return this._cb();
  };
  return LazyServiceIdentifer2;
}();
var QueryableString = function() {
  function QueryableString2(str) {
    this.str = str;
  }
  QueryableString2.prototype.startsWith = function(searchString) {
    return this.str.indexOf(searchString) === 0;
  };
  QueryableString2.prototype.endsWith = function(searchString) {
    var reverseString = "";
    var reverseSearchString = searchString.split("").reverse().join("");
    reverseString = this.str.split("").reverse().join("");
    return this.startsWith.call({ str: reverseString }, reverseSearchString);
  };
  QueryableString2.prototype.contains = function(searchString) {
    return this.str.indexOf(searchString) !== -1;
  };
  QueryableString2.prototype.equals = function(compareString) {
    return this.str === compareString;
  };
  QueryableString2.prototype.value = function() {
    return this.str;
  };
  return QueryableString2;
}();
var Target = function() {
  function Target2(type, identifier, serviceIdentifier, namedOrTagged) {
    this.id = id();
    this.type = type;
    this.serviceIdentifier = serviceIdentifier;
    var queryableName = typeof identifier === "symbol" ? getSymbolDescription(identifier) : identifier;
    this.name = new QueryableString(queryableName || "");
    this.identifier = identifier;
    this.metadata = new Array();
    var metadataItem = null;
    if (typeof namedOrTagged === "string") {
      metadataItem = new Metadata(NAMED_TAG, namedOrTagged);
    } else if (namedOrTagged instanceof Metadata) {
      metadataItem = namedOrTagged;
    }
    if (metadataItem !== null) {
      this.metadata.push(metadataItem);
    }
  }
  Target2.prototype.hasTag = function(key) {
    for (var _i = 0, _a2 = this.metadata; _i < _a2.length; _i++) {
      var m = _a2[_i];
      if (m.key === key) {
        return true;
      }
    }
    return false;
  };
  Target2.prototype.isArray = function() {
    return this.hasTag(MULTI_INJECT_TAG);
  };
  Target2.prototype.matchesArray = function(name2) {
    return this.matchesTag(MULTI_INJECT_TAG)(name2);
  };
  Target2.prototype.isNamed = function() {
    return this.hasTag(NAMED_TAG);
  };
  Target2.prototype.isTagged = function() {
    return this.metadata.some(function(metadata) {
      return NON_CUSTOM_TAG_KEYS.every(function(key) {
        return metadata.key !== key;
      });
    });
  };
  Target2.prototype.isOptional = function() {
    return this.matchesTag(OPTIONAL_TAG)(true);
  };
  Target2.prototype.getNamedTag = function() {
    if (this.isNamed()) {
      return this.metadata.filter(function(m) {
        return m.key === NAMED_TAG;
      })[0];
    }
    return null;
  };
  Target2.prototype.getCustomTags = function() {
    if (this.isTagged()) {
      return this.metadata.filter(function(metadata) {
        return NON_CUSTOM_TAG_KEYS.every(function(key) {
          return metadata.key !== key;
        });
      });
    } else {
      return null;
    }
  };
  Target2.prototype.matchesNamedTag = function(name2) {
    return this.matchesTag(NAMED_TAG)(name2);
  };
  Target2.prototype.matchesTag = function(key) {
    var _this = this;
    return function(value) {
      for (var _i = 0, _a2 = _this.metadata; _i < _a2.length; _i++) {
        var m = _a2[_i];
        if (m.key === key && m.value === value) {
          return true;
        }
      }
      return false;
    };
  };
  return Target2;
}();
var __spreadArray$2 = globalThis && globalThis.__spreadArray || function(to, from, pack) {
  if (pack || arguments.length === 2)
    for (var i = 0, l = from.length, ar; i < l; i++) {
      if (ar || !(i in from)) {
        if (!ar)
          ar = Array.prototype.slice.call(from, 0, i);
        ar[i] = from[i];
      }
    }
  return to.concat(ar || Array.prototype.slice.call(from));
};
function getDependencies(metadataReader, func) {
  var constructorName = getFunctionName(func);
  return getTargets(metadataReader, constructorName, func, false);
}
function getTargets(metadataReader, constructorName, func, isBaseClass) {
  var metadata = metadataReader.getConstructorMetadata(func);
  var serviceIdentifiers = metadata.compilerGeneratedMetadata;
  if (serviceIdentifiers === void 0) {
    var msg = MISSING_INJECTABLE_ANNOTATION + " " + constructorName + ".";
    throw new Error(msg);
  }
  var constructorArgsMetadata = metadata.userGeneratedMetadata;
  var keys = Object.keys(constructorArgsMetadata);
  var hasUserDeclaredUnknownInjections = func.length === 0 && keys.length > 0;
  var hasOptionalParameters = keys.length > func.length;
  var iterations = hasUserDeclaredUnknownInjections || hasOptionalParameters ? keys.length : func.length;
  var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);
  var propertyTargets = getClassPropsAsTargets(metadataReader, func, constructorName);
  var targets = __spreadArray$2(__spreadArray$2([], constructorTargets, true), propertyTargets, true);
  return targets;
}
function getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {
  var targetMetadata = constructorArgsMetadata[index.toString()] || [];
  var metadata = formatTargetMetadata(targetMetadata);
  var isManaged = metadata.unmanaged !== true;
  var serviceIdentifier = serviceIdentifiers[index];
  var injectIdentifier = metadata.inject || metadata.multiInject;
  serviceIdentifier = injectIdentifier ? injectIdentifier : serviceIdentifier;
  if (serviceIdentifier instanceof LazyServiceIdentifer) {
    serviceIdentifier = serviceIdentifier.unwrap();
  }
  if (isManaged) {
    var isObject2 = serviceIdentifier === Object;
    var isFunction2 = serviceIdentifier === Function;
    var isUndefined2 = serviceIdentifier === void 0;
    var isUnknownType = isObject2 || isFunction2 || isUndefined2;
    if (!isBaseClass && isUnknownType) {
      var msg = MISSING_INJECT_ANNOTATION + " argument " + index + " in class " + constructorName + ".";
      throw new Error(msg);
    }
    var target = new Target(TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);
    target.metadata = targetMetadata;
    return target;
  }
  return null;
}
function getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {
  var targets = [];
  for (var i = 0; i < iterations; i++) {
    var index = i;
    var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);
    if (target !== null) {
      targets.push(target);
    }
  }
  return targets;
}
function _getServiceIdentifierForProperty(inject2, multiInject, propertyName, className) {
  var serviceIdentifier = inject2 || multiInject;
  if (serviceIdentifier === void 0) {
    var msg = MISSING_INJECTABLE_ANNOTATION + " for property " + String(propertyName) + " in class " + className + ".";
    throw new Error(msg);
  }
  return serviceIdentifier;
}
function getClassPropsAsTargets(metadataReader, constructorFunc, constructorName) {
  var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);
  var targets = [];
  var symbolKeys = Object.getOwnPropertySymbols(classPropsMetadata);
  var stringKeys = Object.keys(classPropsMetadata);
  var keys = stringKeys.concat(symbolKeys);
  for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
    var key = keys_1[_i];
    var targetMetadata = classPropsMetadata[key];
    var metadata = formatTargetMetadata(targetMetadata);
    var identifier = metadata.targetName || key;
    var serviceIdentifier = _getServiceIdentifierForProperty(metadata.inject, metadata.multiInject, key, constructorName);
    var target = new Target(TargetTypeEnum.ClassProperty, identifier, serviceIdentifier);
    target.metadata = targetMetadata;
    targets.push(target);
  }
  var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;
  if (baseConstructor !== Object) {
    var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor, constructorName);
    targets = __spreadArray$2(__spreadArray$2([], targets, true), baseTargets, true);
  }
  return targets;
}
function getBaseClassDependencyCount(metadataReader, func) {
  var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;
  if (baseConstructor !== Object) {
    var baseConstructorName = getFunctionName(baseConstructor);
    var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);
    var metadata = targets.map(function(t2) {
      return t2.metadata.filter(function(m) {
        return m.key === UNMANAGED_TAG;
      });
    });
    var unmanagedCount = [].concat.apply([], metadata).length;
    var dependencyCount = targets.length - unmanagedCount;
    if (dependencyCount > 0) {
      return dependencyCount;
    } else {
      return getBaseClassDependencyCount(metadataReader, baseConstructor);
    }
  } else {
    return 0;
  }
}
function formatTargetMetadata(targetMetadata) {
  var targetMetadataMap = {};
  targetMetadata.forEach(function(m) {
    targetMetadataMap[m.key.toString()] = m.value;
  });
  return {
    inject: targetMetadataMap[INJECT_TAG],
    multiInject: targetMetadataMap[MULTI_INJECT_TAG],
    targetName: targetMetadataMap[NAME_TAG],
    unmanaged: targetMetadataMap[UNMANAGED_TAG]
  };
}
var Request = function() {
  function Request2(serviceIdentifier, parentContext, parentRequest, bindings, target) {
    this.id = id();
    this.serviceIdentifier = serviceIdentifier;
    this.parentContext = parentContext;
    this.parentRequest = parentRequest;
    this.target = target;
    this.childRequests = [];
    this.bindings = Array.isArray(bindings) ? bindings : [bindings];
    this.requestScope = parentRequest === null ? /* @__PURE__ */ new Map() : null;
  }
  Request2.prototype.addChildRequest = function(serviceIdentifier, bindings, target) {
    var child = new Request2(serviceIdentifier, this.parentContext, this, bindings, target);
    this.childRequests.push(child);
    return child;
  };
  return Request2;
}();
function getBindingDictionary(cntnr) {
  return cntnr._bindingDictionary;
}
function _createTarget(isMultiInject, targetType, serviceIdentifier, name2, key, value) {
  var metadataKey = isMultiInject ? MULTI_INJECT_TAG : INJECT_TAG;
  var injectMetadata = new Metadata(metadataKey, serviceIdentifier);
  var target = new Target(targetType, name2, serviceIdentifier, injectMetadata);
  if (key !== void 0) {
    var tagMetadata = new Metadata(key, value);
    target.metadata.push(tagMetadata);
  }
  return target;
}
function _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target) {
  var bindings = getBindings(context.container, target.serviceIdentifier);
  var activeBindings = [];
  if (bindings.length === BindingCount.NoBindingsAvailable && context.container.options.autoBindInjectable && typeof target.serviceIdentifier === "function" && metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata) {
    context.container.bind(target.serviceIdentifier).toSelf();
    bindings = getBindings(context.container, target.serviceIdentifier);
  }
  if (!avoidConstraints) {
    activeBindings = bindings.filter(function(binding) {
      var request2 = new Request(binding.serviceIdentifier, context, parentRequest, binding, target);
      return binding.constraint(request2);
    });
  } else {
    activeBindings = bindings;
  }
  _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);
  return activeBindings;
}
function _validateActiveBindingCount(serviceIdentifier, bindings, target, container2) {
  switch (bindings.length) {
    case BindingCount.NoBindingsAvailable:
      if (target.isOptional()) {
        return bindings;
      } else {
        var serviceIdentifierString = getServiceIdentifierAsString(serviceIdentifier);
        var msg = NOT_REGISTERED;
        msg += listMetadataForTarget(serviceIdentifierString, target);
        msg += listRegisteredBindingsForServiceIdentifier(container2, serviceIdentifierString, getBindings);
        throw new Error(msg);
      }
    case BindingCount.OnlyOneBindingAvailable:
      return bindings;
    case BindingCount.MultipleBindingsAvailable:
    default:
      if (!target.isArray()) {
        var serviceIdentifierString = getServiceIdentifierAsString(serviceIdentifier);
        var msg = AMBIGUOUS_MATCH + " " + serviceIdentifierString;
        msg += listRegisteredBindingsForServiceIdentifier(container2, serviceIdentifierString, getBindings);
        throw new Error(msg);
      } else {
        return bindings;
      }
  }
}
function _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {
  var activeBindings;
  var childRequest;
  if (parentRequest === null) {
    activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, null, target);
    childRequest = new Request(serviceIdentifier, context, null, activeBindings, target);
    var thePlan = new Plan(context, childRequest);
    context.addPlan(thePlan);
  } else {
    activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target);
    childRequest = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);
  }
  activeBindings.forEach(function(binding) {
    var subChildRequest = null;
    if (target.isArray()) {
      subChildRequest = childRequest.addChildRequest(binding.serviceIdentifier, binding, target);
    } else {
      if (binding.cache) {
        return;
      }
      subChildRequest = childRequest;
    }
    if (binding.type === BindingTypeEnum.Instance && binding.implementationType !== null) {
      var dependencies = getDependencies(metadataReader, binding.implementationType);
      if (!context.container.options.skipBaseClassChecks) {
        var baseClassDependencyCount = getBaseClassDependencyCount(metadataReader, binding.implementationType);
        if (dependencies.length < baseClassDependencyCount) {
          var error2 = ARGUMENTS_LENGTH_MISMATCH(getFunctionName(binding.implementationType));
          throw new Error(error2);
        }
      }
      dependencies.forEach(function(dependency) {
        _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);
      });
    }
  });
}
function getBindings(container2, serviceIdentifier) {
  var bindings = [];
  var bindingDictionary = getBindingDictionary(container2);
  if (bindingDictionary.hasKey(serviceIdentifier)) {
    bindings = bindingDictionary.get(serviceIdentifier);
  } else if (container2.parent !== null) {
    bindings = getBindings(container2.parent, serviceIdentifier);
  }
  return bindings;
}
function plan(metadataReader, container2, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {
  if (avoidConstraints === void 0) {
    avoidConstraints = false;
  }
  var context = new Context(container2);
  var target = _createTarget(isMultiInject, targetType, serviceIdentifier, "", key, value);
  try {
    _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);
    return context;
  } catch (error2) {
    if (isStackOverflowExeption(error2)) {
      circularDependencyToException(context.plan.rootRequest);
    }
    throw error2;
  }
}
function createMockRequest(container2, serviceIdentifier, key, value) {
  var target = new Target(TargetTypeEnum.Variable, "", serviceIdentifier, new Metadata(key, value));
  var context = new Context(container2);
  var request2 = new Request(serviceIdentifier, context, null, [], target);
  return request2;
}
function isPromise(object) {
  var isObjectOrFunction = typeof object === "object" && object !== null || typeof object === "function";
  return isObjectOrFunction && typeof object.then === "function";
}
function isPromiseOrContainsPromise(object) {
  if (isPromise(object)) {
    return true;
  }
  return Array.isArray(object) && object.some(isPromise);
}
var __awaiter$3 = globalThis && globalThis.__awaiter || function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve2) {
      resolve2(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve2, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve2(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator$3 = globalThis && globalThis.__generator || function(thisArg, body) {
  var _2 = { label: 0, sent: function() {
    if (t2[0] & 1)
      throw t2[1];
    return t2[1];
  }, trys: [], ops: [] }, f, y, t2, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (_2)
      try {
        if (f = 1, y && (t2 = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t2 = y["return"]) && t2.call(y), 0) : y.next) && !(t2 = t2.call(y, op[1])).done)
          return t2;
        if (y = 0, t2)
          op = [op[0] & 2, t2.value];
        switch (op[0]) {
          case 0:
          case 1:
            t2 = op;
            break;
          case 4:
            _2.label++;
            return { value: op[1], done: false };
          case 5:
            _2.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _2.ops.pop();
            _2.trys.pop();
            continue;
          default:
            if (!(t2 = _2.trys, t2 = t2.length > 0 && t2[t2.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _2 = 0;
              continue;
            }
            if (op[0] === 3 && (!t2 || op[1] > t2[0] && op[1] < t2[3])) {
              _2.label = op[1];
              break;
            }
            if (op[0] === 6 && _2.label < t2[1]) {
              _2.label = t2[1];
              t2 = op;
              break;
            }
            if (t2 && _2.label < t2[2]) {
              _2.label = t2[2];
              _2.ops.push(op);
              break;
            }
            if (t2[2])
              _2.ops.pop();
            _2.trys.pop();
            continue;
        }
        op = body.call(thisArg, _2);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t2 = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var tryGetFromScope = function(requestScope, binding) {
  if (binding.scope === BindingScopeEnum.Singleton && binding.activated) {
    return binding.cache;
  }
  if (binding.scope === BindingScopeEnum.Request && requestScope.has(binding.id)) {
    return requestScope.get(binding.id);
  }
  return null;
};
var saveToScope = function(requestScope, binding, result) {
  if (binding.scope === BindingScopeEnum.Singleton) {
    _saveToSingletonScope(binding, result);
  }
  if (binding.scope === BindingScopeEnum.Request) {
    _saveToRequestScope(requestScope, binding, result);
  }
};
var _saveToRequestScope = function(requestScope, binding, result) {
  if (!requestScope.has(binding.id)) {
    requestScope.set(binding.id, result);
  }
};
var _saveToSingletonScope = function(binding, result) {
  binding.cache = result;
  binding.activated = true;
  if (isPromise(result)) {
    void _saveAsyncResultToSingletonScope(binding, result);
  }
};
var _saveAsyncResultToSingletonScope = function(binding, asyncResult) {
  return __awaiter$3(void 0, void 0, void 0, function() {
    var result, ex_1;
    return __generator$3(this, function(_a2) {
      switch (_a2.label) {
        case 0:
          _a2.trys.push([0, 2, , 3]);
          return [4, asyncResult];
        case 1:
          result = _a2.sent();
          binding.cache = result;
          return [3, 3];
        case 2:
          ex_1 = _a2.sent();
          binding.cache = null;
          binding.activated = false;
          throw ex_1;
        case 3:
          return [2];
      }
    });
  });
};
var FactoryType;
(function(FactoryType2) {
  FactoryType2["DynamicValue"] = "toDynamicValue";
  FactoryType2["Factory"] = "toFactory";
  FactoryType2["Provider"] = "toProvider";
})(FactoryType || (FactoryType = {}));
var ensureFullyBound = function(binding) {
  var boundValue = null;
  switch (binding.type) {
    case BindingTypeEnum.ConstantValue:
    case BindingTypeEnum.Function:
      boundValue = binding.cache;
      break;
    case BindingTypeEnum.Constructor:
    case BindingTypeEnum.Instance:
      boundValue = binding.implementationType;
      break;
    case BindingTypeEnum.DynamicValue:
      boundValue = binding.dynamicValue;
      break;
    case BindingTypeEnum.Provider:
      boundValue = binding.provider;
      break;
    case BindingTypeEnum.Factory:
      boundValue = binding.factory;
      break;
  }
  if (boundValue === null) {
    var serviceIdentifierAsString = getServiceIdentifierAsString(binding.serviceIdentifier);
    throw new Error(INVALID_BINDING_TYPE + " " + serviceIdentifierAsString);
  }
};
var getFactoryDetails = function(binding) {
  switch (binding.type) {
    case BindingTypeEnum.Factory:
      return { factory: binding.factory, factoryType: FactoryType.Factory };
    case BindingTypeEnum.Provider:
      return { factory: binding.provider, factoryType: FactoryType.Provider };
    case BindingTypeEnum.DynamicValue:
      return { factory: binding.dynamicValue, factoryType: FactoryType.DynamicValue };
    default:
      throw new Error("Unexpected factory type " + binding.type);
  }
};
var __assign$1 = globalThis && globalThis.__assign || function() {
  __assign$1 = Object.assign || function(t2) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p in s)
        if (Object.prototype.hasOwnProperty.call(s, p))
          t2[p] = s[p];
    }
    return t2;
  };
  return __assign$1.apply(this, arguments);
};
var __awaiter$2 = globalThis && globalThis.__awaiter || function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve2) {
      resolve2(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve2, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve2(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator$2 = globalThis && globalThis.__generator || function(thisArg, body) {
  var _2 = { label: 0, sent: function() {
    if (t2[0] & 1)
      throw t2[1];
    return t2[1];
  }, trys: [], ops: [] }, f, y, t2, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (_2)
      try {
        if (f = 1, y && (t2 = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t2 = y["return"]) && t2.call(y), 0) : y.next) && !(t2 = t2.call(y, op[1])).done)
          return t2;
        if (y = 0, t2)
          op = [op[0] & 2, t2.value];
        switch (op[0]) {
          case 0:
          case 1:
            t2 = op;
            break;
          case 4:
            _2.label++;
            return { value: op[1], done: false };
          case 5:
            _2.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _2.ops.pop();
            _2.trys.pop();
            continue;
          default:
            if (!(t2 = _2.trys, t2 = t2.length > 0 && t2[t2.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _2 = 0;
              continue;
            }
            if (op[0] === 3 && (!t2 || op[1] > t2[0] && op[1] < t2[3])) {
              _2.label = op[1];
              break;
            }
            if (op[0] === 6 && _2.label < t2[1]) {
              _2.label = t2[1];
              t2 = op;
              break;
            }
            if (t2 && _2.label < t2[2]) {
              _2.label = t2[2];
              _2.ops.push(op);
              break;
            }
            if (t2[2])
              _2.ops.pop();
            _2.trys.pop();
            continue;
        }
        op = body.call(thisArg, _2);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t2 = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var __spreadArray$1 = globalThis && globalThis.__spreadArray || function(to, from, pack) {
  if (pack || arguments.length === 2)
    for (var i = 0, l = from.length, ar; i < l; i++) {
      if (ar || !(i in from)) {
        if (!ar)
          ar = Array.prototype.slice.call(from, 0, i);
        ar[i] = from[i];
      }
    }
  return to.concat(ar || Array.prototype.slice.call(from));
};
function _resolveRequests(childRequests, resolveRequest) {
  return childRequests.reduce(function(resolvedRequests, childRequest) {
    var injection = resolveRequest(childRequest);
    var targetType = childRequest.target.type;
    if (targetType === TargetTypeEnum.ConstructorArgument) {
      resolvedRequests.constructorInjections.push(injection);
    } else {
      resolvedRequests.propertyRequests.push(childRequest);
      resolvedRequests.propertyInjections.push(injection);
    }
    if (!resolvedRequests.isAsync) {
      resolvedRequests.isAsync = isPromiseOrContainsPromise(injection);
    }
    return resolvedRequests;
  }, { constructorInjections: [], propertyInjections: [], propertyRequests: [], isAsync: false });
}
function _createInstance(constr, childRequests, resolveRequest) {
  var result;
  if (childRequests.length > 0) {
    var resolved = _resolveRequests(childRequests, resolveRequest);
    var createInstanceWithInjectionsArg = __assign$1(__assign$1({}, resolved), { constr });
    if (resolved.isAsync) {
      result = createInstanceWithInjectionsAsync(createInstanceWithInjectionsArg);
    } else {
      result = createInstanceWithInjections(createInstanceWithInjectionsArg);
    }
  } else {
    result = new constr();
  }
  return result;
}
function createInstanceWithInjections(args) {
  var _a2;
  var instance2 = new ((_a2 = args.constr).bind.apply(_a2, __spreadArray$1([void 0], args.constructorInjections, false)))();
  args.propertyRequests.forEach(function(r, index) {
    var property = r.target.identifier;
    var injection = args.propertyInjections[index];
    instance2[property] = injection;
  });
  return instance2;
}
function createInstanceWithInjectionsAsync(args) {
  return __awaiter$2(this, void 0, void 0, function() {
    var constructorInjections, propertyInjections;
    return __generator$2(this, function(_a2) {
      switch (_a2.label) {
        case 0:
          return [4, possiblyWaitInjections(args.constructorInjections)];
        case 1:
          constructorInjections = _a2.sent();
          return [4, possiblyWaitInjections(args.propertyInjections)];
        case 2:
          propertyInjections = _a2.sent();
          return [2, createInstanceWithInjections(__assign$1(__assign$1({}, args), { constructorInjections, propertyInjections }))];
      }
    });
  });
}
function possiblyWaitInjections(possiblePromiseinjections) {
  return __awaiter$2(this, void 0, void 0, function() {
    var injections, _i, possiblePromiseinjections_1, injection;
    return __generator$2(this, function(_a2) {
      injections = [];
      for (_i = 0, possiblePromiseinjections_1 = possiblePromiseinjections; _i < possiblePromiseinjections_1.length; _i++) {
        injection = possiblePromiseinjections_1[_i];
        if (Array.isArray(injection)) {
          injections.push(Promise.all(injection));
        } else {
          injections.push(injection);
        }
      }
      return [2, Promise.all(injections)];
    });
  });
}
function _getInstanceAfterPostConstruct(constr, result) {
  var postConstructResult = _postConstruct(constr, result);
  if (isPromise(postConstructResult)) {
    return postConstructResult.then(function() {
      return result;
    });
  } else {
    return result;
  }
}
function _postConstruct(constr, instance2) {
  var _a2, _b;
  if (Reflect.hasMetadata(POST_CONSTRUCT, constr)) {
    var data = Reflect.getMetadata(POST_CONSTRUCT, constr);
    try {
      return (_b = (_a2 = instance2)[data.value]) === null || _b === void 0 ? void 0 : _b.call(_a2);
    } catch (e) {
      throw new Error(POST_CONSTRUCT_ERROR(constr.name, e.message));
    }
  }
}
function _validateInstanceResolution(binding, constr) {
  if (binding.scope !== BindingScopeEnum.Singleton) {
    _throwIfHandlingDeactivation(binding, constr);
  }
}
function _throwIfHandlingDeactivation(binding, constr) {
  var scopeErrorMessage = "Class cannot be instantiated in " + (binding.scope === BindingScopeEnum.Request ? "request" : "transient") + " scope.";
  if (typeof binding.onDeactivation === "function") {
    throw new Error(ON_DEACTIVATION_ERROR(constr.name, scopeErrorMessage));
  }
  if (Reflect.hasMetadata(PRE_DESTROY, constr)) {
    throw new Error(PRE_DESTROY_ERROR(constr.name, scopeErrorMessage));
  }
}
function resolveInstance(binding, constr, childRequests, resolveRequest) {
  _validateInstanceResolution(binding, constr);
  var result = _createInstance(constr, childRequests, resolveRequest);
  if (isPromise(result)) {
    return result.then(function(resolvedResult) {
      return _getInstanceAfterPostConstruct(constr, resolvedResult);
    });
  } else {
    return _getInstanceAfterPostConstruct(constr, result);
  }
}
var __awaiter$1 = globalThis && globalThis.__awaiter || function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve2) {
      resolve2(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve2, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve2(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator$1 = globalThis && globalThis.__generator || function(thisArg, body) {
  var _2 = { label: 0, sent: function() {
    if (t2[0] & 1)
      throw t2[1];
    return t2[1];
  }, trys: [], ops: [] }, f, y, t2, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (_2)
      try {
        if (f = 1, y && (t2 = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t2 = y["return"]) && t2.call(y), 0) : y.next) && !(t2 = t2.call(y, op[1])).done)
          return t2;
        if (y = 0, t2)
          op = [op[0] & 2, t2.value];
        switch (op[0]) {
          case 0:
          case 1:
            t2 = op;
            break;
          case 4:
            _2.label++;
            return { value: op[1], done: false };
          case 5:
            _2.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _2.ops.pop();
            _2.trys.pop();
            continue;
          default:
            if (!(t2 = _2.trys, t2 = t2.length > 0 && t2[t2.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _2 = 0;
              continue;
            }
            if (op[0] === 3 && (!t2 || op[1] > t2[0] && op[1] < t2[3])) {
              _2.label = op[1];
              break;
            }
            if (op[0] === 6 && _2.label < t2[1]) {
              _2.label = t2[1];
              t2 = op;
              break;
            }
            if (t2 && _2.label < t2[2]) {
              _2.label = t2[2];
              _2.ops.push(op);
              break;
            }
            if (t2[2])
              _2.ops.pop();
            _2.trys.pop();
            continue;
        }
        op = body.call(thisArg, _2);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t2 = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var _resolveRequest = function(requestScope) {
  return function(request2) {
    request2.parentContext.setCurrentRequest(request2);
    var bindings = request2.bindings;
    var childRequests = request2.childRequests;
    var targetIsAnArray = request2.target && request2.target.isArray();
    var targetParentIsNotAnArray = !request2.parentRequest || !request2.parentRequest.target || !request2.target || !request2.parentRequest.target.matchesArray(request2.target.serviceIdentifier);
    if (targetIsAnArray && targetParentIsNotAnArray) {
      return childRequests.map(function(childRequest) {
        var _f = _resolveRequest(requestScope);
        return _f(childRequest);
      });
    } else {
      if (request2.target.isOptional() && bindings.length === 0) {
        return void 0;
      }
      var binding = bindings[0];
      return _resolveBinding(requestScope, request2, binding);
    }
  };
};
var _resolveFactoryFromBinding = function(binding, context) {
  var factoryDetails = getFactoryDetails(binding);
  return tryAndThrowErrorIfStackOverflow(function() {
    return factoryDetails.factory.bind(binding)(context);
  }, function() {
    return new Error(CIRCULAR_DEPENDENCY_IN_FACTORY(factoryDetails.factoryType, context.currentRequest.serviceIdentifier.toString()));
  });
};
var _getResolvedFromBinding = function(requestScope, request2, binding) {
  var result;
  var childRequests = request2.childRequests;
  ensureFullyBound(binding);
  switch (binding.type) {
    case BindingTypeEnum.ConstantValue:
    case BindingTypeEnum.Function:
      result = binding.cache;
      break;
    case BindingTypeEnum.Constructor:
      result = binding.implementationType;
      break;
    case BindingTypeEnum.Instance:
      result = resolveInstance(binding, binding.implementationType, childRequests, _resolveRequest(requestScope));
      break;
    default:
      result = _resolveFactoryFromBinding(binding, request2.parentContext);
  }
  return result;
};
var _resolveInScope = function(requestScope, binding, resolveFromBinding) {
  var result = tryGetFromScope(requestScope, binding);
  if (result !== null) {
    return result;
  }
  result = resolveFromBinding();
  saveToScope(requestScope, binding, result);
  return result;
};
var _resolveBinding = function(requestScope, request2, binding) {
  return _resolveInScope(requestScope, binding, function() {
    var result = _getResolvedFromBinding(requestScope, request2, binding);
    if (isPromise(result)) {
      result = result.then(function(resolved) {
        return _onActivation(request2, binding, resolved);
      });
    } else {
      result = _onActivation(request2, binding, result);
    }
    return result;
  });
};
function _onActivation(request2, binding, resolved) {
  var result = _bindingActivation(request2.parentContext, binding, resolved);
  var containersIterator = _getContainersIterator(request2.parentContext.container);
  var container2;
  var containersIteratorResult = containersIterator.next();
  do {
    container2 = containersIteratorResult.value;
    var context_1 = request2.parentContext;
    var serviceIdentifier = request2.serviceIdentifier;
    var activationsIterator = _getContainerActivationsForService(container2, serviceIdentifier);
    if (isPromise(result)) {
      result = _activateContainerAsync(activationsIterator, context_1, result);
    } else {
      result = _activateContainer(activationsIterator, context_1, result);
    }
    containersIteratorResult = containersIterator.next();
  } while (containersIteratorResult.done !== true && !getBindingDictionary(container2).hasKey(request2.serviceIdentifier));
  return result;
}
var _bindingActivation = function(context, binding, previousResult) {
  var result;
  if (typeof binding.onActivation === "function") {
    result = binding.onActivation(context, previousResult);
  } else {
    result = previousResult;
  }
  return result;
};
var _activateContainer = function(activationsIterator, context, result) {
  var activation = activationsIterator.next();
  while (!activation.done) {
    result = activation.value(context, result);
    if (isPromise(result)) {
      return _activateContainerAsync(activationsIterator, context, result);
    }
    activation = activationsIterator.next();
  }
  return result;
};
var _activateContainerAsync = function(activationsIterator, context, resultPromise) {
  return __awaiter$1(void 0, void 0, void 0, function() {
    var result, activation;
    return __generator$1(this, function(_a2) {
      switch (_a2.label) {
        case 0:
          return [4, resultPromise];
        case 1:
          result = _a2.sent();
          activation = activationsIterator.next();
          _a2.label = 2;
        case 2:
          if (!!activation.done)
            return [3, 4];
          return [4, activation.value(context, result)];
        case 3:
          result = _a2.sent();
          activation = activationsIterator.next();
          return [3, 2];
        case 4:
          return [2, result];
      }
    });
  });
};
var _getContainerActivationsForService = function(container2, serviceIdentifier) {
  var activations = container2._activations;
  return activations.hasKey(serviceIdentifier) ? activations.get(serviceIdentifier).values() : [].values();
};
var _getContainersIterator = function(container2) {
  var containersStack = [container2];
  var parent = container2.parent;
  while (parent !== null) {
    containersStack.push(parent);
    parent = parent.parent;
  }
  var getNextContainer = function() {
    var nextContainer = containersStack.pop();
    if (nextContainer !== void 0) {
      return { done: false, value: nextContainer };
    } else {
      return { done: true, value: void 0 };
    }
  };
  var containersIterator = {
    next: getNextContainer
  };
  return containersIterator;
};
function resolve(context) {
  var _f = _resolveRequest(context.plan.rootRequest.requestScope);
  return _f(context.plan.rootRequest);
}
var traverseAncerstors = function(request2, constraint) {
  var parent = request2.parentRequest;
  if (parent !== null) {
    return constraint(parent) ? true : traverseAncerstors(parent, constraint);
  } else {
    return false;
  }
};
var taggedConstraint = function(key) {
  return function(value) {
    var constraint = function(request2) {
      return request2 !== null && request2.target !== null && request2.target.matchesTag(key)(value);
    };
    constraint.metaData = new Metadata(key, value);
    return constraint;
  };
};
var namedConstraint = taggedConstraint(NAMED_TAG);
var typeConstraint = function(type) {
  return function(request2) {
    var binding = null;
    if (request2 !== null) {
      binding = request2.bindings[0];
      if (typeof type === "string") {
        var serviceIdentifier = binding.serviceIdentifier;
        return serviceIdentifier === type;
      } else {
        var constructor = request2.bindings[0].implementationType;
        return type === constructor;
      }
    }
    return false;
  };
};
var BindingWhenSyntax = function() {
  function BindingWhenSyntax2(binding) {
    this._binding = binding;
  }
  BindingWhenSyntax2.prototype.when = function(constraint) {
    this._binding.constraint = constraint;
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenTargetNamed = function(name2) {
    this._binding.constraint = namedConstraint(name2);
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenTargetIsDefault = function() {
    this._binding.constraint = function(request2) {
      if (request2 === null) {
        return false;
      }
      var targetIsDefault = request2.target !== null && !request2.target.isNamed() && !request2.target.isTagged();
      return targetIsDefault;
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenTargetTagged = function(tag, value) {
    this._binding.constraint = taggedConstraint(tag)(value);
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenInjectedInto = function(parent) {
    this._binding.constraint = function(request2) {
      return request2 !== null && typeConstraint(parent)(request2.parentRequest);
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenParentNamed = function(name2) {
    this._binding.constraint = function(request2) {
      return request2 !== null && namedConstraint(name2)(request2.parentRequest);
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenParentTagged = function(tag, value) {
    this._binding.constraint = function(request2) {
      return request2 !== null && taggedConstraint(tag)(value)(request2.parentRequest);
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenAnyAncestorIs = function(ancestor) {
    this._binding.constraint = function(request2) {
      return request2 !== null && traverseAncerstors(request2, typeConstraint(ancestor));
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenNoAncestorIs = function(ancestor) {
    this._binding.constraint = function(request2) {
      return request2 !== null && !traverseAncerstors(request2, typeConstraint(ancestor));
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenAnyAncestorNamed = function(name2) {
    this._binding.constraint = function(request2) {
      return request2 !== null && traverseAncerstors(request2, namedConstraint(name2));
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenNoAncestorNamed = function(name2) {
    this._binding.constraint = function(request2) {
      return request2 !== null && !traverseAncerstors(request2, namedConstraint(name2));
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenAnyAncestorTagged = function(tag, value) {
    this._binding.constraint = function(request2) {
      return request2 !== null && traverseAncerstors(request2, taggedConstraint(tag)(value));
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenNoAncestorTagged = function(tag, value) {
    this._binding.constraint = function(request2) {
      return request2 !== null && !traverseAncerstors(request2, taggedConstraint(tag)(value));
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenAnyAncestorMatches = function(constraint) {
    this._binding.constraint = function(request2) {
      return request2 !== null && traverseAncerstors(request2, constraint);
    };
    return new BindingOnSyntax(this._binding);
  };
  BindingWhenSyntax2.prototype.whenNoAncestorMatches = function(constraint) {
    this._binding.constraint = function(request2) {
      return request2 !== null && !traverseAncerstors(request2, constraint);
    };
    return new BindingOnSyntax(this._binding);
  };
  return BindingWhenSyntax2;
}();
var BindingOnSyntax = function() {
  function BindingOnSyntax2(binding) {
    this._binding = binding;
  }
  BindingOnSyntax2.prototype.onActivation = function(handler) {
    this._binding.onActivation = handler;
    return new BindingWhenSyntax(this._binding);
  };
  BindingOnSyntax2.prototype.onDeactivation = function(handler) {
    this._binding.onDeactivation = handler;
    return new BindingWhenSyntax(this._binding);
  };
  return BindingOnSyntax2;
}();
var BindingWhenOnSyntax = function() {
  function BindingWhenOnSyntax2(binding) {
    this._binding = binding;
    this._bindingWhenSyntax = new BindingWhenSyntax(this._binding);
    this._bindingOnSyntax = new BindingOnSyntax(this._binding);
  }
  BindingWhenOnSyntax2.prototype.when = function(constraint) {
    return this._bindingWhenSyntax.when(constraint);
  };
  BindingWhenOnSyntax2.prototype.whenTargetNamed = function(name2) {
    return this._bindingWhenSyntax.whenTargetNamed(name2);
  };
  BindingWhenOnSyntax2.prototype.whenTargetIsDefault = function() {
    return this._bindingWhenSyntax.whenTargetIsDefault();
  };
  BindingWhenOnSyntax2.prototype.whenTargetTagged = function(tag, value) {
    return this._bindingWhenSyntax.whenTargetTagged(tag, value);
  };
  BindingWhenOnSyntax2.prototype.whenInjectedInto = function(parent) {
    return this._bindingWhenSyntax.whenInjectedInto(parent);
  };
  BindingWhenOnSyntax2.prototype.whenParentNamed = function(name2) {
    return this._bindingWhenSyntax.whenParentNamed(name2);
  };
  BindingWhenOnSyntax2.prototype.whenParentTagged = function(tag, value) {
    return this._bindingWhenSyntax.whenParentTagged(tag, value);
  };
  BindingWhenOnSyntax2.prototype.whenAnyAncestorIs = function(ancestor) {
    return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);
  };
  BindingWhenOnSyntax2.prototype.whenNoAncestorIs = function(ancestor) {
    return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);
  };
  BindingWhenOnSyntax2.prototype.whenAnyAncestorNamed = function(name2) {
    return this._bindingWhenSyntax.whenAnyAncestorNamed(name2);
  };
  BindingWhenOnSyntax2.prototype.whenAnyAncestorTagged = function(tag, value) {
    return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);
  };
  BindingWhenOnSyntax2.prototype.whenNoAncestorNamed = function(name2) {
    return this._bindingWhenSyntax.whenNoAncestorNamed(name2);
  };
  BindingWhenOnSyntax2.prototype.whenNoAncestorTagged = function(tag, value) {
    return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);
  };
  BindingWhenOnSyntax2.prototype.whenAnyAncestorMatches = function(constraint) {
    return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);
  };
  BindingWhenOnSyntax2.prototype.whenNoAncestorMatches = function(constraint) {
    return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);
  };
  BindingWhenOnSyntax2.prototype.onActivation = function(handler) {
    return this._bindingOnSyntax.onActivation(handler);
  };
  BindingWhenOnSyntax2.prototype.onDeactivation = function(handler) {
    return this._bindingOnSyntax.onDeactivation(handler);
  };
  return BindingWhenOnSyntax2;
}();
var BindingInSyntax = function() {
  function BindingInSyntax2(binding) {
    this._binding = binding;
  }
  BindingInSyntax2.prototype.inRequestScope = function() {
    this._binding.scope = BindingScopeEnum.Request;
    return new BindingWhenOnSyntax(this._binding);
  };
  BindingInSyntax2.prototype.inSingletonScope = function() {
    this._binding.scope = BindingScopeEnum.Singleton;
    return new BindingWhenOnSyntax(this._binding);
  };
  BindingInSyntax2.prototype.inTransientScope = function() {
    this._binding.scope = BindingScopeEnum.Transient;
    return new BindingWhenOnSyntax(this._binding);
  };
  return BindingInSyntax2;
}();
var BindingInWhenOnSyntax = function() {
  function BindingInWhenOnSyntax2(binding) {
    this._binding = binding;
    this._bindingWhenSyntax = new BindingWhenSyntax(this._binding);
    this._bindingOnSyntax = new BindingOnSyntax(this._binding);
    this._bindingInSyntax = new BindingInSyntax(binding);
  }
  BindingInWhenOnSyntax2.prototype.inRequestScope = function() {
    return this._bindingInSyntax.inRequestScope();
  };
  BindingInWhenOnSyntax2.prototype.inSingletonScope = function() {
    return this._bindingInSyntax.inSingletonScope();
  };
  BindingInWhenOnSyntax2.prototype.inTransientScope = function() {
    return this._bindingInSyntax.inTransientScope();
  };
  BindingInWhenOnSyntax2.prototype.when = function(constraint) {
    return this._bindingWhenSyntax.when(constraint);
  };
  BindingInWhenOnSyntax2.prototype.whenTargetNamed = function(name2) {
    return this._bindingWhenSyntax.whenTargetNamed(name2);
  };
  BindingInWhenOnSyntax2.prototype.whenTargetIsDefault = function() {
    return this._bindingWhenSyntax.whenTargetIsDefault();
  };
  BindingInWhenOnSyntax2.prototype.whenTargetTagged = function(tag, value) {
    return this._bindingWhenSyntax.whenTargetTagged(tag, value);
  };
  BindingInWhenOnSyntax2.prototype.whenInjectedInto = function(parent) {
    return this._bindingWhenSyntax.whenInjectedInto(parent);
  };
  BindingInWhenOnSyntax2.prototype.whenParentNamed = function(name2) {
    return this._bindingWhenSyntax.whenParentNamed(name2);
  };
  BindingInWhenOnSyntax2.prototype.whenParentTagged = function(tag, value) {
    return this._bindingWhenSyntax.whenParentTagged(tag, value);
  };
  BindingInWhenOnSyntax2.prototype.whenAnyAncestorIs = function(ancestor) {
    return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);
  };
  BindingInWhenOnSyntax2.prototype.whenNoAncestorIs = function(ancestor) {
    return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);
  };
  BindingInWhenOnSyntax2.prototype.whenAnyAncestorNamed = function(name2) {
    return this._bindingWhenSyntax.whenAnyAncestorNamed(name2);
  };
  BindingInWhenOnSyntax2.prototype.whenAnyAncestorTagged = function(tag, value) {
    return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);
  };
  BindingInWhenOnSyntax2.prototype.whenNoAncestorNamed = function(name2) {
    return this._bindingWhenSyntax.whenNoAncestorNamed(name2);
  };
  BindingInWhenOnSyntax2.prototype.whenNoAncestorTagged = function(tag, value) {
    return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);
  };
  BindingInWhenOnSyntax2.prototype.whenAnyAncestorMatches = function(constraint) {
    return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);
  };
  BindingInWhenOnSyntax2.prototype.whenNoAncestorMatches = function(constraint) {
    return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);
  };
  BindingInWhenOnSyntax2.prototype.onActivation = function(handler) {
    return this._bindingOnSyntax.onActivation(handler);
  };
  BindingInWhenOnSyntax2.prototype.onDeactivation = function(handler) {
    return this._bindingOnSyntax.onDeactivation(handler);
  };
  return BindingInWhenOnSyntax2;
}();
var BindingToSyntax = function() {
  function BindingToSyntax2(binding) {
    this._binding = binding;
  }
  BindingToSyntax2.prototype.to = function(constructor) {
    this._binding.type = BindingTypeEnum.Instance;
    this._binding.implementationType = constructor;
    return new BindingInWhenOnSyntax(this._binding);
  };
  BindingToSyntax2.prototype.toSelf = function() {
    if (typeof this._binding.serviceIdentifier !== "function") {
      throw new Error("" + INVALID_TO_SELF_VALUE);
    }
    var self2 = this._binding.serviceIdentifier;
    return this.to(self2);
  };
  BindingToSyntax2.prototype.toConstantValue = function(value) {
    this._binding.type = BindingTypeEnum.ConstantValue;
    this._binding.cache = value;
    this._binding.dynamicValue = null;
    this._binding.implementationType = null;
    this._binding.scope = BindingScopeEnum.Singleton;
    return new BindingWhenOnSyntax(this._binding);
  };
  BindingToSyntax2.prototype.toDynamicValue = function(func) {
    this._binding.type = BindingTypeEnum.DynamicValue;
    this._binding.cache = null;
    this._binding.dynamicValue = func;
    this._binding.implementationType = null;
    return new BindingInWhenOnSyntax(this._binding);
  };
  BindingToSyntax2.prototype.toConstructor = function(constructor) {
    this._binding.type = BindingTypeEnum.Constructor;
    this._binding.implementationType = constructor;
    this._binding.scope = BindingScopeEnum.Singleton;
    return new BindingWhenOnSyntax(this._binding);
  };
  BindingToSyntax2.prototype.toFactory = function(factory2) {
    this._binding.type = BindingTypeEnum.Factory;
    this._binding.factory = factory2;
    this._binding.scope = BindingScopeEnum.Singleton;
    return new BindingWhenOnSyntax(this._binding);
  };
  BindingToSyntax2.prototype.toFunction = function(func) {
    if (typeof func !== "function") {
      throw new Error(INVALID_FUNCTION_BINDING);
    }
    var bindingWhenOnSyntax = this.toConstantValue(func);
    this._binding.type = BindingTypeEnum.Function;
    this._binding.scope = BindingScopeEnum.Singleton;
    return bindingWhenOnSyntax;
  };
  BindingToSyntax2.prototype.toAutoFactory = function(serviceIdentifier) {
    this._binding.type = BindingTypeEnum.Factory;
    this._binding.factory = function(context) {
      var autofactory = function() {
        return context.container.get(serviceIdentifier);
      };
      return autofactory;
    };
    this._binding.scope = BindingScopeEnum.Singleton;
    return new BindingWhenOnSyntax(this._binding);
  };
  BindingToSyntax2.prototype.toAutoNamedFactory = function(serviceIdentifier) {
    this._binding.type = BindingTypeEnum.Factory;
    this._binding.factory = function(context) {
      return function(named) {
        return context.container.getNamed(serviceIdentifier, named);
      };
    };
    return new BindingWhenOnSyntax(this._binding);
  };
  BindingToSyntax2.prototype.toProvider = function(provider) {
    this._binding.type = BindingTypeEnum.Provider;
    this._binding.provider = provider;
    this._binding.scope = BindingScopeEnum.Singleton;
    return new BindingWhenOnSyntax(this._binding);
  };
  BindingToSyntax2.prototype.toService = function(service) {
    this.toDynamicValue(function(context) {
      return context.container.get(service);
    });
  };
  return BindingToSyntax2;
}();
var ContainerSnapshot = function() {
  function ContainerSnapshot2() {
  }
  ContainerSnapshot2.of = function(bindings, middleware, activations, deactivations, moduleActivationStore) {
    var snapshot = new ContainerSnapshot2();
    snapshot.bindings = bindings;
    snapshot.middleware = middleware;
    snapshot.deactivations = deactivations;
    snapshot.activations = activations;
    snapshot.moduleActivationStore = moduleActivationStore;
    return snapshot;
  };
  return ContainerSnapshot2;
}();
function isClonable(obj) {
  return typeof obj === "object" && obj !== null && "clone" in obj && typeof obj.clone === "function";
}
var Lookup = function() {
  function Lookup2() {
    this._map = /* @__PURE__ */ new Map();
  }
  Lookup2.prototype.getMap = function() {
    return this._map;
  };
  Lookup2.prototype.add = function(serviceIdentifier, value) {
    if (serviceIdentifier === null || serviceIdentifier === void 0) {
      throw new Error(NULL_ARGUMENT);
    }
    if (value === null || value === void 0) {
      throw new Error(NULL_ARGUMENT);
    }
    var entry = this._map.get(serviceIdentifier);
    if (entry !== void 0) {
      entry.push(value);
    } else {
      this._map.set(serviceIdentifier, [value]);
    }
  };
  Lookup2.prototype.get = function(serviceIdentifier) {
    if (serviceIdentifier === null || serviceIdentifier === void 0) {
      throw new Error(NULL_ARGUMENT);
    }
    var entry = this._map.get(serviceIdentifier);
    if (entry !== void 0) {
      return entry;
    } else {
      throw new Error(KEY_NOT_FOUND);
    }
  };
  Lookup2.prototype.remove = function(serviceIdentifier) {
    if (serviceIdentifier === null || serviceIdentifier === void 0) {
      throw new Error(NULL_ARGUMENT);
    }
    if (!this._map.delete(serviceIdentifier)) {
      throw new Error(KEY_NOT_FOUND);
    }
  };
  Lookup2.prototype.removeIntersection = function(lookup) {
    var _this = this;
    this.traverse(function(serviceIdentifier, value) {
      var lookupActivations = lookup.hasKey(serviceIdentifier) ? lookup.get(serviceIdentifier) : void 0;
      if (lookupActivations !== void 0) {
        var filteredValues = value.filter(function(lookupValue) {
          return !lookupActivations.some(function(moduleActivation) {
            return lookupValue === moduleActivation;
          });
        });
        _this._setValue(serviceIdentifier, filteredValues);
      }
    });
  };
  Lookup2.prototype.removeByCondition = function(condition) {
    var _this = this;
    var removals = [];
    this._map.forEach(function(entries, key) {
      var updatedEntries = [];
      for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {
        var entry = entries_1[_i];
        var remove = condition(entry);
        if (remove) {
          removals.push(entry);
        } else {
          updatedEntries.push(entry);
        }
      }
      _this._setValue(key, updatedEntries);
    });
    return removals;
  };
  Lookup2.prototype.hasKey = function(serviceIdentifier) {
    if (serviceIdentifier === null || serviceIdentifier === void 0) {
      throw new Error(NULL_ARGUMENT);
    }
    return this._map.has(serviceIdentifier);
  };
  Lookup2.prototype.clone = function() {
    var copy = new Lookup2();
    this._map.forEach(function(value, key) {
      value.forEach(function(b2) {
        return copy.add(key, isClonable(b2) ? b2.clone() : b2);
      });
    });
    return copy;
  };
  Lookup2.prototype.traverse = function(func) {
    this._map.forEach(function(value, key) {
      func(key, value);
    });
  };
  Lookup2.prototype._setValue = function(serviceIdentifier, value) {
    if (value.length > 0) {
      this._map.set(serviceIdentifier, value);
    } else {
      this._map.delete(serviceIdentifier);
    }
  };
  return Lookup2;
}();
var ModuleActivationStore = function() {
  function ModuleActivationStore2() {
    this._map = /* @__PURE__ */ new Map();
  }
  ModuleActivationStore2.prototype.remove = function(moduleId) {
    if (this._map.has(moduleId)) {
      var handlers = this._map.get(moduleId);
      this._map.delete(moduleId);
      return handlers;
    }
    return this._getEmptyHandlersStore();
  };
  ModuleActivationStore2.prototype.addDeactivation = function(moduleId, serviceIdentifier, onDeactivation) {
    this._getModuleActivationHandlers(moduleId).onDeactivations.add(serviceIdentifier, onDeactivation);
  };
  ModuleActivationStore2.prototype.addActivation = function(moduleId, serviceIdentifier, onActivation) {
    this._getModuleActivationHandlers(moduleId).onActivations.add(serviceIdentifier, onActivation);
  };
  ModuleActivationStore2.prototype.clone = function() {
    var clone = new ModuleActivationStore2();
    this._map.forEach(function(handlersStore, moduleId) {
      clone._map.set(moduleId, {
        onActivations: handlersStore.onActivations.clone(),
        onDeactivations: handlersStore.onDeactivations.clone()
      });
    });
    return clone;
  };
  ModuleActivationStore2.prototype._getModuleActivationHandlers = function(moduleId) {
    var moduleActivationHandlers = this._map.get(moduleId);
    if (moduleActivationHandlers === void 0) {
      moduleActivationHandlers = this._getEmptyHandlersStore();
      this._map.set(moduleId, moduleActivationHandlers);
    }
    return moduleActivationHandlers;
  };
  ModuleActivationStore2.prototype._getEmptyHandlersStore = function() {
    var handlersStore = {
      onActivations: new Lookup(),
      onDeactivations: new Lookup()
    };
    return handlersStore;
  };
  return ModuleActivationStore2;
}();
var __assign = globalThis && globalThis.__assign || function() {
  __assign = Object.assign || function(t2) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p in s)
        if (Object.prototype.hasOwnProperty.call(s, p))
          t2[p] = s[p];
    }
    return t2;
  };
  return __assign.apply(this, arguments);
};
var __awaiter = globalThis && globalThis.__awaiter || function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve2) {
      resolve2(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve2, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve2(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator = globalThis && globalThis.__generator || function(thisArg, body) {
  var _2 = { label: 0, sent: function() {
    if (t2[0] & 1)
      throw t2[1];
    return t2[1];
  }, trys: [], ops: [] }, f, y, t2, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (_2)
      try {
        if (f = 1, y && (t2 = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t2 = y["return"]) && t2.call(y), 0) : y.next) && !(t2 = t2.call(y, op[1])).done)
          return t2;
        if (y = 0, t2)
          op = [op[0] & 2, t2.value];
        switch (op[0]) {
          case 0:
          case 1:
            t2 = op;
            break;
          case 4:
            _2.label++;
            return { value: op[1], done: false };
          case 5:
            _2.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _2.ops.pop();
            _2.trys.pop();
            continue;
          default:
            if (!(t2 = _2.trys, t2 = t2.length > 0 && t2[t2.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _2 = 0;
              continue;
            }
            if (op[0] === 3 && (!t2 || op[1] > t2[0] && op[1] < t2[3])) {
              _2.label = op[1];
              break;
            }
            if (op[0] === 6 && _2.label < t2[1]) {
              _2.label = t2[1];
              t2 = op;
              break;
            }
            if (t2 && _2.label < t2[2]) {
              _2.label = t2[2];
              _2.ops.push(op);
              break;
            }
            if (t2[2])
              _2.ops.pop();
            _2.trys.pop();
            continue;
        }
        op = body.call(thisArg, _2);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t2 = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var __spreadArray = globalThis && globalThis.__spreadArray || function(to, from, pack) {
  if (pack || arguments.length === 2)
    for (var i = 0, l = from.length, ar; i < l; i++) {
      if (ar || !(i in from)) {
        if (!ar)
          ar = Array.prototype.slice.call(from, 0, i);
        ar[i] = from[i];
      }
    }
  return to.concat(ar || Array.prototype.slice.call(from));
};
var Container = function() {
  function Container2(containerOptions) {
    var options = containerOptions || {};
    if (typeof options !== "object") {
      throw new Error("" + CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);
    }
    if (options.defaultScope === void 0) {
      options.defaultScope = BindingScopeEnum.Transient;
    } else if (options.defaultScope !== BindingScopeEnum.Singleton && options.defaultScope !== BindingScopeEnum.Transient && options.defaultScope !== BindingScopeEnum.Request) {
      throw new Error("" + CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);
    }
    if (options.autoBindInjectable === void 0) {
      options.autoBindInjectable = false;
    } else if (typeof options.autoBindInjectable !== "boolean") {
      throw new Error("" + CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);
    }
    if (options.skipBaseClassChecks === void 0) {
      options.skipBaseClassChecks = false;
    } else if (typeof options.skipBaseClassChecks !== "boolean") {
      throw new Error("" + CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);
    }
    this.options = {
      autoBindInjectable: options.autoBindInjectable,
      defaultScope: options.defaultScope,
      skipBaseClassChecks: options.skipBaseClassChecks
    };
    this.id = id();
    this._bindingDictionary = new Lookup();
    this._snapshots = [];
    this._middleware = null;
    this._activations = new Lookup();
    this._deactivations = new Lookup();
    this.parent = null;
    this._metadataReader = new MetadataReader();
    this._moduleActivationStore = new ModuleActivationStore();
  }
  Container2.merge = function(container1, container2) {
    var containers = [];
    for (var _i = 2; _i < arguments.length; _i++) {
      containers[_i - 2] = arguments[_i];
    }
    var container3 = new Container2();
    var targetContainers = __spreadArray([container1, container2], containers, true).map(function(targetContainer) {
      return getBindingDictionary(targetContainer);
    });
    var bindingDictionary = getBindingDictionary(container3);
    function copyDictionary(origin, destination) {
      origin.traverse(function(_key, value) {
        value.forEach(function(binding) {
          destination.add(binding.serviceIdentifier, binding.clone());
        });
      });
    }
    targetContainers.forEach(function(targetBindingDictionary) {
      copyDictionary(targetBindingDictionary, bindingDictionary);
    });
    return container3;
  };
  Container2.prototype.load = function() {
    var modules = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      modules[_i] = arguments[_i];
    }
    var getHelpers = this._getContainerModuleHelpersFactory();
    for (var _a2 = 0, modules_1 = modules; _a2 < modules_1.length; _a2++) {
      var currentModule = modules_1[_a2];
      var containerModuleHelpers = getHelpers(currentModule.id);
      currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction, containerModuleHelpers.unbindAsyncFunction, containerModuleHelpers.onActivationFunction, containerModuleHelpers.onDeactivationFunction);
    }
  };
  Container2.prototype.loadAsync = function() {
    var modules = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      modules[_i] = arguments[_i];
    }
    return __awaiter(this, void 0, void 0, function() {
      var getHelpers, _a2, modules_2, currentModule, containerModuleHelpers;
      return __generator(this, function(_b) {
        switch (_b.label) {
          case 0:
            getHelpers = this._getContainerModuleHelpersFactory();
            _a2 = 0, modules_2 = modules;
            _b.label = 1;
          case 1:
            if (!(_a2 < modules_2.length))
              return [3, 4];
            currentModule = modules_2[_a2];
            containerModuleHelpers = getHelpers(currentModule.id);
            return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction, containerModuleHelpers.unbindAsyncFunction, containerModuleHelpers.onActivationFunction, containerModuleHelpers.onDeactivationFunction)];
          case 2:
            _b.sent();
            _b.label = 3;
          case 3:
            _a2++;
            return [3, 1];
          case 4:
            return [2];
        }
      });
    });
  };
  Container2.prototype.unload = function() {
    var _this = this;
    var modules = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      modules[_i] = arguments[_i];
    }
    modules.forEach(function(module2) {
      var deactivations = _this._removeModuleBindings(module2.id);
      _this._deactivateSingletons(deactivations);
      _this._removeModuleHandlers(module2.id);
    });
  };
  Container2.prototype.unloadAsync = function() {
    var modules = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      modules[_i] = arguments[_i];
    }
    return __awaiter(this, void 0, void 0, function() {
      var _a2, modules_3, module_1, deactivations;
      return __generator(this, function(_b) {
        switch (_b.label) {
          case 0:
            _a2 = 0, modules_3 = modules;
            _b.label = 1;
          case 1:
            if (!(_a2 < modules_3.length))
              return [3, 4];
            module_1 = modules_3[_a2];
            deactivations = this._removeModuleBindings(module_1.id);
            return [4, this._deactivateSingletonsAsync(deactivations)];
          case 2:
            _b.sent();
            this._removeModuleHandlers(module_1.id);
            _b.label = 3;
          case 3:
            _a2++;
            return [3, 1];
          case 4:
            return [2];
        }
      });
    });
  };
  Container2.prototype.bind = function(serviceIdentifier) {
    var scope = this.options.defaultScope || BindingScopeEnum.Transient;
    var binding = new Binding(serviceIdentifier, scope);
    this._bindingDictionary.add(serviceIdentifier, binding);
    return new BindingToSyntax(binding);
  };
  Container2.prototype.rebind = function(serviceIdentifier) {
    this.unbind(serviceIdentifier);
    return this.bind(serviceIdentifier);
  };
  Container2.prototype.rebindAsync = function(serviceIdentifier) {
    return __awaiter(this, void 0, void 0, function() {
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            return [4, this.unbindAsync(serviceIdentifier)];
          case 1:
            _a2.sent();
            return [2, this.bind(serviceIdentifier)];
        }
      });
    });
  };
  Container2.prototype.unbind = function(serviceIdentifier) {
    if (this._bindingDictionary.hasKey(serviceIdentifier)) {
      var bindings = this._bindingDictionary.get(serviceIdentifier);
      this._deactivateSingletons(bindings);
    }
    this._removeServiceFromDictionary(serviceIdentifier);
  };
  Container2.prototype.unbindAsync = function(serviceIdentifier) {
    return __awaiter(this, void 0, void 0, function() {
      var bindings;
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            if (!this._bindingDictionary.hasKey(serviceIdentifier))
              return [3, 2];
            bindings = this._bindingDictionary.get(serviceIdentifier);
            return [4, this._deactivateSingletonsAsync(bindings)];
          case 1:
            _a2.sent();
            _a2.label = 2;
          case 2:
            this._removeServiceFromDictionary(serviceIdentifier);
            return [2];
        }
      });
    });
  };
  Container2.prototype.unbindAll = function() {
    var _this = this;
    this._bindingDictionary.traverse(function(_key, value) {
      _this._deactivateSingletons(value);
    });
    this._bindingDictionary = new Lookup();
  };
  Container2.prototype.unbindAllAsync = function() {
    return __awaiter(this, void 0, void 0, function() {
      var promises;
      var _this = this;
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            promises = [];
            this._bindingDictionary.traverse(function(_key, value) {
              promises.push(_this._deactivateSingletonsAsync(value));
            });
            return [4, Promise.all(promises)];
          case 1:
            _a2.sent();
            this._bindingDictionary = new Lookup();
            return [2];
        }
      });
    });
  };
  Container2.prototype.onActivation = function(serviceIdentifier, onActivation) {
    this._activations.add(serviceIdentifier, onActivation);
  };
  Container2.prototype.onDeactivation = function(serviceIdentifier, onDeactivation) {
    this._deactivations.add(serviceIdentifier, onDeactivation);
  };
  Container2.prototype.isBound = function(serviceIdentifier) {
    var bound = this._bindingDictionary.hasKey(serviceIdentifier);
    if (!bound && this.parent) {
      bound = this.parent.isBound(serviceIdentifier);
    }
    return bound;
  };
  Container2.prototype.isCurrentBound = function(serviceIdentifier) {
    return this._bindingDictionary.hasKey(serviceIdentifier);
  };
  Container2.prototype.isBoundNamed = function(serviceIdentifier, named) {
    return this.isBoundTagged(serviceIdentifier, NAMED_TAG, named);
  };
  Container2.prototype.isBoundTagged = function(serviceIdentifier, key, value) {
    var bound = false;
    if (this._bindingDictionary.hasKey(serviceIdentifier)) {
      var bindings = this._bindingDictionary.get(serviceIdentifier);
      var request_1 = createMockRequest(this, serviceIdentifier, key, value);
      bound = bindings.some(function(b2) {
        return b2.constraint(request_1);
      });
    }
    if (!bound && this.parent) {
      bound = this.parent.isBoundTagged(serviceIdentifier, key, value);
    }
    return bound;
  };
  Container2.prototype.snapshot = function() {
    this._snapshots.push(ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware, this._activations.clone(), this._deactivations.clone(), this._moduleActivationStore.clone()));
  };
  Container2.prototype.restore = function() {
    var snapshot = this._snapshots.pop();
    if (snapshot === void 0) {
      throw new Error(NO_MORE_SNAPSHOTS_AVAILABLE);
    }
    this._bindingDictionary = snapshot.bindings;
    this._activations = snapshot.activations;
    this._deactivations = snapshot.deactivations;
    this._middleware = snapshot.middleware;
    this._moduleActivationStore = snapshot.moduleActivationStore;
  };
  Container2.prototype.createChild = function(containerOptions) {
    var child = new Container2(containerOptions || this.options);
    child.parent = this;
    return child;
  };
  Container2.prototype.applyMiddleware = function() {
    var middlewares = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      middlewares[_i] = arguments[_i];
    }
    var initial = this._middleware ? this._middleware : this._planAndResolve();
    this._middleware = middlewares.reduce(function(prev, curr) {
      return curr(prev);
    }, initial);
  };
  Container2.prototype.applyCustomMetadataReader = function(metadataReader) {
    this._metadataReader = metadataReader;
  };
  Container2.prototype.get = function(serviceIdentifier) {
    var getArgs = this._getNotAllArgs(serviceIdentifier, false);
    return this._getButThrowIfAsync(getArgs);
  };
  Container2.prototype.getAsync = function(serviceIdentifier) {
    return __awaiter(this, void 0, void 0, function() {
      var getArgs;
      return __generator(this, function(_a2) {
        getArgs = this._getNotAllArgs(serviceIdentifier, false);
        return [2, this._get(getArgs)];
      });
    });
  };
  Container2.prototype.getTagged = function(serviceIdentifier, key, value) {
    var getArgs = this._getNotAllArgs(serviceIdentifier, false, key, value);
    return this._getButThrowIfAsync(getArgs);
  };
  Container2.prototype.getTaggedAsync = function(serviceIdentifier, key, value) {
    return __awaiter(this, void 0, void 0, function() {
      var getArgs;
      return __generator(this, function(_a2) {
        getArgs = this._getNotAllArgs(serviceIdentifier, false, key, value);
        return [2, this._get(getArgs)];
      });
    });
  };
  Container2.prototype.getNamed = function(serviceIdentifier, named) {
    return this.getTagged(serviceIdentifier, NAMED_TAG, named);
  };
  Container2.prototype.getNamedAsync = function(serviceIdentifier, named) {
    return this.getTaggedAsync(serviceIdentifier, NAMED_TAG, named);
  };
  Container2.prototype.getAll = function(serviceIdentifier) {
    var getArgs = this._getAllArgs(serviceIdentifier);
    return this._getButThrowIfAsync(getArgs);
  };
  Container2.prototype.getAllAsync = function(serviceIdentifier) {
    var getArgs = this._getAllArgs(serviceIdentifier);
    return this._getAll(getArgs);
  };
  Container2.prototype.getAllTagged = function(serviceIdentifier, key, value) {
    var getArgs = this._getNotAllArgs(serviceIdentifier, true, key, value);
    return this._getButThrowIfAsync(getArgs);
  };
  Container2.prototype.getAllTaggedAsync = function(serviceIdentifier, key, value) {
    var getArgs = this._getNotAllArgs(serviceIdentifier, true, key, value);
    return this._getAll(getArgs);
  };
  Container2.prototype.getAllNamed = function(serviceIdentifier, named) {
    return this.getAllTagged(serviceIdentifier, NAMED_TAG, named);
  };
  Container2.prototype.getAllNamedAsync = function(serviceIdentifier, named) {
    return this.getAllTaggedAsync(serviceIdentifier, NAMED_TAG, named);
  };
  Container2.prototype.resolve = function(constructorFunction) {
    var isBound = this.isBound(constructorFunction);
    if (!isBound) {
      this.bind(constructorFunction).toSelf();
    }
    var resolved = this.get(constructorFunction);
    if (!isBound) {
      this.unbind(constructorFunction);
    }
    return resolved;
  };
  Container2.prototype._preDestroy = function(constructor, instance2) {
    if (Reflect.hasMetadata(PRE_DESTROY, constructor)) {
      var data = Reflect.getMetadata(PRE_DESTROY, constructor);
      return instance2[data.value]();
    }
  };
  Container2.prototype._removeModuleHandlers = function(moduleId) {
    var moduleActivationsHandlers = this._moduleActivationStore.remove(moduleId);
    this._activations.removeIntersection(moduleActivationsHandlers.onActivations);
    this._deactivations.removeIntersection(moduleActivationsHandlers.onDeactivations);
  };
  Container2.prototype._removeModuleBindings = function(moduleId) {
    return this._bindingDictionary.removeByCondition(function(binding) {
      return binding.moduleId === moduleId;
    });
  };
  Container2.prototype._deactivate = function(binding, instance2) {
    var _this = this;
    var constructor = Object.getPrototypeOf(instance2).constructor;
    try {
      if (this._deactivations.hasKey(binding.serviceIdentifier)) {
        var result = this._deactivateContainer(instance2, this._deactivations.get(binding.serviceIdentifier).values());
        if (isPromise(result)) {
          return this._handleDeactivationError(result.then(function() {
            return _this._propagateContainerDeactivationThenBindingAndPreDestroyAsync(binding, instance2, constructor);
          }), constructor);
        }
      }
      var propagateDeactivationResult = this._propagateContainerDeactivationThenBindingAndPreDestroy(binding, instance2, constructor);
      if (isPromise(propagateDeactivationResult)) {
        return this._handleDeactivationError(propagateDeactivationResult, constructor);
      }
    } catch (ex) {
      throw new Error(ON_DEACTIVATION_ERROR(constructor.name, ex.message));
    }
  };
  Container2.prototype._handleDeactivationError = function(asyncResult, constructor) {
    return __awaiter(this, void 0, void 0, function() {
      var ex_1;
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            _a2.trys.push([0, 2, , 3]);
            return [4, asyncResult];
          case 1:
            _a2.sent();
            return [3, 3];
          case 2:
            ex_1 = _a2.sent();
            throw new Error(ON_DEACTIVATION_ERROR(constructor.name, ex_1.message));
          case 3:
            return [2];
        }
      });
    });
  };
  Container2.prototype._deactivateContainer = function(instance2, deactivationsIterator) {
    var _this = this;
    var deactivation = deactivationsIterator.next();
    while (deactivation.value) {
      var result = deactivation.value(instance2);
      if (isPromise(result)) {
        return result.then(function() {
          return _this._deactivateContainerAsync(instance2, deactivationsIterator);
        });
      }
      deactivation = deactivationsIterator.next();
    }
  };
  Container2.prototype._deactivateContainerAsync = function(instance2, deactivationsIterator) {
    return __awaiter(this, void 0, void 0, function() {
      var deactivation;
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            deactivation = deactivationsIterator.next();
            _a2.label = 1;
          case 1:
            if (!deactivation.value)
              return [3, 3];
            return [4, deactivation.value(instance2)];
          case 2:
            _a2.sent();
            deactivation = deactivationsIterator.next();
            return [3, 1];
          case 3:
            return [2];
        }
      });
    });
  };
  Container2.prototype._getContainerModuleHelpersFactory = function() {
    var _this = this;
    var setModuleId = function(bindingToSyntax, moduleId) {
      bindingToSyntax._binding.moduleId = moduleId;
    };
    var getBindFunction = function(moduleId) {
      return function(serviceIdentifier) {
        var bindingToSyntax = _this.bind(serviceIdentifier);
        setModuleId(bindingToSyntax, moduleId);
        return bindingToSyntax;
      };
    };
    var getUnbindFunction = function() {
      return function(serviceIdentifier) {
        return _this.unbind(serviceIdentifier);
      };
    };
    var getUnbindAsyncFunction = function() {
      return function(serviceIdentifier) {
        return _this.unbindAsync(serviceIdentifier);
      };
    };
    var getIsboundFunction = function() {
      return function(serviceIdentifier) {
        return _this.isBound(serviceIdentifier);
      };
    };
    var getRebindFunction = function(moduleId) {
      return function(serviceIdentifier) {
        var bindingToSyntax = _this.rebind(serviceIdentifier);
        setModuleId(bindingToSyntax, moduleId);
        return bindingToSyntax;
      };
    };
    var getOnActivationFunction = function(moduleId) {
      return function(serviceIdentifier, onActivation) {
        _this._moduleActivationStore.addActivation(moduleId, serviceIdentifier, onActivation);
        _this.onActivation(serviceIdentifier, onActivation);
      };
    };
    var getOnDeactivationFunction = function(moduleId) {
      return function(serviceIdentifier, onDeactivation) {
        _this._moduleActivationStore.addDeactivation(moduleId, serviceIdentifier, onDeactivation);
        _this.onDeactivation(serviceIdentifier, onDeactivation);
      };
    };
    return function(mId) {
      return {
        bindFunction: getBindFunction(mId),
        isboundFunction: getIsboundFunction(),
        onActivationFunction: getOnActivationFunction(mId),
        onDeactivationFunction: getOnDeactivationFunction(mId),
        rebindFunction: getRebindFunction(mId),
        unbindFunction: getUnbindFunction(),
        unbindAsyncFunction: getUnbindAsyncFunction()
      };
    };
  };
  Container2.prototype._getAll = function(getArgs) {
    return Promise.all(this._get(getArgs));
  };
  Container2.prototype._get = function(getArgs) {
    var planAndResolveArgs = __assign(__assign({}, getArgs), { contextInterceptor: function(context) {
      return context;
    }, targetType: TargetTypeEnum.Variable });
    if (this._middleware) {
      var middlewareResult = this._middleware(planAndResolveArgs);
      if (middlewareResult === void 0 || middlewareResult === null) {
        throw new Error(INVALID_MIDDLEWARE_RETURN);
      }
      return middlewareResult;
    }
    return this._planAndResolve()(planAndResolveArgs);
  };
  Container2.prototype._getButThrowIfAsync = function(getArgs) {
    var result = this._get(getArgs);
    if (isPromiseOrContainsPromise(result)) {
      throw new Error(LAZY_IN_SYNC(getArgs.serviceIdentifier));
    }
    return result;
  };
  Container2.prototype._getAllArgs = function(serviceIdentifier) {
    var getAllArgs = {
      avoidConstraints: true,
      isMultiInject: true,
      serviceIdentifier
    };
    return getAllArgs;
  };
  Container2.prototype._getNotAllArgs = function(serviceIdentifier, isMultiInject, key, value) {
    var getNotAllArgs = {
      avoidConstraints: false,
      isMultiInject,
      serviceIdentifier,
      key,
      value
    };
    return getNotAllArgs;
  };
  Container2.prototype._planAndResolve = function() {
    var _this = this;
    return function(args) {
      var context = plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);
      context = args.contextInterceptor(context);
      var result = resolve(context);
      return result;
    };
  };
  Container2.prototype._deactivateIfSingleton = function(binding) {
    var _this = this;
    if (!binding.activated) {
      return;
    }
    if (isPromise(binding.cache)) {
      return binding.cache.then(function(resolved) {
        return _this._deactivate(binding, resolved);
      });
    }
    return this._deactivate(binding, binding.cache);
  };
  Container2.prototype._deactivateSingletons = function(bindings) {
    for (var _i = 0, bindings_1 = bindings; _i < bindings_1.length; _i++) {
      var binding = bindings_1[_i];
      var result = this._deactivateIfSingleton(binding);
      if (isPromise(result)) {
        throw new Error(ASYNC_UNBIND_REQUIRED);
      }
    }
  };
  Container2.prototype._deactivateSingletonsAsync = function(bindings) {
    return __awaiter(this, void 0, void 0, function() {
      var _this = this;
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            return [4, Promise.all(bindings.map(function(b2) {
              return _this._deactivateIfSingleton(b2);
            }))];
          case 1:
            _a2.sent();
            return [2];
        }
      });
    });
  };
  Container2.prototype._propagateContainerDeactivationThenBindingAndPreDestroy = function(binding, instance2, constructor) {
    if (this.parent) {
      return this._deactivate.bind(this.parent)(binding, instance2);
    } else {
      return this._bindingDeactivationAndPreDestroy(binding, instance2, constructor);
    }
  };
  Container2.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync = function(binding, instance2, constructor) {
    return __awaiter(this, void 0, void 0, function() {
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            if (!this.parent)
              return [3, 2];
            return [4, this._deactivate.bind(this.parent)(binding, instance2)];
          case 1:
            _a2.sent();
            return [3, 4];
          case 2:
            return [4, this._bindingDeactivationAndPreDestroyAsync(binding, instance2, constructor)];
          case 3:
            _a2.sent();
            _a2.label = 4;
          case 4:
            return [2];
        }
      });
    });
  };
  Container2.prototype._removeServiceFromDictionary = function(serviceIdentifier) {
    try {
      this._bindingDictionary.remove(serviceIdentifier);
    } catch (e) {
      throw new Error(CANNOT_UNBIND + " " + getServiceIdentifierAsString(serviceIdentifier));
    }
  };
  Container2.prototype._bindingDeactivationAndPreDestroy = function(binding, instance2, constructor) {
    var _this = this;
    if (typeof binding.onDeactivation === "function") {
      var result = binding.onDeactivation(instance2);
      if (isPromise(result)) {
        return result.then(function() {
          return _this._preDestroy(constructor, instance2);
        });
      }
    }
    return this._preDestroy(constructor, instance2);
  };
  Container2.prototype._bindingDeactivationAndPreDestroyAsync = function(binding, instance2, constructor) {
    return __awaiter(this, void 0, void 0, function() {
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            if (!(typeof binding.onDeactivation === "function"))
              return [3, 2];
            return [4, binding.onDeactivation(instance2)];
          case 1:
            _a2.sent();
            _a2.label = 2;
          case 2:
            return [4, this._preDestroy(constructor, instance2)];
          case 3:
            _a2.sent();
            return [2];
        }
      });
    });
  };
  return Container2;
}();
function getFirstArrayDuplicate(array) {
  var seenValues = /* @__PURE__ */ new Set();
  for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {
    var entry = array_1[_i];
    if (seenValues.has(entry)) {
      return entry;
    } else {
      seenValues.add(entry);
    }
  }
  return void 0;
}
function targetIsConstructorFunction(target) {
  return target.prototype !== void 0;
}
function _throwIfMethodParameter(parameterName) {
  if (parameterName !== void 0) {
    throw new Error(INVALID_DECORATOR_OPERATION);
  }
}
function tagParameter(annotationTarget, parameterName, parameterIndex, metadata) {
  _throwIfMethodParameter(parameterName);
  _tagParameterOrProperty(TAGGED, annotationTarget, parameterIndex.toString(), metadata);
}
function tagProperty(annotationTarget, propertyName, metadata) {
  if (targetIsConstructorFunction(annotationTarget)) {
    throw new Error(INVALID_DECORATOR_OPERATION);
  }
  _tagParameterOrProperty(TAGGED_PROP, annotationTarget.constructor, propertyName, metadata);
}
function _ensureNoMetadataKeyDuplicates(metadata) {
  var metadatas = [];
  if (Array.isArray(metadata)) {
    metadatas = metadata;
    var duplicate = getFirstArrayDuplicate(metadatas.map(function(md) {
      return md.key;
    }));
    if (duplicate !== void 0) {
      throw new Error(DUPLICATED_METADATA + " " + duplicate.toString());
    }
  } else {
    metadatas = [metadata];
  }
  return metadatas;
}
function _tagParameterOrProperty(metadataKey, annotationTarget, key, metadata) {
  var metadatas = _ensureNoMetadataKeyDuplicates(metadata);
  var paramsOrPropertiesMetadata = {};
  if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {
    paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);
  }
  var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];
  if (paramOrPropertyMetadata === void 0) {
    paramOrPropertyMetadata = [];
  } else {
    var _loop_1 = function(m2) {
      if (metadatas.some(function(md) {
        return md.key === m2.key;
      })) {
        throw new Error(DUPLICATED_METADATA + " " + m2.key.toString());
      }
    };
    for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {
      var m = paramOrPropertyMetadata_1[_i];
      _loop_1(m);
    }
  }
  paramOrPropertyMetadata.push.apply(paramOrPropertyMetadata, metadatas);
  paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;
  Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);
}
function createTaggedDecorator(metadata) {
  return function(target, targetKey, indexOrPropertyDescriptor) {
    if (typeof indexOrPropertyDescriptor === "number") {
      tagParameter(target, targetKey, indexOrPropertyDescriptor, metadata);
    } else {
      tagProperty(target, targetKey, metadata);
    }
  };
}
function injectable() {
  return function(target) {
    if (Reflect.hasOwnMetadata(PARAM_TYPES, target)) {
      throw new Error(DUPLICATED_INJECTABLE_DECORATOR);
    }
    var types = Reflect.getMetadata(DESIGN_PARAM_TYPES, target) || [];
    Reflect.defineMetadata(PARAM_TYPES, types, target);
    return target;
  };
}
function injectBase(metadataKey) {
  return function(serviceIdentifier) {
    return function(target, targetKey, indexOrPropertyDescriptor) {
      if (serviceIdentifier === void 0) {
        var className = typeof target === "function" ? target.name : target.constructor.name;
        throw new Error(UNDEFINED_INJECT_ANNOTATION(className));
      }
      return createTaggedDecorator(new Metadata(metadataKey, serviceIdentifier))(target, targetKey, indexOrPropertyDescriptor);
    };
  };
}
var inject = injectBase(INJECT_TAG);
const PLUGIN_SYSTEM_AUTO_UPDATE = "PLUGIN_SYSTEM_AUTO_UPDATE";
const PLUGIN_SYSTEM_PLUGIN = "PLUGIN_SYSTEM_PLUGIN";
const PLUGIN_SYSTEM_THIRD_PARTY_PLUGIN = "PLUGIN_SYSTEM_THIRD_PARTY_PLUGIN";
const PLUGIN_SYSTEM_SAFE_MODE_ENABLED = "PLUGIN_SYSTEM_SAFE_MODE_ENABLED";
const PLUGIN_STORE_URL = "PLUGIN_STORE_URL";
const defaultConfig = {
  [PLUGIN_SYSTEM_SAFE_MODE_ENABLED]: true,
  [PLUGIN_SYSTEM_AUTO_UPDATE]: true,
  [PLUGIN_SYSTEM_PLUGIN]: [{ key: "setting", enabled: true }],
  [PLUGIN_SYSTEM_THIRD_PARTY_PLUGIN]: [],
  [PLUGIN_STORE_URL]: "https://bitbucket.org/hi-windom/sillot-plugins/raw/main/"
};
function noop() {
}
function assign(tar, src) {
  for (const k2 in src)
    tar[k2] = src[k2];
  return tar;
}
function run(fn) {
  return fn();
}
function blank_object() {
  return /* @__PURE__ */ Object.create(null);
}
function run_all(fns) {
  fns.forEach(run);
}
function is_function(thing) {
  return typeof thing === "function";
}
function safe_not_equal(a2, b2) {
  return a2 != a2 ? b2 == b2 : a2 !== b2 || (a2 && typeof a2 === "object" || typeof a2 === "function");
}
function is_empty(obj) {
  return Object.keys(obj).length === 0;
}
function create_slot(definition, ctx, $$scope, fn) {
  if (definition) {
    const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);
    return definition[0](slot_ctx);
  }
}
function get_slot_context(definition, ctx, $$scope, fn) {
  return definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;
}
function get_slot_changes(definition, $$scope, dirty, fn) {
  if (definition[2] && fn) {
    const lets = definition[2](fn(dirty));
    if ($$scope.dirty === void 0) {
      return lets;
    }
    if (typeof lets === "object") {
      const merged = [];
      const len = Math.max($$scope.dirty.length, lets.length);
      for (let i = 0; i < len; i += 1) {
        merged[i] = $$scope.dirty[i] | lets[i];
      }
      return merged;
    }
    return $$scope.dirty | lets;
  }
  return $$scope.dirty;
}
function update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {
  if (slot_changes) {
    const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);
    slot.p(slot_context, slot_changes);
  }
}
function get_all_dirty_from_scope($$scope) {
  if ($$scope.ctx.length > 32) {
    const dirty = [];
    const length = $$scope.ctx.length / 32;
    for (let i = 0; i < length; i++) {
      dirty[i] = -1;
    }
    return dirty;
  }
  return -1;
}
function null_to_empty(value) {
  return value == null ? "" : value;
}
function append(target, node) {
  target.appendChild(node);
}
function insert(target, node, anchor) {
  target.insertBefore(node, anchor || null);
}
function detach(node) {
  if (node.parentNode) {
    node.parentNode.removeChild(node);
  }
}
function destroy_each(iterations, detaching) {
  for (let i = 0; i < iterations.length; i += 1) {
    if (iterations[i])
      iterations[i].d(detaching);
  }
}
function element(name2) {
  return document.createElement(name2);
}
function svg_element(name2) {
  return document.createElementNS("http://www.w3.org/2000/svg", name2);
}
function text(data) {
  return document.createTextNode(data);
}
function space() {
  return text(" ");
}
function empty() {
  return text("");
}
function listen(node, event, handler, options) {
  node.addEventListener(event, handler, options);
  return () => node.removeEventListener(event, handler, options);
}
function attr(node, attribute, value) {
  if (value == null)
    node.removeAttribute(attribute);
  else if (node.getAttribute(attribute) !== value)
    node.setAttribute(attribute, value);
}
function xlink_attr(node, attribute, value) {
  node.setAttributeNS("http://www.w3.org/1999/xlink", attribute, value);
}
function children(element2) {
  return Array.from(element2.childNodes);
}
function set_data(text2, data) {
  data = "" + data;
  if (text2.wholeText !== data)
    text2.data = data;
}
function set_input_value(input, value) {
  input.value = value == null ? "" : value;
}
function set_style(node, key, value, important) {
  if (value === null) {
    node.style.removeProperty(key);
  } else {
    node.style.setProperty(key, value, important ? "important" : "");
  }
}
function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {
  const e = document.createEvent("CustomEvent");
  e.initCustomEvent(type, bubbles, cancelable, detail);
  return e;
}
class HtmlTag {
  constructor(is_svg = false) {
    this.is_svg = false;
    this.is_svg = is_svg;
    this.e = this.n = null;
  }
  c(html) {
    this.h(html);
  }
  m(html, target, anchor = null) {
    if (!this.e) {
      if (this.is_svg)
        this.e = svg_element(target.nodeName);
      else
        this.e = element(target.nodeName);
      this.t = target;
      this.c(html);
    }
    this.i(anchor);
  }
  h(html) {
    this.e.innerHTML = html;
    this.n = Array.from(this.e.childNodes);
  }
  i(anchor) {
    for (let i = 0; i < this.n.length; i += 1) {
      insert(this.t, this.n[i], anchor);
    }
  }
  p(html) {
    this.d();
    this.h(html);
    this.i(this.a);
  }
  d() {
    this.n.forEach(detach);
  }
}
function construct_svelte_component(component, props) {
  return new component(props);
}
let current_component;
function set_current_component(component) {
  current_component = component;
}
function get_current_component() {
  if (!current_component)
    throw new Error("Function called outside component initialization");
  return current_component;
}
function onMount(fn) {
  get_current_component().$$.on_mount.push(fn);
}
function createEventDispatcher() {
  const component = get_current_component();
  return (type, detail, { cancelable = false } = {}) => {
    const callbacks = component.$$.callbacks[type];
    if (callbacks) {
      const event = custom_event(type, detail, { cancelable });
      callbacks.slice().forEach((fn) => {
        fn.call(component, event);
      });
      return !event.defaultPrevented;
    }
    return true;
  };
}
const dirty_components = [];
const binding_callbacks = [];
const render_callbacks = [];
const flush_callbacks = [];
const resolved_promise = Promise.resolve();
let update_scheduled = false;
function schedule_update() {
  if (!update_scheduled) {
    update_scheduled = true;
    resolved_promise.then(flush);
  }
}
function add_render_callback(fn) {
  render_callbacks.push(fn);
}
const seen_callbacks = /* @__PURE__ */ new Set();
let flushidx = 0;
function flush() {
  if (flushidx !== 0) {
    return;
  }
  const saved_component = current_component;
  do {
    try {
      while (flushidx < dirty_components.length) {
        const component = dirty_components[flushidx];
        flushidx++;
        set_current_component(component);
        update(component.$$);
      }
    } catch (e) {
      dirty_components.length = 0;
      flushidx = 0;
      throw e;
    }
    set_current_component(null);
    dirty_components.length = 0;
    flushidx = 0;
    while (binding_callbacks.length)
      binding_callbacks.pop()();
    for (let i = 0; i < render_callbacks.length; i += 1) {
      const callback = render_callbacks[i];
      if (!seen_callbacks.has(callback)) {
        seen_callbacks.add(callback);
        callback();
      }
    }
    render_callbacks.length = 0;
  } while (dirty_components.length);
  while (flush_callbacks.length) {
    flush_callbacks.pop()();
  }
  update_scheduled = false;
  seen_callbacks.clear();
  set_current_component(saved_component);
}
function update($$) {
  if ($$.fragment !== null) {
    $$.update();
    run_all($$.before_update);
    const dirty = $$.dirty;
    $$.dirty = [-1];
    $$.fragment && $$.fragment.p($$.ctx, dirty);
    $$.after_update.forEach(add_render_callback);
  }
}
const outroing = /* @__PURE__ */ new Set();
let outros;
function group_outros() {
  outros = {
    r: 0,
    c: [],
    p: outros
    // parent group
  };
}
function check_outros() {
  if (!outros.r) {
    run_all(outros.c);
  }
  outros = outros.p;
}
function transition_in(block, local) {
  if (block && block.i) {
    outroing.delete(block);
    block.i(local);
  }
}
function transition_out(block, local, detach2, callback) {
  if (block && block.o) {
    if (outroing.has(block))
      return;
    outroing.add(block);
    outros.c.push(() => {
      outroing.delete(block);
      if (callback) {
        if (detach2)
          block.d(1);
        callback();
      }
    });
    block.o(local);
  } else if (callback) {
    callback();
  }
}
function create_component(block) {
  block && block.c();
}
function mount_component(component, target, anchor, customElement) {
  const { fragment, after_update } = component.$$;
  fragment && fragment.m(target, anchor);
  if (!customElement) {
    add_render_callback(() => {
      const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);
      if (component.$$.on_destroy) {
        component.$$.on_destroy.push(...new_on_destroy);
      } else {
        run_all(new_on_destroy);
      }
      component.$$.on_mount = [];
    });
  }
  after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
  const $$ = component.$$;
  if ($$.fragment !== null) {
    run_all($$.on_destroy);
    $$.fragment && $$.fragment.d(detaching);
    $$.on_destroy = $$.fragment = null;
    $$.ctx = [];
  }
}
function make_dirty(component, i) {
  if (component.$$.dirty[0] === -1) {
    dirty_components.push(component);
    schedule_update();
    component.$$.dirty.fill(0);
  }
  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;
}
function init(component, options, instance2, create_fragment2, not_equal, props, append_styles, dirty = [-1]) {
  const parent_component = current_component;
  set_current_component(component);
  const $$ = component.$$ = {
    fragment: null,
    ctx: [],
    // state
    props,
    update: noop,
    not_equal,
    bound: blank_object(),
    // lifecycle
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),
    // everything else
    callbacks: blank_object(),
    dirty,
    skip_bound: false,
    root: options.target || parent_component.$$.root
  };
  append_styles && append_styles($$.root);
  let ready = false;
  $$.ctx = instance2 ? instance2(component, options.props || {}, (i, ret, ...rest) => {
    const value = rest.length ? rest[0] : ret;
    if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
      if (!$$.skip_bound && $$.bound[i])
        $$.bound[i](value);
      if (ready)
        make_dirty(component, i);
    }
    return ret;
  }) : [];
  $$.update();
  ready = true;
  run_all($$.before_update);
  $$.fragment = create_fragment2 ? create_fragment2($$.ctx) : false;
  if (options.target) {
    if (options.hydrate) {
      const nodes = children(options.target);
      $$.fragment && $$.fragment.l(nodes);
      nodes.forEach(detach);
    } else {
      $$.fragment && $$.fragment.c();
    }
    if (options.intro)
      transition_in(component.$$.fragment);
    mount_component(component, options.target, options.anchor, options.customElement);
    flush();
  }
  set_current_component(parent_component);
}
class SvelteComponent {
  $destroy() {
    destroy_component(this, 1);
    this.$destroy = noop;
  }
  $on(type, callback) {
    if (!is_function(callback)) {
      return noop;
    }
    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
    callbacks.push(callback);
    return () => {
      const index = callbacks.indexOf(callback);
      if (index !== -1)
        callbacks.splice(index, 1);
    };
  }
  $set($$props) {
    if (this.$$set && !is_empty($$props)) {
      this.$$.skip_bound = true;
      this.$$set($$props);
      this.$$.skip_bound = false;
    }
  }
}
const commandPanel_svelte_svelte_type_style_lang = "";
function get_each_context$4(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[11] = list[i];
  child_ctx[13] = i;
  return child_ctx;
}
function create_if_block$5(ctx) {
  let each_1_anchor;
  let each_value = (
    /*result*/
    ctx[2]
  );
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block$4(get_each_context$4(ctx, each_value, i));
  }
  return {
    c() {
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      each_1_anchor = empty();
    },
    m(target, anchor) {
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(target, anchor);
      }
      insert(target, each_1_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (dirty & /*currentIndex, onClick, result, _*/
      22) {
        each_value = /*result*/
        ctx2[2];
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context$4(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block$4(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    d(detaching) {
      destroy_each(each_blocks, detaching);
      if (detaching)
        detach(each_1_anchor);
    }
  };
}
function create_if_block_1$4(ctx) {
  let div;
  let t0_value = _("shortcut") + "";
  let t0;
  let t1;
  let t2_value = (
    /*com*/
    ctx[11].shortcut + ""
  );
  let t2;
  return {
    c() {
      div = element("div");
      t0 = text(t0_value);
      t1 = text(": ");
      t2 = text(t2_value);
      attr(div, "class", "command-shortcut svelte-1bq7axd");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, t0);
      append(div, t1);
      append(div, t2);
    },
    p(ctx2, dirty) {
      if (dirty & /*result*/
      4 && t2_value !== (t2_value = /*com*/
      ctx2[11].shortcut + ""))
        set_data(t2, t2_value);
    },
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
function create_each_block$4(ctx) {
  let div;
  let span0;
  let t0_value = (
    /*com*/
    ctx[11].pluginName + ""
  );
  let t0;
  let t1;
  let t2_value = ":";
  let t2;
  let t3;
  let span1;
  let t4_value = (
    /*com*/
    ctx[11].command + ""
  );
  let t4;
  let t5;
  let t6_value = (
    /*com*/
    (ctx[11].description || "") + ""
  );
  let t6;
  let t7;
  let t8;
  let div_class_value;
  let mounted;
  let dispose;
  let if_block = (
    /*com*/
    ctx[11].shortcut && create_if_block_1$4(ctx)
  );
  function click_handler() {
    return (
      /*click_handler*/
      ctx[7](
        /*i*/
        ctx[13]
      )
    );
  }
  return {
    c() {
      div = element("div");
      span0 = element("span");
      t0 = text(t0_value);
      t1 = space();
      t2 = text(t2_value);
      t3 = space();
      span1 = element("span");
      t4 = text(t4_value);
      t5 = space();
      t6 = text(t6_value);
      t7 = space();
      if (if_block)
        if_block.c();
      t8 = space();
      attr(span0, "class", "command-plugin svelte-1bq7axd");
      attr(span1, "class", "command-description");
      attr(div, "class", div_class_value = null_to_empty(
        /*i*/
        ctx[13] === /*currentIndex*/
        ctx[1] ? "command-selected command" : "command"
      ) + " svelte-1bq7axd");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, span0);
      append(span0, t0);
      append(span0, t1);
      append(span0, t2);
      append(div, t3);
      append(div, span1);
      append(span1, t4);
      append(span1, t5);
      append(span1, t6);
      append(div, t7);
      if (if_block)
        if_block.m(div, null);
      append(div, t8);
      if (!mounted) {
        dispose = listen(div, "click", click_handler);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & /*result*/
      4 && t0_value !== (t0_value = /*com*/
      ctx[11].pluginName + ""))
        set_data(t0, t0_value);
      if (dirty & /*result*/
      4 && t4_value !== (t4_value = /*com*/
      ctx[11].command + ""))
        set_data(t4, t4_value);
      if (dirty & /*result*/
      4 && t6_value !== (t6_value = /*com*/
      (ctx[11].description || "") + ""))
        set_data(t6, t6_value);
      if (
        /*com*/
        ctx[11].shortcut
      ) {
        if (if_block) {
          if_block.p(ctx, dirty);
        } else {
          if_block = create_if_block_1$4(ctx);
          if_block.c();
          if_block.m(div, t8);
        }
      } else if (if_block) {
        if_block.d(1);
        if_block = null;
      }
      if (dirty & /*currentIndex*/
      2 && div_class_value !== (div_class_value = null_to_empty(
        /*i*/
        ctx[13] === /*currentIndex*/
        ctx[1] ? "command-selected command" : "command"
      ) + " svelte-1bq7axd")) {
        attr(div, "class", div_class_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(div);
      if (if_block)
        if_block.d();
      mounted = false;
      dispose();
    }
  };
}
function create_fragment$7(ctx) {
  let div1;
  let div0;
  let svg;
  let path;
  let t0;
  let input;
  let t1;
  let mounted;
  let dispose;
  let if_block = (
    /*result*/
    ctx[2] && create_if_block$5(ctx)
  );
  return {
    c() {
      div1 = element("div");
      div0 = element("div");
      svg = svg_element("svg");
      path = svg_element("path");
      t0 = space();
      input = element("input");
      t1 = space();
      if (if_block)
        if_block.c();
      attr(path, "d", "M64 112v800h896V112H64z m846 750H114V162h796v700zM234.6 688.8L411.3 512 234.6 335.2l35.4-35.4L482.1 512 269.9 724.1l-35.3-35.3z m554.8-10.2h-300v-50h300v50z");
      set_style(svg, "left", "14px");
      attr(svg, "class", "b3-form__icon-icon");
      attr(svg, "viewBox", "0 0 1024 1024");
      attr(svg, "version", "1.1");
      attr(svg, "xmlns", "http://www.w3.org/2000/svg");
      attr(svg, "width", "200");
      attr(svg, "height", "200");
      attr(input, "id", "commandPanelInput");
      attr(input, "class", "b3-text-field b3-text-field--text fn__block b3-form__icon-input");
      attr(div0, "class", "b3-form__icon search__header");
      attr(div1, "class", "fn__flex-column");
      set_style(div1, "border-radius", "4px");
      set_style(div1, "overflow", "hidden");
      set_style(div1, "position", "relative");
      set_style(div1, "width", "max(80vw, 1000px)");
    },
    m(target, anchor) {
      insert(target, div1, anchor);
      append(div1, div0);
      append(div0, svg);
      append(svg, path);
      append(div0, t0);
      append(div0, input);
      set_input_value(
        input,
        /*command*/
        ctx[0]
      );
      append(div1, t1);
      if (if_block)
        if_block.m(div1, null);
      if (!mounted) {
        dispose = [
          listen(
            input,
            "input",
            /*input_input_handler*/
            ctx[6]
          ),
          listen(
            input,
            "keydown",
            /*onkeypress*/
            ctx[3]
          )
        ];
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & /*command*/
      1 && input.value !== /*command*/
      ctx2[0]) {
        set_input_value(
          input,
          /*command*/
          ctx2[0]
        );
      }
      if (
        /*result*/
        ctx2[2]
      ) {
        if (if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block = create_if_block$5(ctx2);
          if_block.c();
          if_block.m(div1, null);
        }
      } else if (if_block) {
        if_block.d(1);
        if_block = null;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div1);
      if (if_block)
        if_block.d();
      mounted = false;
      run_all(dispose);
    }
  };
}
function instance$7($$self, $$props, $$invalidate) {
  const commandManager = container.get("CommandManager");
  let commands = [];
  let command = "";
  let currentIndex = 0;
  let result = [];
  const onkeypress = (e) => {
    if (e.keyCode === 13) {
      onEnter();
      return;
    }
    if (e.keyCode === 38) {
      e.preventDefault();
      if (currentIndex === 0) {
        return;
      }
      $$invalidate(1, currentIndex--, currentIndex);
      return;
    }
    if (e.keyCode === 40) {
      const len = result.length;
      e.preventDefault();
      if (currentIndex >= len - 1) {
        return;
      }
      $$invalidate(1, currentIndex++, currentIndex);
    }
  };
  const onEnter = () => {
    const com = result[currentIndex];
    Dialog.destroyAll();
    com.callback();
  };
  const onClick = (i) => {
    $$invalidate(1, currentIndex = i);
    onEnter();
  };
  const hasContent = (v, c) => v && v.toLowerCase().indexOf(c.toLowerCase()) >= 0;
  onMount(() => {
    $$invalidate(5, commands = commandManager.getCommands());
    const el = document.getElementById("commandPanelInput");
    el.focus();
  });
  function input_input_handler() {
    command = this.value;
    $$invalidate(0, command);
  }
  const click_handler = (i) => onClick(i);
  $$self.$$.update = () => {
    if ($$self.$$.dirty & /*command, commands*/
    33) {
      {
        $$invalidate(1, currentIndex = 0);
        if (!command) {
          $$invalidate(2, result = commands);
        } else {
          $$invalidate(2, result = commands.filter((c) => {
            return hasContent(c.plugin, command) || hasContent(c.pluginName, command) || hasContent(c.command, command) || hasContent(c.description, command);
          }));
        }
      }
    }
  };
  return [
    command,
    currentIndex,
    result,
    onkeypress,
    onClick,
    commands,
    input_input_handler,
    click_handler
  ];
}
class Command_panel extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$7, create_fragment$7, safe_not_equal, {});
  }
}
class CommandPanelPlugin extends Plugin {
  onload() {
    this.registerCommand({
      command: "Show command panel",
      description: _("show_command_panel"),
      shortcut: "ctrl+shift+o,command+shift+o",
      callback: () => {
        this.showPanel();
      }
    });
  }
  showPanel() {
    Dialog.destroyAll();
    new Dialog({ content: '<div id="command-panel"></div>' });
    setImmediate(() => {
      new Command_panel({
        target: document.getElementById("command-panel")
      });
    });
  }
}
function get_each_context$3(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[5] = list[i];
  child_ctx[6] = list;
  child_ctx[7] = i;
  return child_ctx;
}
function create_if_block_1$3(ctx) {
  let input;
  let mounted;
  let dispose;
  function input_input_handler() {
    ctx[2].call(
      input,
      /*each_value*/
      ctx[6],
      /*config_index*/
      ctx[7]
    );
  }
  return {
    c() {
      input = element("input");
      attr(input, "class", "b3-text-field fn__flex-center fn__size200");
      attr(input, "type", "input");
    },
    m(target, anchor) {
      insert(target, input, anchor);
      set_input_value(
        input,
        /*config*/
        ctx[5].value
      );
      if (!mounted) {
        dispose = [
          listen(input, "input", input_input_handler),
          listen(input, "change", function() {
            if (is_function(
              /*config*/
              ctx[5].onChange
            ))
              ctx[5].onChange.apply(this, arguments);
          })
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & /*configs*/
      1) {
        set_input_value(
          input,
          /*config*/
          ctx[5].value
        );
      }
    },
    d(detaching) {
      if (detaching)
        detach(input);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_if_block$4(ctx) {
  let input;
  let mounted;
  let dispose;
  function input_change_handler() {
    ctx[1].call(
      input,
      /*each_value*/
      ctx[6],
      /*config_index*/
      ctx[7]
    );
  }
  return {
    c() {
      input = element("input");
      attr(input, "class", "b3-switch fn__flex-center");
      attr(input, "type", "checkbox");
    },
    m(target, anchor) {
      insert(target, input, anchor);
      input.checked = /*config*/
      ctx[5].checked;
      if (!mounted) {
        dispose = [
          listen(input, "change", input_change_handler),
          listen(input, "change", function() {
            if (is_function(
              /*config*/
              ctx[5].onChange
            ))
              ctx[5].onChange.apply(this, arguments);
          })
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & /*configs*/
      1) {
        input.checked = /*config*/
        ctx[5].checked;
      }
    },
    d(detaching) {
      if (detaching)
        detach(input);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_each_block$3(ctx) {
  let label;
  let div1;
  let t0_value = (
    /*config*/
    ctx[5].label + ""
  );
  let t0;
  let t1;
  let div0;
  let t2_value = (
    /*config*/
    ctx[5].tip + ""
  );
  let t2;
  let t3;
  let span;
  let t4;
  let t5;
  function select_block_type(ctx2, dirty) {
    if (
      /*config*/
      ctx2[5].type === "checkbox"
    )
      return create_if_block$4;
    if (
      /*config*/
      ctx2[5].type === "input"
    )
      return create_if_block_1$3;
  }
  let current_block_type = select_block_type(ctx);
  let if_block = current_block_type && current_block_type(ctx);
  return {
    c() {
      label = element("label");
      div1 = element("div");
      t0 = text(t0_value);
      t1 = space();
      div0 = element("div");
      t2 = text(t2_value);
      t3 = space();
      span = element("span");
      t4 = space();
      if (if_block)
        if_block.c();
      t5 = space();
      attr(div0, "class", "b3-label__text");
      attr(div1, "class", "fn__flex-1");
      attr(span, "class", "fn__space");
      attr(label, "class", "fn__flex b3-label config__item");
    },
    m(target, anchor) {
      insert(target, label, anchor);
      append(label, div1);
      append(div1, t0);
      append(div1, t1);
      append(div1, div0);
      append(div0, t2);
      append(label, t3);
      append(label, span);
      append(label, t4);
      if (if_block)
        if_block.m(label, null);
      append(label, t5);
    },
    p(ctx2, dirty) {
      if (dirty & /*configs*/
      1 && t0_value !== (t0_value = /*config*/
      ctx2[5].label + ""))
        set_data(t0, t0_value);
      if (dirty & /*configs*/
      1 && t2_value !== (t2_value = /*config*/
      ctx2[5].tip + ""))
        set_data(t2, t2_value);
      if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block) {
        if_block.p(ctx2, dirty);
      } else {
        if (if_block)
          if_block.d(1);
        if_block = current_block_type && current_block_type(ctx2);
        if (if_block) {
          if_block.c();
          if_block.m(label, t5);
        }
      }
    },
    d(detaching) {
      if (detaching)
        detach(label);
      if (if_block) {
        if_block.d();
      }
    }
  };
}
function create_fragment$6(ctx) {
  let each_1_anchor;
  let each_value = (
    /*configs*/
    ctx[0]
  );
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block$3(get_each_context$3(ctx, each_value, i));
  }
  return {
    c() {
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      each_1_anchor = empty();
    },
    m(target, anchor) {
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(target, anchor);
      }
      insert(target, each_1_anchor, anchor);
    },
    p(ctx2, [dirty]) {
      if (dirty & /*configs*/
      1) {
        each_value = /*configs*/
        ctx2[0];
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context$3(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block$3(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      destroy_each(each_blocks, detaching);
      if (detaching)
        detach(each_1_anchor);
    }
  };
}
function instance$6($$self, $$props, $$invalidate) {
  const storageManager = container.get(TYPES.StorageManager);
  const pluginSystem = container.get(TYPES.PluginSystem);
  let configs = [
    {
      label: _("safemode"),
      tip: _("safemodetip"),
      checked: true,
      type: "checkbox",
      onChange: (event) => {
        const checked = event.target.checked;
        if (checked) {
          pluginSystem.turnOnSafeMode();
        } else {
          pluginSystem.turnOffSafeMode();
        }
      }
    },
    // {
    //     label: _('autoupgrade'),
    //     tip: _('autoupgradetip'),
    //     checked: true,
    //     type: 'checkbox',
    //     onChange: (event) => {
    //         storageManager.set(PLUGIN_SYSTEM_AUTO_UPDATE, event.target.checked);
    //     },
    // },
    {
      label: _("store_url"),
      tip: `${_("store_url_tip")} ${defaultConfig.PLUGIN_STORE_URL}`,
      type: "input",
      value: storageManager.get(PLUGIN_STORE_URL),
      onChange: (event) => {
        storageManager.set(PLUGIN_STORE_URL, event.target.value);
      }
    }
  ];
  onMount(() => {
    const securityMode = storageManager.get(PLUGIN_SYSTEM_SAFE_MODE_ENABLED);
    $$invalidate(0, configs[0].checked = securityMode, configs);
    const autoUpdate = storageManager.get(PLUGIN_SYSTEM_AUTO_UPDATE);
    $$invalidate(0, configs[1].checked = autoUpdate, configs);
  });
  function input_change_handler(each_value, config_index) {
    each_value[config_index].checked = this.checked;
    $$invalidate(0, configs);
  }
  function input_input_handler(each_value, config_index) {
    each_value[config_index].value = this.value;
    $$invalidate(0, configs);
  }
  return [configs, input_change_handler, input_input_handler];
}
class Setting_common extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$6, create_fragment$6, safe_not_equal, {});
  }
}
const settingList_svelte_svelte_type_style_lang = "";
function get_each_context$2(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[10] = list[i];
  child_ctx[11] = list;
  child_ctx[12] = i;
  return child_ctx;
}
function create_if_block$3(ctx) {
  let label;
  let div1;
  let t0_value = (
    /*plugin*/
    ctx[10].name + ""
  );
  let t0;
  let t1;
  let t2_value = (
    /*plugin*/
    ctx[10].version + ""
  );
  let t2;
  let t3;
  let span0;
  let t5;
  let div0;
  let t6_value = (
    /*plugin*/
    (ctx[10].description || _("nodescription")) + ""
  );
  let t6;
  let t7;
  let span1;
  let t8;
  let input;
  let t9;
  let mounted;
  let dispose;
  function click_handler(...args) {
    return (
      /*click_handler*/
      ctx[4](
        /*plugin*/
        ctx[10],
        ...args
      )
    );
  }
  function input_change_handler() {
    ctx[5].call(
      input,
      /*each_value*/
      ctx[11],
      /*plugin_index*/
      ctx[12]
    );
  }
  return {
    c() {
      label = element("label");
      div1 = element("div");
      t0 = text(t0_value);
      t1 = space();
      t2 = text(t2_value);
      t3 = space();
      span0 = element("span");
      span0.textContent = `${_("uninstall")}`;
      t5 = space();
      div0 = element("div");
      t6 = text(t6_value);
      t7 = space();
      span1 = element("span");
      t8 = space();
      input = element("input");
      t9 = space();
      attr(span0, "class", "remove svelte-bwhxpp");
      attr(div0, "class", "b3-label__text");
      attr(div1, "class", "plugin fn__flex-1 svelte-bwhxpp");
      attr(span1, "class", "fn__space");
      attr(input, "class", "b3-switch fn__flex-center");
      attr(input, "id", "fullWidth");
      attr(input, "type", "checkbox");
      attr(label, "class", "fn__flex b3-label");
    },
    m(target, anchor) {
      insert(target, label, anchor);
      append(label, div1);
      append(div1, t0);
      append(div1, t1);
      append(div1, t2);
      append(div1, t3);
      append(div1, span0);
      append(div1, t5);
      append(div1, div0);
      append(div0, t6);
      append(label, t7);
      append(label, span1);
      append(label, t8);
      append(label, input);
      input.checked = /*plugin*/
      ctx[10].enabled;
      append(label, t9);
      if (!mounted) {
        dispose = [
          listen(span0, "click", click_handler),
          listen(input, "change", input_change_handler),
          listen(input, "change", function() {
            if (is_function(
              /*onPluginEnabledChange*/
              ctx[1](
                /*plugin*/
                ctx[10].key
              )
            ))
              ctx[1](
                /*plugin*/
                ctx[10].key
              ).apply(this, arguments);
          })
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & /*outsidePlugins*/
      1 && t0_value !== (t0_value = /*plugin*/
      ctx[10].name + ""))
        set_data(t0, t0_value);
      if (dirty & /*outsidePlugins*/
      1 && t2_value !== (t2_value = /*plugin*/
      ctx[10].version + ""))
        set_data(t2, t2_value);
      if (dirty & /*outsidePlugins*/
      1 && t6_value !== (t6_value = /*plugin*/
      (ctx[10].description || _("nodescription")) + ""))
        set_data(t6, t6_value);
      if (dirty & /*outsidePlugins*/
      1) {
        input.checked = /*plugin*/
        ctx[10].enabled;
      }
    },
    d(detaching) {
      if (detaching)
        detach(label);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_each_block$2(ctx) {
  let if_block_anchor;
  let if_block = !/*plugin*/
  ctx[10].hidden && create_if_block$3(ctx);
  return {
    c() {
      if (if_block)
        if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if (if_block)
        if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (!/*plugin*/
      ctx2[10].hidden) {
        if (if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block = create_if_block$3(ctx2);
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      } else if (if_block) {
        if_block.d(1);
        if_block = null;
      }
    },
    d(detaching) {
      if (if_block)
        if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_fragment$5(ctx) {
  let label;
  let div;
  let each_value = (
    /*outsidePlugins*/
    ctx[0]
  );
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block$2(get_each_context$2(ctx, each_value, i));
  }
  return {
    c() {
      label = element("label");
      div = element("div");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      attr(div, "class", "fn__flex-1");
      attr(label, "class", "b3-label fn__flex");
    },
    m(target, anchor) {
      insert(target, label, anchor);
      append(label, div);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(div, null);
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & /*outsidePlugins, onPluginEnabledChange, _, uninstall*/
      7) {
        each_value = /*outsidePlugins*/
        ctx2[0];
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context$2(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block$2(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(div, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(label);
      destroy_each(each_blocks, detaching);
    }
  };
}
function instance$5($$self, $$props, $$invalidate) {
  let outsidePlugins;
  const storageManager = container.get(TYPES.StorageManager);
  const pluginSystem = container.get(TYPES.PluginSystem);
  let plugins = [];
  const loadPlugins = () => {
    $$invalidate(3, plugins = storageManager.getPlugins());
  };
  const dispatcher = createEventDispatcher();
  const onPluginEnabledChange = (key) => async (event) => {
    const safeMode = storageManager.get(PLUGIN_SYSTEM_SAFE_MODE_ENABLED);
    const checked = event.target.checked;
    await storageManager.setPluginEnabled(key, checked);
    if (safeMode) {
      return;
    }
    if (checked) {
      pluginSystem.loadPlugin(key);
    } else {
      pluginSystem.unloadPlugin(key);
    }
    dispatcher("update");
  };
  const uninstall2 = async (key, event) => {
    event.preventDefault();
    event.stopPropagation();
    await pluginSystem.unloadPlugin(key);
    await storageManager.uninstallPlugin(key);
    await storageManager.initStorage();
    loadPlugins();
  };
  onMount(async () => {
    await storageManager.initStorage();
    loadPlugins();
  });
  const click_handler = (plugin2, event) => uninstall2(plugin2.key, event);
  function input_change_handler(each_value, plugin_index) {
    each_value[plugin_index].enabled = this.checked;
    $$invalidate(0, outsidePlugins), $$invalidate(3, plugins);
  }
  $$self.$$.update = () => {
    if ($$self.$$.dirty & /*plugins*/
    8) {
      $$invalidate(0, outsidePlugins = plugins.filter((p) => p.script));
    }
  };
  return [
    outsidePlugins,
    onPluginEnabledChange,
    uninstall2,
    plugins,
    click_handler,
    input_change_handler
  ];
}
class Setting_list extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$5, create_fragment$5, safe_not_equal, {});
  }
}
var __defProp$9 = Object.defineProperty;
var __getOwnPropDesc$9 = Object.getOwnPropertyDescriptor;
var __decorateClass$9 = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$9(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp$9(target, key, result);
  return result;
};
var __decorateParam$6 = (index, decorator) => (target, key) => decorator(target, key, index);
let Store = class {
  constructor(storageManager) {
    this.storageManager = storageManager;
    this.plugins = [];
    this.pluginStatus = [];
  }
  async init() {
    this.plugins = [];
    this.pluginStatus = [];
    await Promise.all([this.loadPluginsFromUrl(), this.storageManager.initStorage()]);
    const plugins = this.storageManager.getPlugins();
    const storePlugins = [];
    for (const plugin2 of this.plugins) {
      const p = { ...plugin2, isExist: false, needUpgrade: false };
      plugins.find((p2) => p2.key === plugin2.key);
      storePlugins.push(p);
    }
    this.pluginStatus = storePlugins;
  }
  getStoreUrl() {
    return this.storageManager.get(PLUGIN_STORE_URL);
  }
  getPlugins() {
    return this.plugins;
  }
  async loadPlugins() {
    await this.init();
    return this.getPluginsWithStatus();
  }
  getPluginsWithStatus() {
    return this.pluginStatus;
  }
  async loadPluginsFromUrl() {
    var _a2, _b;
    const storeUrl = this.getStoreUrl();
    if (!storeUrl) {
      return;
    }
    let res;
    try {
      res = await request.get(storeUrl + "/plugins.json", {
        headers: {
          "Cache-Control": "no-cache"
        }
      });
    } catch (e) {
      console.error(e);
      return;
    }
    const req = [];
    if (Array.isArray((_a2 = res.data) == null ? void 0 : _a2.plugins)) {
      for (const pluginKey of ((_b = res.data) == null ? void 0 : _b.plugins) || {}) {
        const plugin2 = this.getPluginManifest(`${storeUrl}/${pluginKey}`);
        req.push(plugin2);
      }
    }
    this.plugins = await Promise.all(req);
  }
  async getPluginByUrl(url2) {
    return Promise.all([this.getPluginManifest(url2), this.getPluginMainJs(url2)]).then((value) => {
      return {
        manifest: value[0],
        mainJs: value[1]
      };
    });
  }
  async getPluginManifest(url2) {
    try {
      const manifest = await request.get(`${url2}/manifest.json`, {
        headers: {
          "Content-Type": "application/json",
          "Cache-Control": "no-cache"
        }
      });
      return manifest.data;
    } catch (e) {
      console.error(e);
      return null;
    }
  }
  async getPluginMainJs(url2) {
    try {
      const res = await request.get(`${url2}/main.js`, {
        headers: {
          "Content-Type": "text/plain",
          "Cache-Control": "no-cache"
        }
      });
      return res.data;
    } catch (e) {
      console.error(e);
      return null;
    }
  }
  async getPluginReadme(key) {
    const url2 = `${this.getStoreUrl()}/${key}`;
    try {
      const res = await request.get(`${url2}/README.md`, {
        headers: {
          "Content-Type": "text/plain",
          "Cache-Control": "no-cache"
        }
      });
      return res.data;
    } catch (e) {
      console.error(e);
      return null;
    }
  }
  async downloadPlugin(key) {
    await sleep(500);
    const files = await this.getPluginByUrl(`${this.getStoreUrl()}/${key}`);
    const manifestJson = files.manifest;
    const mainJs = files.mainJs;
    return await Promise.all([
      FileClient.getInstanceApi().fileApi.putFile(`/data/plugins/${key}`, null, true),
      FileClient.getInstanceApi().fileApi.putFile(`/data/plugins/${key}/manifest.json`, JSON.stringify(manifestJson), false),
      FileClient.getInstanceApi().fileApi.putFile(`/data/plugins/${key}/main.js`, mainJs, false)
    ]);
  }
};
Store = __decorateClass$9([
  injectable(),
  __decorateParam$6(0, inject(TYPES.StorageManager))
], Store);
function create_fragment$4(ctx) {
  let button;
  let current;
  let mounted;
  let dispose;
  const default_slot_template = (
    /*#slots*/
    ctx[3].default
  );
  const default_slot = create_slot(
    default_slot_template,
    ctx,
    /*$$scope*/
    ctx[2],
    null
  );
  return {
    c() {
      button = element("button");
      if (default_slot)
        default_slot.c();
      button.disabled = /*disabled*/
      ctx[1];
      attr(button, "class", "b3-button");
    },
    m(target, anchor) {
      insert(target, button, anchor);
      if (default_slot) {
        default_slot.m(button, null);
      }
      current = true;
      if (!mounted) {
        dispose = listen(button, "click", function() {
          if (is_function(
            /*onClick*/
            ctx[0]
          ))
            ctx[0].apply(this, arguments);
        });
        mounted = true;
      }
    },
    p(new_ctx, [dirty]) {
      ctx = new_ctx;
      if (default_slot) {
        if (default_slot.p && (!current || dirty & /*$$scope*/
        4)) {
          update_slot_base(
            default_slot,
            default_slot_template,
            ctx,
            /*$$scope*/
            ctx[2],
            !current ? get_all_dirty_from_scope(
              /*$$scope*/
              ctx[2]
            ) : get_slot_changes(
              default_slot_template,
              /*$$scope*/
              ctx[2],
              dirty,
              null
            ),
            null
          );
        }
      }
      if (!current || dirty & /*disabled*/
      2) {
        button.disabled = /*disabled*/
        ctx[1];
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(default_slot, local);
      current = true;
    },
    o(local) {
      transition_out(default_slot, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(button);
      if (default_slot)
        default_slot.d(detaching);
      mounted = false;
      dispose();
    }
  };
}
function instance$4($$self, $$props, $$invalidate) {
  let { $$slots: slots = {}, $$scope } = $$props;
  let { onClick = null } = $$props;
  let { disabled = false } = $$props;
  $$self.$$set = ($$props2) => {
    if ("onClick" in $$props2)
      $$invalidate(0, onClick = $$props2.onClick);
    if ("disabled" in $$props2)
      $$invalidate(1, disabled = $$props2.disabled);
    if ("$$scope" in $$props2)
      $$invalidate(2, $$scope = $$props2.$$scope);
  };
  return [onClick, disabled, $$scope, slots];
}
class Button extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$4, create_fragment$4, safe_not_equal, { onClick: 0, disabled: 1 });
  }
}
const settingPreview_svelte_svelte_type_style_lang = "";
function create_if_block_4$1(ctx) {
  let div;
  let t0_value = _("url") + "";
  let t0;
  let t1;
  let a2;
  let t2_value = (
    /*plugin*/
    ctx[0].url + ""
  );
  let t2;
  let a_href_value;
  return {
    c() {
      div = element("div");
      t0 = text(t0_value);
      t1 = text(": ");
      a2 = element("a");
      t2 = text(t2_value);
      attr(a2, "href", a_href_value = /*plugin*/
      ctx[0].url);
      attr(a2, "target", "_blank");
      attr(a2, "rel", "noreferrer");
      attr(div, "class", "plugin-item");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, t0);
      append(div, t1);
      append(div, a2);
      append(a2, t2);
    },
    p(ctx2, dirty) {
      if (dirty & /*plugin*/
      1 && t2_value !== (t2_value = /*plugin*/
      ctx2[0].url + ""))
        set_data(t2, t2_value);
      if (dirty & /*plugin*/
      1 && a_href_value !== (a_href_value = /*plugin*/
      ctx2[0].url)) {
        attr(a2, "href", a_href_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
function create_if_block_3$1(ctx) {
  let div;
  let t0_value = _("author") + "";
  let t0;
  let t1;
  let t2_value = (
    /*plugin*/
    ctx[0].author + ""
  );
  let t2;
  return {
    c() {
      div = element("div");
      t0 = text(t0_value);
      t1 = text(": ");
      t2 = text(t2_value);
      attr(div, "class", "plugin-item");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, t0);
      append(div, t1);
      append(div, t2);
    },
    p(ctx2, dirty) {
      if (dirty & /*plugin*/
      1 && t2_value !== (t2_value = /*plugin*/
      ctx2[0].author + ""))
        set_data(t2, t2_value);
    },
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
function create_if_block_2$1(ctx) {
  let div;
  let t0_value = _("version") + "";
  let t0;
  let t1;
  let t2_value = (
    /*plugin*/
    ctx[0].version + ""
  );
  let t2;
  return {
    c() {
      div = element("div");
      t0 = text(t0_value);
      t1 = text(": ");
      t2 = text(t2_value);
      attr(div, "class", "plugin-item");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, t0);
      append(div, t1);
      append(div, t2);
    },
    p(ctx2, dirty) {
      if (dirty & /*plugin*/
      1 && t2_value !== (t2_value = /*plugin*/
      ctx2[0].version + ""))
        set_data(t2, t2_value);
    },
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
function create_if_block_1$2(ctx) {
  let div;
  let t0_value = _("description") + "";
  let t0;
  let t1;
  let t2_value = (
    /*plugin*/
    ctx[0].description + ""
  );
  let t2;
  return {
    c() {
      div = element("div");
      t0 = text(t0_value);
      t1 = text(": ");
      t2 = text(t2_value);
      attr(div, "class", "plugin-item");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, t0);
      append(div, t1);
      append(div, t2);
    },
    p(ctx2, dirty) {
      if (dirty & /*plugin*/
      1 && t2_value !== (t2_value = /*plugin*/
      ctx2[0].description + ""))
        set_data(t2, t2_value);
    },
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
function create_else_block$2(ctx) {
  let html_tag;
  let raw_value = (
    /*previewHTML*/
    ctx[2]() + ""
  );
  let html_anchor;
  return {
    c() {
      html_tag = new HtmlTag(false);
      html_anchor = empty();
      html_tag.a = html_anchor;
    },
    m(target, anchor) {
      html_tag.m(raw_value, target, anchor);
      insert(target, html_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (dirty & /*previewHTML*/
      4 && raw_value !== (raw_value = /*previewHTML*/
      ctx2[2]() + ""))
        html_tag.p(raw_value);
    },
    d(detaching) {
      if (detaching)
        detach(html_anchor);
      if (detaching)
        html_tag.d();
    }
  };
}
function create_if_block$2(ctx) {
  let span;
  return {
    c() {
      span = element("span");
      span.textContent = `${_("readme")}`;
    },
    m(target, anchor) {
      insert(target, span, anchor);
    },
    p: noop,
    d(detaching) {
      if (detaching)
        detach(span);
    }
  };
}
function create_fragment$3(ctx) {
  let div6;
  let div4;
  let div2;
  let div0;
  let t0_value = (
    /*plugin*/
    ctx[0].name + ""
  );
  let t0;
  let t1;
  let div1;
  let t2;
  let t3_value = (
    /*plugin*/
    ctx[0].key + ""
  );
  let t3;
  let t4;
  let t5;
  let button;
  let svg;
  let use;
  let t6_value = _("goBack") + "";
  let t6;
  let t7;
  let div3;
  let t8;
  let t9;
  let t10;
  let t11;
  let hr;
  let t12;
  let div5;
  let mounted;
  let dispose;
  let if_block0 = (
    /*plugin*/
    ctx[0].url && create_if_block_4$1(ctx)
  );
  let if_block1 = (
    /*plugin*/
    ctx[0].author && create_if_block_3$1(ctx)
  );
  let if_block2 = (
    /*plugin*/
    ctx[0].version && create_if_block_2$1(ctx)
  );
  let if_block3 = (
    /*plugin*/
    ctx[0].description && create_if_block_1$2(ctx)
  );
  function select_block_type(ctx2, dirty) {
    if (
      /*loading*/
      ctx2[1]
    )
      return create_if_block$2;
    return create_else_block$2;
  }
  let current_block_type = select_block_type(ctx);
  let if_block4 = current_block_type(ctx);
  return {
    c() {
      div6 = element("div");
      div4 = element("div");
      div2 = element("div");
      div0 = element("div");
      t0 = text(t0_value);
      t1 = space();
      div1 = element("div");
      t2 = text("(");
      t3 = text(t3_value);
      t4 = text(")");
      t5 = space();
      button = element("button");
      svg = svg_element("svg");
      use = svg_element("use");
      t6 = text(t6_value);
      t7 = space();
      div3 = element("div");
      if (if_block0)
        if_block0.c();
      t8 = space();
      if (if_block1)
        if_block1.c();
      t9 = space();
      if (if_block2)
        if_block2.c();
      t10 = space();
      if (if_block3)
        if_block3.c();
      t11 = space();
      hr = element("hr");
      t12 = space();
      div5 = element("div");
      if_block4.c();
      attr(div0, "class", "plugin-name svelte-bj9chc");
      attr(div1, "class", "plugin-key svelte-bj9chc");
      xlink_attr(use, "xlink:href", "#iconBack");
      attr(svg, "class", "go-back-icon svelte-bj9chc");
      attr(button, "class", "go-back b3-button svelte-bj9chc");
      attr(div2, "class", "plugin-info svelte-bj9chc");
      attr(div3, "class", "plugin-manifest svelte-bj9chc");
      attr(div4, "class", "plugin-basic");
      attr(div5, "class", "plugin-readme b3-typography svelte-bj9chc");
      attr(div6, "class", "plugin-detail svelte-bj9chc");
    },
    m(target, anchor) {
      insert(target, div6, anchor);
      append(div6, div4);
      append(div4, div2);
      append(div2, div0);
      append(div0, t0);
      append(div2, t1);
      append(div2, div1);
      append(div1, t2);
      append(div1, t3);
      append(div1, t4);
      append(div2, t5);
      append(div2, button);
      append(button, svg);
      append(svg, use);
      append(button, t6);
      append(div4, t7);
      append(div4, div3);
      if (if_block0)
        if_block0.m(div3, null);
      append(div3, t8);
      if (if_block1)
        if_block1.m(div3, null);
      append(div3, t9);
      if (if_block2)
        if_block2.m(div3, null);
      append(div3, t10);
      if (if_block3)
        if_block3.m(div3, null);
      append(div6, t11);
      append(div6, hr);
      append(div6, t12);
      append(div6, div5);
      if_block4.m(div5, null);
      if (!mounted) {
        dispose = listen(
          button,
          "click",
          /*click_handler*/
          ctx[5]
        );
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & /*plugin*/
      1 && t0_value !== (t0_value = /*plugin*/
      ctx2[0].name + ""))
        set_data(t0, t0_value);
      if (dirty & /*plugin*/
      1 && t3_value !== (t3_value = /*plugin*/
      ctx2[0].key + ""))
        set_data(t3, t3_value);
      if (
        /*plugin*/
        ctx2[0].url
      ) {
        if (if_block0) {
          if_block0.p(ctx2, dirty);
        } else {
          if_block0 = create_if_block_4$1(ctx2);
          if_block0.c();
          if_block0.m(div3, t8);
        }
      } else if (if_block0) {
        if_block0.d(1);
        if_block0 = null;
      }
      if (
        /*plugin*/
        ctx2[0].author
      ) {
        if (if_block1) {
          if_block1.p(ctx2, dirty);
        } else {
          if_block1 = create_if_block_3$1(ctx2);
          if_block1.c();
          if_block1.m(div3, t9);
        }
      } else if (if_block1) {
        if_block1.d(1);
        if_block1 = null;
      }
      if (
        /*plugin*/
        ctx2[0].version
      ) {
        if (if_block2) {
          if_block2.p(ctx2, dirty);
        } else {
          if_block2 = create_if_block_2$1(ctx2);
          if_block2.c();
          if_block2.m(div3, t10);
        }
      } else if (if_block2) {
        if_block2.d(1);
        if_block2 = null;
      }
      if (
        /*plugin*/
        ctx2[0].description
      ) {
        if (if_block3) {
          if_block3.p(ctx2, dirty);
        } else {
          if_block3 = create_if_block_1$2(ctx2);
          if_block3.c();
          if_block3.m(div3, null);
        }
      } else if (if_block3) {
        if_block3.d(1);
        if_block3 = null;
      }
      if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block4) {
        if_block4.p(ctx2, dirty);
      } else {
        if_block4.d(1);
        if_block4 = current_block_type(ctx2);
        if (if_block4) {
          if_block4.c();
          if_block4.m(div5, null);
        }
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div6);
      if (if_block0)
        if_block0.d();
      if (if_block1)
        if_block1.d();
      if (if_block2)
        if_block2.d();
      if (if_block3)
        if_block3.d();
      if_block4.d();
      mounted = false;
      dispose();
    }
  };
}
function instance$3($$self, $$props, $$invalidate) {
  let previewHTML;
  const dispatch2 = createEventDispatcher();
  let loading2 = true;
  let { plugin: plugin2 } = $$props;
  const getPluginReadme = async () => {
    $$invalidate(4, readme2 = await container.get("Store").getPluginReadme(plugin2.key));
    $$invalidate(1, loading2 = false);
  };
  let readme2;
  const LuteMdConverter = window.Lute.New();
  onMount(() => {
    getPluginReadme();
  });
  const goBack2 = () => {
    dispatch2("goback");
  };
  const click_handler = () => goBack2();
  $$self.$$set = ($$props2) => {
    if ("plugin" in $$props2)
      $$invalidate(0, plugin2 = $$props2.plugin);
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & /*readme*/
    16) {
      $$invalidate(2, previewHTML = () => {
        return readme2 ? LuteMdConverter.Md2HTML(readme2) : "";
      });
    }
  };
  return [plugin2, loading2, previewHTML, goBack2, readme2, click_handler];
}
class Setting_preview extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$3, create_fragment$3, safe_not_equal, { plugin: 0 });
  }
}
function get_each_context$1(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[11] = list[i];
  return child_ctx;
}
function create_else_block_2(ctx) {
  let settingpreview;
  let current;
  settingpreview = new Setting_preview({
    props: { plugin: (
      /*selectedPlugin*/
      ctx[3]
    ) }
  });
  settingpreview.$on(
    "goback",
    /*goback_handler*/
    ctx[9]
  );
  return {
    c() {
      create_component(settingpreview.$$.fragment);
    },
    m(target, anchor) {
      mount_component(settingpreview, target, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      const settingpreview_changes = {};
      if (dirty & /*selectedPlugin*/
      8)
        settingpreview_changes.plugin = /*selectedPlugin*/
        ctx2[3];
      settingpreview.$set(settingpreview_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(settingpreview.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(settingpreview.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(settingpreview, detaching);
    }
  };
}
function create_if_block_1$1(ctx) {
  let div;
  let current;
  let each_value = (
    /*plugins*/
    ctx[0]
  );
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));
  }
  const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
    each_blocks[i] = null;
  });
  return {
    c() {
      div = element("div");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      attr(div, "class", "fn__flex-1");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(div, null);
      }
      current = true;
    },
    p(ctx2, dirty) {
      if (dirty & /*_, loadingMap, plugins, downloadPlugin, previewPlugin*/
      53) {
        each_value = /*plugins*/
        ctx2[0];
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context$1(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
            transition_in(each_blocks[i], 1);
          } else {
            each_blocks[i] = create_each_block$1(child_ctx);
            each_blocks[i].c();
            transition_in(each_blocks[i], 1);
            each_blocks[i].m(div, null);
          }
        }
        group_outros();
        for (i = each_value.length; i < each_blocks.length; i += 1) {
          out(i);
        }
        check_outros();
      }
    },
    i(local) {
      if (current)
        return;
      for (let i = 0; i < each_value.length; i += 1) {
        transition_in(each_blocks[i]);
      }
      current = true;
    },
    o(local) {
      each_blocks = each_blocks.filter(Boolean);
      for (let i = 0; i < each_blocks.length; i += 1) {
        transition_out(each_blocks[i]);
      }
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      destroy_each(each_blocks, detaching);
    }
  };
}
function create_if_block$1(ctx) {
  let div;
  return {
    c() {
      div = element("div");
      div.textContent = `${_("loading")}`;
    },
    m(target, anchor) {
      insert(target, div, anchor);
    },
    p: noop,
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
function create_else_block_1(ctx) {
  let button;
  let current;
  function func_1() {
    return (
      /*func_1*/
      ctx[8](
        /*plugin*/
        ctx[11]
      )
    );
  }
  button = new Button({
    props: {
      onClick: func_1,
      $$slots: { default: [create_default_slot_3] },
      $$scope: { ctx }
    }
  });
  return {
    c() {
      create_component(button.$$.fragment);
    },
    m(target, anchor) {
      mount_component(button, target, anchor);
      current = true;
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      const button_changes = {};
      if (dirty & /*plugins*/
      1)
        button_changes.onClick = func_1;
      if (dirty & /*$$scope*/
      16384) {
        button_changes.$$scope = { dirty, ctx };
      }
      button.$set(button_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(button.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(button.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(button, detaching);
    }
  };
}
function create_if_block_3(ctx) {
  let current_block_type_index;
  let if_block;
  let if_block_anchor;
  let current;
  const if_block_creators = [create_if_block_4, create_else_block$1];
  const if_blocks = [];
  function select_block_type_2(ctx2, dirty) {
    if (
      /*plugin*/
      ctx2[11].needUpgrade
    )
      return 0;
    return 1;
  }
  current_block_type_index = select_block_type_2(ctx);
  if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_blocks[current_block_type_index].m(target, anchor);
      insert(target, if_block_anchor, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      let previous_block_index = current_block_type_index;
      current_block_type_index = select_block_type_2(ctx2);
      if (current_block_type_index === previous_block_index) {
        if_blocks[current_block_type_index].p(ctx2, dirty);
      } else {
        group_outros();
        transition_out(if_blocks[previous_block_index], 1, 1, () => {
          if_blocks[previous_block_index] = null;
        });
        check_outros();
        if_block = if_blocks[current_block_type_index];
        if (!if_block) {
          if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
          if_block.c();
        } else {
          if_block.p(ctx2, dirty);
        }
        transition_in(if_block, 1);
        if_block.m(if_block_anchor.parentNode, if_block_anchor);
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(if_block);
      current = true;
    },
    o(local) {
      transition_out(if_block);
      current = false;
    },
    d(detaching) {
      if_blocks[current_block_type_index].d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_if_block_2(ctx) {
  let button;
  let current;
  button = new Button({
    props: {
      disabled: true,
      $$slots: { default: [create_default_slot] },
      $$scope: { ctx }
    }
  });
  return {
    c() {
      create_component(button.$$.fragment);
    },
    m(target, anchor) {
      mount_component(button, target, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      const button_changes = {};
      if (dirty & /*$$scope*/
      16384) {
        button_changes.$$scope = { dirty, ctx: ctx2 };
      }
      button.$set(button_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(button.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(button.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(button, detaching);
    }
  };
}
function create_default_slot_3(ctx) {
  let t_value = _("download") + "";
  let t2;
  return {
    c() {
      t2 = text(t_value);
    },
    m(target, anchor) {
      insert(target, t2, anchor);
    },
    p: noop,
    d(detaching) {
      if (detaching)
        detach(t2);
    }
  };
}
function create_else_block$1(ctx) {
  let button;
  let current;
  button = new Button({
    props: {
      disabled: true,
      $$slots: { default: [create_default_slot_2] },
      $$scope: { ctx }
    }
  });
  return {
    c() {
      create_component(button.$$.fragment);
    },
    m(target, anchor) {
      mount_component(button, target, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      const button_changes = {};
      if (dirty & /*$$scope*/
      16384) {
        button_changes.$$scope = { dirty, ctx: ctx2 };
      }
      button.$set(button_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(button.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(button.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(button, detaching);
    }
  };
}
function create_if_block_4(ctx) {
  let button;
  let current;
  function func() {
    return (
      /*func*/
      ctx[7](
        /*plugin*/
        ctx[11]
      )
    );
  }
  button = new Button({
    props: {
      onClick: func,
      $$slots: { default: [create_default_slot_1] },
      $$scope: { ctx }
    }
  });
  return {
    c() {
      create_component(button.$$.fragment);
    },
    m(target, anchor) {
      mount_component(button, target, anchor);
      current = true;
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      const button_changes = {};
      if (dirty & /*plugins*/
      1)
        button_changes.onClick = func;
      if (dirty & /*$$scope*/
      16384) {
        button_changes.$$scope = { dirty, ctx };
      }
      button.$set(button_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(button.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(button.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(button, detaching);
    }
  };
}
function create_default_slot_2(ctx) {
  let t_value = _("downloaded") + "";
  let t2;
  return {
    c() {
      t2 = text(t_value);
    },
    m(target, anchor) {
      insert(target, t2, anchor);
    },
    p: noop,
    d(detaching) {
      if (detaching)
        detach(t2);
    }
  };
}
function create_default_slot_1(ctx) {
  let t_value = _("upgrade") + "";
  let t2;
  return {
    c() {
      t2 = text(t_value);
    },
    m(target, anchor) {
      insert(target, t2, anchor);
    },
    p: noop,
    d(detaching) {
      if (detaching)
        detach(t2);
    }
  };
}
function create_default_slot(ctx) {
  let t_value = _("downloading") + "";
  let t2;
  return {
    c() {
      t2 = text(t_value);
    },
    m(target, anchor) {
      insert(target, t2, anchor);
    },
    p: noop,
    d(detaching) {
      if (detaching)
        detach(t2);
    }
  };
}
function create_each_block$1(ctx) {
  let label;
  let div1;
  let a2;
  let t0_value = (
    /*plugin*/
    ctx[11].name + ""
  );
  let t0;
  let t1;
  let t2_value = (
    /*plugin*/
    ctx[11].version + ""
  );
  let t2;
  let t3;
  let div0;
  let t4_value = (
    /*plugin*/
    (ctx[11].description || "") + ""
  );
  let t4;
  let t5;
  let span;
  let t6;
  let current_block_type_index;
  let if_block;
  let t7;
  let current;
  let mounted;
  let dispose;
  function click_handler(...args) {
    return (
      /*click_handler*/
      ctx[6](
        /*plugin*/
        ctx[11],
        ...args
      )
    );
  }
  const if_block_creators = [create_if_block_2, create_if_block_3, create_else_block_1];
  const if_blocks = [];
  function select_block_type_1(ctx2, dirty) {
    if (
      /*loadingMap*/
      ctx2[2][
        /*plugin*/
        ctx2[11].key
      ]
    )
      return 0;
    if (
      /*plugin*/
      ctx2[11].isExist
    )
      return 1;
    return 2;
  }
  current_block_type_index = select_block_type_1(ctx);
  if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
  return {
    c() {
      label = element("label");
      div1 = element("div");
      a2 = element("a");
      t0 = text(t0_value);
      t1 = space();
      t2 = text(t2_value);
      t3 = space();
      div0 = element("div");
      t4 = text(t4_value);
      t5 = space();
      span = element("span");
      t6 = space();
      if_block.c();
      t7 = space();
      attr(a2, "href", "javascript:void(0)");
      attr(a2, "class", "");
      attr(div0, "class", "b3-label__text");
      attr(div1, "class", "fn__flex-1");
      attr(span, "class", "fn__space");
      attr(label, "class", "fn__flex b3-label");
    },
    m(target, anchor) {
      insert(target, label, anchor);
      append(label, div1);
      append(div1, a2);
      append(a2, t0);
      append(div1, t1);
      append(div1, t2);
      append(div1, t3);
      append(div1, div0);
      append(div0, t4);
      append(label, t5);
      append(label, span);
      append(label, t6);
      if_blocks[current_block_type_index].m(label, null);
      append(label, t7);
      current = true;
      if (!mounted) {
        dispose = listen(a2, "click", click_handler);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if ((!current || dirty & /*plugins*/
      1) && t0_value !== (t0_value = /*plugin*/
      ctx[11].name + ""))
        set_data(t0, t0_value);
      if ((!current || dirty & /*plugins*/
      1) && t2_value !== (t2_value = /*plugin*/
      ctx[11].version + ""))
        set_data(t2, t2_value);
      if ((!current || dirty & /*plugins*/
      1) && t4_value !== (t4_value = /*plugin*/
      (ctx[11].description || "") + ""))
        set_data(t4, t4_value);
      let previous_block_index = current_block_type_index;
      current_block_type_index = select_block_type_1(ctx);
      if (current_block_type_index === previous_block_index) {
        if_blocks[current_block_type_index].p(ctx, dirty);
      } else {
        group_outros();
        transition_out(if_blocks[previous_block_index], 1, 1, () => {
          if_blocks[previous_block_index] = null;
        });
        check_outros();
        if_block = if_blocks[current_block_type_index];
        if (!if_block) {
          if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
          if_block.c();
        } else {
          if_block.p(ctx, dirty);
        }
        transition_in(if_block, 1);
        if_block.m(label, t7);
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(if_block);
      current = true;
    },
    o(local) {
      transition_out(if_block);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(label);
      if_blocks[current_block_type_index].d();
      mounted = false;
      dispose();
    }
  };
}
function create_fragment$2(ctx) {
  let div;
  let current_block_type_index;
  let if_block;
  let current;
  const if_block_creators = [create_if_block$1, create_if_block_1$1, create_else_block_2];
  const if_blocks = [];
  function select_block_type(ctx2, dirty) {
    if (
      /*loading*/
      ctx2[1]
    )
      return 0;
    if (!/*selectedPlugin*/
    ctx2[3])
      return 1;
    return 2;
  }
  current_block_type_index = select_block_type(ctx);
  if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
  return {
    c() {
      div = element("div");
      if_block.c();
      attr(div, "class", "b3-label fn__flex");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if_blocks[current_block_type_index].m(div, null);
      current = true;
    },
    p(ctx2, [dirty]) {
      let previous_block_index = current_block_type_index;
      current_block_type_index = select_block_type(ctx2);
      if (current_block_type_index === previous_block_index) {
        if_blocks[current_block_type_index].p(ctx2, dirty);
      } else {
        group_outros();
        transition_out(if_blocks[previous_block_index], 1, 1, () => {
          if_blocks[previous_block_index] = null;
        });
        check_outros();
        if_block = if_blocks[current_block_type_index];
        if (!if_block) {
          if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
          if_block.c();
        } else {
          if_block.p(ctx2, dirty);
        }
        transition_in(if_block, 1);
        if_block.m(div, null);
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(if_block);
      current = true;
    },
    o(local) {
      transition_out(if_block);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      if_blocks[current_block_type_index].d();
    }
  };
}
function instance$2($$self, $$props, $$invalidate) {
  const store = container.get(TYPES.Store);
  let plugins = [];
  let loading2 = true;
  const loadingMap = {};
  onMount(async () => {
    $$invalidate(0, plugins = await store.loadPlugins());
    $$invalidate(1, loading2 = false);
  });
  const downloadPlugin = async (key) => {
    if (loadingMap[key]) {
      return;
    }
    try {
      $$invalidate(2, loadingMap[key] = true, loadingMap);
      await store.downloadPlugin(key);
      const p = plugins.find((k2) => k2.key === key);
      if (p) {
        p.isExist = true;
        p.needUpgrade = false;
      }
    } finally {
      $$invalidate(2, loadingMap[key] = false, loadingMap);
    }
  };
  let selectedPlugin = null;
  const previewPlugin = (event, plugin2) => {
    $$invalidate(3, selectedPlugin = plugin2);
    event.stopPropagation();
    event.preventDefault();
  };
  const click_handler = (plugin2, event) => previewPlugin(event, plugin2);
  const func = (plugin2) => downloadPlugin(plugin2.key);
  const func_1 = (plugin2) => downloadPlugin(plugin2.key);
  const goback_handler = () => $$invalidate(3, selectedPlugin = null);
  return [
    plugins,
    loading2,
    loadingMap,
    selectedPlugin,
    downloadPlugin,
    previewPlugin,
    click_handler,
    func,
    func_1,
    goback_handler
  ];
}
class Setting_store extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$2, create_fragment$2, safe_not_equal, {});
  }
}
function create_fragment$1(ctx) {
  let div;
  return {
    c() {
      div = element("div");
      attr(div, "id", "setting-custom-render");
    },
    m(target, anchor) {
      insert(target, div, anchor);
    },
    p: noop,
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
function instance$1($$self, $$props, $$invalidate) {
  let root;
  let { render: render2 } = $$props;
  onMount(() => {
    $$invalidate(1, root = document.createElement("div"));
    document.getElementById("setting-custom-render").appendChild(root);
    render2(root);
  });
  $$self.$$set = ($$props2) => {
    if ("render" in $$props2)
      $$invalidate(0, render2 = $$props2.render);
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & /*root, render*/
    3) {
      {
        const el = document.getElementById("setting-custom-render");
        if (el) {
          if (root) {
            root.remove();
          }
          $$invalidate(1, root = document.createElement("div"));
          document.getElementById("setting-custom-render").appendChild(root);
          render2(root);
        }
      }
    }
  };
  return [render2, root];
}
class Setting_custom extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$1, create_fragment$1, safe_not_equal, { render: 0 });
  }
}
function get_each_context(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[13] = list[i];
  return child_ctx;
}
function get_each_context_1(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[13] = list[i];
  return child_ctx;
}
function create_each_block_1(ctx) {
  let li;
  let span;
  let t_value = (
    /*menu*/
    ctx[13].name + ""
  );
  let t2;
  let li_class_value;
  let mounted;
  let dispose;
  function click_handler() {
    return (
      /*click_handler*/
      ctx[6](
        /*menu*/
        ctx[13]
      )
    );
  }
  return {
    c() {
      li = element("li");
      span = element("span");
      t2 = text(t_value);
      attr(span, "class", "b3-list-item__text");
      attr(
        li,
        "data-name",
        /*menu*/
        ctx[13].key
      );
      attr(li, "class", li_class_value = /*currentSelection*/
      ctx[0].key === /*menu*/
      ctx[13].key ? "b3-list-item--focus b3-list-item b3-list-item--big" : "b3-list-item b3-list-item--big");
    },
    m(target, anchor) {
      insert(target, li, anchor);
      append(li, span);
      append(span, t2);
      if (!mounted) {
        dispose = listen(li, "click", click_handler);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & /*currentSelection*/
      1 && li_class_value !== (li_class_value = /*currentSelection*/
      ctx[0].key === /*menu*/
      ctx[13].key ? "b3-list-item--focus b3-list-item b3-list-item--big" : "b3-list-item b3-list-item--big")) {
        attr(li, "class", li_class_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(li);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block_1(ctx) {
  let hr;
  return {
    c() {
      hr = element("hr");
      set_style(hr, "margin", "12px");
    },
    m(target, anchor) {
      insert(target, hr, anchor);
    },
    d(detaching) {
      if (detaching)
        detach(hr);
    }
  };
}
function create_each_block(ctx) {
  let li;
  let span;
  let t0_value = (
    /*menu*/
    ctx[13].name + ""
  );
  let t0;
  let t1;
  let li_data_name_value;
  let li_class_value;
  let mounted;
  let dispose;
  function click_handler_1() {
    return (
      /*click_handler_1*/
      ctx[7](
        /*menu*/
        ctx[13]
      )
    );
  }
  return {
    c() {
      li = element("li");
      span = element("span");
      t0 = text(t0_value);
      t1 = space();
      attr(span, "class", "b3-list-item__text");
      attr(li, "data-name", li_data_name_value = /*menu*/
      ctx[13].key);
      attr(li, "class", li_class_value = /*currentSelection*/
      ctx[0].key === /*menu*/
      ctx[13].key ? "b3-list-item--focus b3-list-item b3-list-item--big" : "b3-list-item b3-list-item--big");
    },
    m(target, anchor) {
      insert(target, li, anchor);
      append(li, span);
      append(span, t0);
      append(li, t1);
      if (!mounted) {
        dispose = listen(li, "click", click_handler_1);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & /*thirdMenus*/
      2 && t0_value !== (t0_value = /*menu*/
      ctx[13].name + ""))
        set_data(t0, t0_value);
      if (dirty & /*thirdMenus*/
      2 && li_data_name_value !== (li_data_name_value = /*menu*/
      ctx[13].key)) {
        attr(li, "data-name", li_data_name_value);
      }
      if (dirty & /*currentSelection, thirdMenus*/
      3 && li_class_value !== (li_class_value = /*currentSelection*/
      ctx[0].key === /*menu*/
      ctx[13].key ? "b3-list-item--focus b3-list-item b3-list-item--big" : "b3-list-item b3-list-item--big")) {
        attr(li, "class", li_class_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(li);
      mounted = false;
      dispose();
    }
  };
}
function create_else_block(ctx) {
  let settingcustom;
  let current;
  settingcustom = new Setting_custom({
    props: {
      render: (
        /*currentSelection*/
        ctx[0].render
      )
    }
  });
  return {
    c() {
      create_component(settingcustom.$$.fragment);
    },
    m(target, anchor) {
      mount_component(settingcustom, target, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      const settingcustom_changes = {};
      if (dirty & /*currentSelection*/
      1)
        settingcustom_changes.render = /*currentSelection*/
        ctx2[0].render;
      settingcustom.$set(settingcustom_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(settingcustom.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(settingcustom.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(settingcustom, detaching);
    }
  };
}
function create_if_block(ctx) {
  let switch_instance;
  let switch_instance_anchor;
  let current;
  var switch_value = (
    /*currentSelection*/
    ctx[0].component
  );
  function switch_props(ctx2) {
    return {};
  }
  if (switch_value) {
    switch_instance = construct_svelte_component(switch_value, switch_props());
    switch_instance.$on(
      "update",
      /*update_handler*/
      ctx[8]
    );
  }
  return {
    c() {
      if (switch_instance)
        create_component(switch_instance.$$.fragment);
      switch_instance_anchor = empty();
    },
    m(target, anchor) {
      if (switch_instance)
        mount_component(switch_instance, target, anchor);
      insert(target, switch_instance_anchor, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      if (switch_value !== (switch_value = /*currentSelection*/
      ctx2[0].component)) {
        if (switch_instance) {
          group_outros();
          const old_component = switch_instance;
          transition_out(old_component.$$.fragment, 1, 0, () => {
            destroy_component(old_component, 1);
          });
          check_outros();
        }
        if (switch_value) {
          switch_instance = construct_svelte_component(switch_value, switch_props());
          switch_instance.$on(
            "update",
            /*update_handler*/
            ctx2[8]
          );
          create_component(switch_instance.$$.fragment);
          transition_in(switch_instance.$$.fragment, 1);
          mount_component(switch_instance, switch_instance_anchor.parentNode, switch_instance_anchor);
        } else {
          switch_instance = null;
        }
      }
    },
    i(local) {
      if (current)
        return;
      if (switch_instance)
        transition_in(switch_instance.$$.fragment, local);
      current = true;
    },
    o(local) {
      if (switch_instance)
        transition_out(switch_instance.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(switch_instance_anchor);
      if (switch_instance)
        destroy_component(switch_instance, detaching);
    }
  };
}
function create_fragment(ctx) {
  let div2;
  let div1;
  let ul;
  let t0;
  let t1;
  let t2;
  let div0;
  let current_block_type_index;
  let if_block1;
  let div0_data_name_value;
  let current;
  let each_value_1 = (
    /*menus*/
    ctx[2]
  );
  let each_blocks_1 = [];
  for (let i = 0; i < each_value_1.length; i += 1) {
    each_blocks_1[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));
  }
  let if_block0 = (
    /*thirdMenus*/
    ctx[1].length > 0 && create_if_block_1()
  );
  let each_value = (
    /*thirdMenus*/
    ctx[1]
  );
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
  }
  const if_block_creators = [create_if_block, create_else_block];
  const if_blocks = [];
  function select_block_type(ctx2, dirty) {
    if (
      /*currentSelection*/
      ctx2[0].type === "internal"
    )
      return 0;
    return 1;
  }
  current_block_type_index = select_block_type(ctx);
  if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
  return {
    c() {
      div2 = element("div");
      div1 = element("div");
      ul = element("ul");
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].c();
      }
      t0 = space();
      if (if_block0)
        if_block0.c();
      t1 = space();
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t2 = space();
      div0 = element("div");
      if_block1.c();
      attr(ul, "class", "b3-tab-bar b3-list b3-list--background");
      set_style(ul, "height", "unset", 1);
      attr(div0, "class", "config__tab-container");
      set_style(div0, "height", "unset", 1);
      attr(div0, "data-name", div0_data_name_value = /*currentSelection*/
      ctx[0].key);
      attr(div1, "class", "fn__flex-1 fn__flex config__panel");
      attr(div2, "class", "fn__flex-column");
      set_style(div2, "border-radius", "4px");
      set_style(div2, "overflow", "auto");
      set_style(div2, "position", "relative");
      set_style(div2, "height", "80vh");
    },
    m(target, anchor) {
      insert(target, div2, anchor);
      append(div2, div1);
      append(div1, ul);
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].m(ul, null);
      }
      append(ul, t0);
      if (if_block0)
        if_block0.m(ul, null);
      append(ul, t1);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(ul, null);
      }
      append(div1, t2);
      append(div1, div0);
      if_blocks[current_block_type_index].m(div0, null);
      current = true;
    },
    p(ctx2, [dirty]) {
      if (dirty & /*menus, currentSelection, setCurrentSelection*/
      13) {
        each_value_1 = /*menus*/
        ctx2[2];
        let i;
        for (i = 0; i < each_value_1.length; i += 1) {
          const child_ctx = get_each_context_1(ctx2, each_value_1, i);
          if (each_blocks_1[i]) {
            each_blocks_1[i].p(child_ctx, dirty);
          } else {
            each_blocks_1[i] = create_each_block_1(child_ctx);
            each_blocks_1[i].c();
            each_blocks_1[i].m(ul, t0);
          }
        }
        for (; i < each_blocks_1.length; i += 1) {
          each_blocks_1[i].d(1);
        }
        each_blocks_1.length = each_value_1.length;
      }
      if (
        /*thirdMenus*/
        ctx2[1].length > 0
      ) {
        if (if_block0)
          ;
        else {
          if_block0 = create_if_block_1();
          if_block0.c();
          if_block0.m(ul, t1);
        }
      } else if (if_block0) {
        if_block0.d(1);
        if_block0 = null;
      }
      if (dirty & /*thirdMenus, currentSelection, setCurrentSelection*/
      11) {
        each_value = /*thirdMenus*/
        ctx2[1];
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(ul, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
      let previous_block_index = current_block_type_index;
      current_block_type_index = select_block_type(ctx2);
      if (current_block_type_index === previous_block_index) {
        if_blocks[current_block_type_index].p(ctx2, dirty);
      } else {
        group_outros();
        transition_out(if_blocks[previous_block_index], 1, 1, () => {
          if_blocks[previous_block_index] = null;
        });
        check_outros();
        if_block1 = if_blocks[current_block_type_index];
        if (!if_block1) {
          if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
          if_block1.c();
        } else {
          if_block1.p(ctx2, dirty);
        }
        transition_in(if_block1, 1);
        if_block1.m(div0, null);
      }
      if (!current || dirty & /*currentSelection*/
      1 && div0_data_name_value !== (div0_data_name_value = /*currentSelection*/
      ctx2[0].key)) {
        attr(div0, "data-name", div0_data_name_value);
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(if_block1);
      current = true;
    },
    o(local) {
      transition_out(if_block1);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div2);
      destroy_each(each_blocks_1, detaching);
      if (if_block0)
        if_block0.d();
      destroy_each(each_blocks, detaching);
      if_blocks[current_block_type_index].d();
    }
  };
}
function instance($$self, $$props, $$invalidate) {
  let thirdMenus;
  const menus = [
    {
      key: "common",
      name: _("menu_common"),
      type: "internal",
      component: Setting_common
    },
    {
      key: "list",
      name: _("menu_list"),
      type: "internal",
      component: Setting_list
    },
    {
      key: "store",
      name: _("menu_store"),
      type: "internal",
      component: Setting_store
    }
  ];
  const sm = container.get(TYPES.SettingManager);
  const sm1 = container.get(TYPES.StorageManager);
  const plugins = sm1.getThirdPartyPlugins();
  let settingRenders = sm.getSettingRenders();
  const getName = (key) => {
    var _a2;
    return (_a2 = plugins.find((p) => p.key === key)) == null ? void 0 : _a2.name;
  };
  const setCurrentSelection = (menu) => $$invalidate(0, currentSelection = menu);
  const updateMenus = () => {
    $$invalidate(5, settingRenders = [...sm.getSettingRenders()]);
  };
  let currentSelection = menus[0];
  const click_handler = (menu) => setCurrentSelection(menu);
  const click_handler_1 = (menu) => setCurrentSelection(menu);
  const update_handler = () => updateMenus();
  $$self.$$.update = () => {
    if ($$self.$$.dirty & /*settingRenders*/
    32) {
      $$invalidate(1, thirdMenus = settingRenders.map((s) => {
        return {
          key: s.key,
          name: getName(s.key),
          component: Setting_common,
          type: "custom",
          render: s.value
        };
      }));
    }
  };
  return [
    currentSelection,
    thirdMenus,
    menus,
    setCurrentSelection,
    updateMenus,
    settingRenders,
    click_handler,
    click_handler_1,
    update_handler
  ];
}
class Setting extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance, create_fragment, safe_not_equal, {});
  }
}
class InternalSettingPlugin extends Plugin {
  constructor() {
    super();
    this.svg = '<svg t="1679703027227" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="24715" width="200" height="200"><path d="M512 1023.99984a75.519988 75.519988 0 0 1-53.679992-22.207997L22.368077 565.455912c-29.487995-29.679995-29.487995-77.919988-0.064-107.519984l159.711975-159.839975a31.951995 31.951995 0 0 1 54.047991 28.207996 131.10398 131.10398 0 0 0-2.368 23.135996c0 69.951989 56.895991 128.11198 126.847981 128.11198 69.999989 0 121.119981-58.159991 121.119981-128.11198 0-70.079989-51.119992-127.07198-121.119981-127.07198a130.87998 130.87998 0 0 0-23.007997 2.384 31.759995 31.759995 0 0 1-33.919994-16.671998 31.999995 31.999995 0 0 1 5.743999-37.423994l148.895976-149.103976c28.847995-28.719996 78.719988-28.655996 107.423984-0.064l109.023983 109.183983C697.439971 59.887991 763.871961 8.479999 842.015948 8.479999c96.911985 0 175.743973 78.959988 175.743973 175.967972 0 78.239988-51.295992 144.719977-122.063981 167.471974l105.887984 105.951983a76.351988 76.351988 0 0 1 0.031999 107.551984L565.743992 1001.775843A75.759988 75.759988 0 0 1 512 1023.99984z" fill="" p-id="24716"></path></svg>';
  }
  onload() {
    const internalSettingButton = document.createElement("button");
    internalSettingButton.setAttribute("aria-label", _("plugin_system"));
    internalSettingButton.classList.add("toolbar__item", "b3-tooltips", "b3-tooltips__sw");
    internalSettingButton.insertAdjacentHTML("beforeend", this.svg);
    internalSettingButton.addEventListener("click", (event) => {
      new Menu("internalSettingButton").addItem(
        new MenuItem({
          label: _("plugin_system_setting"),
          icon: "iconEdit",
          click: () => showSettingDialog()
        })
      ).addSeparator().addItem(
        new MenuItem({
          label: _("reload"),
          icon: "iconRefresh",
          click: () => window.location.reload()
        })
      ).showAtMouseEvent(event);
      event.stopPropagation();
    });
    addToolbarRight(internalSettingButton);
    this.registerCommand({
      command: "Show plugin system conifg",
      description: _("show_plugin_system_config"),
      shortcut: "command+option+p",
      callback: () => showSettingDialog()
    });
    this.registerCommand({
      command: "Reload Window",
      description: _("reload_window"),
      callback: () => window.location.reload()
    });
  }
}
function showSettingDialog() {
  new Dialog({
    title: _("plugin_system_setting"),
    content: '<div id="plugin-settings"></div>',
    width: "90vw",
    height: "80vh"
  });
  setTimeout(() => {
    new Setting({
      target: document.getElementById("plugin-settings")
    });
  });
}
const internalPlugins = [
  { key: "setting", name: "setting", plugin: InternalSettingPlugin, enabled: true, hidden: true, version: "1.0.0" },
  { key: "commandPanel", name: "commandPanel", plugin: CommandPanelPlugin, enabled: true, hidden: true, version: "1.0.0" }
];
function isHighSurrogate$1(codePoint) {
  return codePoint >= 55296 && codePoint <= 56319;
}
function isLowSurrogate$1(codePoint) {
  return codePoint >= 56320 && codePoint <= 57343;
}
var truncate$2 = function truncate2(getLength2, string, byteLength) {
  if (typeof string !== "string") {
    throw new Error("Input must be string");
  }
  var charLength = string.length;
  var curByteLength = 0;
  var codePoint;
  var segment;
  for (var i = 0; i < charLength; i += 1) {
    codePoint = string.charCodeAt(i);
    segment = string[i];
    if (isHighSurrogate$1(codePoint) && isLowSurrogate$1(string.charCodeAt(i + 1))) {
      i += 1;
      segment += string[i];
    }
    curByteLength += getLength2(segment);
    if (curByteLength === byteLength) {
      return string.slice(0, i + 1);
    } else if (curByteLength > byteLength) {
      return string.slice(0, i - segment.length + 1);
    }
  }
  return string;
};
function isHighSurrogate(codePoint) {
  return codePoint >= 55296 && codePoint <= 56319;
}
function isLowSurrogate(codePoint) {
  return codePoint >= 56320 && codePoint <= 57343;
}
var browser$1 = function getByteLength(string) {
  if (typeof string !== "string") {
    throw new Error("Input must be string");
  }
  var charLength = string.length;
  var byteLength = 0;
  var codePoint = null;
  var prevCodePoint = null;
  for (var i = 0; i < charLength; i++) {
    codePoint = string.charCodeAt(i);
    if (isLowSurrogate(codePoint)) {
      if (prevCodePoint != null && isHighSurrogate(prevCodePoint)) {
        byteLength += 1;
      } else {
        byteLength += 3;
      }
    } else if (codePoint <= 127) {
      byteLength += 1;
    } else if (codePoint >= 128 && codePoint <= 2047) {
      byteLength += 2;
    } else if (codePoint >= 2048 && codePoint <= 65535) {
      byteLength += 3;
    }
    prevCodePoint = codePoint;
  }
  return byteLength;
};
var truncate$1 = truncate$2;
var getLength = browser$1;
var browser = truncate$1.bind(null, getLength);
var truncate = browser;
var illegalRe = /[\/\?<>\\:\*\|"]/g;
var controlRe = /[\x00-\x1f\x80-\x9f]/g;
var reservedRe = /^\.+$/;
var windowsReservedRe = /^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i;
var windowsTrailingRe = /[\. ]+$/;
function sanitize(input, replacement) {
  if (typeof input !== "string") {
    throw new Error("Input must be string");
  }
  var sanitized = input.replace(illegalRe, replacement).replace(controlRe, replacement).replace(reservedRe, replacement).replace(windowsReservedRe, replacement).replace(windowsTrailingRe, replacement);
  return truncate(sanitized, 255);
}
var sanitizeFilename = function(input, options) {
  var replacement = options && options.replacement || "";
  var output = sanitize(input, replacement);
  if (replacement === "") {
    return output;
  }
  return sanitize(output, "");
};
var __defProp$8 = Object.defineProperty;
var __getOwnPropDesc$8 = Object.getOwnPropertyDescriptor;
var __decorateClass$8 = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$8(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp$8(target, key, result);
  return result;
};
var __decorateParam$5 = (index, decorator) => (target, key) => decorator(target, key, index);
let StorageManager = class {
  constructor(pluginFileManager) {
    this.config = Object.assign({}, defaultConfig);
    this.pluginFileManager = pluginFileManager;
  }
  get(key) {
    return this.config[key];
  }
  async set(key, val) {
    this.config[key] = val;
    return setStorageVal(key, val);
  }
  async initStorage() {
    const all2 = await getLocalStorage();
    const configKeys = Object.keys(defaultConfig);
    for (const key of configKeys) {
      if (all2[key] !== void 0) {
        this.config[key] = all2[key];
      } else {
        await setStorageVal(key, defaultConfig[key]);
      }
    }
    this.thirdPartyPlugins = await this.pluginFileManager.getAllPlugins();
    this.internalPlugins = [...internalPlugins];
    this.init3rdPartyEnabled();
    this.initInternalEnabled();
    await this.savePluginsEnabled();
    return this;
  }
  init3rdPartyEnabled() {
    const enabledPlugins = this.get(PLUGIN_SYSTEM_THIRD_PARTY_PLUGIN);
    for (const ep of enabledPlugins) {
      for (const p of this.thirdPartyPlugins) {
        if (p.key === ep.key) {
          p.enabled = ep.enabled || false;
          break;
        }
      }
    }
  }
  initInternalEnabled() {
    const enabledPlugins = this.get(PLUGIN_SYSTEM_PLUGIN);
    for (const ep of enabledPlugins) {
      for (const p of this.internalPlugins) {
        if (p.key === ep.key) {
          p.enabled = ep.enabled || false;
          break;
        }
      }
    }
  }
  getPlugins() {
    return [...this.internalPlugins, ...this.thirdPartyPlugins];
  }
  getInternalPlugins() {
    return this.internalPlugins;
  }
  getThirdPartyPlugins() {
    return this.thirdPartyPlugins;
  }
  getPluginByKey(key) {
    return this.getPlugins().find((p) => p.key === key);
  }
  async setPluginEnabled(key, enabled) {
    for (const p of [...this.internalPlugins, ...this.thirdPartyPlugins]) {
      if (p.key === key) {
        p.enabled = enabled;
        break;
      }
    }
    await this.savePluginsEnabled();
  }
  async setSafeModeEnabled(enabled) {
    return this.set(PLUGIN_SYSTEM_SAFE_MODE_ENABLED, enabled);
  }
  async savePluginsEnabled() {
    await this.set(
      PLUGIN_SYSTEM_PLUGIN,
      this.internalPlugins.map((p) => ({ key: p.key, enabled: p.enabled }))
    );
    return this.set(
      PLUGIN_SYSTEM_THIRD_PARTY_PLUGIN,
      this.thirdPartyPlugins.map((p) => ({ key: p.key, enabled: p.enabled }))
    );
  }
  async setPluginStorage(pluginKey, filename, content) {
    try {
      if (this.isFileNameIllegal(filename)) {
        showErrorMessage(`插件${pluginKey}存储文件名不合法`);
        return;
      }
      await this.addPluginStorageFolderIfNotExist(pluginKey);
      await FileClient.getInstanceApi().fileApi.putFile(`/data/plugins/.storage/${pluginKey}/${filename}`, content);
    } catch (e) {
      showErrorMessage(`插件${pluginKey}存储保存失败`, 2e3);
    }
  }
  async getPluginStorage(pluginKey, filename) {
    try {
      return await FileClient.getInstanceApi().fileApi.getFile(`/data/plugins/.storage/${pluginKey}/${filename}`);
    } catch (e) {
      showErrorMessage(`插件${pluginKey}存储保存失败`, 2e3);
      return null;
    }
  }
  async uninstallPlugin(pluginKey) {
    await FileClient.getInstanceApi().fileApi.removeFile(`/data/plugins/${pluginKey}`);
    await FileClient.getInstanceApi().fileApi.removeFile(`/data/plugins//.storage/${pluginKey}`);
  }
  async addPluginStorageFolderIfNotExist(pluginKey) {
    const folder = `/data/plugins/.storage/${pluginKey}`;
    await FileClient.getInstanceApi().fileApi.putFile(folder, null, true);
  }
  isFileNameIllegal(filename) {
    return filename !== sanitizeFilename(filename);
  }
};
StorageManager = __decorateClass$8([
  injectable(),
  __decorateParam$5(0, inject(TYPES.PluginFileManager))
], StorageManager);
var __defProp$7 = Object.defineProperty;
var __getOwnPropDesc$7 = Object.getOwnPropertyDescriptor;
var __decorateClass$7 = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$7(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp$7(target, key, result);
  return result;
};
var __decorateParam$4 = (index, decorator) => (target, key) => decorator(target, key, index);
let PluginSystem = class {
  constructor(pluginLoader, pslm, storageManager, commandManager, store) {
    this.pluginLoader = pluginLoader;
    this.pslm = pslm;
    this.storageManager = storageManager;
    this.commandManager = commandManager;
    this.store = store;
    this.version = VERSION$1;
  }
  async init() {
    await this.storageManager.initStorage();
    const internalPlugins2 = this.storageManager.getInternalPlugins();
    this.pluginLoader.loadEnabledPlugins(internalPlugins2);
    log(`Loading internal enabled plugins: ${internalPlugins2.map((p) => p.key).join(",")}`);
    const securityModeEnabled = this.storageManager.get(PLUGIN_SYSTEM_SAFE_MODE_ENABLED);
    if (!securityModeEnabled) {
      const plugins = this.storageManager.getThirdPartyPlugins();
      log(`Loading 3rd party enabled plugins: ${plugins.map((p) => p.key).join(",")}`);
      this.pluginLoader.loadEnabledPlugins(plugins);
    }
    this.pslm.localCacheInit();
    return this;
  }
  async loadPlugin(key) {
    this.storageManager.setPluginEnabled(key, true);
    const plugin2 = this.storageManager.getPluginByKey(key);
    this.pluginLoader.loadPlugin(plugin2);
  }
  async unloadPlugin(key) {
    this.storageManager.setPluginEnabled(key, false);
    this.pluginLoader.unloadPlugin(key);
  }
  async turnOffSafeMode() {
    this.storageManager.setSafeModeEnabled(false);
    const plugins = this.storageManager.getThirdPartyPlugins();
    return this.pluginLoader.loadEnabledPlugins(plugins);
  }
  async turnOnSafeMode() {
    this.storageManager.setSafeModeEnabled(true);
    const plugins = this.storageManager.getThirdPartyPlugins();
    return this.pluginLoader.unloadThirdPartyPlugins(plugins);
  }
};
PluginSystem = __decorateClass$7([
  injectable(),
  __decorateParam$4(0, inject(TYPES.PluginLoader)),
  __decorateParam$4(1, inject(TYPES.SystemManager)),
  __decorateParam$4(2, inject(TYPES.StorageManager)),
  __decorateParam$4(3, inject(TYPES.CommandManager)),
  __decorateParam$4(4, inject(TYPES.Store))
], PluginSystem);
var reExports = {};
var re$3 = {
  get exports() {
    return reExports;
  },
  set exports(v) {
    reExports = v;
  }
};
const SEMVER_SPEC_VERSION = "2.0.0";
const MAX_LENGTH$2 = 256;
const MAX_SAFE_INTEGER$1 = Number.MAX_SAFE_INTEGER || /* istanbul ignore next */
9007199254740991;
const MAX_SAFE_COMPONENT_LENGTH = 16;
var constants$1 = {
  SEMVER_SPEC_VERSION,
  MAX_LENGTH: MAX_LENGTH$2,
  MAX_SAFE_INTEGER: MAX_SAFE_INTEGER$1,
  MAX_SAFE_COMPONENT_LENGTH
};
const debug$1 = typeof process === "object" && process.env && process.env.NODE_DEBUG && /\bsemver\b/i.test(process.env.NODE_DEBUG) ? (...args) => console.error("SEMVER", ...args) : () => {
};
var debug_1 = debug$1;
(function(module2, exports2) {
  const { MAX_SAFE_COMPONENT_LENGTH: MAX_SAFE_COMPONENT_LENGTH2 } = constants$1;
  const debug2 = debug_1;
  exports2 = module2.exports = {};
  const re2 = exports2.re = [];
  const src = exports2.src = [];
  const t2 = exports2.t = {};
  let R2 = 0;
  const createToken = (name2, value, isGlobal) => {
    const index = R2++;
    debug2(name2, index, value);
    t2[name2] = index;
    src[index] = value;
    re2[index] = new RegExp(value, isGlobal ? "g" : void 0);
  };
  createToken("NUMERICIDENTIFIER", "0|[1-9]\\d*");
  createToken("NUMERICIDENTIFIERLOOSE", "[0-9]+");
  createToken("NONNUMERICIDENTIFIER", "\\d*[a-zA-Z-][a-zA-Z0-9-]*");
  createToken("MAINVERSION", `(${src[t2.NUMERICIDENTIFIER]})\\.(${src[t2.NUMERICIDENTIFIER]})\\.(${src[t2.NUMERICIDENTIFIER]})`);
  createToken("MAINVERSIONLOOSE", `(${src[t2.NUMERICIDENTIFIERLOOSE]})\\.(${src[t2.NUMERICIDENTIFIERLOOSE]})\\.(${src[t2.NUMERICIDENTIFIERLOOSE]})`);
  createToken("PRERELEASEIDENTIFIER", `(?:${src[t2.NUMERICIDENTIFIER]}|${src[t2.NONNUMERICIDENTIFIER]})`);
  createToken("PRERELEASEIDENTIFIERLOOSE", `(?:${src[t2.NUMERICIDENTIFIERLOOSE]}|${src[t2.NONNUMERICIDENTIFIER]})`);
  createToken("PRERELEASE", `(?:-(${src[t2.PRERELEASEIDENTIFIER]}(?:\\.${src[t2.PRERELEASEIDENTIFIER]})*))`);
  createToken("PRERELEASELOOSE", `(?:-?(${src[t2.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${src[t2.PRERELEASEIDENTIFIERLOOSE]})*))`);
  createToken("BUILDIDENTIFIER", "[0-9A-Za-z-]+");
  createToken("BUILD", `(?:\\+(${src[t2.BUILDIDENTIFIER]}(?:\\.${src[t2.BUILDIDENTIFIER]})*))`);
  createToken("FULLPLAIN", `v?${src[t2.MAINVERSION]}${src[t2.PRERELEASE]}?${src[t2.BUILD]}?`);
  createToken("FULL", `^${src[t2.FULLPLAIN]}$`);
  createToken("LOOSEPLAIN", `[v=\\s]*${src[t2.MAINVERSIONLOOSE]}${src[t2.PRERELEASELOOSE]}?${src[t2.BUILD]}?`);
  createToken("LOOSE", `^${src[t2.LOOSEPLAIN]}$`);
  createToken("GTLT", "((?:<|>)?=?)");
  createToken("XRANGEIDENTIFIERLOOSE", `${src[t2.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);
  createToken("XRANGEIDENTIFIER", `${src[t2.NUMERICIDENTIFIER]}|x|X|\\*`);
  createToken("XRANGEPLAIN", `[v=\\s]*(${src[t2.XRANGEIDENTIFIER]})(?:\\.(${src[t2.XRANGEIDENTIFIER]})(?:\\.(${src[t2.XRANGEIDENTIFIER]})(?:${src[t2.PRERELEASE]})?${src[t2.BUILD]}?)?)?`);
  createToken("XRANGEPLAINLOOSE", `[v=\\s]*(${src[t2.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t2.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t2.XRANGEIDENTIFIERLOOSE]})(?:${src[t2.PRERELEASELOOSE]})?${src[t2.BUILD]}?)?)?`);
  createToken("XRANGE", `^${src[t2.GTLT]}\\s*${src[t2.XRANGEPLAIN]}$`);
  createToken("XRANGELOOSE", `^${src[t2.GTLT]}\\s*${src[t2.XRANGEPLAINLOOSE]}$`);
  createToken("COERCE", `${"(^|[^\\d])(\\d{1,"}${MAX_SAFE_COMPONENT_LENGTH2}})(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH2}}))?(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH2}}))?(?:$|[^\\d])`);
  createToken("COERCERTL", src[t2.COERCE], true);
  createToken("LONETILDE", "(?:~>?)");
  createToken("TILDETRIM", `(\\s*)${src[t2.LONETILDE]}\\s+`, true);
  exports2.tildeTrimReplace = "$1~";
  createToken("TILDE", `^${src[t2.LONETILDE]}${src[t2.XRANGEPLAIN]}$`);
  createToken("TILDELOOSE", `^${src[t2.LONETILDE]}${src[t2.XRANGEPLAINLOOSE]}$`);
  createToken("LONECARET", "(?:\\^)");
  createToken("CARETTRIM", `(\\s*)${src[t2.LONECARET]}\\s+`, true);
  exports2.caretTrimReplace = "$1^";
  createToken("CARET", `^${src[t2.LONECARET]}${src[t2.XRANGEPLAIN]}$`);
  createToken("CARETLOOSE", `^${src[t2.LONECARET]}${src[t2.XRANGEPLAINLOOSE]}$`);
  createToken("COMPARATORLOOSE", `^${src[t2.GTLT]}\\s*(${src[t2.LOOSEPLAIN]})$|^$`);
  createToken("COMPARATOR", `^${src[t2.GTLT]}\\s*(${src[t2.FULLPLAIN]})$|^$`);
  createToken("COMPARATORTRIM", `(\\s*)${src[t2.GTLT]}\\s*(${src[t2.LOOSEPLAIN]}|${src[t2.XRANGEPLAIN]})`, true);
  exports2.comparatorTrimReplace = "$1$2$3";
  createToken("HYPHENRANGE", `^\\s*(${src[t2.XRANGEPLAIN]})\\s+-\\s+(${src[t2.XRANGEPLAIN]})\\s*$`);
  createToken("HYPHENRANGELOOSE", `^\\s*(${src[t2.XRANGEPLAINLOOSE]})\\s+-\\s+(${src[t2.XRANGEPLAINLOOSE]})\\s*$`);
  createToken("STAR", "(<|>)?=?\\s*\\*");
  createToken("GTE0", "^\\s*>=\\s*0\\.0\\.0\\s*$");
  createToken("GTE0PRE", "^\\s*>=\\s*0\\.0\\.0-0\\s*$");
})(re$3, reExports);
const opts = ["includePrerelease", "loose", "rtl"];
const parseOptions$2 = (options) => !options ? {} : typeof options !== "object" ? { loose: true } : opts.filter((k2) => options[k2]).reduce((o, k2) => {
  o[k2] = true;
  return o;
}, {});
var parseOptions_1 = parseOptions$2;
const numeric = /^[0-9]+$/;
const compareIdentifiers$1 = (a2, b2) => {
  const anum = numeric.test(a2);
  const bnum = numeric.test(b2);
  if (anum && bnum) {
    a2 = +a2;
    b2 = +b2;
  }
  return a2 === b2 ? 0 : anum && !bnum ? -1 : bnum && !anum ? 1 : a2 < b2 ? -1 : 1;
};
const rcompareIdentifiers = (a2, b2) => compareIdentifiers$1(b2, a2);
var identifiers$1 = {
  compareIdentifiers: compareIdentifiers$1,
  rcompareIdentifiers
};
const debug = debug_1;
const { MAX_LENGTH: MAX_LENGTH$1, MAX_SAFE_INTEGER } = constants$1;
const { re: re$2, t: t$2 } = reExports;
const parseOptions$1 = parseOptions_1;
const { compareIdentifiers } = identifiers$1;
let SemVer$d = class SemVer2 {
  constructor(version2, options) {
    options = parseOptions$1(options);
    if (version2 instanceof SemVer2) {
      if (version2.loose === !!options.loose && version2.includePrerelease === !!options.includePrerelease) {
        return version2;
      } else {
        version2 = version2.version;
      }
    } else if (typeof version2 !== "string") {
      throw new TypeError(`Invalid Version: ${version2}`);
    }
    if (version2.length > MAX_LENGTH$1) {
      throw new TypeError(
        `version is longer than ${MAX_LENGTH$1} characters`
      );
    }
    debug("SemVer", version2, options);
    this.options = options;
    this.loose = !!options.loose;
    this.includePrerelease = !!options.includePrerelease;
    const m = version2.trim().match(options.loose ? re$2[t$2.LOOSE] : re$2[t$2.FULL]);
    if (!m) {
      throw new TypeError(`Invalid Version: ${version2}`);
    }
    this.raw = version2;
    this.major = +m[1];
    this.minor = +m[2];
    this.patch = +m[3];
    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {
      throw new TypeError("Invalid major version");
    }
    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {
      throw new TypeError("Invalid minor version");
    }
    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {
      throw new TypeError("Invalid patch version");
    }
    if (!m[4]) {
      this.prerelease = [];
    } else {
      this.prerelease = m[4].split(".").map((id2) => {
        if (/^[0-9]+$/.test(id2)) {
          const num = +id2;
          if (num >= 0 && num < MAX_SAFE_INTEGER) {
            return num;
          }
        }
        return id2;
      });
    }
    this.build = m[5] ? m[5].split(".") : [];
    this.format();
  }
  format() {
    this.version = `${this.major}.${this.minor}.${this.patch}`;
    if (this.prerelease.length) {
      this.version += `-${this.prerelease.join(".")}`;
    }
    return this.version;
  }
  toString() {
    return this.version;
  }
  compare(other) {
    debug("SemVer.compare", this.version, this.options, other);
    if (!(other instanceof SemVer2)) {
      if (typeof other === "string" && other === this.version) {
        return 0;
      }
      other = new SemVer2(other, this.options);
    }
    if (other.version === this.version) {
      return 0;
    }
    return this.compareMain(other) || this.comparePre(other);
  }
  compareMain(other) {
    if (!(other instanceof SemVer2)) {
      other = new SemVer2(other, this.options);
    }
    return compareIdentifiers(this.major, other.major) || compareIdentifiers(this.minor, other.minor) || compareIdentifiers(this.patch, other.patch);
  }
  comparePre(other) {
    if (!(other instanceof SemVer2)) {
      other = new SemVer2(other, this.options);
    }
    if (this.prerelease.length && !other.prerelease.length) {
      return -1;
    } else if (!this.prerelease.length && other.prerelease.length) {
      return 1;
    } else if (!this.prerelease.length && !other.prerelease.length) {
      return 0;
    }
    let i = 0;
    do {
      const a2 = this.prerelease[i];
      const b2 = other.prerelease[i];
      debug("prerelease compare", i, a2, b2);
      if (a2 === void 0 && b2 === void 0) {
        return 0;
      } else if (b2 === void 0) {
        return 1;
      } else if (a2 === void 0) {
        return -1;
      } else if (a2 === b2) {
        continue;
      } else {
        return compareIdentifiers(a2, b2);
      }
    } while (++i);
  }
  compareBuild(other) {
    if (!(other instanceof SemVer2)) {
      other = new SemVer2(other, this.options);
    }
    let i = 0;
    do {
      const a2 = this.build[i];
      const b2 = other.build[i];
      debug("prerelease compare", i, a2, b2);
      if (a2 === void 0 && b2 === void 0) {
        return 0;
      } else if (b2 === void 0) {
        return 1;
      } else if (a2 === void 0) {
        return -1;
      } else if (a2 === b2) {
        continue;
      } else {
        return compareIdentifiers(a2, b2);
      }
    } while (++i);
  }
  // preminor will bump the version up to the next minor release, and immediately
  // down to pre-release. premajor and prepatch work the same way.
  inc(release, identifier) {
    switch (release) {
      case "premajor":
        this.prerelease.length = 0;
        this.patch = 0;
        this.minor = 0;
        this.major++;
        this.inc("pre", identifier);
        break;
      case "preminor":
        this.prerelease.length = 0;
        this.patch = 0;
        this.minor++;
        this.inc("pre", identifier);
        break;
      case "prepatch":
        this.prerelease.length = 0;
        this.inc("patch", identifier);
        this.inc("pre", identifier);
        break;
      case "prerelease":
        if (this.prerelease.length === 0) {
          this.inc("patch", identifier);
        }
        this.inc("pre", identifier);
        break;
      case "major":
        if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0) {
          this.major++;
        }
        this.minor = 0;
        this.patch = 0;
        this.prerelease = [];
        break;
      case "minor":
        if (this.patch !== 0 || this.prerelease.length === 0) {
          this.minor++;
        }
        this.patch = 0;
        this.prerelease = [];
        break;
      case "patch":
        if (this.prerelease.length === 0) {
          this.patch++;
        }
        this.prerelease = [];
        break;
      case "pre":
        if (this.prerelease.length === 0) {
          this.prerelease = [0];
        } else {
          let i = this.prerelease.length;
          while (--i >= 0) {
            if (typeof this.prerelease[i] === "number") {
              this.prerelease[i]++;
              i = -2;
            }
          }
          if (i === -1) {
            this.prerelease.push(0);
          }
        }
        if (identifier) {
          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {
            if (isNaN(this.prerelease[1])) {
              this.prerelease = [identifier, 0];
            }
          } else {
            this.prerelease = [identifier, 0];
          }
        }
        break;
      default:
        throw new Error(`invalid increment argument: ${release}`);
    }
    this.format();
    this.raw = this.version;
    return this;
  }
};
var semver$1 = SemVer$d;
const { MAX_LENGTH } = constants$1;
const { re: re$1, t: t$1 } = reExports;
const SemVer$c = semver$1;
const parseOptions = parseOptions_1;
const parse$6 = (version2, options) => {
  options = parseOptions(options);
  if (version2 instanceof SemVer$c) {
    return version2;
  }
  if (typeof version2 !== "string") {
    return null;
  }
  if (version2.length > MAX_LENGTH) {
    return null;
  }
  const r = options.loose ? re$1[t$1.LOOSE] : re$1[t$1.FULL];
  if (!r.test(version2)) {
    return null;
  }
  try {
    return new SemVer$c(version2, options);
  } catch (er) {
    return null;
  }
};
var parse_1 = parse$6;
const parse$5 = parse_1;
const valid$2 = (version2, options) => {
  const v = parse$5(version2, options);
  return v ? v.version : null;
};
var valid_1 = valid$2;
const parse$4 = parse_1;
const clean$1 = (version2, options) => {
  const s = parse$4(version2.trim().replace(/^[=v]+/, ""), options);
  return s ? s.version : null;
};
var clean_1 = clean$1;
const SemVer$b = semver$1;
const inc$1 = (version2, release, options, identifier) => {
  if (typeof options === "string") {
    identifier = options;
    options = void 0;
  }
  try {
    return new SemVer$b(
      version2 instanceof SemVer$b ? version2.version : version2,
      options
    ).inc(release, identifier).version;
  } catch (er) {
    return null;
  }
};
var inc_1 = inc$1;
const SemVer$a = semver$1;
const compare$b = (a2, b2, loose) => new SemVer$a(a2, loose).compare(new SemVer$a(b2, loose));
var compare_1 = compare$b;
const compare$a = compare_1;
const eq$3 = (a2, b2, loose) => compare$a(a2, b2, loose) === 0;
var eq_1 = eq$3;
const parse$3 = parse_1;
const eq$2 = eq_1;
const diff$1 = (version1, version2) => {
  if (eq$2(version1, version2)) {
    return null;
  } else {
    const v1 = parse$3(version1);
    const v2 = parse$3(version2);
    const hasPre = v1.prerelease.length || v2.prerelease.length;
    const prefix = hasPre ? "pre" : "";
    const defaultResult = hasPre ? "prerelease" : "";
    for (const key in v1) {
      if (key === "major" || key === "minor" || key === "patch") {
        if (v1[key] !== v2[key]) {
          return prefix + key;
        }
      }
    }
    return defaultResult;
  }
};
var diff_1 = diff$1;
const SemVer$9 = semver$1;
const major$1 = (a2, loose) => new SemVer$9(a2, loose).major;
var major_1 = major$1;
const SemVer$8 = semver$1;
const minor$1 = (a2, loose) => new SemVer$8(a2, loose).minor;
var minor_1 = minor$1;
const SemVer$7 = semver$1;
const patch$1 = (a2, loose) => new SemVer$7(a2, loose).patch;
var patch_1 = patch$1;
const parse$2 = parse_1;
const prerelease$1 = (version2, options) => {
  const parsed = parse$2(version2, options);
  return parsed && parsed.prerelease.length ? parsed.prerelease : null;
};
var prerelease_1 = prerelease$1;
const compare$9 = compare_1;
const rcompare$1 = (a2, b2, loose) => compare$9(b2, a2, loose);
var rcompare_1 = rcompare$1;
const compare$8 = compare_1;
const compareLoose$1 = (a2, b2) => compare$8(a2, b2, true);
var compareLoose_1 = compareLoose$1;
const SemVer$6 = semver$1;
const compareBuild$3 = (a2, b2, loose) => {
  const versionA = new SemVer$6(a2, loose);
  const versionB = new SemVer$6(b2, loose);
  return versionA.compare(versionB) || versionA.compareBuild(versionB);
};
var compareBuild_1 = compareBuild$3;
const compareBuild$2 = compareBuild_1;
const sort$1 = (list, loose) => list.sort((a2, b2) => compareBuild$2(a2, b2, loose));
var sort_1 = sort$1;
const compareBuild$1 = compareBuild_1;
const rsort$1 = (list, loose) => list.sort((a2, b2) => compareBuild$1(b2, a2, loose));
var rsort_1 = rsort$1;
const compare$7 = compare_1;
const gt$4 = (a2, b2, loose) => compare$7(a2, b2, loose) > 0;
var gt_1 = gt$4;
const compare$6 = compare_1;
const lt$3 = (a2, b2, loose) => compare$6(a2, b2, loose) < 0;
var lt_1 = lt$3;
const compare$5 = compare_1;
const neq$2 = (a2, b2, loose) => compare$5(a2, b2, loose) !== 0;
var neq_1 = neq$2;
const compare$4 = compare_1;
const gte$3 = (a2, b2, loose) => compare$4(a2, b2, loose) >= 0;
var gte_1 = gte$3;
const compare$3 = compare_1;
const lte$3 = (a2, b2, loose) => compare$3(a2, b2, loose) <= 0;
var lte_1 = lte$3;
const eq$1 = eq_1;
const neq$1 = neq_1;
const gt$3 = gt_1;
const gte$2 = gte_1;
const lt$2 = lt_1;
const lte$2 = lte_1;
const cmp$1 = (a2, op, b2, loose) => {
  switch (op) {
    case "===":
      if (typeof a2 === "object") {
        a2 = a2.version;
      }
      if (typeof b2 === "object") {
        b2 = b2.version;
      }
      return a2 === b2;
    case "!==":
      if (typeof a2 === "object") {
        a2 = a2.version;
      }
      if (typeof b2 === "object") {
        b2 = b2.version;
      }
      return a2 !== b2;
    case "":
    case "=":
    case "==":
      return eq$1(a2, b2, loose);
    case "!=":
      return neq$1(a2, b2, loose);
    case ">":
      return gt$3(a2, b2, loose);
    case ">=":
      return gte$2(a2, b2, loose);
    case "<":
      return lt$2(a2, b2, loose);
    case "<=":
      return lte$2(a2, b2, loose);
    default:
      throw new TypeError(`Invalid operator: ${op}`);
  }
};
var cmp_1 = cmp$1;
const SemVer$5 = semver$1;
const parse$1 = parse_1;
const { re, t } = reExports;
const coerce$1 = (version2, options) => {
  if (version2 instanceof SemVer$5) {
    return version2;
  }
  if (typeof version2 === "number") {
    version2 = String(version2);
  }
  if (typeof version2 !== "string") {
    return null;
  }
  options = options || {};
  let match = null;
  if (!options.rtl) {
    match = version2.match(re[t.COERCE]);
  } else {
    let next;
    while ((next = re[t.COERCERTL].exec(version2)) && (!match || match.index + match[0].length !== version2.length)) {
      if (!match || next.index + next[0].length !== match.index + match[0].length) {
        match = next;
      }
      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length;
    }
    re[t.COERCERTL].lastIndex = -1;
  }
  if (match === null) {
    return null;
  }
  return parse$1(`${match[2]}.${match[3] || "0"}.${match[4] || "0"}`, options);
};
var coerce_1 = coerce$1;
var iterator;
var hasRequiredIterator;
function requireIterator() {
  if (hasRequiredIterator)
    return iterator;
  hasRequiredIterator = 1;
  iterator = function(Yallist) {
    Yallist.prototype[Symbol.iterator] = function* () {
      for (let walker = this.head; walker; walker = walker.next) {
        yield walker.value;
      }
    };
  };
  return iterator;
}
var yallist;
var hasRequiredYallist;
function requireYallist() {
  if (hasRequiredYallist)
    return yallist;
  hasRequiredYallist = 1;
  yallist = Yallist;
  Yallist.Node = Node;
  Yallist.create = Yallist;
  function Yallist(list) {
    var self2 = this;
    if (!(self2 instanceof Yallist)) {
      self2 = new Yallist();
    }
    self2.tail = null;
    self2.head = null;
    self2.length = 0;
    if (list && typeof list.forEach === "function") {
      list.forEach(function(item) {
        self2.push(item);
      });
    } else if (arguments.length > 0) {
      for (var i = 0, l = arguments.length; i < l; i++) {
        self2.push(arguments[i]);
      }
    }
    return self2;
  }
  Yallist.prototype.removeNode = function(node) {
    if (node.list !== this) {
      throw new Error("removing node which does not belong to this list");
    }
    var next = node.next;
    var prev = node.prev;
    if (next) {
      next.prev = prev;
    }
    if (prev) {
      prev.next = next;
    }
    if (node === this.head) {
      this.head = next;
    }
    if (node === this.tail) {
      this.tail = prev;
    }
    node.list.length--;
    node.next = null;
    node.prev = null;
    node.list = null;
    return next;
  };
  Yallist.prototype.unshiftNode = function(node) {
    if (node === this.head) {
      return;
    }
    if (node.list) {
      node.list.removeNode(node);
    }
    var head = this.head;
    node.list = this;
    node.next = head;
    if (head) {
      head.prev = node;
    }
    this.head = node;
    if (!this.tail) {
      this.tail = node;
    }
    this.length++;
  };
  Yallist.prototype.pushNode = function(node) {
    if (node === this.tail) {
      return;
    }
    if (node.list) {
      node.list.removeNode(node);
    }
    var tail = this.tail;
    node.list = this;
    node.prev = tail;
    if (tail) {
      tail.next = node;
    }
    this.tail = node;
    if (!this.head) {
      this.head = node;
    }
    this.length++;
  };
  Yallist.prototype.push = function() {
    for (var i = 0, l = arguments.length; i < l; i++) {
      push(this, arguments[i]);
    }
    return this.length;
  };
  Yallist.prototype.unshift = function() {
    for (var i = 0, l = arguments.length; i < l; i++) {
      unshift(this, arguments[i]);
    }
    return this.length;
  };
  Yallist.prototype.pop = function() {
    if (!this.tail) {
      return void 0;
    }
    var res = this.tail.value;
    this.tail = this.tail.prev;
    if (this.tail) {
      this.tail.next = null;
    } else {
      this.head = null;
    }
    this.length--;
    return res;
  };
  Yallist.prototype.shift = function() {
    if (!this.head) {
      return void 0;
    }
    var res = this.head.value;
    this.head = this.head.next;
    if (this.head) {
      this.head.prev = null;
    } else {
      this.tail = null;
    }
    this.length--;
    return res;
  };
  Yallist.prototype.forEach = function(fn, thisp) {
    thisp = thisp || this;
    for (var walker = this.head, i = 0; walker !== null; i++) {
      fn.call(thisp, walker.value, i, this);
      walker = walker.next;
    }
  };
  Yallist.prototype.forEachReverse = function(fn, thisp) {
    thisp = thisp || this;
    for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {
      fn.call(thisp, walker.value, i, this);
      walker = walker.prev;
    }
  };
  Yallist.prototype.get = function(n) {
    for (var i = 0, walker = this.head; walker !== null && i < n; i++) {
      walker = walker.next;
    }
    if (i === n && walker !== null) {
      return walker.value;
    }
  };
  Yallist.prototype.getReverse = function(n) {
    for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {
      walker = walker.prev;
    }
    if (i === n && walker !== null) {
      return walker.value;
    }
  };
  Yallist.prototype.map = function(fn, thisp) {
    thisp = thisp || this;
    var res = new Yallist();
    for (var walker = this.head; walker !== null; ) {
      res.push(fn.call(thisp, walker.value, this));
      walker = walker.next;
    }
    return res;
  };
  Yallist.prototype.mapReverse = function(fn, thisp) {
    thisp = thisp || this;
    var res = new Yallist();
    for (var walker = this.tail; walker !== null; ) {
      res.push(fn.call(thisp, walker.value, this));
      walker = walker.prev;
    }
    return res;
  };
  Yallist.prototype.reduce = function(fn, initial) {
    var acc;
    var walker = this.head;
    if (arguments.length > 1) {
      acc = initial;
    } else if (this.head) {
      walker = this.head.next;
      acc = this.head.value;
    } else {
      throw new TypeError("Reduce of empty list with no initial value");
    }
    for (var i = 0; walker !== null; i++) {
      acc = fn(acc, walker.value, i);
      walker = walker.next;
    }
    return acc;
  };
  Yallist.prototype.reduceReverse = function(fn, initial) {
    var acc;
    var walker = this.tail;
    if (arguments.length > 1) {
      acc = initial;
    } else if (this.tail) {
      walker = this.tail.prev;
      acc = this.tail.value;
    } else {
      throw new TypeError("Reduce of empty list with no initial value");
    }
    for (var i = this.length - 1; walker !== null; i--) {
      acc = fn(acc, walker.value, i);
      walker = walker.prev;
    }
    return acc;
  };
  Yallist.prototype.toArray = function() {
    var arr = new Array(this.length);
    for (var i = 0, walker = this.head; walker !== null; i++) {
      arr[i] = walker.value;
      walker = walker.next;
    }
    return arr;
  };
  Yallist.prototype.toArrayReverse = function() {
    var arr = new Array(this.length);
    for (var i = 0, walker = this.tail; walker !== null; i++) {
      arr[i] = walker.value;
      walker = walker.prev;
    }
    return arr;
  };
  Yallist.prototype.slice = function(from, to) {
    to = to || this.length;
    if (to < 0) {
      to += this.length;
    }
    from = from || 0;
    if (from < 0) {
      from += this.length;
    }
    var ret = new Yallist();
    if (to < from || to < 0) {
      return ret;
    }
    if (from < 0) {
      from = 0;
    }
    if (to > this.length) {
      to = this.length;
    }
    for (var i = 0, walker = this.head; walker !== null && i < from; i++) {
      walker = walker.next;
    }
    for (; walker !== null && i < to; i++, walker = walker.next) {
      ret.push(walker.value);
    }
    return ret;
  };
  Yallist.prototype.sliceReverse = function(from, to) {
    to = to || this.length;
    if (to < 0) {
      to += this.length;
    }
    from = from || 0;
    if (from < 0) {
      from += this.length;
    }
    var ret = new Yallist();
    if (to < from || to < 0) {
      return ret;
    }
    if (from < 0) {
      from = 0;
    }
    if (to > this.length) {
      to = this.length;
    }
    for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {
      walker = walker.prev;
    }
    for (; walker !== null && i > from; i--, walker = walker.prev) {
      ret.push(walker.value);
    }
    return ret;
  };
  Yallist.prototype.splice = function(start, deleteCount, ...nodes) {
    if (start > this.length) {
      start = this.length - 1;
    }
    if (start < 0) {
      start = this.length + start;
    }
    for (var i = 0, walker = this.head; walker !== null && i < start; i++) {
      walker = walker.next;
    }
    var ret = [];
    for (var i = 0; walker && i < deleteCount; i++) {
      ret.push(walker.value);
      walker = this.removeNode(walker);
    }
    if (walker === null) {
      walker = this.tail;
    }
    if (walker !== this.head && walker !== this.tail) {
      walker = walker.prev;
    }
    for (var i = 0; i < nodes.length; i++) {
      walker = insert2(this, walker, nodes[i]);
    }
    return ret;
  };
  Yallist.prototype.reverse = function() {
    var head = this.head;
    var tail = this.tail;
    for (var walker = head; walker !== null; walker = walker.prev) {
      var p = walker.prev;
      walker.prev = walker.next;
      walker.next = p;
    }
    this.head = tail;
    this.tail = head;
    return this;
  };
  function insert2(self2, node, value) {
    var inserted = node === self2.head ? new Node(value, null, node, self2) : new Node(value, node, node.next, self2);
    if (inserted.next === null) {
      self2.tail = inserted;
    }
    if (inserted.prev === null) {
      self2.head = inserted;
    }
    self2.length++;
    return inserted;
  }
  function push(self2, item) {
    self2.tail = new Node(item, self2.tail, null, self2);
    if (!self2.head) {
      self2.head = self2.tail;
    }
    self2.length++;
  }
  function unshift(self2, item) {
    self2.head = new Node(item, null, self2.head, self2);
    if (!self2.tail) {
      self2.tail = self2.head;
    }
    self2.length++;
  }
  function Node(value, prev, next, list) {
    if (!(this instanceof Node)) {
      return new Node(value, prev, next, list);
    }
    this.list = list;
    this.value = value;
    if (prev) {
      prev.next = this;
      this.prev = prev;
    } else {
      this.prev = null;
    }
    if (next) {
      next.prev = this;
      this.next = next;
    } else {
      this.next = null;
    }
  }
  try {
    requireIterator()(Yallist);
  } catch (er) {
  }
  return yallist;
}
var lruCache;
var hasRequiredLruCache;
function requireLruCache() {
  if (hasRequiredLruCache)
    return lruCache;
  hasRequiredLruCache = 1;
  const Yallist = requireYallist();
  const MAX = Symbol("max");
  const LENGTH = Symbol("length");
  const LENGTH_CALCULATOR = Symbol("lengthCalculator");
  const ALLOW_STALE = Symbol("allowStale");
  const MAX_AGE = Symbol("maxAge");
  const DISPOSE = Symbol("dispose");
  const NO_DISPOSE_ON_SET = Symbol("noDisposeOnSet");
  const LRU_LIST = Symbol("lruList");
  const CACHE = Symbol("cache");
  const UPDATE_AGE_ON_GET = Symbol("updateAgeOnGet");
  const naiveLength = () => 1;
  class LRUCache {
    constructor(options) {
      if (typeof options === "number")
        options = { max: options };
      if (!options)
        options = {};
      if (options.max && (typeof options.max !== "number" || options.max < 0))
        throw new TypeError("max must be a non-negative number");
      this[MAX] = options.max || Infinity;
      const lc = options.length || naiveLength;
      this[LENGTH_CALCULATOR] = typeof lc !== "function" ? naiveLength : lc;
      this[ALLOW_STALE] = options.stale || false;
      if (options.maxAge && typeof options.maxAge !== "number")
        throw new TypeError("maxAge must be a number");
      this[MAX_AGE] = options.maxAge || 0;
      this[DISPOSE] = options.dispose;
      this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false;
      this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false;
      this.reset();
    }
    // resize the cache when the max changes.
    set max(mL) {
      if (typeof mL !== "number" || mL < 0)
        throw new TypeError("max must be a non-negative number");
      this[MAX] = mL || Infinity;
      trim2(this);
    }
    get max() {
      return this[MAX];
    }
    set allowStale(allowStale) {
      this[ALLOW_STALE] = !!allowStale;
    }
    get allowStale() {
      return this[ALLOW_STALE];
    }
    set maxAge(mA) {
      if (typeof mA !== "number")
        throw new TypeError("maxAge must be a non-negative number");
      this[MAX_AGE] = mA;
      trim2(this);
    }
    get maxAge() {
      return this[MAX_AGE];
    }
    // resize the cache when the lengthCalculator changes.
    set lengthCalculator(lC) {
      if (typeof lC !== "function")
        lC = naiveLength;
      if (lC !== this[LENGTH_CALCULATOR]) {
        this[LENGTH_CALCULATOR] = lC;
        this[LENGTH] = 0;
        this[LRU_LIST].forEach((hit) => {
          hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key);
          this[LENGTH] += hit.length;
        });
      }
      trim2(this);
    }
    get lengthCalculator() {
      return this[LENGTH_CALCULATOR];
    }
    get length() {
      return this[LENGTH];
    }
    get itemCount() {
      return this[LRU_LIST].length;
    }
    rforEach(fn, thisp) {
      thisp = thisp || this;
      for (let walker = this[LRU_LIST].tail; walker !== null; ) {
        const prev = walker.prev;
        forEachStep(this, fn, walker, thisp);
        walker = prev;
      }
    }
    forEach(fn, thisp) {
      thisp = thisp || this;
      for (let walker = this[LRU_LIST].head; walker !== null; ) {
        const next = walker.next;
        forEachStep(this, fn, walker, thisp);
        walker = next;
      }
    }
    keys() {
      return this[LRU_LIST].toArray().map((k2) => k2.key);
    }
    values() {
      return this[LRU_LIST].toArray().map((k2) => k2.value);
    }
    reset() {
      if (this[DISPOSE] && this[LRU_LIST] && this[LRU_LIST].length) {
        this[LRU_LIST].forEach((hit) => this[DISPOSE](hit.key, hit.value));
      }
      this[CACHE] = /* @__PURE__ */ new Map();
      this[LRU_LIST] = new Yallist();
      this[LENGTH] = 0;
    }
    dump() {
      return this[LRU_LIST].map((hit) => isStale(this, hit) ? false : {
        k: hit.key,
        v: hit.value,
        e: hit.now + (hit.maxAge || 0)
      }).toArray().filter((h) => h);
    }
    dumpLru() {
      return this[LRU_LIST];
    }
    set(key, value, maxAge) {
      maxAge = maxAge || this[MAX_AGE];
      if (maxAge && typeof maxAge !== "number")
        throw new TypeError("maxAge must be a number");
      const now = maxAge ? Date.now() : 0;
      const len = this[LENGTH_CALCULATOR](value, key);
      if (this[CACHE].has(key)) {
        if (len > this[MAX]) {
          del(this, this[CACHE].get(key));
          return false;
        }
        const node = this[CACHE].get(key);
        const item = node.value;
        if (this[DISPOSE]) {
          if (!this[NO_DISPOSE_ON_SET])
            this[DISPOSE](key, item.value);
        }
        item.now = now;
        item.maxAge = maxAge;
        item.value = value;
        this[LENGTH] += len - item.length;
        item.length = len;
        this.get(key);
        trim2(this);
        return true;
      }
      const hit = new Entry(key, value, len, now, maxAge);
      if (hit.length > this[MAX]) {
        if (this[DISPOSE])
          this[DISPOSE](key, value);
        return false;
      }
      this[LENGTH] += hit.length;
      this[LRU_LIST].unshift(hit);
      this[CACHE].set(key, this[LRU_LIST].head);
      trim2(this);
      return true;
    }
    has(key) {
      if (!this[CACHE].has(key))
        return false;
      const hit = this[CACHE].get(key).value;
      return !isStale(this, hit);
    }
    get(key) {
      return get(this, key, true);
    }
    peek(key) {
      return get(this, key, false);
    }
    pop() {
      const node = this[LRU_LIST].tail;
      if (!node)
        return null;
      del(this, node);
      return node.value;
    }
    del(key) {
      del(this, this[CACHE].get(key));
    }
    load(arr) {
      this.reset();
      const now = Date.now();
      for (let l = arr.length - 1; l >= 0; l--) {
        const hit = arr[l];
        const expiresAt = hit.e || 0;
        if (expiresAt === 0)
          this.set(hit.k, hit.v);
        else {
          const maxAge = expiresAt - now;
          if (maxAge > 0) {
            this.set(hit.k, hit.v, maxAge);
          }
        }
      }
    }
    prune() {
      this[CACHE].forEach((value, key) => get(this, key, false));
    }
  }
  const get = (self2, key, doUse) => {
    const node = self2[CACHE].get(key);
    if (node) {
      const hit = node.value;
      if (isStale(self2, hit)) {
        del(self2, node);
        if (!self2[ALLOW_STALE])
          return void 0;
      } else {
        if (doUse) {
          if (self2[UPDATE_AGE_ON_GET])
            node.value.now = Date.now();
          self2[LRU_LIST].unshiftNode(node);
        }
      }
      return hit.value;
    }
  };
  const isStale = (self2, hit) => {
    if (!hit || !hit.maxAge && !self2[MAX_AGE])
      return false;
    const diff2 = Date.now() - hit.now;
    return hit.maxAge ? diff2 > hit.maxAge : self2[MAX_AGE] && diff2 > self2[MAX_AGE];
  };
  const trim2 = (self2) => {
    if (self2[LENGTH] > self2[MAX]) {
      for (let walker = self2[LRU_LIST].tail; self2[LENGTH] > self2[MAX] && walker !== null; ) {
        const prev = walker.prev;
        del(self2, walker);
        walker = prev;
      }
    }
  };
  const del = (self2, node) => {
    if (node) {
      const hit = node.value;
      if (self2[DISPOSE])
        self2[DISPOSE](hit.key, hit.value);
      self2[LENGTH] -= hit.length;
      self2[CACHE].delete(hit.key);
      self2[LRU_LIST].removeNode(node);
    }
  };
  class Entry {
    constructor(key, value, length, now, maxAge) {
      this.key = key;
      this.value = value;
      this.length = length;
      this.now = now;
      this.maxAge = maxAge || 0;
    }
  }
  const forEachStep = (self2, fn, node, thisp) => {
    let hit = node.value;
    if (isStale(self2, hit)) {
      del(self2, node);
      if (!self2[ALLOW_STALE])
        hit = void 0;
    }
    if (hit)
      fn.call(thisp, hit.value, hit.key, self2);
  };
  lruCache = LRUCache;
  return lruCache;
}
var range;
var hasRequiredRange;
function requireRange() {
  if (hasRequiredRange)
    return range;
  hasRequiredRange = 1;
  class Range2 {
    constructor(range2, options) {
      options = parseOptions2(options);
      if (range2 instanceof Range2) {
        if (range2.loose === !!options.loose && range2.includePrerelease === !!options.includePrerelease) {
          return range2;
        } else {
          return new Range2(range2.raw, options);
        }
      }
      if (range2 instanceof Comparator2) {
        this.raw = range2.value;
        this.set = [[range2]];
        this.format();
        return this;
      }
      this.options = options;
      this.loose = !!options.loose;
      this.includePrerelease = !!options.includePrerelease;
      this.raw = range2;
      this.set = range2.split("||").map((r) => this.parseRange(r.trim())).filter((c) => c.length);
      if (!this.set.length) {
        throw new TypeError(`Invalid SemVer Range: ${range2}`);
      }
      if (this.set.length > 1) {
        const first = this.set[0];
        this.set = this.set.filter((c) => !isNullSet(c[0]));
        if (this.set.length === 0) {
          this.set = [first];
        } else if (this.set.length > 1) {
          for (const c of this.set) {
            if (c.length === 1 && isAny(c[0])) {
              this.set = [c];
              break;
            }
          }
        }
      }
      this.format();
    }
    format() {
      this.range = this.set.map((comps) => {
        return comps.join(" ").trim();
      }).join("||").trim();
      return this.range;
    }
    toString() {
      return this.range;
    }
    parseRange(range2) {
      range2 = range2.trim();
      const memoOpts = Object.keys(this.options).join(",");
      const memoKey = `parseRange:${memoOpts}:${range2}`;
      const cached = cache.get(memoKey);
      if (cached) {
        return cached;
      }
      const loose = this.options.loose;
      const hr = loose ? re2[t2.HYPHENRANGELOOSE] : re2[t2.HYPHENRANGE];
      range2 = range2.replace(hr, hyphenReplace(this.options.includePrerelease));
      debug2("hyphen replace", range2);
      range2 = range2.replace(re2[t2.COMPARATORTRIM], comparatorTrimReplace);
      debug2("comparator trim", range2);
      range2 = range2.replace(re2[t2.TILDETRIM], tildeTrimReplace);
      range2 = range2.replace(re2[t2.CARETTRIM], caretTrimReplace);
      range2 = range2.split(/\s+/).join(" ");
      let rangeList = range2.split(" ").map((comp) => parseComparator(comp, this.options)).join(" ").split(/\s+/).map((comp) => replaceGTE0(comp, this.options));
      if (loose) {
        rangeList = rangeList.filter((comp) => {
          debug2("loose invalid filter", comp, this.options);
          return !!comp.match(re2[t2.COMPARATORLOOSE]);
        });
      }
      debug2("range list", rangeList);
      const rangeMap = /* @__PURE__ */ new Map();
      const comparators = rangeList.map((comp) => new Comparator2(comp, this.options));
      for (const comp of comparators) {
        if (isNullSet(comp)) {
          return [comp];
        }
        rangeMap.set(comp.value, comp);
      }
      if (rangeMap.size > 1 && rangeMap.has("")) {
        rangeMap.delete("");
      }
      const result = [...rangeMap.values()];
      cache.set(memoKey, result);
      return result;
    }
    intersects(range2, options) {
      if (!(range2 instanceof Range2)) {
        throw new TypeError("a Range is required");
      }
      return this.set.some((thisComparators) => {
        return isSatisfiable(thisComparators, options) && range2.set.some((rangeComparators) => {
          return isSatisfiable(rangeComparators, options) && thisComparators.every((thisComparator) => {
            return rangeComparators.every((rangeComparator) => {
              return thisComparator.intersects(rangeComparator, options);
            });
          });
        });
      });
    }
    // if ANY of the sets match ALL of its comparators, then pass
    test(version2) {
      if (!version2) {
        return false;
      }
      if (typeof version2 === "string") {
        try {
          version2 = new SemVer3(version2, this.options);
        } catch (er) {
          return false;
        }
      }
      for (let i = 0; i < this.set.length; i++) {
        if (testSet(this.set[i], version2, this.options)) {
          return true;
        }
      }
      return false;
    }
  }
  range = Range2;
  const LRU = requireLruCache();
  const cache = new LRU({ max: 1e3 });
  const parseOptions2 = parseOptions_1;
  const Comparator2 = requireComparator();
  const debug2 = debug_1;
  const SemVer3 = semver$1;
  const {
    re: re2,
    t: t2,
    comparatorTrimReplace,
    tildeTrimReplace,
    caretTrimReplace
  } = reExports;
  const isNullSet = (c) => c.value === "<0.0.0-0";
  const isAny = (c) => c.value === "";
  const isSatisfiable = (comparators, options) => {
    let result = true;
    const remainingComparators = comparators.slice();
    let testComparator = remainingComparators.pop();
    while (result && remainingComparators.length) {
      result = remainingComparators.every((otherComparator) => {
        return testComparator.intersects(otherComparator, options);
      });
      testComparator = remainingComparators.pop();
    }
    return result;
  };
  const parseComparator = (comp, options) => {
    debug2("comp", comp, options);
    comp = replaceCarets(comp, options);
    debug2("caret", comp);
    comp = replaceTildes(comp, options);
    debug2("tildes", comp);
    comp = replaceXRanges(comp, options);
    debug2("xrange", comp);
    comp = replaceStars(comp, options);
    debug2("stars", comp);
    return comp;
  };
  const isX = (id2) => !id2 || id2.toLowerCase() === "x" || id2 === "*";
  const replaceTildes = (comp, options) => comp.trim().split(/\s+/).map((c) => {
    return replaceTilde(c, options);
  }).join(" ");
  const replaceTilde = (comp, options) => {
    const r = options.loose ? re2[t2.TILDELOOSE] : re2[t2.TILDE];
    return comp.replace(r, (_2, M2, m, p, pr) => {
      debug2("tilde", comp, _2, M2, m, p, pr);
      let ret;
      if (isX(M2)) {
        ret = "";
      } else if (isX(m)) {
        ret = `>=${M2}.0.0 <${+M2 + 1}.0.0-0`;
      } else if (isX(p)) {
        ret = `>=${M2}.${m}.0 <${M2}.${+m + 1}.0-0`;
      } else if (pr) {
        debug2("replaceTilde pr", pr);
        ret = `>=${M2}.${m}.${p}-${pr} <${M2}.${+m + 1}.0-0`;
      } else {
        ret = `>=${M2}.${m}.${p} <${M2}.${+m + 1}.0-0`;
      }
      debug2("tilde return", ret);
      return ret;
    });
  };
  const replaceCarets = (comp, options) => comp.trim().split(/\s+/).map((c) => {
    return replaceCaret(c, options);
  }).join(" ");
  const replaceCaret = (comp, options) => {
    debug2("caret", comp, options);
    const r = options.loose ? re2[t2.CARETLOOSE] : re2[t2.CARET];
    const z2 = options.includePrerelease ? "-0" : "";
    return comp.replace(r, (_2, M2, m, p, pr) => {
      debug2("caret", comp, _2, M2, m, p, pr);
      let ret;
      if (isX(M2)) {
        ret = "";
      } else if (isX(m)) {
        ret = `>=${M2}.0.0${z2} <${+M2 + 1}.0.0-0`;
      } else if (isX(p)) {
        if (M2 === "0") {
          ret = `>=${M2}.${m}.0${z2} <${M2}.${+m + 1}.0-0`;
        } else {
          ret = `>=${M2}.${m}.0${z2} <${+M2 + 1}.0.0-0`;
        }
      } else if (pr) {
        debug2("replaceCaret pr", pr);
        if (M2 === "0") {
          if (m === "0") {
            ret = `>=${M2}.${m}.${p}-${pr} <${M2}.${m}.${+p + 1}-0`;
          } else {
            ret = `>=${M2}.${m}.${p}-${pr} <${M2}.${+m + 1}.0-0`;
          }
        } else {
          ret = `>=${M2}.${m}.${p}-${pr} <${+M2 + 1}.0.0-0`;
        }
      } else {
        debug2("no pr");
        if (M2 === "0") {
          if (m === "0") {
            ret = `>=${M2}.${m}.${p}${z2} <${M2}.${m}.${+p + 1}-0`;
          } else {
            ret = `>=${M2}.${m}.${p}${z2} <${M2}.${+m + 1}.0-0`;
          }
        } else {
          ret = `>=${M2}.${m}.${p} <${+M2 + 1}.0.0-0`;
        }
      }
      debug2("caret return", ret);
      return ret;
    });
  };
  const replaceXRanges = (comp, options) => {
    debug2("replaceXRanges", comp, options);
    return comp.split(/\s+/).map((c) => {
      return replaceXRange(c, options);
    }).join(" ");
  };
  const replaceXRange = (comp, options) => {
    comp = comp.trim();
    const r = options.loose ? re2[t2.XRANGELOOSE] : re2[t2.XRANGE];
    return comp.replace(r, (ret, gtlt, M2, m, p, pr) => {
      debug2("xRange", comp, ret, gtlt, M2, m, p, pr);
      const xM = isX(M2);
      const xm = xM || isX(m);
      const xp = xm || isX(p);
      const anyX = xp;
      if (gtlt === "=" && anyX) {
        gtlt = "";
      }
      pr = options.includePrerelease ? "-0" : "";
      if (xM) {
        if (gtlt === ">" || gtlt === "<") {
          ret = "<0.0.0-0";
        } else {
          ret = "*";
        }
      } else if (gtlt && anyX) {
        if (xm) {
          m = 0;
        }
        p = 0;
        if (gtlt === ">") {
          gtlt = ">=";
          if (xm) {
            M2 = +M2 + 1;
            m = 0;
            p = 0;
          } else {
            m = +m + 1;
            p = 0;
          }
        } else if (gtlt === "<=") {
          gtlt = "<";
          if (xm) {
            M2 = +M2 + 1;
          } else {
            m = +m + 1;
          }
        }
        if (gtlt === "<") {
          pr = "-0";
        }
        ret = `${gtlt + M2}.${m}.${p}${pr}`;
      } else if (xm) {
        ret = `>=${M2}.0.0${pr} <${+M2 + 1}.0.0-0`;
      } else if (xp) {
        ret = `>=${M2}.${m}.0${pr} <${M2}.${+m + 1}.0-0`;
      }
      debug2("xRange return", ret);
      return ret;
    });
  };
  const replaceStars = (comp, options) => {
    debug2("replaceStars", comp, options);
    return comp.trim().replace(re2[t2.STAR], "");
  };
  const replaceGTE0 = (comp, options) => {
    debug2("replaceGTE0", comp, options);
    return comp.trim().replace(re2[options.includePrerelease ? t2.GTE0PRE : t2.GTE0], "");
  };
  const hyphenReplace = (incPr) => ($0, from, fM, fm, fp, fpr, fb, to, tM, tm, tp, tpr, tb) => {
    if (isX(fM)) {
      from = "";
    } else if (isX(fm)) {
      from = `>=${fM}.0.0${incPr ? "-0" : ""}`;
    } else if (isX(fp)) {
      from = `>=${fM}.${fm}.0${incPr ? "-0" : ""}`;
    } else if (fpr) {
      from = `>=${from}`;
    } else {
      from = `>=${from}${incPr ? "-0" : ""}`;
    }
    if (isX(tM)) {
      to = "";
    } else if (isX(tm)) {
      to = `<${+tM + 1}.0.0-0`;
    } else if (isX(tp)) {
      to = `<${tM}.${+tm + 1}.0-0`;
    } else if (tpr) {
      to = `<=${tM}.${tm}.${tp}-${tpr}`;
    } else if (incPr) {
      to = `<${tM}.${tm}.${+tp + 1}-0`;
    } else {
      to = `<=${to}`;
    }
    return `${from} ${to}`.trim();
  };
  const testSet = (set, version2, options) => {
    for (let i = 0; i < set.length; i++) {
      if (!set[i].test(version2)) {
        return false;
      }
    }
    if (version2.prerelease.length && !options.includePrerelease) {
      for (let i = 0; i < set.length; i++) {
        debug2(set[i].semver);
        if (set[i].semver === Comparator2.ANY) {
          continue;
        }
        if (set[i].semver.prerelease.length > 0) {
          const allowed = set[i].semver;
          if (allowed.major === version2.major && allowed.minor === version2.minor && allowed.patch === version2.patch) {
            return true;
          }
        }
      }
      return false;
    }
    return true;
  };
  return range;
}
var comparator;
var hasRequiredComparator;
function requireComparator() {
  if (hasRequiredComparator)
    return comparator;
  hasRequiredComparator = 1;
  const ANY2 = Symbol("SemVer ANY");
  class Comparator2 {
    static get ANY() {
      return ANY2;
    }
    constructor(comp, options) {
      options = parseOptions2(options);
      if (comp instanceof Comparator2) {
        if (comp.loose === !!options.loose) {
          return comp;
        } else {
          comp = comp.value;
        }
      }
      debug2("comparator", comp, options);
      this.options = options;
      this.loose = !!options.loose;
      this.parse(comp);
      if (this.semver === ANY2) {
        this.value = "";
      } else {
        this.value = this.operator + this.semver.version;
      }
      debug2("comp", this);
    }
    parse(comp) {
      const r = this.options.loose ? re2[t2.COMPARATORLOOSE] : re2[t2.COMPARATOR];
      const m = comp.match(r);
      if (!m) {
        throw new TypeError(`Invalid comparator: ${comp}`);
      }
      this.operator = m[1] !== void 0 ? m[1] : "";
      if (this.operator === "=") {
        this.operator = "";
      }
      if (!m[2]) {
        this.semver = ANY2;
      } else {
        this.semver = new SemVer3(m[2], this.options.loose);
      }
    }
    toString() {
      return this.value;
    }
    test(version2) {
      debug2("Comparator.test", version2, this.options.loose);
      if (this.semver === ANY2 || version2 === ANY2) {
        return true;
      }
      if (typeof version2 === "string") {
        try {
          version2 = new SemVer3(version2, this.options);
        } catch (er) {
          return false;
        }
      }
      return cmp2(version2, this.operator, this.semver, this.options);
    }
    intersects(comp, options) {
      if (!(comp instanceof Comparator2)) {
        throw new TypeError("a Comparator is required");
      }
      if (!options || typeof options !== "object") {
        options = {
          loose: !!options,
          includePrerelease: false
        };
      }
      if (this.operator === "") {
        if (this.value === "") {
          return true;
        }
        return new Range2(comp.value, options).test(this.value);
      } else if (comp.operator === "") {
        if (comp.value === "") {
          return true;
        }
        return new Range2(this.value, options).test(comp.semver);
      }
      const sameDirectionIncreasing = (this.operator === ">=" || this.operator === ">") && (comp.operator === ">=" || comp.operator === ">");
      const sameDirectionDecreasing = (this.operator === "<=" || this.operator === "<") && (comp.operator === "<=" || comp.operator === "<");
      const sameSemVer = this.semver.version === comp.semver.version;
      const differentDirectionsInclusive = (this.operator === ">=" || this.operator === "<=") && (comp.operator === ">=" || comp.operator === "<=");
      const oppositeDirectionsLessThan = cmp2(this.semver, "<", comp.semver, options) && (this.operator === ">=" || this.operator === ">") && (comp.operator === "<=" || comp.operator === "<");
      const oppositeDirectionsGreaterThan = cmp2(this.semver, ">", comp.semver, options) && (this.operator === "<=" || this.operator === "<") && (comp.operator === ">=" || comp.operator === ">");
      return sameDirectionIncreasing || sameDirectionDecreasing || sameSemVer && differentDirectionsInclusive || oppositeDirectionsLessThan || oppositeDirectionsGreaterThan;
    }
  }
  comparator = Comparator2;
  const parseOptions2 = parseOptions_1;
  const { re: re2, t: t2 } = reExports;
  const cmp2 = cmp_1;
  const debug2 = debug_1;
  const SemVer3 = semver$1;
  const Range2 = requireRange();
  return comparator;
}
const Range$9 = requireRange();
const satisfies$4 = (version2, range2, options) => {
  try {
    range2 = new Range$9(range2, options);
  } catch (er) {
    return false;
  }
  return range2.test(version2);
};
var satisfies_1 = satisfies$4;
const Range$8 = requireRange();
const toComparators$1 = (range2, options) => new Range$8(range2, options).set.map((comp) => comp.map((c) => c.value).join(" ").trim().split(" "));
var toComparators_1 = toComparators$1;
const SemVer$4 = semver$1;
const Range$7 = requireRange();
const maxSatisfying$1 = (versions, range2, options) => {
  let max = null;
  let maxSV = null;
  let rangeObj = null;
  try {
    rangeObj = new Range$7(range2, options);
  } catch (er) {
    return null;
  }
  versions.forEach((v) => {
    if (rangeObj.test(v)) {
      if (!max || maxSV.compare(v) === -1) {
        max = v;
        maxSV = new SemVer$4(max, options);
      }
    }
  });
  return max;
};
var maxSatisfying_1 = maxSatisfying$1;
const SemVer$3 = semver$1;
const Range$6 = requireRange();
const minSatisfying$1 = (versions, range2, options) => {
  let min = null;
  let minSV = null;
  let rangeObj = null;
  try {
    rangeObj = new Range$6(range2, options);
  } catch (er) {
    return null;
  }
  versions.forEach((v) => {
    if (rangeObj.test(v)) {
      if (!min || minSV.compare(v) === 1) {
        min = v;
        minSV = new SemVer$3(min, options);
      }
    }
  });
  return min;
};
var minSatisfying_1 = minSatisfying$1;
const SemVer$2 = semver$1;
const Range$5 = requireRange();
const gt$2 = gt_1;
const minVersion$1 = (range2, loose) => {
  range2 = new Range$5(range2, loose);
  let minver = new SemVer$2("0.0.0");
  if (range2.test(minver)) {
    return minver;
  }
  minver = new SemVer$2("0.0.0-0");
  if (range2.test(minver)) {
    return minver;
  }
  minver = null;
  for (let i = 0; i < range2.set.length; ++i) {
    const comparators = range2.set[i];
    let setMin = null;
    comparators.forEach((comparator2) => {
      const compver = new SemVer$2(comparator2.semver.version);
      switch (comparator2.operator) {
        case ">":
          if (compver.prerelease.length === 0) {
            compver.patch++;
          } else {
            compver.prerelease.push(0);
          }
          compver.raw = compver.format();
        case "":
        case ">=":
          if (!setMin || gt$2(compver, setMin)) {
            setMin = compver;
          }
          break;
        case "<":
        case "<=":
          break;
        default:
          throw new Error(`Unexpected operation: ${comparator2.operator}`);
      }
    });
    if (setMin && (!minver || gt$2(minver, setMin))) {
      minver = setMin;
    }
  }
  if (minver && range2.test(minver)) {
    return minver;
  }
  return null;
};
var minVersion_1 = minVersion$1;
const Range$4 = requireRange();
const validRange$1 = (range2, options) => {
  try {
    return new Range$4(range2, options).range || "*";
  } catch (er) {
    return null;
  }
};
var valid$1 = validRange$1;
const SemVer$1 = semver$1;
const Comparator$2 = requireComparator();
const { ANY: ANY$1 } = Comparator$2;
const Range$3 = requireRange();
const satisfies$3 = satisfies_1;
const gt$1 = gt_1;
const lt$1 = lt_1;
const lte$1 = lte_1;
const gte$1 = gte_1;
const outside$3 = (version2, range2, hilo, options) => {
  version2 = new SemVer$1(version2, options);
  range2 = new Range$3(range2, options);
  let gtfn, ltefn, ltfn, comp, ecomp;
  switch (hilo) {
    case ">":
      gtfn = gt$1;
      ltefn = lte$1;
      ltfn = lt$1;
      comp = ">";
      ecomp = ">=";
      break;
    case "<":
      gtfn = lt$1;
      ltefn = gte$1;
      ltfn = gt$1;
      comp = "<";
      ecomp = "<=";
      break;
    default:
      throw new TypeError('Must provide a hilo val of "<" or ">"');
  }
  if (satisfies$3(version2, range2, options)) {
    return false;
  }
  for (let i = 0; i < range2.set.length; ++i) {
    const comparators = range2.set[i];
    let high = null;
    let low = null;
    comparators.forEach((comparator2) => {
      if (comparator2.semver === ANY$1) {
        comparator2 = new Comparator$2(">=0.0.0");
      }
      high = high || comparator2;
      low = low || comparator2;
      if (gtfn(comparator2.semver, high.semver, options)) {
        high = comparator2;
      } else if (ltfn(comparator2.semver, low.semver, options)) {
        low = comparator2;
      }
    });
    if (high.operator === comp || high.operator === ecomp) {
      return false;
    }
    if ((!low.operator || low.operator === comp) && ltefn(version2, low.semver)) {
      return false;
    } else if (low.operator === ecomp && ltfn(version2, low.semver)) {
      return false;
    }
  }
  return true;
};
var outside_1 = outside$3;
const outside$2 = outside_1;
const gtr$1 = (version2, range2, options) => outside$2(version2, range2, ">", options);
var gtr_1 = gtr$1;
const outside$1 = outside_1;
const ltr$1 = (version2, range2, options) => outside$1(version2, range2, "<", options);
var ltr_1 = ltr$1;
const Range$2 = requireRange();
const intersects$1 = (r1, r2, options) => {
  r1 = new Range$2(r1, options);
  r2 = new Range$2(r2, options);
  return r1.intersects(r2);
};
var intersects_1 = intersects$1;
const satisfies$2 = satisfies_1;
const compare$2 = compare_1;
var simplify = (versions, range2, options) => {
  const set = [];
  let first = null;
  let prev = null;
  const v = versions.sort((a2, b2) => compare$2(a2, b2, options));
  for (const version2 of v) {
    const included = satisfies$2(version2, range2, options);
    if (included) {
      prev = version2;
      if (!first) {
        first = version2;
      }
    } else {
      if (prev) {
        set.push([first, prev]);
      }
      prev = null;
      first = null;
    }
  }
  if (first) {
    set.push([first, null]);
  }
  const ranges = [];
  for (const [min, max] of set) {
    if (min === max) {
      ranges.push(min);
    } else if (!max && min === v[0]) {
      ranges.push("*");
    } else if (!max) {
      ranges.push(`>=${min}`);
    } else if (min === v[0]) {
      ranges.push(`<=${max}`);
    } else {
      ranges.push(`${min} - ${max}`);
    }
  }
  const simplified = ranges.join(" || ");
  const original = typeof range2.raw === "string" ? range2.raw : String(range2);
  return simplified.length < original.length ? simplified : range2;
};
const Range$1 = requireRange();
const Comparator$1 = requireComparator();
const { ANY } = Comparator$1;
const satisfies$1 = satisfies_1;
const compare$1 = compare_1;
const subset$1 = (sub, dom, options = {}) => {
  if (sub === dom) {
    return true;
  }
  sub = new Range$1(sub, options);
  dom = new Range$1(dom, options);
  let sawNonNull = false;
  OUTER:
    for (const simpleSub of sub.set) {
      for (const simpleDom of dom.set) {
        const isSub = simpleSubset(simpleSub, simpleDom, options);
        sawNonNull = sawNonNull || isSub !== null;
        if (isSub) {
          continue OUTER;
        }
      }
      if (sawNonNull) {
        return false;
      }
    }
  return true;
};
const simpleSubset = (sub, dom, options) => {
  if (sub === dom) {
    return true;
  }
  if (sub.length === 1 && sub[0].semver === ANY) {
    if (dom.length === 1 && dom[0].semver === ANY) {
      return true;
    } else if (options.includePrerelease) {
      sub = [new Comparator$1(">=0.0.0-0")];
    } else {
      sub = [new Comparator$1(">=0.0.0")];
    }
  }
  if (dom.length === 1 && dom[0].semver === ANY) {
    if (options.includePrerelease) {
      return true;
    } else {
      dom = [new Comparator$1(">=0.0.0")];
    }
  }
  const eqSet = /* @__PURE__ */ new Set();
  let gt2, lt2;
  for (const c of sub) {
    if (c.operator === ">" || c.operator === ">=") {
      gt2 = higherGT(gt2, c, options);
    } else if (c.operator === "<" || c.operator === "<=") {
      lt2 = lowerLT(lt2, c, options);
    } else {
      eqSet.add(c.semver);
    }
  }
  if (eqSet.size > 1) {
    return null;
  }
  let gtltComp;
  if (gt2 && lt2) {
    gtltComp = compare$1(gt2.semver, lt2.semver, options);
    if (gtltComp > 0) {
      return null;
    } else if (gtltComp === 0 && (gt2.operator !== ">=" || lt2.operator !== "<=")) {
      return null;
    }
  }
  for (const eq2 of eqSet) {
    if (gt2 && !satisfies$1(eq2, String(gt2), options)) {
      return null;
    }
    if (lt2 && !satisfies$1(eq2, String(lt2), options)) {
      return null;
    }
    for (const c of dom) {
      if (!satisfies$1(eq2, String(c), options)) {
        return false;
      }
    }
    return true;
  }
  let higher, lower;
  let hasDomLT, hasDomGT;
  let needDomLTPre = lt2 && !options.includePrerelease && lt2.semver.prerelease.length ? lt2.semver : false;
  let needDomGTPre = gt2 && !options.includePrerelease && gt2.semver.prerelease.length ? gt2.semver : false;
  if (needDomLTPre && needDomLTPre.prerelease.length === 1 && lt2.operator === "<" && needDomLTPre.prerelease[0] === 0) {
    needDomLTPre = false;
  }
  for (const c of dom) {
    hasDomGT = hasDomGT || c.operator === ">" || c.operator === ">=";
    hasDomLT = hasDomLT || c.operator === "<" || c.operator === "<=";
    if (gt2) {
      if (needDomGTPre) {
        if (c.semver.prerelease && c.semver.prerelease.length && c.semver.major === needDomGTPre.major && c.semver.minor === needDomGTPre.minor && c.semver.patch === needDomGTPre.patch) {
          needDomGTPre = false;
        }
      }
      if (c.operator === ">" || c.operator === ">=") {
        higher = higherGT(gt2, c, options);
        if (higher === c && higher !== gt2) {
          return false;
        }
      } else if (gt2.operator === ">=" && !satisfies$1(gt2.semver, String(c), options)) {
        return false;
      }
    }
    if (lt2) {
      if (needDomLTPre) {
        if (c.semver.prerelease && c.semver.prerelease.length && c.semver.major === needDomLTPre.major && c.semver.minor === needDomLTPre.minor && c.semver.patch === needDomLTPre.patch) {
          needDomLTPre = false;
        }
      }
      if (c.operator === "<" || c.operator === "<=") {
        lower = lowerLT(lt2, c, options);
        if (lower === c && lower !== lt2) {
          return false;
        }
      } else if (lt2.operator === "<=" && !satisfies$1(lt2.semver, String(c), options)) {
        return false;
      }
    }
    if (!c.operator && (lt2 || gt2) && gtltComp !== 0) {
      return false;
    }
  }
  if (gt2 && hasDomLT && !lt2 && gtltComp !== 0) {
    return false;
  }
  if (lt2 && hasDomGT && !gt2 && gtltComp !== 0) {
    return false;
  }
  if (needDomGTPre || needDomLTPre) {
    return false;
  }
  return true;
};
const higherGT = (a2, b2, options) => {
  if (!a2) {
    return b2;
  }
  const comp = compare$1(a2.semver, b2.semver, options);
  return comp > 0 ? a2 : comp < 0 ? b2 : b2.operator === ">" && a2.operator === ">=" ? b2 : a2;
};
const lowerLT = (a2, b2, options) => {
  if (!a2) {
    return b2;
  }
  const comp = compare$1(a2.semver, b2.semver, options);
  return comp < 0 ? a2 : comp > 0 ? b2 : b2.operator === "<" && a2.operator === "<=" ? b2 : a2;
};
var subset_1 = subset$1;
const internalRe = reExports;
const constants = constants$1;
const SemVer = semver$1;
const identifiers = identifiers$1;
const parse = parse_1;
const valid = valid_1;
const clean = clean_1;
const inc = inc_1;
const diff = diff_1;
const major = major_1;
const minor = minor_1;
const patch = patch_1;
const prerelease = prerelease_1;
const compare = compare_1;
const rcompare = rcompare_1;
const compareLoose = compareLoose_1;
const compareBuild = compareBuild_1;
const sort = sort_1;
const rsort = rsort_1;
const gt = gt_1;
const lt = lt_1;
const eq = eq_1;
const neq = neq_1;
const gte = gte_1;
const lte = lte_1;
const cmp = cmp_1;
const coerce = coerce_1;
const Comparator = requireComparator();
const Range = requireRange();
const satisfies = satisfies_1;
const toComparators = toComparators_1;
const maxSatisfying = maxSatisfying_1;
const minSatisfying = minSatisfying_1;
const minVersion = minVersion_1;
const validRange = valid$1;
const outside = outside_1;
const gtr = gtr_1;
const ltr = ltr_1;
const intersects = intersects_1;
const simplifyRange = simplify;
const subset = subset_1;
var semver = {
  parse,
  valid,
  clean,
  inc,
  diff,
  major,
  minor,
  patch,
  prerelease,
  compare,
  rcompare,
  compareLoose,
  compareBuild,
  sort,
  rsort,
  gt,
  lt,
  eq,
  neq,
  gte,
  lte,
  cmp,
  coerce,
  Comparator,
  Range,
  satisfies,
  toComparators,
  maxSatisfying,
  minSatisfying,
  minVersion,
  validRange,
  outside,
  gtr,
  ltr,
  intersects,
  simplifyRange,
  subset,
  SemVer,
  re: internalRe.re,
  src: internalRe.src,
  tokens: internalRe.t,
  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,
  compareIdentifiers: identifiers.compareIdentifiers,
  rcompareIdentifiers: identifiers.rcompareIdentifiers
};
var __defProp$6 = Object.defineProperty;
var __getOwnPropDesc$6 = Object.getOwnPropertyDescriptor;
var __decorateClass$6 = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$6(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp$6(target, key, result);
  return result;
};
var __decorateParam$3 = (index, decorator) => (target, key) => decorator(target, key, index);
let SystemManager = class {
  constructor(storageManager) {
    this.storageMangager = storageManager;
  }
  async saveToLocal(p, content) {
    FileClient.getInstanceApi().fileApi.putFile(p, content);
  }
  async localCacheInit() {
  }
  delayAutoUpgrade() {
    return false;
  }
  async tryUpgrade() {
  }
  async getOnlineVersion() {
    return VERSION$1;
  }
  async upgrade() {
  }
  async compareWidgetVersion() {
    const res = await getBazzarWidget();
    const packages = res.packages;
    const ps = packages.find((p) => p.name === "插件系统");
    if (!ps) {
      return;
    }
    const latestVersion = ps.version;
    const result = new semver.SemVer(VERSION$1).compare(latestVersion);
    if (result < 0) {
      new Notification({ message: _("new_version_widget"), type: "info" }).show();
    }
  }
};
SystemManager = __decorateClass$6([
  injectable(),
  __decorateParam$3(0, inject(TYPES.StorageManager))
], SystemManager);
var __defProp$5 = Object.defineProperty;
var __getOwnPropDesc$5 = Object.getOwnPropertyDescriptor;
var __decorateClass$5 = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$5(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp$5(target, key, result);
  return result;
};
var __decorateParam$2 = (index, decorator) => (target, key) => decorator(target, key, index);
let components;
let PluginLoader = class {
  constructor(pluginFileManager) {
    this.pluginFileManager = pluginFileManager;
    this.loadedPlugins = /* @__PURE__ */ new Map();
  }
  async loadEnabledPlugins(plugins) {
    if (!plugins || !plugins.length) {
      return;
    }
    for (const p of plugins) {
      if (!p.enabled) {
        continue;
      }
      await this.loadPlugin(p);
    }
  }
  async loadAllInternalPlugins() {
    internalPlugins.forEach(async (p) => {
      const plug2 = new p.plugin();
      if (!(plug2 instanceof Plugin)) {
        throw new Error(`Failed to load plugin ${p.name}`);
      }
      log(`Load internal plugin: ${p.key}(${p.name})`);
      this.addAdditionalMethod(plug2, p.key, p.name);
      await plug2.onload();
      this.loadedPlugins.set(p.key, plug2);
    });
  }
  async loadAllLocalPlugins() {
    const plugins = await this.pluginFileManager.getAllPlugins();
    if (!plugins) {
      return;
    }
    for (const p of plugins) {
      await this.loadPlugin(p);
    }
  }
  async loadPlugin(plugin) {
    if (!components) {
      this.generateRequiredModules();
    }
    if (!plugin.enabled || !plugin.plugin && !plugin.script) {
      return;
    }
    if (plugin.plugin) {
      const plug2 = new plugin.plugin();
      if (!(plug2 instanceof Plugin)) {
        throw new Error(`Failed to load plugin ${plugin.name}`);
      }
      log(`Load internal plugin: ${plugin.key}(${plugin.name})`);
      this.addAdditionalMethod(plug2, plugin.key, plugin.name);
      await plug2.onload();
      this.loadedPlugins.set(plugin.key, plug2);
      return;
    }
    const exports = {};
    const module = { exports };
    function run(script, name) {
      return eval("(function anonymous(require,module,exports){".concat(script, "\n})\n//# sourceURL=").concat(name, "\n"));
    }
    const __require = (name2) => {
      if (components[name2]) {
        return components[name2];
      }
      throw new Error(`module ${name2} not found`);
    };
    const pluginName = plugin.key;
    try {
      run(plugin.script, plugin.key)(__require, module, exports);
    } catch (e) {
      error("Error plugin:" + plugin.key + " ->", e);
      return;
    }
    let pluginConstructor;
    if (!(pluginConstructor = (module.exports || exports).default || module.exports)) {
      throw new Error(`Failed to load plugin ${pluginName}. No exports detected.`);
    }
    const plug = new pluginConstructor();
    if (!(plug instanceof Plugin)) {
      throw new Error(`Failed to load plugin ${pluginName}`);
    }
    this.addAdditionalMethod(plug, plugin.key, pluginName);
    try {
      await plug.onload();
      this.loadedPlugins.set(plugin.key, plug);
    } catch (e) {
      error("Error plugin:" + plugin.key + " ->", e);
    }
  }
  async unloadPlugin(key) {
    const plugin2 = this.loadedPlugins.get(key);
    if (!plugin2) {
      return;
    }
    plugin2.onunload();
    container.get(TYPES.CommandManager).unregisterCommandByPlugin(key);
    container.get(TYPES.SettingManager).unregisterSetting(key);
    this.loadedPlugins.delete(key);
  }
  async unloadThirdPartyPlugins(plugins) {
    const keys = plugins.filter((p) => p.enabled).map((p) => p.key);
    for (const k2 of keys) {
      log(`unload third party plugin: ${k2}`);
      await this.unloadPlugin(k2);
    }
  }
  async loadThirdPartyEnabledPlugins(plugins) {
    return this.loadEnabledPlugins(plugins);
  }
  generateRequiredModules() {
    components = {
      siyuan: api,
      axios: axios$1
    };
  }
  addAdditionalMethod(plugin2, pluginKey, pluginName2) {
    plugin2.registerCommand = (command) => {
      const cm = container.get(TYPES.CommandManager);
      cm.registerCommand({
        ...command,
        plugin: pluginKey,
        pluginName: pluginName2
      });
    };
    const sm = container.get(TYPES.StorageManager);
    plugin2.writeStorage = async (filename, content) => {
      return await sm.setPluginStorage(pluginKey, filename, content);
    };
    plugin2.loadStorage = async (filename) => {
      return await sm.getPluginStorage(pluginKey, filename);
    };
    plugin2.registerSettingRender = (settingRender) => {
      const cm = container.get(TYPES.SettingManager);
      cm.registerSetting(pluginKey, settingRender);
    };
  }
};
PluginLoader = __decorateClass$5([
  injectable(),
  __decorateParam$2(0, inject(TYPES.PluginFileManager))
], PluginLoader);
var __defProp$4 = Object.defineProperty;
var __getOwnPropDesc$4 = Object.getOwnPropertyDescriptor;
var __decorateClass$4 = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$4(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp$4(target, key, result);
  return result;
};
let PluginFileManager = class {
  async scanPlugins(pluginFolder) {
    const res = await FileClient.getInstanceApi().fileApi.readDir(pluginFolder);
    if (!res) {
      return [];
    }
    const files = res;
    const result = [];
    for (const f of files) {
      if (f.name.startsWith(".")) {
        continue;
      }
      if (f.isDir && await isExists(`/data/plugins/${f.name}/manifest.json`) && await isExists(`/data/plugins/${f.name}/main.js`)) {
        result.push(`/data/plugins/${f.name}`);
      }
    }
    return result;
  }
  async getFileContent(f) {
    const res = await FileClient.getInstanceApi().fileApi.getFile(f);
    return res || "";
  }
  async getManifest(manifest) {
    const content = await this.getFileContent(manifest);
    try {
      return JSON.parse(content);
    } catch (e) {
      error("loading manifest: " + manifest, e);
      return null;
    }
  }
  async getScript(script2) {
    return await this.getFileContent(script2);
  }
  async getAllPlugins() {
    const plugins = await this.scanPlugins("/data/plugins");
    if (!plugins || !plugins.length) {
      log("No plugin found in /data/plugins");
      return [];
    }
    const req = [];
    for (const p of plugins) {
      log("Reading plugin from filesystem: " + p);
      const key = this.getFolderName(p);
      const f = async () => {
        const [manifest, script2] = await Promise.all([this.getManifest(`${p}/manifest.json`), this.getScript(`${p}/main.js`)]);
        return { ...manifest, script: script2, enabled: false, key };
      };
      req.push(f());
    }
    const result = await Promise.all(req);
    return result || [];
  }
  getFolderName(p) {
    const f = p.split("/");
    for (let i = f.length - 1; i >= 0; i--) {
      if (f[i]) {
        return f[i];
      }
    }
    return "";
  }
};
PluginFileManager = __decorateClass$4([
  injectable()
], PluginFileManager);
var __defProp$3 = Object.defineProperty;
var __getOwnPropDesc$3 = Object.getOwnPropertyDescriptor;
var __decorateClass$3 = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$3(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp$3(target, key, result);
  return result;
};
let EventBus = class {
  constructor() {
    this.eventListeners = {};
  }
  destroy() {
    delete this.eventListeners;
  }
  on(eventName, callback) {
    if (!this.eventListeners[eventName]) {
      this.eventListeners[eventName] = [];
    }
    this.eventListeners[eventName].push(callback);
    return () => this.off(eventName, callback);
  }
  off(eventName, callback) {
    if (!callback) {
      delete this.eventListeners[eventName];
      return;
    }
    for (let i = 0; i < this.eventListeners[eventName].length; i++) {
      if (this.eventListeners[eventName][i] === callback) {
        this.eventListeners[eventName].splice(i, 1);
        return;
      }
    }
  }
  emit(eventName, ...args) {
    if (this.eventListeners[eventName]) {
      this.eventListeners[eventName].forEach((cb) => {
        cb(...args);
      });
    }
  }
};
EventBus = __decorateClass$3([
  injectable()
], EventBus);
var __defProp$2 = Object.defineProperty;
var __getOwnPropDesc$2 = Object.getOwnPropertyDescriptor;
var __decorateClass$2 = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$2(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp$2(target, key, result);
  return result;
};
var __decorateParam$1 = (index, decorator) => (target, key) => decorator(target, key, index);
let CommandManager = class {
  constructor(shortcut2) {
    this.commandList = [];
    this.shortcut = shortcut2;
  }
  registerCommand(command) {
    if (this.commandList.some((com) => {
      com.plugin === command.plugin && com.command === command.command;
    })) {
      return new Error$1("Command is already registered, do not register command repeatly");
    }
    if (command.shortcut && this.commandList.some((com) => {
      com.shortcut === command.shortcut;
    })) {
      return new Warning("shortcut has already registered");
    }
    this.commandList.push(command);
    this.shortcut.registerKeyboardEventFromPlugin(command);
    log(`Register plugin: ${command.plugin} command: ${command.command}`);
  }
  unregisterCommandByPlugin(plugin2) {
    for (let i = 0; i < this.commandList.length; i++) {
      if (plugin2 === this.commandList[i].plugin) {
        const com = this.commandList[i];
        log(`Unregister plugin: ${plugin2} command: ${com.command}`);
        this.commandList.splice(i, 1);
        if (com.shortcut) {
          this.shortcut.unregisterKeyboardEvent(com.shortcut);
        }
      }
    }
  }
  unregisterCommand(command) {
    for (let i = 0; i < this.commandList.length; i++) {
      if (command.command === this.commandList[i].command && command.plugin === this.commandList[i].plugin) {
        this.commandList.splice(i, 1);
        break;
      }
    }
    this.shortcut.registerKeyboardEventFromPlugin(command);
  }
  getCommands() {
    return this.commandList;
  }
};
CommandManager = __decorateClass$2([
  injectable(),
  __decorateParam$1(0, inject(TYPES.Shortcut))
], CommandManager);
var isff = typeof navigator !== "undefined" ? navigator.userAgent.toLowerCase().indexOf("firefox") > 0 : false;
function addEvent(object, event, method, useCapture) {
  if (object.addEventListener) {
    object.addEventListener(event, method, useCapture);
  } else if (object.attachEvent) {
    object.attachEvent("on".concat(event), function() {
      method(window.event);
    });
  }
}
function getMods(modifier, key) {
  var mods = key.slice(0, key.length - 1);
  for (var i = 0; i < mods.length; i++) {
    mods[i] = modifier[mods[i].toLowerCase()];
  }
  return mods;
}
function getKeys(key) {
  if (typeof key !== "string")
    key = "";
  key = key.replace(/\s/g, "");
  var keys = key.split(",");
  var index = keys.lastIndexOf("");
  for (; index >= 0; ) {
    keys[index - 1] += ",";
    keys.splice(index, 1);
    index = keys.lastIndexOf("");
  }
  return keys;
}
function compareArray(a1, a2) {
  var arr1 = a1.length >= a2.length ? a1 : a2;
  var arr2 = a1.length >= a2.length ? a2 : a1;
  var isIndex = true;
  for (var i = 0; i < arr1.length; i++) {
    if (arr2.indexOf(arr1[i]) === -1)
      isIndex = false;
  }
  return isIndex;
}
var _keyMap = {
  backspace: 8,
  "⌫": 8,
  tab: 9,
  clear: 12,
  enter: 13,
  "↩": 13,
  return: 13,
  esc: 27,
  escape: 27,
  space: 32,
  left: 37,
  up: 38,
  right: 39,
  down: 40,
  del: 46,
  delete: 46,
  ins: 45,
  insert: 45,
  home: 36,
  end: 35,
  pageup: 33,
  pagedown: 34,
  capslock: 20,
  num_0: 96,
  num_1: 97,
  num_2: 98,
  num_3: 99,
  num_4: 100,
  num_5: 101,
  num_6: 102,
  num_7: 103,
  num_8: 104,
  num_9: 105,
  num_multiply: 106,
  num_add: 107,
  num_enter: 108,
  num_subtract: 109,
  num_decimal: 110,
  num_divide: 111,
  "⇪": 20,
  ",": 188,
  ".": 190,
  "/": 191,
  "`": 192,
  "-": isff ? 173 : 189,
  "=": isff ? 61 : 187,
  ";": isff ? 59 : 186,
  "'": 222,
  "[": 219,
  "]": 221,
  "\\": 220
};
var _modifier = {
  // shiftKey
  "⇧": 16,
  shift: 16,
  // altKey
  "⌥": 18,
  alt: 18,
  option: 18,
  // ctrlKey
  "⌃": 17,
  ctrl: 17,
  control: 17,
  // metaKey
  "⌘": 91,
  cmd: 91,
  command: 91
};
var modifierMap = {
  16: "shiftKey",
  18: "altKey",
  17: "ctrlKey",
  91: "metaKey",
  shiftKey: 16,
  ctrlKey: 17,
  altKey: 18,
  metaKey: 91
};
var _mods = {
  16: false,
  18: false,
  17: false,
  91: false
};
var _handlers = {};
for (var k = 1; k < 20; k++) {
  _keyMap["f".concat(k)] = 111 + k;
}
var _downKeys = [];
var winListendFocus = false;
var _scope = "all";
var elementHasBindEvent = [];
var code = function code2(x) {
  return _keyMap[x.toLowerCase()] || _modifier[x.toLowerCase()] || x.toUpperCase().charCodeAt(0);
};
var getKey = function getKey2(x) {
  return Object.keys(_keyMap).find(function(k2) {
    return _keyMap[k2] === x;
  });
};
var getModifier = function getModifier2(x) {
  return Object.keys(_modifier).find(function(k2) {
    return _modifier[k2] === x;
  });
};
function setScope(scope) {
  _scope = scope || "all";
}
function getScope() {
  return _scope || "all";
}
function getPressedKeyCodes() {
  return _downKeys.slice(0);
}
function getPressedKeyString() {
  return _downKeys.map(function(c) {
    return getKey(c) || getModifier(c) || String.fromCharCode(c);
  });
}
function filter(event) {
  var target = event.target || event.srcElement;
  var tagName = target.tagName;
  var flag = true;
  if (target.isContentEditable || (tagName === "INPUT" || tagName === "TEXTAREA" || tagName === "SELECT") && !target.readOnly) {
    flag = false;
  }
  return flag;
}
function isPressed(keyCode) {
  if (typeof keyCode === "string") {
    keyCode = code(keyCode);
  }
  return _downKeys.indexOf(keyCode) !== -1;
}
function deleteScope(scope, newScope) {
  var handlers;
  var i;
  if (!scope)
    scope = getScope();
  for (var key in _handlers) {
    if (Object.prototype.hasOwnProperty.call(_handlers, key)) {
      handlers = _handlers[key];
      for (i = 0; i < handlers.length; ) {
        if (handlers[i].scope === scope)
          handlers.splice(i, 1);
        else
          i++;
      }
    }
  }
  if (getScope() === scope)
    setScope(newScope || "all");
}
function clearModifier(event) {
  var key = event.keyCode || event.which || event.charCode;
  var i = _downKeys.indexOf(key);
  if (i >= 0) {
    _downKeys.splice(i, 1);
  }
  if (event.key && event.key.toLowerCase() === "meta") {
    _downKeys.splice(0, _downKeys.length);
  }
  if (key === 93 || key === 224)
    key = 91;
  if (key in _mods) {
    _mods[key] = false;
    for (var k2 in _modifier) {
      if (_modifier[k2] === key)
        hotkeys[k2] = false;
    }
  }
}
function unbind(keysInfo) {
  if (typeof keysInfo === "undefined") {
    Object.keys(_handlers).forEach(function(key) {
      return delete _handlers[key];
    });
  } else if (Array.isArray(keysInfo)) {
    keysInfo.forEach(function(info) {
      if (info.key)
        eachUnbind(info);
    });
  } else if (typeof keysInfo === "object") {
    if (keysInfo.key)
      eachUnbind(keysInfo);
  } else if (typeof keysInfo === "string") {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    var scope = args[0], method = args[1];
    if (typeof scope === "function") {
      method = scope;
      scope = "";
    }
    eachUnbind({
      key: keysInfo,
      scope,
      method,
      splitKey: "+"
    });
  }
}
var eachUnbind = function eachUnbind2(_ref) {
  var key = _ref.key, scope = _ref.scope, method = _ref.method, _ref$splitKey = _ref.splitKey, splitKey = _ref$splitKey === void 0 ? "+" : _ref$splitKey;
  var multipleKeys = getKeys(key);
  multipleKeys.forEach(function(originKey) {
    var unbindKeys = originKey.split(splitKey);
    var len = unbindKeys.length;
    var lastKey = unbindKeys[len - 1];
    var keyCode = lastKey === "*" ? "*" : code(lastKey);
    if (!_handlers[keyCode])
      return;
    if (!scope)
      scope = getScope();
    var mods = len > 1 ? getMods(_modifier, unbindKeys) : [];
    _handlers[keyCode] = _handlers[keyCode].filter(function(record) {
      var isMatchingMethod = method ? record.method === method : true;
      return !(isMatchingMethod && record.scope === scope && compareArray(record.mods, mods));
    });
  });
};
function eventHandler(event, handler, scope, element2) {
  if (handler.element !== element2) {
    return;
  }
  var modifiersMatch;
  if (handler.scope === scope || handler.scope === "all") {
    modifiersMatch = handler.mods.length > 0;
    for (var y in _mods) {
      if (Object.prototype.hasOwnProperty.call(_mods, y)) {
        if (!_mods[y] && handler.mods.indexOf(+y) > -1 || _mods[y] && handler.mods.indexOf(+y) === -1) {
          modifiersMatch = false;
        }
      }
    }
    if (handler.mods.length === 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91] || modifiersMatch || handler.shortcut === "*") {
      if (handler.method(event, handler) === false) {
        if (event.preventDefault)
          event.preventDefault();
        else
          event.returnValue = false;
        if (event.stopPropagation)
          event.stopPropagation();
        if (event.cancelBubble)
          event.cancelBubble = true;
      }
    }
  }
}
function dispatch(event, element2) {
  var asterisk = _handlers["*"];
  var key = event.keyCode || event.which || event.charCode;
  if (!hotkeys.filter.call(this, event))
    return;
  if (key === 93 || key === 224)
    key = 91;
  if (_downKeys.indexOf(key) === -1 && key !== 229)
    _downKeys.push(key);
  ["ctrlKey", "altKey", "shiftKey", "metaKey"].forEach(function(keyName) {
    var keyNum = modifierMap[keyName];
    if (event[keyName] && _downKeys.indexOf(keyNum) === -1) {
      _downKeys.push(keyNum);
    } else if (!event[keyName] && _downKeys.indexOf(keyNum) > -1) {
      _downKeys.splice(_downKeys.indexOf(keyNum), 1);
    } else if (keyName === "metaKey" && event[keyName] && _downKeys.length === 3) {
      if (!(event.ctrlKey || event.shiftKey || event.altKey)) {
        _downKeys = _downKeys.slice(_downKeys.indexOf(keyNum));
      }
    }
  });
  if (key in _mods) {
    _mods[key] = true;
    for (var k2 in _modifier) {
      if (_modifier[k2] === key)
        hotkeys[k2] = true;
    }
    if (!asterisk)
      return;
  }
  for (var e in _mods) {
    if (Object.prototype.hasOwnProperty.call(_mods, e)) {
      _mods[e] = event[modifierMap[e]];
    }
  }
  if (event.getModifierState && !(event.altKey && !event.ctrlKey) && event.getModifierState("AltGraph")) {
    if (_downKeys.indexOf(17) === -1) {
      _downKeys.push(17);
    }
    if (_downKeys.indexOf(18) === -1) {
      _downKeys.push(18);
    }
    _mods[17] = true;
    _mods[18] = true;
  }
  var scope = getScope();
  if (asterisk) {
    for (var i = 0; i < asterisk.length; i++) {
      if (asterisk[i].scope === scope && (event.type === "keydown" && asterisk[i].keydown || event.type === "keyup" && asterisk[i].keyup)) {
        eventHandler(event, asterisk[i], scope, element2);
      }
    }
  }
  if (!(key in _handlers))
    return;
  for (var _i = 0; _i < _handlers[key].length; _i++) {
    if (event.type === "keydown" && _handlers[key][_i].keydown || event.type === "keyup" && _handlers[key][_i].keyup) {
      if (_handlers[key][_i].key) {
        var record = _handlers[key][_i];
        var splitKey = record.splitKey;
        var keyShortcut = record.key.split(splitKey);
        var _downKeysCurrent = [];
        for (var a2 = 0; a2 < keyShortcut.length; a2++) {
          _downKeysCurrent.push(code(keyShortcut[a2]));
        }
        if (_downKeysCurrent.sort().join("") === _downKeys.sort().join("")) {
          eventHandler(event, record, scope, element2);
        }
      }
    }
  }
}
function isElementBind(element2) {
  return elementHasBindEvent.indexOf(element2) > -1;
}
function hotkeys(key, option, method) {
  _downKeys = [];
  var keys = getKeys(key);
  var mods = [];
  var scope = "all";
  var element2 = document;
  var i = 0;
  var keyup = false;
  var keydown = true;
  var splitKey = "+";
  var capture = false;
  if (method === void 0 && typeof option === "function") {
    method = option;
  }
  if (Object.prototype.toString.call(option) === "[object Object]") {
    if (option.scope)
      scope = option.scope;
    if (option.element)
      element2 = option.element;
    if (option.keyup)
      keyup = option.keyup;
    if (option.keydown !== void 0)
      keydown = option.keydown;
    if (option.capture !== void 0)
      capture = option.capture;
    if (typeof option.splitKey === "string")
      splitKey = option.splitKey;
  }
  if (typeof option === "string")
    scope = option;
  for (; i < keys.length; i++) {
    key = keys[i].split(splitKey);
    mods = [];
    if (key.length > 1)
      mods = getMods(_modifier, key);
    key = key[key.length - 1];
    key = key === "*" ? "*" : code(key);
    if (!(key in _handlers))
      _handlers[key] = [];
    _handlers[key].push({
      keyup,
      keydown,
      scope,
      mods,
      shortcut: keys[i],
      method,
      key: keys[i],
      splitKey,
      element: element2
    });
  }
  if (typeof element2 !== "undefined" && !isElementBind(element2) && window) {
    elementHasBindEvent.push(element2);
    addEvent(element2, "keydown", function(e) {
      dispatch(e, element2);
    }, capture);
    if (!winListendFocus) {
      winListendFocus = true;
      addEvent(window, "focus", function() {
        _downKeys = [];
      }, capture);
    }
    addEvent(element2, "keyup", function(e) {
      dispatch(e, element2);
      clearModifier(e);
    }, capture);
  }
}
function trigger(shortcut2) {
  var scope = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "all";
  Object.keys(_handlers).forEach(function(key) {
    var dataList = _handlers[key].filter(function(item) {
      return item.scope === scope && item.shortcut === shortcut2;
    });
    dataList.forEach(function(data) {
      if (data && data.method) {
        data.method();
      }
    });
  });
}
var _api = {
  getPressedKeyString,
  setScope,
  getScope,
  deleteScope,
  getPressedKeyCodes,
  isPressed,
  filter,
  trigger,
  unbind,
  keyMap: _keyMap,
  modifier: _modifier,
  modifierMap
};
for (var a in _api) {
  if (Object.prototype.hasOwnProperty.call(_api, a)) {
    hotkeys[a] = _api[a];
  }
}
if (typeof window !== "undefined") {
  var _hotkeys = window.hotkeys;
  hotkeys.noConflict = function(deep) {
    if (deep && window.hotkeys === hotkeys) {
      window.hotkeys = _hotkeys;
    }
    return hotkeys;
  };
  window.hotkeys = hotkeys;
}
var __defProp$1 = Object.defineProperty;
var __getOwnPropDesc$1 = Object.getOwnPropertyDescriptor;
var __decorateClass$1 = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$1(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp$1(target, key, result);
  return result;
};
var __decorateParam = (index, decorator) => (target, key) => decorator(target, key, index);
hotkeys.filter = function() {
  return true;
};
let Shortcut = class {
  constructor(eventBus) {
    this.option = {
      capture: true
    };
    log("Initialize shortcut subsystem");
    this.eventBus = eventBus;
  }
  registerKeyboardEvent(shortcut2, callback) {
    hotkeys(shortcut2, this.option, callback);
    this.eventBus.on(shortcut2.toString(), callback);
  }
  unregisterKeyboardEvent(shortcut2) {
    hotkeys.unbind(shortcut2);
    this.eventBus.off(shortcut2.toString());
  }
  registerKeyboardEventFromPlugin(command) {
    if (command.shortcut && command.callback) {
      this.registerKeyboardEvent(command.shortcut, command.callback);
    }
  }
  unregisterKeyboardEventFromPlugin(command) {
    if (command.shortcut && command.callback) {
      this.unregisterKeyboardEvent(command.shortcut);
    }
  }
};
Shortcut = __decorateClass$1([
  injectable(),
  __decorateParam(0, inject(TYPES.EventBus))
], Shortcut);
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __decorateClass = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;
  for (var i = decorators.length - 1, decorator; i >= 0; i--)
    if (decorator = decorators[i])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result)
    __defProp(target, key, result);
  return result;
};
let SettingManager = class {
  constructor() {
    this.settingRenders = /* @__PURE__ */ new Map();
  }
  registerSetting(pluginKey, settingRender) {
    this.settingRenders.set(pluginKey, settingRender);
  }
  unregisterSetting(key) {
    this.settingRenders.delete(key);
  }
  getSettingRenders() {
    const result = [];
    this.settingRenders.forEach((value, key) => {
      result.push({ key, value });
    });
    return result;
  }
};
SettingManager = __decorateClass([
  injectable()
], SettingManager);
const container = new Container();
container.bind(TYPES.StorageManager).to(StorageManager).inSingletonScope();
container.bind(TYPES.SystemManager).to(SystemManager).inSingletonScope();
container.bind(TYPES.PluginSystem).to(PluginSystem).inSingletonScope();
container.bind(TYPES.PluginLoader).to(PluginLoader).inSingletonScope();
container.bind(TYPES.PluginFileManager).to(PluginFileManager).inSingletonScope();
container.bind(TYPES.EventBus).to(EventBus);
container.bind(TYPES.Shortcut).to(Shortcut).inSingletonScope();
container.bind(TYPES.CommandManager).to(CommandManager).inSingletonScope();
container.bind(TYPES.Store).to(Store).inSingletonScope();
container.bind(TYPES.SettingManager).to(SettingManager).inSingletonScope();
function initPluginSystem() {
  if (!window.pluginSystem) {
    log("Siyuan Plugin System loading...");
    window.pluginSystemVersion = VERSION$1;
    window.pluginSystem = container.get(TYPES.PluginSystem).init();
    window.pluginSystemIocContainer = container;
  }
}
export {
  initPluginSystem as default,
  initPluginSystem
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5lc20uanMiLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9yZWZsZWN0LW1ldGFkYXRhQDAuMS4xMy9ub2RlX21vZHVsZXMvcmVmbGVjdC1tZXRhZGF0YS9SZWZsZWN0LmpzIiwiLi4vc3JjL2NvbmZpZy50cyIsIi4uL3NyYy9hcGkvc2VydmVyLWFwaS50cyIsIi4uL3NyYy9pbnRlcm5hbC9jbGFzc2VzL25vdGlmaWNhdGlvbi50cyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS96aGktbG9nQDEuNi4xL25vZGVfbW9kdWxlcy96aGktbG9nL2xpYi9pbmRleC5qcyIsIi4uL3NyYy9hcGkvY2xpZW50LWFwaS50cyIsIi4uL3NyYy9pbnRlcm5hbC9jbGFzc2VzL21lbnUudHMiLCIuLi9zcmMvaW50ZXJuYWwvY2xhc3Nlcy9kaWFsb2cudHMiLCIuLi9zcmMvYXBpL3BsdWdpbi50cyIsIi4uL3NyYy9hcGkudHMiLCIuLi9zcmMvYXBpL2ZpbGUtYXBpLnRzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9iaW5kLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvdXRpbHMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zRXJyb3IuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL251bGwuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3RvRm9ybURhdGEuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL0F4aW9zVVJMU2VhcmNoUGFyYW1zLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvSW50ZXJjZXB0b3JNYW5hZ2VyLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMvdHJhbnNpdGlvbmFsLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvcGxhdGZvcm0vYnJvd3Nlci9jbGFzc2VzL1VSTFNlYXJjaFBhcmFtcy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9Gb3JtRGF0YS5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9CbG9iLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvcGxhdGZvcm0vYnJvd3Nlci9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdG9VUkxFbmNvZGVkRm9ybS5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvZm9ybURhdGFUb0pTT04uanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvc0hlYWRlcnMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3RyYW5zZm9ybURhdGEuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsZWRFcnJvci5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0Fic29sdXRlVVJMLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvYnVpbGRGdWxsUGF0aC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9wYXJzZVByb3RvY29sLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9zcGVlZG9tZXRlci5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL2FkYXB0ZXJzLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL21lcmdlQ29uZmlnLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvZW52L2RhdGEuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3ZhbGlkYXRvci5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvQXhpb3MuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vYXhpb3NAMS4zLjQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBeGlvc0Vycm9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2F4aW9zQDEuMy40L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9IdHRwU3RhdHVzQ29kZS5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9heGlvc0AxLjMuNC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwiLi4vc3JjL3V0aWwvaW5kZXgudHMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvY29uc3RhbnRzL21ldGFkYXRhX2tleXMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvY29uc3RhbnRzL2xpdGVyYWxfdHlwZXMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvdXRpbHMvaWQuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvYmluZGluZ3MvYmluZGluZy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy9jb25zdGFudHMvZXJyb3JfbXNncy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy9wbGFubmluZy9tZXRhZGF0YV9yZWFkZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvYmluZGluZ3MvYmluZGluZ19jb3VudC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy91dGlscy9leGNlcHRpb25zLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL3V0aWxzL3NlcmlhbGl6YXRpb24uanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvcGxhbm5pbmcvY29udGV4dC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy9wbGFubmluZy9tZXRhZGF0YS5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy9wbGFubmluZy9wbGFuLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL2Fubm90YXRpb24vbGF6eV9zZXJ2aWNlX2lkZW50aWZpZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvcGxhbm5pbmcvcXVlcnlhYmxlX3N0cmluZy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy9wbGFubmluZy90YXJnZXQuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvcGxhbm5pbmcvcmVmbGVjdGlvbl91dGlscy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy9wbGFubmluZy9yZXF1ZXN0LmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL3BsYW5uaW5nL3BsYW5uZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvdXRpbHMvYXN5bmMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvc2NvcGUvc2NvcGUuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvdXRpbHMvZmFjdG9yeV90eXBlLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL3V0aWxzL2JpbmRpbmdfdXRpbHMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvcmVzb2x1dGlvbi9pbnN0YW50aWF0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL3Jlc29sdXRpb24vcmVzb2x2ZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvc3ludGF4L2NvbnN0cmFpbnRfaGVscGVycy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy9zeW50YXgvYmluZGluZ193aGVuX3N5bnRheC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy9zeW50YXgvYmluZGluZ19vbl9zeW50YXguanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvc3ludGF4L2JpbmRpbmdfd2hlbl9vbl9zeW50YXguanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvc3ludGF4L2JpbmRpbmdfaW5fc3ludGF4LmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL3N5bnRheC9iaW5kaW5nX2luX3doZW5fb25fc3ludGF4LmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL3N5bnRheC9iaW5kaW5nX3RvX3N5bnRheC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9pbnZlcnNpZnlANi4wLjEvbm9kZV9tb2R1bGVzL2ludmVyc2lmeS9lcy9jb250YWluZXIvY29udGFpbmVyX3NuYXBzaG90LmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL3V0aWxzL2Nsb25hYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL2NvbnRhaW5lci9sb29rdXAuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvY29udGFpbmVyL21vZHVsZV9hY3RpdmF0aW9uX3N0b3JlLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL2NvbnRhaW5lci9jb250YWluZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvdXRpbHMvanMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvYW5ub3RhdGlvbi9kZWNvcmF0b3JfdXRpbHMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvYW5ub3RhdGlvbi9pbmplY3RhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2ludmVyc2lmeUA2LjAuMS9ub2RlX21vZHVsZXMvaW52ZXJzaWZ5L2VzL2Fubm90YXRpb24vaW5qZWN0X2Jhc2UuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaW52ZXJzaWZ5QDYuMC4xL25vZGVfbW9kdWxlcy9pbnZlcnNpZnkvZXMvYW5ub3RhdGlvbi9pbmplY3QuanMiLCIuLi9zcmMvY29yZS9wbHVnaW4tY29uZmlnLnRzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUAzLjU1LjEvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9pbnRlcm5hbC9pbmRleC5tanMiLCIuLi9zcmMvaW50ZXJuYWwvcGx1Z2lucy9jb21tYW5kLXBhbmVsL2NvbW1hbmQtcGFuZWwuc3ZlbHRlIiwiLi4vc3JjL2ludGVybmFsL3BsdWdpbnMvY29tbWFuZC1wYW5lbC9pbmRleC50cyIsIi4uL3NyYy9pbnRlcm5hbC9wbHVnaW5zL3NldHRpbmcvc2V0dGluZy1jb21tb24uc3ZlbHRlIiwiLi4vc3JjL2ludGVybmFsL3BsdWdpbnMvc2V0dGluZy9zZXR0aW5nLWxpc3Quc3ZlbHRlIiwiLi4vc3JjL2NvcmUvc3RvcmUudHMiLCIuLi9zcmMvaW50ZXJuYWwvY29tcG9uZW50cy9CdXR0b24uc3ZlbHRlIiwiLi4vc3JjL2ludGVybmFsL3BsdWdpbnMvc2V0dGluZy9zZXR0aW5nLXByZXZpZXcuc3ZlbHRlIiwiLi4vc3JjL2ludGVybmFsL3BsdWdpbnMvc2V0dGluZy9zZXR0aW5nLXN0b3JlLnN2ZWx0ZSIsIi4uL3NyYy9pbnRlcm5hbC9wbHVnaW5zL3NldHRpbmcvc2V0dGluZy1jdXN0b20uc3ZlbHRlIiwiLi4vc3JjL2ludGVybmFsL3BsdWdpbnMvc2V0dGluZy9zZXR0aW5nLnN2ZWx0ZSIsIi4uL3NyYy9pbnRlcm5hbC9wbHVnaW5zL3NldHRpbmcvaW5kZXgudHMiLCIuLi9zcmMvaW50ZXJuYWwvaW5kZXgudHMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vdHJ1bmNhdGUtdXRmOC1ieXRlc0AxLjAuMi9ub2RlX21vZHVsZXMvdHJ1bmNhdGUtdXRmOC1ieXRlcy9saWIvdHJ1bmNhdGUuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vdXRmOC1ieXRlLWxlbmd0aEAxLjAuNC9ub2RlX21vZHVsZXMvdXRmOC1ieXRlLWxlbmd0aC9icm93c2VyLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3RydW5jYXRlLXV0ZjgtYnl0ZXNAMS4wLjIvbm9kZV9tb2R1bGVzL3RydW5jYXRlLXV0ZjgtYnl0ZXMvYnJvd3Nlci5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zYW5pdGl6ZS1maWxlbmFtZUAxLjYuMy9ub2RlX21vZHVsZXMvc2FuaXRpemUtZmlsZW5hbWUvaW5kZXguanMiLCIuLi9zcmMvY29yZS9zdG9yYWdlLW1hbmFnZXIudHMiLCIuLi9zcmMvY29yZS9pbmRleC50cyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9pbnRlcm5hbC9jb25zdGFudHMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvaW50ZXJuYWwvZGVidWcuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvaW50ZXJuYWwvcmUuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvaW50ZXJuYWwvcGFyc2Utb3B0aW9ucy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9pbnRlcm5hbC9pZGVudGlmaWVycy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9jbGFzc2VzL3NlbXZlci5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvcGFyc2UuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL3ZhbGlkLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9jbGVhbi5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvaW5jLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9jb21wYXJlLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9lcS5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvZGlmZi5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvbWFqb3IuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL21pbm9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9wYXRjaC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvcHJlcmVsZWFzZS5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvcmNvbXBhcmUuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL2NvbXBhcmUtbG9vc2UuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL2NvbXBhcmUtYnVpbGQuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL3NvcnQuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL3Jzb3J0LmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9ndC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvbHQuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL25lcS5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvZ3RlLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9sdGUuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL2NtcC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvY29lcmNlLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3lhbGxpc3RANC4wLjAvbm9kZV9tb2R1bGVzL3lhbGxpc3QvaXRlcmF0b3IuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0veWFsbGlzdEA0LjAuMC9ub2RlX21vZHVsZXMveWFsbGlzdC95YWxsaXN0LmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2xydS1jYWNoZUA2LjAuMC9ub2RlX21vZHVsZXMvbHJ1LWNhY2hlL2luZGV4LmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL2NsYXNzZXMvcmFuZ2UuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvY2xhc3Nlcy9jb21wYXJhdG9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9zYXRpc2ZpZXMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvcmFuZ2VzL3RvLWNvbXBhcmF0b3JzLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL3Jhbmdlcy9tYXgtc2F0aXNmeWluZy5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvbWluLXNhdGlzZnlpbmcuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvcmFuZ2VzL21pbi12ZXJzaW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL3Jhbmdlcy92YWxpZC5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvb3V0c2lkZS5qcyIsIi4uL25vZGVfbW9kdWxlcy8ucG5wbS9zZW12ZXJANy4zLjgvbm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvZ3RyLmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL3Jhbmdlcy9sdHIuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvcmFuZ2VzL2ludGVyc2VjdHMuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvcmFuZ2VzL3NpbXBsaWZ5LmpzIiwiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NlbXZlckA3LjMuOC9ub2RlX21vZHVsZXMvc2VtdmVyL3Jhbmdlcy9zdWJzZXQuanMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vc2VtdmVyQDcuMy44L25vZGVfbW9kdWxlcy9zZW12ZXIvaW5kZXguanMiLCIuLi9zcmMvY29yZS9zeXN0ZW0tbWFuYWdlci50cyIsIi4uL3NyYy9jb3JlL2xvYWRlci50cyIsIi4uL3NyYy9jb3JlL3BsdWdpbi1maWxlLW1hbmFnZXIudHMiLCIuLi9zcmMvY29yZS9ldmVudC1idXMudHMiLCIuLi9zcmMvY29yZS9jb21tYW5kLW1hbmFnZXIudHMiLCIuLi9ub2RlX21vZHVsZXMvLnBucG0vaG90a2V5cy1qc0AzLjEwLjEvbm9kZV9tb2R1bGVzL2hvdGtleXMtanMvZGlzdC9ob3RrZXlzLmVzbS5qcyIsIi4uL3NyYy9jb3JlL3Nob3J0Y3V0LnRzIiwiLi4vc3JjL2NvcmUvc2V0dGluZy1tYW5hZ2VyLnRzIiwiLi4vc3JjL2NvbnRhaW5lci50cyIsIi4uL3NyYy9leHBvcnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5Db3B5cmlnaHQgKEMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxuXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG52YXIgUmVmbGVjdDtcbihmdW5jdGlvbiAoUmVmbGVjdCkge1xuICAgIC8vIE1ldGFkYXRhIFByb3Bvc2FsXG4gICAgLy8gaHR0cHM6Ly9yYnVja3Rvbi5naXRodWIuaW8vcmVmbGVjdC1tZXRhZGF0YS9cbiAgICAoZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICAgICAgdmFyIHJvb3QgPSB0eXBlb2YgZ2xvYmFsID09PSBcIm9iamVjdFwiID8gZ2xvYmFsIDpcbiAgICAgICAgICAgIHR5cGVvZiBzZWxmID09PSBcIm9iamVjdFwiID8gc2VsZiA6XG4gICAgICAgICAgICAgICAgdHlwZW9mIHRoaXMgPT09IFwib2JqZWN0XCIgPyB0aGlzIDpcbiAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb24oXCJyZXR1cm4gdGhpcztcIikoKTtcbiAgICAgICAgdmFyIGV4cG9ydGVyID0gbWFrZUV4cG9ydGVyKFJlZmxlY3QpO1xuICAgICAgICBpZiAodHlwZW9mIHJvb3QuUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcm9vdC5SZWZsZWN0ID0gUmVmbGVjdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4cG9ydGVyID0gbWFrZUV4cG9ydGVyKHJvb3QuUmVmbGVjdCwgZXhwb3J0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGZhY3RvcnkoZXhwb3J0ZXIpO1xuICAgICAgICBmdW5jdGlvbiBtYWtlRXhwb3J0ZXIodGFyZ2V0LCBwcmV2aW91cykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXRba2V5XSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgeyBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91cylcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXMoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSkoZnVuY3Rpb24gKGV4cG9ydGVyKSB7XG4gICAgICAgIHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuICAgICAgICAvLyBmZWF0dXJlIHRlc3QgZm9yIFN5bWJvbCBzdXBwb3J0XG4gICAgICAgIHZhciBzdXBwb3J0c1N5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgdmFyIHRvUHJpbWl0aXZlU3ltYm9sID0gc3VwcG9ydHNTeW1ib2wgJiYgdHlwZW9mIFN5bWJvbC50b1ByaW1pdGl2ZSAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbC50b1ByaW1pdGl2ZSA6IFwiQEB0b1ByaW1pdGl2ZVwiO1xuICAgICAgICB2YXIgaXRlcmF0b3JTeW1ib2wgPSBzdXBwb3J0c1N5bWJvbCAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sLml0ZXJhdG9yIDogXCJAQGl0ZXJhdG9yXCI7XG4gICAgICAgIHZhciBzdXBwb3J0c0NyZWF0ZSA9IHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSBcImZ1bmN0aW9uXCI7IC8vIGZlYXR1cmUgdGVzdCBmb3IgT2JqZWN0LmNyZWF0ZSBzdXBwb3J0XG4gICAgICAgIHZhciBzdXBwb3J0c1Byb3RvID0geyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheTsgLy8gZmVhdHVyZSB0ZXN0IGZvciBfX3Byb3RvX18gc3VwcG9ydFxuICAgICAgICB2YXIgZG93bkxldmVsID0gIXN1cHBvcnRzQ3JlYXRlICYmICFzdXBwb3J0c1Byb3RvO1xuICAgICAgICB2YXIgSGFzaE1hcCA9IHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBvYmplY3QgaW4gZGljdGlvbmFyeSBtb2RlIChhLmsuYS4gXCJzbG93XCIgbW9kZSBpbiB2OClcbiAgICAgICAgICAgIGNyZWF0ZTogc3VwcG9ydHNDcmVhdGVcbiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE1ha2VEaWN0aW9uYXJ5KE9iamVjdC5jcmVhdGUobnVsbCkpOyB9XG4gICAgICAgICAgICAgICAgOiBzdXBwb3J0c1Byb3RvXG4gICAgICAgICAgICAgICAgICAgID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gTWFrZURpY3Rpb25hcnkoeyBfX3Byb3RvX186IG51bGwgfSk7IH1cbiAgICAgICAgICAgICAgICAgICAgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBNYWtlRGljdGlvbmFyeSh7fSk7IH0sXG4gICAgICAgICAgICBoYXM6IGRvd25MZXZlbFxuICAgICAgICAgICAgICAgID8gZnVuY3Rpb24gKG1hcCwga2V5KSB7IHJldHVybiBoYXNPd24uY2FsbChtYXAsIGtleSk7IH1cbiAgICAgICAgICAgICAgICA6IGZ1bmN0aW9uIChtYXAsIGtleSkgeyByZXR1cm4ga2V5IGluIG1hcDsgfSxcbiAgICAgICAgICAgIGdldDogZG93bkxldmVsXG4gICAgICAgICAgICAgICAgPyBmdW5jdGlvbiAobWFwLCBrZXkpIHsgcmV0dXJuIGhhc093bi5jYWxsKG1hcCwga2V5KSA/IG1hcFtrZXldIDogdW5kZWZpbmVkOyB9XG4gICAgICAgICAgICAgICAgOiBmdW5jdGlvbiAobWFwLCBrZXkpIHsgcmV0dXJuIG1hcFtrZXldOyB9LFxuICAgICAgICB9O1xuICAgICAgICAvLyBMb2FkIGdsb2JhbCBvciBzaGltIHZlcnNpb25zIG9mIE1hcCwgU2V0LCBhbmQgV2Vha01hcFxuICAgICAgICB2YXIgZnVuY3Rpb25Qcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRnVuY3Rpb24pO1xuICAgICAgICB2YXIgdXNlUG9seWZpbGwgPSB0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiBwcm9jZXNzLmVudiAmJiBwcm9jZXNzLmVudltcIlJFRkxFQ1RfTUVUQURBVEFfVVNFX01BUF9QT0xZRklMTFwiXSA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIHZhciBfTWFwID0gIXVzZVBvbHlmaWxsICYmIHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgTWFwLnByb3RvdHlwZS5lbnRyaWVzID09PSBcImZ1bmN0aW9uXCIgPyBNYXAgOiBDcmVhdGVNYXBQb2x5ZmlsbCgpO1xuICAgICAgICB2YXIgX1NldCA9ICF1c2VQb2x5ZmlsbCAmJiB0eXBlb2YgU2V0ID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFNldC5wcm90b3R5cGUuZW50cmllcyA9PT0gXCJmdW5jdGlvblwiID8gU2V0IDogQ3JlYXRlU2V0UG9seWZpbGwoKTtcbiAgICAgICAgdmFyIF9XZWFrTWFwID0gIXVzZVBvbHlmaWxsICYmIHR5cGVvZiBXZWFrTWFwID09PSBcImZ1bmN0aW9uXCIgPyBXZWFrTWFwIDogQ3JlYXRlV2Vha01hcFBvbHlmaWxsKCk7XG4gICAgICAgIC8vIFtbTWV0YWRhdGFdXSBpbnRlcm5hbCBzbG90XG4gICAgICAgIC8vIGh0dHBzOi8vcmJ1Y2t0b24uZ2l0aHViLmlvL3JlZmxlY3QtbWV0YWRhdGEvI29yZGluYXJ5LW9iamVjdC1pbnRlcm5hbC1tZXRob2RzLWFuZC1pbnRlcm5hbC1zbG90c1xuICAgICAgICB2YXIgTWV0YWRhdGEgPSBuZXcgX1dlYWtNYXAoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFwcGxpZXMgYSBzZXQgb2YgZGVjb3JhdG9ycyB0byBhIHByb3BlcnR5IG9mIGEgdGFyZ2V0IG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIGRlY29yYXRvcnMgQW4gYXJyYXkgb2YgZGVjb3JhdG9ycy5cbiAgICAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIHByb3BlcnR5S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSB0byBkZWNvcmF0ZS5cbiAgICAgICAgICogQHBhcmFtIGF0dHJpYnV0ZXMgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgdGhlIHRhcmdldCBrZXkuXG4gICAgICAgICAqIEByZW1hcmtzIERlY29yYXRvcnMgYXJlIGFwcGxpZWQgaW4gcmV2ZXJzZSBvcmRlci5cbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xuICAgICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcbiAgICAgICAgICogICAgICAgICAvLyBzdGF0aWMgc3RhdGljUHJvcGVydHk7XG4gICAgICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAgICAgY29uc3RydWN0b3IocCkgeyB9XG4gICAgICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cbiAgICAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XG4gICAgICAgICAqICAgICB9XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxuICAgICAgICAgKiAgICAgRXhhbXBsZSA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9yc0FycmF5LCBFeGFtcGxlKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcbiAgICAgICAgICogICAgIFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9yc0FycmF5LCBFeGFtcGxlLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcbiAgICAgICAgICogICAgIFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9yc0FycmF5LCBFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXG4gICAgICAgICAqICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIixcbiAgICAgICAgICogICAgICAgICBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnNBcnJheSwgRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIixcbiAgICAgICAgICogICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKSkpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXG4gICAgICAgICAqICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIsXG4gICAgICAgICAqICAgICAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzQXJyYXksIEV4YW1wbGUucHJvdG90eXBlLCBcIm1ldGhvZFwiLFxuICAgICAgICAgKiAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEV4YW1wbGUucHJvdG90eXBlLCBcIm1ldGhvZFwiKSkpO1xuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBwcm9wZXJ0eUtleSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZChwcm9wZXJ0eUtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUlzQXJyYXkoZGVjb3JhdG9ycykpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KGF0dHJpYnV0ZXMpICYmICFJc1VuZGVmaW5lZChhdHRyaWJ1dGVzKSAmJiAhSXNOdWxsKGF0dHJpYnV0ZXMpKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKElzTnVsbChhdHRyaWJ1dGVzKSlcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eUtleSA9IFRvUHJvcGVydHlLZXkocHJvcGVydHlLZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0ZVByb3BlcnR5KGRlY29yYXRvcnMsIHRhcmdldCwgcHJvcGVydHlLZXksIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFJc0FycmF5KGRlY29yYXRvcnMpKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFJc0NvbnN0cnVjdG9yKHRhcmdldCkpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gRGVjb3JhdGVDb25zdHJ1Y3RvcihkZWNvcmF0b3JzLCB0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGV4cG9ydGVyKFwiZGVjb3JhdGVcIiwgZGVjb3JhdGUpO1xuICAgICAgICAvLyA0LjEuMiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKVxuICAgICAgICAvLyBodHRwczovL3JidWNrdG9uLmdpdGh1Yi5pby9yZWZsZWN0LW1ldGFkYXRhLyNyZWZsZWN0Lm1ldGFkYXRhXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGRlZmF1bHQgbWV0YWRhdGEgZGVjb3JhdG9yIGZhY3RvcnkgdGhhdCBjYW4gYmUgdXNlZCBvbiBhIGNsYXNzLCBjbGFzcyBtZW1iZXIsIG9yIHBhcmFtZXRlci5cbiAgICAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IFRoZSBrZXkgZm9yIHRoZSBtZXRhZGF0YSBlbnRyeS5cbiAgICAgICAgICogQHBhcmFtIG1ldGFkYXRhVmFsdWUgVGhlIHZhbHVlIGZvciB0aGUgbWV0YWRhdGEgZW50cnkuXG4gICAgICAgICAqIEByZXR1cm5zIEEgZGVjb3JhdG9yIGZ1bmN0aW9uLlxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBJZiBgbWV0YWRhdGFLZXlgIGlzIGFscmVhZHkgZGVmaW5lZCBmb3IgdGhlIHRhcmdldCBhbmQgdGFyZ2V0IGtleSwgdGhlXG4gICAgICAgICAqIG1ldGFkYXRhVmFsdWUgZm9yIHRoYXQga2V5IHdpbGwgYmUgb3ZlcndyaXR0ZW4uXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxuICAgICAgICAgKiAgICAgQFJlZmxlY3QubWV0YWRhdGEoa2V5LCB2YWx1ZSlcbiAgICAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xuICAgICAgICAgKiAgICAgfVxuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yLCBUeXBlU2NyaXB0IG9ubHkpXG4gICAgICAgICAqICAgICBjbGFzcyBFeGFtcGxlIHtcbiAgICAgICAgICogICAgICAgICBAUmVmbGVjdC5tZXRhZGF0YShrZXksIHZhbHVlKVxuICAgICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUsIFR5cGVTY3JpcHQgb25seSlcbiAgICAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xuICAgICAgICAgKiAgICAgICAgIEBSZWZsZWN0Lm1ldGFkYXRhKGtleSwgdmFsdWUpXG4gICAgICAgICAqICAgICAgICAgcHJvcGVydHk7XG4gICAgICAgICAqICAgICB9XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxuICAgICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XG4gICAgICAgICAqICAgICAgICAgQFJlZmxlY3QubWV0YWRhdGEoa2V5LCB2YWx1ZSlcbiAgICAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKCkgeyB9XG4gICAgICAgICAqICAgICB9XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcbiAgICAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xuICAgICAgICAgKiAgICAgICAgIEBSZWZsZWN0Lm1ldGFkYXRhKGtleSwgdmFsdWUpXG4gICAgICAgICAqICAgICAgICAgbWV0aG9kKCkgeyB9XG4gICAgICAgICAqICAgICB9XG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBtZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xuICAgICAgICAgICAgZnVuY3Rpb24gZGVjb3JhdG9yKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHByb3BlcnR5S2V5KSAmJiAhSXNQcm9wZXJ0eUtleShwcm9wZXJ0eUtleSkpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICBPcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkZWNvcmF0b3I7XG4gICAgICAgIH1cbiAgICAgICAgZXhwb3J0ZXIoXCJtZXRhZGF0YVwiLCBtZXRhZGF0YSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmUgYSB1bmlxdWUgbWV0YWRhdGEgZW50cnkgb24gdGhlIHRhcmdldC5cbiAgICAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IEEga2V5IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIG1ldGFkYXRhLlxuICAgICAgICAgKiBAcGFyYW0gbWV0YWRhdGFWYWx1ZSBBIHZhbHVlIHRoYXQgY29udGFpbnMgYXR0YWNoZWQgbWV0YWRhdGEuXG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdG8gZGVmaW5lIG1ldGFkYXRhLlxuICAgICAgICAgKiBAcGFyYW0gcHJvcGVydHlLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XG4gICAgICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxuICAgICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcbiAgICAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cbiAgICAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxuICAgICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXG4gICAgICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZSk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXG4gICAgICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXG4gICAgICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZS5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxuICAgICAgICAgKiAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIG9wdGlvbnMsIEV4YW1wbGUsIFwic3RhdGljTWV0aG9kXCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXG4gICAgICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gZGVjb3JhdG9yIGZhY3RvcnkgYXMgbWV0YWRhdGEtcHJvZHVjaW5nIGFubm90YXRpb24uXG4gICAgICAgICAqICAgICBmdW5jdGlvbiBNeUFubm90YXRpb24ob3B0aW9ucyk6IERlY29yYXRvciB7XG4gICAgICAgICAqICAgICAgICAgcmV0dXJuICh0YXJnZXQsIGtleT8pID0+IFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBvcHRpb25zLCB0YXJnZXQsIGtleSk7XG4gICAgICAgICAqICAgICB9XG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkZWZpbmVNZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgIGlmICghSXNVbmRlZmluZWQocHJvcGVydHlLZXkpKVxuICAgICAgICAgICAgICAgIHByb3BlcnR5S2V5ID0gVG9Qcm9wZXJ0eUtleShwcm9wZXJ0eUtleSk7XG4gICAgICAgICAgICByZXR1cm4gT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZXhwb3J0ZXIoXCJkZWZpbmVNZXRhZGF0YVwiLCBkZWZpbmVNZXRhZGF0YSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB0YXJnZXQgb2JqZWN0IG9yIGl0cyBwcm90b3R5cGUgY2hhaW4gaGFzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSBrZXkgZGVmaW5lZC5cbiAgICAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IEEga2V5IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIG1ldGFkYXRhLlxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IG9uIHdoaWNoIHRoZSBtZXRhZGF0YSBpcyBkZWZpbmVkLlxuICAgICAgICAgKiBAcGFyYW0gcHJvcGVydHlLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxuICAgICAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG1ldGFkYXRhIGtleSB3YXMgZGVmaW5lZCBvbiB0aGUgdGFyZ2V0IG9iamVjdCBvciBpdHMgcHJvdG90eXBlIGNoYWluOyBvdGhlcndpc2UsIGBmYWxzZWAuXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqXG4gICAgICAgICAqICAgICBjbGFzcyBFeGFtcGxlIHtcbiAgICAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XG4gICAgICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xuICAgICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5O1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxuICAgICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNNZXRob2QocCkgeyB9XG4gICAgICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxuICAgICAgICAgKiAgICAgfVxuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcbiAgICAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcbiAgICAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcbiAgICAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0Lmhhc01ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcbiAgICAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBoYXNNZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgIGlmICghSXNVbmRlZmluZWQocHJvcGVydHlLZXkpKVxuICAgICAgICAgICAgICAgIHByb3BlcnR5S2V5ID0gVG9Qcm9wZXJ0eUtleShwcm9wZXJ0eUtleSk7XG4gICAgICAgICAgICByZXR1cm4gT3JkaW5hcnlIYXNNZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZXhwb3J0ZXIoXCJoYXNNZXRhZGF0YVwiLCBoYXNNZXRhZGF0YSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB0YXJnZXQgb2JqZWN0IGhhcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEga2V5IGRlZmluZWQuXG4gICAgICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cbiAgICAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cbiAgICAgICAgICogQHBhcmFtIHByb3BlcnR5S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cbiAgICAgICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBtZXRhZGF0YSBrZXkgd2FzIGRlZmluZWQgb24gdGhlIHRhcmdldCBvYmplY3Q7IG90aGVyd2lzZSwgYGZhbHNlYC5cbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xuICAgICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcbiAgICAgICAgICogICAgICAgICAvLyBzdGF0aWMgc3RhdGljUHJvcGVydHk7XG4gICAgICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAgICAgY29uc3RydWN0b3IocCkgeyB9XG4gICAgICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cbiAgICAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XG4gICAgICAgICAqICAgICB9XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUsIFwic3RhdGljUHJvcGVydHlcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcbiAgICAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzT3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGhhc093bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZChwcm9wZXJ0eUtleSkpXG4gICAgICAgICAgICAgICAgcHJvcGVydHlLZXkgPSBUb1Byb3BlcnR5S2V5KHByb3BlcnR5S2V5KTtcbiAgICAgICAgICAgIHJldHVybiBPcmRpbmFyeUhhc093bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICAgICAgfVxuICAgICAgICBleHBvcnRlcihcImhhc093bk1ldGFkYXRhXCIsIGhhc093bk1ldGFkYXRhKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIG1ldGFkYXRhIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgbWV0YWRhdGEga2V5IG9uIHRoZSB0YXJnZXQgb2JqZWN0IG9yIGl0cyBwcm90b3R5cGUgY2hhaW4uXG4gICAgICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cbiAgICAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cbiAgICAgICAgICogQHBhcmFtIHByb3BlcnR5S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cbiAgICAgICAgICogQHJldHVybnMgVGhlIG1ldGFkYXRhIHZhbHVlIGZvciB0aGUgbWV0YWRhdGEga2V5IGlmIGZvdW5kOyBvdGhlcndpc2UsIGB1bmRlZmluZWRgLlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XG4gICAgICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxuICAgICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcbiAgICAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cbiAgICAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxuICAgICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZS5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUsIFwic3RhdGljTWV0aG9kXCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHByb3BlcnR5S2V5KSlcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eUtleSA9IFRvUHJvcGVydHlLZXkocHJvcGVydHlLZXkpO1xuICAgICAgICAgICAgcmV0dXJuIE9yZGluYXJ5R2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydGVyKFwiZ2V0TWV0YWRhdGFcIiwgZ2V0TWV0YWRhdGEpO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgbWV0YWRhdGEgdmFsdWUgZm9yIHRoZSBwcm92aWRlZCBtZXRhZGF0YSBrZXkgb24gdGhlIHRhcmdldCBvYmplY3QuXG4gICAgICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cbiAgICAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cbiAgICAgICAgICogQHBhcmFtIHByb3BlcnR5S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cbiAgICAgICAgICogQHJldHVybnMgVGhlIG1ldGFkYXRhIHZhbHVlIGZvciB0aGUgbWV0YWRhdGEga2V5IGlmIGZvdW5kOyBvdGhlcndpc2UsIGB1bmRlZmluZWRgLlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XG4gICAgICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxuICAgICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcbiAgICAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cbiAgICAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxuICAgICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZS5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUsIFwic3RhdGljTWV0aG9kXCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0T3duTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHByb3BlcnR5S2V5KSlcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eUtleSA9IFRvUHJvcGVydHlLZXkocHJvcGVydHlLZXkpO1xuICAgICAgICAgICAgcmV0dXJuIE9yZGluYXJ5R2V0T3duTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydGVyKFwiZ2V0T3duTWV0YWRhdGFcIiwgZ2V0T3duTWV0YWRhdGEpO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgbWV0YWRhdGEga2V5cyBkZWZpbmVkIG9uIHRoZSB0YXJnZXQgb2JqZWN0IG9yIGl0cyBwcm90b3R5cGUgY2hhaW4uXG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdGhlIG1ldGFkYXRhIGlzIGRlZmluZWQuXG4gICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0eUtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgZm9yIHRoZSB0YXJnZXQuXG4gICAgICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHVuaXF1ZSBtZXRhZGF0YSBrZXlzLlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XG4gICAgICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxuICAgICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcbiAgICAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cbiAgICAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxuICAgICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyhFeGFtcGxlKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcbiAgICAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGFLZXlzKEV4YW1wbGUsIFwic3RhdGljUHJvcGVydHlcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXMoRXhhbXBsZS5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXMoRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcbiAgICAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGFLZXlzKEV4YW1wbGUucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldE1ldGFkYXRhS2V5cyh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZChwcm9wZXJ0eUtleSkpXG4gICAgICAgICAgICAgICAgcHJvcGVydHlLZXkgPSBUb1Byb3BlcnR5S2V5KHByb3BlcnR5S2V5KTtcbiAgICAgICAgICAgIHJldHVybiBPcmRpbmFyeU1ldGFkYXRhS2V5cyh0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICAgICAgfVxuICAgICAgICBleHBvcnRlcihcImdldE1ldGFkYXRhS2V5c1wiLCBnZXRNZXRhZGF0YUtleXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgdW5pcXVlIG1ldGFkYXRhIGtleXMgZGVmaW5lZCBvbiB0aGUgdGFyZ2V0IG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cbiAgICAgICAgICogQHBhcmFtIHByb3BlcnR5S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cbiAgICAgICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgdW5pcXVlIG1ldGFkYXRhIGtleXMuXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqXG4gICAgICAgICAqICAgICBjbGFzcyBFeGFtcGxlIHtcbiAgICAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XG4gICAgICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xuICAgICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5O1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxuICAgICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNNZXRob2QocCkgeyB9XG4gICAgICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxuICAgICAgICAgKiAgICAgfVxuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcbiAgICAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGFLZXlzKEV4YW1wbGUpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMoRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhS2V5cyhFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXG4gICAgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhS2V5cyhFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMoRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0T3duTWV0YWRhdGFLZXlzKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHByb3BlcnR5S2V5KSlcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eUtleSA9IFRvUHJvcGVydHlLZXkocHJvcGVydHlLZXkpO1xuICAgICAgICAgICAgcmV0dXJuIE9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydGVyKFwiZ2V0T3duTWV0YWRhdGFLZXlzXCIsIGdldE93bk1ldGFkYXRhS2V5cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWxldGVzIHRoZSBtZXRhZGF0YSBlbnRyeSBmcm9tIHRoZSB0YXJnZXQgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGtleS5cbiAgICAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IEEga2V5IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIG1ldGFkYXRhLlxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IG9uIHdoaWNoIHRoZSBtZXRhZGF0YSBpcyBkZWZpbmVkLlxuICAgICAgICAgKiBAcGFyYW0gcHJvcGVydHlLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxuICAgICAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG1ldGFkYXRhIGVudHJ5IHdhcyBmb3VuZCBhbmQgZGVsZXRlZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xuICAgICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcbiAgICAgICAgICogICAgICAgICAvLyBzdGF0aWMgc3RhdGljUHJvcGVydHk7XG4gICAgICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAgICAgY29uc3RydWN0b3IocCkgeyB9XG4gICAgICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cbiAgICAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XG4gICAgICAgICAqICAgICB9XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUsIFwic3RhdGljUHJvcGVydHlcIik7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcbiAgICAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxuICAgICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZU1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZChwcm9wZXJ0eUtleSkpXG4gICAgICAgICAgICAgICAgcHJvcGVydHlLZXkgPSBUb1Byb3BlcnR5S2V5KHByb3BlcnR5S2V5KTtcbiAgICAgICAgICAgIHZhciBtZXRhZGF0YU1hcCA9IEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAodGFyZ2V0LCBwcm9wZXJ0eUtleSwgLypDcmVhdGUqLyBmYWxzZSk7XG4gICAgICAgICAgICBpZiAoSXNVbmRlZmluZWQobWV0YWRhdGFNYXApKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmICghbWV0YWRhdGFNYXAuZGVsZXRlKG1ldGFkYXRhS2V5KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGFNYXAuc2l6ZSA+IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0TWV0YWRhdGEgPSBNZXRhZGF0YS5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIHRhcmdldE1ldGFkYXRhLmRlbGV0ZShwcm9wZXJ0eUtleSk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0TWV0YWRhdGEuc2l6ZSA+IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBNZXRhZGF0YS5kZWxldGUodGFyZ2V0KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydGVyKFwiZGVsZXRlTWV0YWRhdGFcIiwgZGVsZXRlTWV0YWRhdGEpO1xuICAgICAgICBmdW5jdGlvbiBEZWNvcmF0ZUNvbnN0cnVjdG9yKGRlY29yYXRvcnMsIHRhcmdldCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVjb3JhdG9yID0gZGVjb3JhdG9yc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgZGVjb3JhdGVkID0gZGVjb3JhdG9yKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZChkZWNvcmF0ZWQpICYmICFJc051bGwoZGVjb3JhdGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUlzQ29uc3RydWN0b3IoZGVjb3JhdGVkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gZGVjb3JhdGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gRGVjb3JhdGVQcm9wZXJ0eShkZWNvcmF0b3JzLCB0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWNvcmF0b3IgPSBkZWNvcmF0b3JzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBkZWNvcmF0ZWQgPSBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcik7XG4gICAgICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZChkZWNvcmF0ZWQpICYmICFJc051bGwoZGVjb3JhdGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KGRlY29yYXRlZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IgPSBkZWNvcmF0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCBDcmVhdGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRNZXRhZGF0YSA9IE1ldGFkYXRhLmdldChPKTtcbiAgICAgICAgICAgIGlmIChJc1VuZGVmaW5lZCh0YXJnZXRNZXRhZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUNyZWF0ZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0YXJnZXRNZXRhZGF0YSA9IG5ldyBfTWFwKCk7XG4gICAgICAgICAgICAgICAgTWV0YWRhdGEuc2V0KE8sIHRhcmdldE1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtZXRhZGF0YU1hcCA9IHRhcmdldE1ldGFkYXRhLmdldChQKTtcbiAgICAgICAgICAgIGlmIChJc1VuZGVmaW5lZChtZXRhZGF0YU1hcCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUNyZWF0ZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YU1hcCA9IG5ldyBfTWFwKCk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0TWV0YWRhdGEuc2V0KFAsIG1ldGFkYXRhTWFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YU1hcDtcbiAgICAgICAgfVxuICAgICAgICAvLyAzLjEuMS4xIE9yZGluYXJ5SGFzTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApXG4gICAgICAgIC8vIGh0dHBzOi8vcmJ1Y2t0b24uZ2l0aHViLmlvL3JlZmxlY3QtbWV0YWRhdGEvI29yZGluYXJ5aGFzbWV0YWRhdGFcbiAgICAgICAgZnVuY3Rpb24gT3JkaW5hcnlIYXNNZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkge1xuICAgICAgICAgICAgdmFyIGhhc093biA9IE9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xuICAgICAgICAgICAgaWYgKGhhc093bilcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBPcmRpbmFyeUdldFByb3RvdHlwZU9mKE8pO1xuICAgICAgICAgICAgaWYgKCFJc051bGwocGFyZW50KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gT3JkaW5hcnlIYXNNZXRhZGF0YShNZXRhZGF0YUtleSwgcGFyZW50LCBQKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyAzLjEuMi4xIE9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApXG4gICAgICAgIC8vIGh0dHBzOi8vcmJ1Y2t0b24uZ2l0aHViLmlvL3JlZmxlY3QtbWV0YWRhdGEvI29yZGluYXJ5aGFzb3dubWV0YWRhdGFcbiAgICAgICAgZnVuY3Rpb24gT3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkge1xuICAgICAgICAgICAgdmFyIG1ldGFkYXRhTWFwID0gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCAvKkNyZWF0ZSovIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChJc1VuZGVmaW5lZChtZXRhZGF0YU1hcCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIFRvQm9vbGVhbihtZXRhZGF0YU1hcC5oYXMoTWV0YWRhdGFLZXkpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAzLjEuMy4xIE9yZGluYXJ5R2V0TWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApXG4gICAgICAgIC8vIGh0dHBzOi8vcmJ1Y2t0b24uZ2l0aHViLmlvL3JlZmxlY3QtbWV0YWRhdGEvI29yZGluYXJ5Z2V0bWV0YWRhdGFcbiAgICAgICAgZnVuY3Rpb24gT3JkaW5hcnlHZXRNZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkge1xuICAgICAgICAgICAgdmFyIGhhc093biA9IE9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xuICAgICAgICAgICAgaWYgKGhhc093bilcbiAgICAgICAgICAgICAgICByZXR1cm4gT3JkaW5hcnlHZXRPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCk7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gT3JkaW5hcnlHZXRQcm90b3R5cGVPZihPKTtcbiAgICAgICAgICAgIGlmICghSXNOdWxsKHBhcmVudCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9yZGluYXJ5R2V0TWV0YWRhdGEoTWV0YWRhdGFLZXksIHBhcmVudCwgUCk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuMS40LjEgT3JkaW5hcnlHZXRPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUClcbiAgICAgICAgLy8gaHR0cHM6Ly9yYnVja3Rvbi5naXRodWIuaW8vcmVmbGVjdC1tZXRhZGF0YS8jb3JkaW5hcnlnZXRvd25tZXRhZGF0YVxuICAgICAgICBmdW5jdGlvbiBPcmRpbmFyeUdldE93bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKSB7XG4gICAgICAgICAgICB2YXIgbWV0YWRhdGFNYXAgPSBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIC8qQ3JlYXRlKi8gZmFsc2UpO1xuICAgICAgICAgICAgaWYgKElzVW5kZWZpbmVkKG1ldGFkYXRhTWFwKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhTWFwLmdldChNZXRhZGF0YUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMy4xLjUuMSBPcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBNZXRhZGF0YVZhbHVlLCBPLCBQKVxuICAgICAgICAvLyBodHRwczovL3JidWNrdG9uLmdpdGh1Yi5pby9yZWZsZWN0LW1ldGFkYXRhLyNvcmRpbmFyeWRlZmluZW93bm1ldGFkYXRhXG4gICAgICAgIGZ1bmN0aW9uIE9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE1ldGFkYXRhVmFsdWUsIE8sIFApIHtcbiAgICAgICAgICAgIHZhciBtZXRhZGF0YU1hcCA9IEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgLypDcmVhdGUqLyB0cnVlKTtcbiAgICAgICAgICAgIG1ldGFkYXRhTWFwLnNldChNZXRhZGF0YUtleSwgTWV0YWRhdGFWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMy4xLjYuMSBPcmRpbmFyeU1ldGFkYXRhS2V5cyhPLCBQKVxuICAgICAgICAvLyBodHRwczovL3JidWNrdG9uLmdpdGh1Yi5pby9yZWZsZWN0LW1ldGFkYXRhLyNvcmRpbmFyeW1ldGFkYXRha2V5c1xuICAgICAgICBmdW5jdGlvbiBPcmRpbmFyeU1ldGFkYXRhS2V5cyhPLCBQKSB7XG4gICAgICAgICAgICB2YXIgb3duS2V5cyA9IE9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKE8sIFApO1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IE9yZGluYXJ5R2V0UHJvdG90eXBlT2YoTyk7XG4gICAgICAgICAgICBpZiAocGFyZW50ID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBvd25LZXlzO1xuICAgICAgICAgICAgdmFyIHBhcmVudEtleXMgPSBPcmRpbmFyeU1ldGFkYXRhS2V5cyhwYXJlbnQsIFApO1xuICAgICAgICAgICAgaWYgKHBhcmVudEtleXMubGVuZ3RoIDw9IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG93bktleXM7XG4gICAgICAgICAgICBpZiAob3duS2V5cy5sZW5ndGggPD0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50S2V5cztcbiAgICAgICAgICAgIHZhciBzZXQgPSBuZXcgX1NldCgpO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgb3duS2V5c18xID0gb3duS2V5czsgX2kgPCBvd25LZXlzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IG93bktleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGhhc0tleSA9IHNldC5oYXMoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc0tleSkge1xuICAgICAgICAgICAgICAgICAgICBzZXQuYWRkKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgcGFyZW50S2V5c18xID0gcGFyZW50S2V5czsgX2EgPCBwYXJlbnRLZXlzXzEubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHBhcmVudEtleXNfMVtfYV07XG4gICAgICAgICAgICAgICAgdmFyIGhhc0tleSA9IHNldC5oYXMoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc0tleSkge1xuICAgICAgICAgICAgICAgICAgICBzZXQuYWRkKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuMS43LjEgT3JkaW5hcnlPd25NZXRhZGF0YUtleXMoTywgUClcbiAgICAgICAgLy8gaHR0cHM6Ly9yYnVja3Rvbi5naXRodWIuaW8vcmVmbGVjdC1tZXRhZGF0YS8jb3JkaW5hcnlvd25tZXRhZGF0YWtleXNcbiAgICAgICAgZnVuY3Rpb24gT3JkaW5hcnlPd25NZXRhZGF0YUtleXMoTywgUCkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBtZXRhZGF0YU1hcCA9IEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgLypDcmVhdGUqLyBmYWxzZSk7XG4gICAgICAgICAgICBpZiAoSXNVbmRlZmluZWQobWV0YWRhdGFNYXApKVxuICAgICAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICAgICAgdmFyIGtleXNPYmogPSBtZXRhZGF0YU1hcC5rZXlzKCk7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBHZXRJdGVyYXRvcihrZXlzT2JqKTtcbiAgICAgICAgICAgIHZhciBrID0gMDtcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBJdGVyYXRvclN0ZXAoaXRlcmF0b3IpO1xuICAgICAgICAgICAgICAgIGlmICghbmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLmxlbmd0aCA9IGs7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbmV4dFZhbHVlID0gSXRlcmF0b3JWYWx1ZShuZXh0KTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzW2tdID0gbmV4dFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSXRlcmF0b3JDbG9zZShpdGVyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGsrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyA2IEVDTUFTY3JpcHQgRGF0YSBUeXAwZXMgYW5kIFZhbHVlc1xuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1lY21hc2NyaXB0LWRhdGEtdHlwZXMtYW5kLXZhbHVlc1xuICAgICAgICBmdW5jdGlvbiBUeXBlKHgpIHtcbiAgICAgICAgICAgIGlmICh4ID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIE51bGwgKi87XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB4KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOiByZXR1cm4gMCAvKiBVbmRlZmluZWQgKi87XG4gICAgICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjogcmV0dXJuIDIgLyogQm9vbGVhbiAqLztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6IHJldHVybiAzIC8qIFN0cmluZyAqLztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3ltYm9sXCI6IHJldHVybiA0IC8qIFN5bWJvbCAqLztcbiAgICAgICAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6IHJldHVybiA1IC8qIE51bWJlciAqLztcbiAgICAgICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHJldHVybiB4ID09PSBudWxsID8gMSAvKiBOdWxsICovIDogNiAvKiBPYmplY3QgKi87XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIDYgLyogT2JqZWN0ICovO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDYuMS4xIFRoZSBVbmRlZmluZWQgVHlwZVxuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzLXVuZGVmaW5lZC10eXBlXG4gICAgICAgIGZ1bmN0aW9uIElzVW5kZWZpbmVkKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB4ID09PSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNi4xLjIgVGhlIE51bGwgVHlwZVxuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzLW51bGwtdHlwZVxuICAgICAgICBmdW5jdGlvbiBJc051bGwoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHggPT09IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNi4xLjUgVGhlIFN5bWJvbCBUeXBlXG4gICAgICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMtc3ltYm9sLXR5cGVcbiAgICAgICAgZnVuY3Rpb24gSXNTeW1ib2woeCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiO1xuICAgICAgICB9XG4gICAgICAgIC8vIDYuMS43IFRoZSBPYmplY3QgVHlwZVxuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QtdHlwZVxuICAgICAgICBmdW5jdGlvbiBJc09iamVjdCh4KSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09IFwib2JqZWN0XCIgPyB4ICE9PSBudWxsIDogdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgfVxuICAgICAgICAvLyA3LjEgVHlwZSBDb252ZXJzaW9uXG4gICAgICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXR5cGUtY29udmVyc2lvblxuICAgICAgICAvLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSlcbiAgICAgICAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtdG9wcmltaXRpdmVcbiAgICAgICAgZnVuY3Rpb24gVG9QcmltaXRpdmUoaW5wdXQsIFByZWZlcnJlZFR5cGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoVHlwZShpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDAgLyogVW5kZWZpbmVkICovOiByZXR1cm4gaW5wdXQ7XG4gICAgICAgICAgICAgICAgY2FzZSAxIC8qIE51bGwgKi86IHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgICAgICBjYXNlIDIgLyogQm9vbGVhbiAqLzogcmV0dXJuIGlucHV0O1xuICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBTdHJpbmcgKi86IHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgICAgICBjYXNlIDQgLyogU3ltYm9sICovOiByZXR1cm4gaW5wdXQ7XG4gICAgICAgICAgICAgICAgY2FzZSA1IC8qIE51bWJlciAqLzogcmV0dXJuIGlucHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhpbnQgPSBQcmVmZXJyZWRUeXBlID09PSAzIC8qIFN0cmluZyAqLyA/IFwic3RyaW5nXCIgOiBQcmVmZXJyZWRUeXBlID09PSA1IC8qIE51bWJlciAqLyA/IFwibnVtYmVyXCIgOiBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgIHZhciBleG90aWNUb1ByaW0gPSBHZXRNZXRob2QoaW5wdXQsIHRvUHJpbWl0aXZlU3ltYm9sKTtcbiAgICAgICAgICAgIGlmIChleG90aWNUb1ByaW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBleG90aWNUb1ByaW0uY2FsbChpbnB1dCwgaGludCk7XG4gICAgICAgICAgICAgICAgaWYgKElzT2JqZWN0KHJlc3VsdCkpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIE9yZGluYXJ5VG9QcmltaXRpdmUoaW5wdXQsIGhpbnQgPT09IFwiZGVmYXVsdFwiID8gXCJudW1iZXJcIiA6IGhpbnQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDcuMS4xLjEgT3JkaW5hcnlUb1ByaW1pdGl2ZShPLCBoaW50KVxuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vcmRpbmFyeXRvcHJpbWl0aXZlXG4gICAgICAgIGZ1bmN0aW9uIE9yZGluYXJ5VG9QcmltaXRpdmUoTywgaGludCkge1xuICAgICAgICAgICAgaWYgKGhpbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9TdHJpbmdfMSA9IE8udG9TdHJpbmc7XG4gICAgICAgICAgICAgICAgaWYgKElzQ2FsbGFibGUodG9TdHJpbmdfMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRvU3RyaW5nXzEuY2FsbChPKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFJc09iamVjdChyZXN1bHQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlT2YgPSBPLnZhbHVlT2Y7XG4gICAgICAgICAgICAgICAgaWYgKElzQ2FsbGFibGUodmFsdWVPZikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZhbHVlT2YuY2FsbChPKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFJc09iamVjdChyZXN1bHQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVPZiA9IE8udmFsdWVPZjtcbiAgICAgICAgICAgICAgICBpZiAoSXNDYWxsYWJsZSh2YWx1ZU9mKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdmFsdWVPZi5jYWxsKE8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHJlc3VsdCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdG9TdHJpbmdfMiA9IE8udG9TdHJpbmc7XG4gICAgICAgICAgICAgICAgaWYgKElzQ2FsbGFibGUodG9TdHJpbmdfMikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRvU3RyaW5nXzIuY2FsbChPKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFJc09iamVjdChyZXN1bHQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNy4xLjIgVG9Cb29sZWFuKGFyZ3VtZW50KVxuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvMjAxNi8jc2VjLXRvYm9vbGVhblxuICAgICAgICBmdW5jdGlvbiBUb0Jvb2xlYW4oYXJndW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAhIWFyZ3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIDcuMS4xMiBUb1N0cmluZyhhcmd1bWVudClcbiAgICAgICAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtdG9zdHJpbmdcbiAgICAgICAgZnVuY3Rpb24gVG9TdHJpbmcoYXJndW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiICsgYXJndW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNy4xLjE0IFRvUHJvcGVydHlLZXkoYXJndW1lbnQpXG4gICAgICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvcHJvcGVydHlrZXlcbiAgICAgICAgZnVuY3Rpb24gVG9Qcm9wZXJ0eUtleShhcmd1bWVudCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IFRvUHJpbWl0aXZlKGFyZ3VtZW50LCAzIC8qIFN0cmluZyAqLyk7XG4gICAgICAgICAgICBpZiAoSXNTeW1ib2woa2V5KSlcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgcmV0dXJuIFRvU3RyaW5nKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNy4yIFRlc3RpbmcgYW5kIENvbXBhcmlzb24gT3BlcmF0aW9uc1xuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10ZXN0aW5nLWFuZC1jb21wYXJpc29uLW9wZXJhdGlvbnNcbiAgICAgICAgLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudClcbiAgICAgICAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtaXNhcnJheVxuICAgICAgICBmdW5jdGlvbiBJc0FycmF5KGFyZ3VtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheVxuICAgICAgICAgICAgICAgID8gQXJyYXkuaXNBcnJheShhcmd1bWVudClcbiAgICAgICAgICAgICAgICA6IGFyZ3VtZW50IGluc3RhbmNlb2YgT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnQgaW5zdGFuY2VvZiBBcnJheVxuICAgICAgICAgICAgICAgICAgICA6IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgICAgICAgfVxuICAgICAgICAvLyA3LjIuMyBJc0NhbGxhYmxlKGFyZ3VtZW50KVxuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1pc2NhbGxhYmxlXG4gICAgICAgIGZ1bmN0aW9uIElzQ2FsbGFibGUoYXJndW1lbnQpIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgYW4gYXBwcm94aW1hdGlvbiBhcyB3ZSBjYW5ub3QgY2hlY2sgZm9yIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZC5cbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYXJndW1lbnQgPT09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgfVxuICAgICAgICAvLyA3LjIuNCBJc0NvbnN0cnVjdG9yKGFyZ3VtZW50KVxuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1pc2NvbnN0cnVjdG9yXG4gICAgICAgIGZ1bmN0aW9uIElzQ29uc3RydWN0b3IoYXJndW1lbnQpIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgYW4gYXBwcm94aW1hdGlvbiBhcyB3ZSBjYW5ub3QgY2hlY2sgZm9yIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgbWV0aG9kLlxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmd1bWVudCA9PT0gXCJmdW5jdGlvblwiO1xuICAgICAgICB9XG4gICAgICAgIC8vIDcuMi43IElzUHJvcGVydHlLZXkoYXJndW1lbnQpXG4gICAgICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWlzcHJvcGVydHlrZXlcbiAgICAgICAgZnVuY3Rpb24gSXNQcm9wZXJ0eUtleShhcmd1bWVudCkge1xuICAgICAgICAgICAgc3dpdGNoIChUeXBlKGFyZ3VtZW50KSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBTdHJpbmcgKi86IHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNCAvKiBTeW1ib2wgKi86IHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyA3LjMgT3BlcmF0aW9ucyBvbiBPYmplY3RzXG4gICAgICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9wZXJhdGlvbnMtb24tb2JqZWN0c1xuICAgICAgICAvLyA3LjMuOSBHZXRNZXRob2QoViwgUClcbiAgICAgICAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtZ2V0bWV0aG9kXG4gICAgICAgIGZ1bmN0aW9uIEdldE1ldGhvZChWLCBQKSB7XG4gICAgICAgICAgICB2YXIgZnVuYyA9IFZbUF07XG4gICAgICAgICAgICBpZiAoZnVuYyA9PT0gdW5kZWZpbmVkIHx8IGZ1bmMgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmICghSXNDYWxsYWJsZShmdW5jKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuYztcbiAgICAgICAgfVxuICAgICAgICAvLyA3LjQgT3BlcmF0aW9ucyBvbiBJdGVyYXRvciBPYmplY3RzXG4gICAgICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9wZXJhdGlvbnMtb24taXRlcmF0b3Itb2JqZWN0c1xuICAgICAgICBmdW5jdGlvbiBHZXRJdGVyYXRvcihvYmopIHtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSBHZXRNZXRob2Qob2JqLCBpdGVyYXRvclN5bWJvbCk7XG4gICAgICAgICAgICBpZiAoIUlzQ2FsbGFibGUobWV0aG9kKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7IC8vIGZyb20gQ2FsbFxuICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gbWV0aG9kLmNhbGwob2JqKTtcbiAgICAgICAgICAgIGlmICghSXNPYmplY3QoaXRlcmF0b3IpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgIHJldHVybiBpdGVyYXRvcjtcbiAgICAgICAgfVxuICAgICAgICAvLyA3LjQuNCBJdGVyYXRvclZhbHVlKGl0ZXJSZXN1bHQpXG4gICAgICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8yMDE2LyNzZWMtaXRlcmF0b3J2YWx1ZVxuICAgICAgICBmdW5jdGlvbiBJdGVyYXRvclZhbHVlKGl0ZXJSZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVyUmVzdWx0LnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIDcuNC41IEl0ZXJhdG9yU3RlcChpdGVyYXRvcilcbiAgICAgICAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtaXRlcmF0b3JzdGVwXG4gICAgICAgIGZ1bmN0aW9uIEl0ZXJhdG9yU3RlcChpdGVyYXRvcikge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IGZhbHNlIDogcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8vIDcuNC42IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGNvbXBsZXRpb24pXG4gICAgICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWl0ZXJhdG9yY2xvc2VcbiAgICAgICAgZnVuY3Rpb24gSXRlcmF0b3JDbG9zZShpdGVyYXRvcikge1xuICAgICAgICAgICAgdmFyIGYgPSBpdGVyYXRvcltcInJldHVyblwiXTtcbiAgICAgICAgICAgIGlmIChmKVxuICAgICAgICAgICAgICAgIGYuY2FsbChpdGVyYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gOS4xIE9yZGluYXJ5IE9iamVjdCBJbnRlcm5hbCBNZXRob2RzIGFuZCBJbnRlcm5hbCBTbG90c1xuICAgICAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vcmRpbmFyeS1vYmplY3QtaW50ZXJuYWwtbWV0aG9kcy1hbmQtaW50ZXJuYWwtc2xvdHNcbiAgICAgICAgLy8gOS4xLjEuMSBPcmRpbmFyeUdldFByb3RvdHlwZU9mKE8pXG4gICAgICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9yZGluYXJ5Z2V0cHJvdG90eXBlb2ZcbiAgICAgICAgZnVuY3Rpb24gT3JkaW5hcnlHZXRQcm90b3R5cGVPZihPKSB7XG4gICAgICAgICAgICB2YXIgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIE8gIT09IFwiZnVuY3Rpb25cIiB8fCBPID09PSBmdW5jdGlvblByb3RvdHlwZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG87XG4gICAgICAgICAgICAvLyBUeXBlU2NyaXB0IGRvZXNuJ3Qgc2V0IF9fcHJvdG9fXyBpbiBFUzUsIGFzIGl0J3Mgbm9uLXN0YW5kYXJkLlxuICAgICAgICAgICAgLy8gVHJ5IHRvIGRldGVybWluZSB0aGUgc3VwZXJjbGFzcyBjb25zdHJ1Y3Rvci4gQ29tcGF0aWJsZSBpbXBsZW1lbnRhdGlvbnNcbiAgICAgICAgICAgIC8vIG11c3QgZWl0aGVyIHNldCBfX3Byb3RvX18gb24gYSBzdWJjbGFzcyBjb25zdHJ1Y3RvciB0byB0aGUgc3VwZXJjbGFzcyBjb25zdHJ1Y3RvcixcbiAgICAgICAgICAgIC8vIG9yIGVuc3VyZSBlYWNoIGNsYXNzIGhhcyBhIHZhbGlkIGBjb25zdHJ1Y3RvcmAgcHJvcGVydHkgb24gaXRzIHByb3RvdHlwZSB0aGF0XG4gICAgICAgICAgICAvLyBwb2ludHMgYmFjayB0byB0aGUgY29uc3RydWN0b3IuXG4gICAgICAgICAgICAvLyBJZiB0aGlzIGlzIG5vdCB0aGUgc2FtZSBhcyBGdW5jdGlvbi5bW1Byb3RvdHlwZV1dLCB0aGVuIHRoaXMgaXMgZGVmaW5hdGVseSBpbmhlcml0ZWQuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBjYXNlIHdoZW4gaW4gRVM2IG9yIHdoZW4gdXNpbmcgX19wcm90b19fIGluIGEgY29tcGF0aWJsZSBicm93c2VyLlxuICAgICAgICAgICAgaWYgKHByb3RvICE9PSBmdW5jdGlvblByb3RvdHlwZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG87XG4gICAgICAgICAgICAvLyBJZiB0aGUgc3VwZXIgcHJvdG90eXBlIGlzIE9iamVjdC5wcm90b3R5cGUsIG51bGwsIG9yIHVuZGVmaW5lZCwgdGhlbiB3ZSBjYW5ub3QgZGV0ZXJtaW5lIHRoZSBoZXJpdGFnZS5cbiAgICAgICAgICAgIHZhciBwcm90b3R5cGUgPSBPLnByb3RvdHlwZTtcbiAgICAgICAgICAgIHZhciBwcm90b3R5cGVQcm90byA9IHByb3RvdHlwZSAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG90eXBlKTtcbiAgICAgICAgICAgIGlmIChwcm90b3R5cGVQcm90byA9PSBudWxsIHx8IHByb3RvdHlwZVByb3RvID09PSBPYmplY3QucHJvdG90eXBlKVxuICAgICAgICAgICAgICAgIHJldHVybiBwcm90bztcbiAgICAgICAgICAgIC8vIElmIHRoZSBjb25zdHJ1Y3RvciB3YXMgbm90IGEgZnVuY3Rpb24sIHRoZW4gd2UgY2Fubm90IGRldGVybWluZSB0aGUgaGVyaXRhZ2UuXG4gICAgICAgICAgICB2YXIgY29uc3RydWN0b3IgPSBwcm90b3R5cGVQcm90by5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc3RydWN0b3IgIT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG87XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIHNvbWUga2luZCBvZiBzZWxmLXJlZmVyZW5jZSwgdGhlbiB3ZSBjYW5ub3QgZGV0ZXJtaW5lIHRoZSBoZXJpdGFnZS5cbiAgICAgICAgICAgIGlmIChjb25zdHJ1Y3RvciA9PT0gTylcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG87XG4gICAgICAgICAgICAvLyB3ZSBoYXZlIGEgcHJldHR5IGdvb2QgZ3Vlc3MgYXQgdGhlIGhlcml0YWdlLlxuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yO1xuICAgICAgICB9XG4gICAgICAgIC8vIG5haXZlIE1hcCBzaGltXG4gICAgICAgIGZ1bmN0aW9uIENyZWF0ZU1hcFBvbHlmaWxsKCkge1xuICAgICAgICAgICAgdmFyIGNhY2hlU2VudGluZWwgPSB7fTtcbiAgICAgICAgICAgIHZhciBhcnJheVNlbnRpbmVsID0gW107XG4gICAgICAgICAgICB2YXIgTWFwSXRlcmF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gTWFwSXRlcmF0b3Ioa2V5cywgdmFsdWVzLCBzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleXMgPSBrZXlzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE1hcEl0ZXJhdG9yLnByb3RvdHlwZVtcIkBAaXRlcmF0b3JcIl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuICAgICAgICAgICAgICAgIE1hcEl0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuICAgICAgICAgICAgICAgIE1hcEl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLl9rZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX3NlbGVjdG9yKHRoaXMuX2tleXNbaW5kZXhdLCB0aGlzLl92YWx1ZXNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCArIDEgPj0gdGhpcy5fa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleXMgPSBhcnJheVNlbnRpbmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcyA9IGFycmF5U2VudGluZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHJlc3VsdCwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBNYXBJdGVyYXRvci5wcm90b3R5cGUudGhyb3cgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2luZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2luZGV4ID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXlzID0gYXJyYXlTZW50aW5lbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcyA9IGFycmF5U2VudGluZWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBNYXBJdGVyYXRvci5wcm90b3R5cGUucmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5cyA9IGFycmF5U2VudGluZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWx1ZXMgPSBhcnJheVNlbnRpbmVsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2YWx1ZSwgZG9uZTogdHJ1ZSB9O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hcEl0ZXJhdG9yO1xuICAgICAgICAgICAgfSgpKTtcbiAgICAgICAgICAgIHJldHVybiAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gTWFwKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXlzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZUtleSA9IGNhY2hlU2VudGluZWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlSW5kZXggPSAtMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hcC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fa2V5cy5sZW5ndGg7IH0sXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gdGhpcy5fZmluZChrZXksIC8qaW5zZXJ0Ki8gZmFsc2UpID49IDA7IH07XG4gICAgICAgICAgICAgICAgTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmQoa2V5LCAvKmluc2VydCovIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ID49IDAgPyB0aGlzLl92YWx1ZXNbaW5kZXhdIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9maW5kKGtleSwgLyppbnNlcnQqLyB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9maW5kKGtleSwgLyppbnNlcnQqLyBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuX2tleXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGluZGV4ICsgMTsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleXNbaSAtIDFdID0gdGhpcy5fa2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWx1ZXNbaSAtIDFdID0gdGhpcy5fdmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5cy5sZW5ndGgtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5sZW5ndGgtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuX2NhY2hlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVLZXkgPSBjYWNoZVNlbnRpbmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlSW5kZXggPSAtMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlS2V5ID0gY2FjaGVTZW50aW5lbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVJbmRleCA9IC0yO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgTWFwLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IE1hcEl0ZXJhdG9yKHRoaXMuX2tleXMsIHRoaXMuX3ZhbHVlcywgZ2V0S2V5KTsgfTtcbiAgICAgICAgICAgICAgICBNYXAucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBNYXBJdGVyYXRvcih0aGlzLl9rZXlzLCB0aGlzLl92YWx1ZXMsIGdldFZhbHVlKTsgfTtcbiAgICAgICAgICAgICAgICBNYXAucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgTWFwSXRlcmF0b3IodGhpcy5fa2V5cywgdGhpcy5fdmFsdWVzLCBnZXRFbnRyeSk7IH07XG4gICAgICAgICAgICAgICAgTWFwLnByb3RvdHlwZVtcIkBAaXRlcmF0b3JcIl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmVudHJpZXMoKTsgfTtcbiAgICAgICAgICAgICAgICBNYXAucHJvdG90eXBlW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuZW50cmllcygpOyB9O1xuICAgICAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuX2ZpbmQgPSBmdW5jdGlvbiAoa2V5LCBpbnNlcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NhY2hlS2V5ICE9PSBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlSW5kZXggPSB0aGlzLl9rZXlzLmluZGV4T2YodGhpcy5fY2FjaGVLZXkgPSBrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jYWNoZUluZGV4IDwgMCAmJiBpbnNlcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlSW5kZXggPSB0aGlzLl9rZXlzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVJbmRleDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXA7XG4gICAgICAgICAgICB9KCkpO1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0S2V5KGtleSwgXykge1xuICAgICAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRWYWx1ZShfLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEVudHJ5KGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2tleSwgdmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIG5haXZlIFNldCBzaGltXG4gICAgICAgIGZ1bmN0aW9uIENyZWF0ZVNldFBvbHlmaWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBTZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcCA9IG5ldyBfTWFwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXQucHJvdG90eXBlLCBcInNpemVcIiwge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX21hcC5zaXplOyB9LFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdGhpcy5fbWFwLmhhcyh2YWx1ZSk7IH07XG4gICAgICAgICAgICAgICAgU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHRoaXMuX21hcC5zZXQodmFsdWUsIHZhbHVlKSwgdGhpczsgfTtcbiAgICAgICAgICAgICAgICBTZXQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdGhpcy5fbWFwLmRlbGV0ZSh2YWx1ZSk7IH07XG4gICAgICAgICAgICAgICAgU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fbWFwLmNsZWFyKCk7IH07XG4gICAgICAgICAgICAgICAgU2V0LnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fbWFwLmtleXMoKTsgfTtcbiAgICAgICAgICAgICAgICBTZXQucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX21hcC52YWx1ZXMoKTsgfTtcbiAgICAgICAgICAgICAgICBTZXQucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9tYXAuZW50cmllcygpOyB9O1xuICAgICAgICAgICAgICAgIFNldC5wcm90b3R5cGVbXCJAQGl0ZXJhdG9yXCJdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5rZXlzKCk7IH07XG4gICAgICAgICAgICAgICAgU2V0LnByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmtleXMoKTsgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gU2V0O1xuICAgICAgICAgICAgfSgpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBuYWl2ZSBXZWFrTWFwIHNoaW1cbiAgICAgICAgZnVuY3Rpb24gQ3JlYXRlV2Vha01hcFBvbHlmaWxsKCkge1xuICAgICAgICAgICAgdmFyIFVVSURfU0laRSA9IDE2O1xuICAgICAgICAgICAgdmFyIGtleXMgPSBIYXNoTWFwLmNyZWF0ZSgpO1xuICAgICAgICAgICAgdmFyIHJvb3RLZXkgPSBDcmVhdGVVbmlxdWVLZXkoKTtcbiAgICAgICAgICAgIHJldHVybiAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gV2Vha01hcCgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5ID0gQ3JlYXRlVW5pcXVlS2V5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFdlYWtNYXAucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gR2V0T3JDcmVhdGVXZWFrTWFwVGFibGUodGFyZ2V0LCAvKmNyZWF0ZSovIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlICE9PSB1bmRlZmluZWQgPyBIYXNoTWFwLmhhcyh0YWJsZSwgdGhpcy5fa2V5KSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgV2Vha01hcC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUgIT09IHVuZGVmaW5lZCA/IEhhc2hNYXAuZ2V0KHRhYmxlLCB0aGlzLl9rZXkpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgV2Vha01hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gR2V0T3JDcmVhdGVXZWFrTWFwVGFibGUodGFyZ2V0LCAvKmNyZWF0ZSovIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0YWJsZVt0aGlzLl9rZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgV2Vha01hcC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUgIT09IHVuZGVmaW5lZCA/IGRlbGV0ZSB0YWJsZVt0aGlzLl9rZXldIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBXZWFrTWFwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogbm90IGEgcmVhbCBjbGVhciwganVzdCBtYWtlcyB0aGUgcHJldmlvdXMgZGF0YSB1bnJlYWNoYWJsZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXkgPSBDcmVhdGVVbmlxdWVLZXkoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBXZWFrTWFwO1xuICAgICAgICAgICAgfSgpKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIENyZWF0ZVVuaXF1ZUtleSgpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgICAgIGRvXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IFwiQEBXZWFrTWFwQEBcIiArIENyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoSGFzaE1hcC5oYXMoa2V5cywga2V5KSk7XG4gICAgICAgICAgICAgICAga2V5c1trZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gR2V0T3JDcmVhdGVXZWFrTWFwVGFibGUodGFyZ2V0LCBjcmVhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc093bi5jYWxsKHRhcmdldCwgcm9vdEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjcmVhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCByb290S2V5LCB7IHZhbHVlOiBIYXNoTWFwLmNyZWF0ZSgpIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Jvb3RLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gRmlsbFJhbmRvbUJ5dGVzKGJ1ZmZlciwgc2l6ZSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKVxuICAgICAgICAgICAgICAgICAgICBidWZmZXJbaV0gPSBNYXRoLnJhbmRvbSgpICogMHhmZiB8IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIEdlblJhbmRvbUJ5dGVzKHNpemUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNyeXB0byAhPT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHNpemUpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtc0NyeXB0byAhPT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoc2l6ZSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmlsbFJhbmRvbUJ5dGVzKG5ldyBVaW50OEFycmF5KHNpemUpLCBzaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIEZpbGxSYW5kb21CeXRlcyhuZXcgQXJyYXkoc2l6ZSksIHNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlVVVJRCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEdlblJhbmRvbUJ5dGVzKFVVSURfU0laRSk7XG4gICAgICAgICAgICAgICAgLy8gbWFyayBhcyByYW5kb20gLSBSRkMgNDEyMiDCpyA0LjRcbiAgICAgICAgICAgICAgICBkYXRhWzZdID0gZGF0YVs2XSAmIDB4NGYgfCAweDQwO1xuICAgICAgICAgICAgICAgIGRhdGFbOF0gPSBkYXRhWzhdICYgMHhiZiB8IDB4ODA7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgVVVJRF9TSVpFOyArK29mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnl0ZSA9IGRhdGFbb2Zmc2V0XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldCA9PT0gNCB8fCBvZmZzZXQgPT09IDYgfHwgb2Zmc2V0ID09PSA4KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFwiLVwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYnl0ZSA8IDE2KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFwiMFwiO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gYnl0ZS50b1N0cmluZygxNikudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB1c2VzIGEgaGV1cmlzdGljIHVzZWQgYnkgdjggYW5kIGNoYWtyYSB0byBmb3JjZSBhbiBvYmplY3QgaW50byBkaWN0aW9uYXJ5IG1vZGUuXG4gICAgICAgIGZ1bmN0aW9uIE1ha2VEaWN0aW9uYXJ5KG9iaikge1xuICAgICAgICAgICAgb2JqLl9fID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZGVsZXRlIG9iai5fXztcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKFJlZmxlY3QgfHwgKFJlZmxlY3QgPSB7fSkpO1xuIiwiZXhwb3J0IGNvbnN0IFBMVUdJTl9GT0xERVIgPSAncGx1Z2lucyc7XHJcblxyXG5leHBvcnQgY29uc3QgVkVSU0lPTiA9ICdfX1ZFUlNJT05fXyc7XHJcblxyXG4vLyBleHBvcnQgY29uc3QgVkVSU0lPTl9VUkwgPSAnaHR0cHM6Ly9naXRlZS5jb20venVvZXowMi9zaXl1YW4tcGx1Z2luLXN5c3RlbS9yYXcvbWFpbi9WRVJTSU9OJztcclxuXHJcbi8vIGV4cG9ydCBjb25zdCBTQ1JJUFRfVVJMID0gJ2h0dHBzOi8vZ2l0ZWUuY29tL3p1b2V6MDIvc2l5dWFuLXBsdWdpbi1zeXN0ZW0vcmF3L21haW4vbWFpbi5qcyc7XHJcblxyXG4vLyBleHBvcnQgY29uc3QgUExVR0lOX1NZU19BQlNfUEFUSCA9ICcvZGF0YS93aWRnZXRzL+aPkuS7tuezu+e7ny9wbHVnaW4uanMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9ICgpID0+ICh7IHRva2VuOiB3aW5kb3cuc2l5dWFuLmNvbmZpZy5hcGkudG9rZW4gfSk7XHJcblxyXG5leHBvcnQgY29uc3QgVFlQRVMgPSB7XHJcbiAgICBTdG9yYWdlTWFuYWdlcjogJ1N0b3JhZ2VNYW5hZ2VyJyxcclxuICAgIFBsdWdpblN5c3RlbTogJ1BsdWdpblN5c3RlbScsXHJcbiAgICBTeXN0ZW1NYW5hZ2VyOiAnUGx1Z2luU3lzdGVtTG9jYWxNYW5hZ2VyJyxcclxuICAgIFBsdWdpbkxvYWRlcjogJ1BsdWdpbkxvYWRlcicsXHJcbiAgICBQbHVnaW5GaWxlTWFuYWdlcjogJ1BsdWdpbkZpbGVNYW5hZ2VyJyxcclxuICAgIEV2ZW50QnVzOiAnRXZlbnRCdXMnLFxyXG4gICAgU2hvcnRjdXQ6ICdTaG9ydGN1dCcsXHJcbiAgICBDb21tYW5kTWFuYWdlcjogJ0NvbW1hbmRNYW5hZ2VyJyxcclxuICAgIFN0b3JlOiAnU3RvcmUnLFxyXG4gICAgU2V0dGluZ01hbmFnZXI6ICdTZXR0aW5nTWFuYWdlcicsXHJcbn07XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IGdlblVVSUQgfSBmcm9tICcuLi91dGlsJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0KHVybCwgZGF0YSkge1xyXG4gICAgbGV0IHJlc0RhdGEgPSBudWxsO1xyXG4gICAgYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgVG9rZW4gJHtjb25maWcoKS50b2tlbn1gLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgIHJlc0RhdGEgPSByZXNwb25zZS5qc29uKCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXNEYXRhO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGFyc2VCb2R5KHJlc3BvbnNlKSB7XHJcbiAgICBsZXQgciA9IGF3YWl0IHJlc3BvbnNlO1xyXG4gICAgcmV0dXJuIHIuY29kZSA9PT0gMCA/IHIuZGF0YSA6IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cmFuc2FjdGlvbnMocHJvdHlsZSwgdHJhbnNhY3Rpb25zID0gW10pIHtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3RyYW5zYWN0aW9ucyc7XHJcbiAgICBjb25zdCB3c191cmwgPSBuZXcgVVJMKHByb3R5bGUud3Mud3MudXJsKTtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgYXBwOiB3c191cmwuc2VhcmNoUGFyYW1zLmdldCgnYXBwJyksXHJcbiAgICAgICAgc2Vzc2lvbjogd3NfdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2lkJyksXHJcbiAgICAgICAgdHJhbnNhY3Rpb25zOiB0cmFuc2FjdGlvbnMsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3FsKHNxbCkge1xyXG4gICAgbGV0IHNxbGRhdGEgPSB7XHJcbiAgICAgICAgc3RtdDogc3FsLFxyXG4gICAgfTtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9xdWVyeS9zcWwnO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgc3FsZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbHNOb3RlYm9va3Moc3FsKSB7XHJcbiAgICBsZXQgc3FsZGF0YSA9IHsgc3RtdDogc3FsIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvbm90ZWJvb2svbHNOb3RlYm9va3MnO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgc3FsZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QW5jaG9yKGFuY2hvclRleHQsIG5hbWUpIHtcclxuICAgIGFuY2hvclRleHQgPSBhbmNob3JUZXh0LnJlcGxhY2UoJygoJywgJycpLnJlcGxhY2UoJykpJywgJycpO1xyXG4gICAgbGV0IHNxbFNjcmlwdCA9IGBzZWxlY3QgKiBmcm9tIGJsb2NrcyB3aGVyZSBpZCA9ICcke2FuY2hvclRleHR9J2A7XHJcbiAgICBsZXQgc3FsUmVzID0gYXdhaXQgc3FsKHNxbFNjcmlwdCk7XHJcbiAgICBsZXQgYW5jaG9yID0gJyc7XHJcbiAgICBpZiAoc3FsUmVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHNxbFJlc1swXVtuYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgYW5jaG9yID0gc3FsUmVzWzBdW25hbWVdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNxbFJlc1swXVsnY29udGVudCddKSB7XHJcbiAgICAgICAgICAgICAgICBhbmNob3IgPSBzcWxSZXNbMF1bJ2NvbnRlbnQnXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFuY2hvciA9IGFuY2hvclRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGFuY2hvciA9ICfop6PmnpDplJnor68nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBhbmNob3I7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvcGVuTm90ZWJvb2sobm90ZWJvb2tJZCkge1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgbm90ZWJvb2s6IG5vdGVib29rSWQsXHJcbiAgICB9O1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL25vdGVib29rL29wZW5Ob3RlYm9vayc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbiAgICAvL+i/lOWbnuepuuaVsOaNrlxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xvc2VOb3RlYm9vayhub3RlYm9va0lkKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBub3RlYm9vazogbm90ZWJvb2tJZCxcclxuICAgIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvbm90ZWJvb2svY2xvc2VOb3RlYm9vayc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbiAgICAvL+i/lOWbnuepuuaVsOaNrlxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuYW1lTm90ZWJvb2sobm90ZWJvb2tJZCwgbm90ZWJvb2tOZXdOYW1lKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBub3RlYm9vazogbm90ZWJvb2tJZCxcclxuICAgICAgICBuYW1lOiBub3RlYm9va05ld05hbWUsXHJcbiAgICB9O1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL25vdGVib29rL3JlbmFtZU5vdGVib29rJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxuICAgIC8v6L+U5Zue56m65pWw5o2uXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVOb3RlYm9vayhub3RlYm9va05hbWUpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIG5hbWU6IG5vdGVib29rTmFtZSxcclxuICAgIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvbm90ZWJvb2svY3JlYXRlTm90ZWJvb2snO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG4gICAgLy/ov5Tlm57nqbrmlbDmja5cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZU5vdGVib29rKG5vdGVib29rSWQpIHtcclxuICAgIGxldCBkYXRhID0geyBub3RlYm9vazogbm90ZWJvb2tJZCB9O1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL25vdGVib29rL3JlbW92ZU5vdGVib29rJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxuICAgIC8v6L+U5Zue56m65pWw5o2uXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROb3RlYm9va0NvbmYobm90ZWJvb2tJZCkge1xyXG4gICAgbGV0IGRhdGEgPSB7IG5vdGVib29rOiBub3RlYm9va0lkIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvbm90ZWJvb2svZ2V0Tm90ZWJvb2tDb25mJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxuICAgIC8v6L+U5Zue56yU6K6w5pys6YWN572uXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXROb3RlYm9va0NvbmYobm90ZWJvb2tJZCkge1xyXG4gICAgbGV0IGRhdGEgPSB7IG5vdGVib29rOiBub3RlYm9va0lkIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvbm90ZWJvb2svc2V0Tm90ZWJvb2tDb25mJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxuICAgIC8v6L+U5Zue56yU6K6w5pys6YWN572uXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5hbWVEb2Mobm90ZWJvb2tJZCwgcGF0aCwgdGl0bGUpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIG5vdGVib29rOiBub3RlYm9va0lkLFxyXG4gICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgfTtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9maWxldHJlZS9yZW5hbWVEb2MnO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG4gICAgLy/ov5Tlm57nqbrmlbDmja5cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZURvYyhub3RlYm9va0lkLCBwYXRoKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBub3RlYm9vazogbm90ZWJvb2tJZCxcclxuICAgICAgICBwYXRoOiBwYXRoLFxyXG4gICAgfTtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9maWxldHJlZS9yZW1vdmVEb2MnO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG4gICAgLy/ov5Tlm57nqbrmlbDmja5cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1vdmVEb2Moc3JjTm90ZWJvb2tJZCwgc3JjUGF0aCwgdGFyZ2V0Tm90ZWJvb2tJZCwgdGFyZ2V0UGF0aCkge1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgZnJvbU5vdGVib29rOiBzcmNOb3RlYm9va0lkLFxyXG4gICAgICAgIGZyb21QYXRoOiBzcmNQYXRoLFxyXG4gICAgICAgIHRvTm90ZWJvb2s6IHRhcmdldE5vdGVib29rSWQsXHJcbiAgICAgICAgdG9QYXRoOiB0YXJnZXRQYXRoLFxyXG4gICAgfTtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9maWxldHJlZS9tb3ZlRG9jJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxuICAgIC8v6L+U5Zue56m65pWw5o2uXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRIUGF0aEJ5UGF0aChub3RlYm9va0lkLCBwYXRoKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBOb3RlYm9vazogbm90ZWJvb2tJZCxcclxuICAgICAgICBQYXRoOiBwYXRoLFxyXG4gICAgfTtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9maWxldHJlZS9nZXRIUGF0aEJ5UGF0aCc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbiAgICAvL+i/lOWbnui3r+W+hFxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SFBhdGhCeUlEKElEKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBpZDogSUQsXHJcbiAgICB9O1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL2ZpbGV0cmVlL2dldEhQYXRoQnlJRCc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbn1cclxuXHJcbi8v5pqC57y65LiK5Lyg5paH5Lu2XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QmxvY2tBdHRycyhibG9ja0lkKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBpZDogYmxvY2tJZCxcclxuICAgIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvYXR0ci9nZXRCbG9ja0F0dHJzJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJsb2NrQnlJRChibG9ja0lkKSB7XHJcbiAgICBsZXQgc3FsU2NyaXB0ID0gYHNlbGVjdCAqIGZyb20gYmxvY2tzIHdoZXJlIGlkID0nJHtibG9ja0lkfSdgO1xyXG4gICAgbGV0IGRhdGEgPSBhd2FpdCBzcWwoc3FsU2NyaXB0KTtcclxuICAgIHJldHVybiBkYXRhWzBdO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QmxvY2tLcmFtZG93bihibG9ja0lkKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIGlkOiBibG9ja0lkLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL2Jsb2NrL2dldEJsb2NrS3JhbWRvd24nO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QmxvY2tCcmVhZGNydW1iKElEKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIGlkOiBJRCxcclxuICAgIH07XHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9ibG9jay9nZXRCbG9ja0JyZWFkY3J1bWInO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0QmxvY2tBdHRycyhibG9ja0lkLCBhdHRycykge1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL2F0dHIvc2V0QmxvY2tBdHRycyc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KFxyXG4gICAgICAgIHJlcXVlc3QodXJsLCB7XHJcbiAgICAgICAgICAgIGlkOiBibG9ja0lkLFxyXG4gICAgICAgICAgICBhdHRyczogYXR0cnMsXHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHBvcnRNZENvbnRlbnQoZG9jSWQpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIGlkOiBkb2NJZCxcclxuICAgIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvZXhwb3J0L2V4cG9ydE1kQ29udGVudCc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbiAgICAvL+aWh+aho2hlcGF0aOS4jk1hcmtkb3duIOWGheWuuVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jT3V0bGluZShkb2NJZCkge1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgaWQ6IGRvY0lkLFxyXG4gICAgfTtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9vdXRsaW5lL2dldERvY091dGxpbmUnO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdERvY3NCeVBhdGgocGF0aCkge1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgcGF0aDogcGF0aCxcclxuICAgIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvZmlsZXRyZWUvbGlzdERvY3NCeVBhdGgnO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG4gICAgLy/mlofmoaNoZXBhdGjkuI5NYXJrZG93biDlhoXlrrlcclxufVxyXG5cclxuZnVuY3Rpb24gaHRtbOi9rOS5iSh0ZXh0KSB7XHJcbiAgICB2YXIgdGVtcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0ZW1wRWwuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgIHZhciBvdXRwdXQgPSB0ZW1wRWwuaW5uZXJUZXh0IHx8IHRlbXBFbC50ZXh0Q29udGVudDtcclxuICAgIHRlbXBFbCA9IG51bGw7XHJcbiAgICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QmFja2xpbmsoaWQpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIGlkOiBpZCxcclxuICAgICAgICBiZWZvcmVMZW46IDEwLFxyXG4gICAgICAgIGs6ICcnLFxyXG4gICAgICAgIG1rOiAnJyxcclxuICAgIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvcmVmL2dldEJhY2tsaW5rJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaEVtYmVkQmxvY2soZXhjbHVkZUlkcywgc3FsKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBzdG10OiBzcWwsXHJcbiAgICAgICAgZXhjbHVkZUlEczogZXhjbHVkZUlkcyxcclxuICAgIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvc2VhcmNoL3NlYXJjaEVtYmVkQmxvY2snO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREb2MoaWQpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIGlkOiBpZCxcclxuICAgICAgICBrOiAnJyxcclxuICAgICAgICBtb2RlOiAyLFxyXG4gICAgICAgIHNpemU6IDM2LFxyXG4gICAgfTtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9maWxldHJlZS9nZXREb2MnO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGb2N1c2VkRG9jKGlkKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgazogJycsXHJcbiAgICAgICAgbW9kZTogMCxcclxuICAgICAgICBzaXplOiAzNixcclxuICAgIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvZmlsZXRyZWUvZ2V0RG9jJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGFnKCkge1xyXG4gICAgbGV0IGRhdGEgPSB7fTtcclxuICAgIGxldCB1cmwgPSAnL2FwaS90YWcvZ2V0VGFnJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TG9jYWxHcmFwaChrLCBpZCwgY29uZiwgcmVxSWQpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIGlkOiBpZCxcclxuICAgICAgICBrOiBrLFxyXG4gICAgICAgIGNvbmY6IGNvbmYsXHJcbiAgICAgICAgcmVxSWQ6IHJlcUlkLFxyXG4gICAgfTtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9ncmFwaC9nZXRMb2NhbEdyYXBoJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R3JhcGgoaywgY29uZiwgcmVxSWQpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIGs6IGssXHJcbiAgICAgICAgY29uZjogY29uZixcclxuICAgICAgICByZXFJZDogcmVxSWQsXHJcbiAgICB9O1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL2dyYXBoL2dldEdyYXBoJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkocmVxdWVzdCh1cmwsIGRhdGEpKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaERvY3Moaykge1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgazogayxcclxuICAgIH07XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvZmlsZXRyZWUvc2VhcmNoRG9jcyc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaEJsb2NrKHF1ZXJ5KSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBxdWVyeTogcXVlcnksXHJcbiAgICB9O1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL3NlYXJjaC9zZWFyY2hCbG9jayc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFRlbXBsYXRlKGspIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIGs6IGssXHJcbiAgICB9O1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL3NlYXJjaC9zZWFyY2hUZW1wbGF0ZSc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVEb2NXaXRoTWQobm90ZWJvb2ssIHBhdGgsIG1hcmtkb3duKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBub3RlYm9vazogbm90ZWJvb2ssXHJcbiAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICBtYXJrZG93bjogbWFya2Rvd24sXHJcbiAgICB9O1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL2ZpbGV0cmVlL2NyZWF0ZURvY1dpdGhNZCc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkb2NTYXZlQXNUZW1wbGF0ZShpZCwgb3ZlcndyaXRlID0gZmFsc2UpIHtcclxuICAgIGxldCB1cmwgPSAnL2FwaS90ZW1wbGF0ZS9kb2NTYXZlQXNUZW1wbGF0ZSc7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgb3ZlcndyaXRlOiBvdmVyd3JpdGUsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyKGRhdGEpIHtcclxuICAgIGxldCB1cmwgPSAnL2FwaS90ZW1wbGF0ZS9yZW5kZXInO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0QmxvY2socHJldmlvdXNJRCwgZGF0YVR5cGUsIGRhdGEpIHtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9ibG9jay9pbnNlcnRCbG9jayc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KFxyXG4gICAgICAgIHJlcXVlc3QoXHJcbiAgICAgICAgICAgICh1cmwgPSB1cmwpLFxyXG4gICAgICAgICAgICAoZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzSUQ6IHByZXZpb3VzSUQsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogZGF0YVR5cGUsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVwZW5kQmxvY2socGFyZW50SUQsIGRhdGFUeXBlLCBkYXRhKSB7XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvYmxvY2svcHJlcGVuZEJsb2NrJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkoXHJcbiAgICAgICAgcmVxdWVzdChcclxuICAgICAgICAgICAgKHVybCA9IHVybCksXHJcbiAgICAgICAgICAgIChkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50SUQ6IHBhcmVudElELFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IGRhdGFUeXBlLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICApO1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcHBlbmRCbG9jayhwYXJlbnRJRCwgZGF0YVR5cGUsIGRhdGEpIHtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9ibG9jay9hcHBlbmRCbG9jayc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KFxyXG4gICAgICAgIHJlcXVlc3QoXHJcbiAgICAgICAgICAgICh1cmwgPSB1cmwpLFxyXG4gICAgICAgICAgICAoZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHBhcmVudElEOiBwYXJlbnRJRCxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBkYXRhVHlwZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUJsb2NrKGlkLCBkYXRhVHlwZSwgZGF0YSkge1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL2Jsb2NrL3VwZGF0ZUJsb2NrJztcclxuICAgIHJldHVybiBwYXJzZUJvZHkoXHJcbiAgICAgICAgcmVxdWVzdChcclxuICAgICAgICAgICAgKHVybCA9IHVybCksXHJcbiAgICAgICAgICAgIChkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IGRhdGFUeXBlLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQmxvY2soaWQpIHtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9ibG9jay9kZWxldGVCbG9jayc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCB7IGlkIH0pKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1vdmVCbG9jayhpZDogc3RyaW5nLCBwcmV2aW91c0lEOiBzdHJpbmcsIHBhcmVudElEOiBzdHJpbmcpIHtcclxuICAgIGxldCB1cmwgPSAnL2FwaS9ibG9jay9tb3ZlQmxvY2snO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShcclxuICAgICAgICByZXF1ZXN0KHVybCwgeyBpZDogaWQsIHByZXZpb3VzSUQ6IHByZXZpb3VzSUQsIHBhcmVudElEOiBwYXJlbnRJRCB9KVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN5c0ZvbnRzKCkge1xyXG4gICAgbGV0IHVybCA9ICcvYXBpL3N5c3RlbS9nZXRTeXNGb250cyc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBudWxsKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaWxlKHBhdGg6IHN0cmluZywgdHlwZTogJ2pzb24nIHwgJ3RleHQnID0gJ3RleHQnKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2ZpbGUvZ2V0RmlsZScsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBUb2tlbiAke2NvbmZpZygpLnRva2VufWAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgfSksXHJcbiAgICB9KTtcclxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgIGlmICh0eXBlID09PSAndGV4dCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdqc29uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkuZGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHB1dEZpbGUocGF0aCwgZmlsZWRhdGEsIGlzRGlyID0gZmFsc2UsIG1vZFRpbWUgPSBEYXRlLm5vdygpKSB7XHJcbiAgICBsZXQgYmxvYiA9IG5ldyBCbG9iKFtmaWxlZGF0YV0pO1xyXG4gICAgbGV0IGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIHBhdGguc3BsaXQoJy8nKS5wb3AoKSk7XHJcbiAgICBsZXQgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm1kYXRhLmFwcGVuZCgncGF0aCcsIHBhdGgpO1xyXG4gICAgZm9ybWRhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICBmb3JtZGF0YS5hcHBlbmQoJ2lzRGlyJywgU3RyaW5nKGlzRGlyKSk7XHJcbiAgICBmb3JtZGF0YS5hcHBlbmQoJ21vZFRpbWUnLCBTdHJpbmcobW9kVGltZSkpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9maWxlL3B1dEZpbGUnLCB7XHJcbiAgICAgICAgYm9keTogZm9ybWRhdGEsXHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgVG9rZW4gJHtjb25maWcoKS50b2tlbn1gLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGVsc2UgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkRGlyKHBhdGg6IHN0cmluZykge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9maWxlL3JlYWREaXInLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgVG9rZW4gJHtjb25maWcoKS50b2tlbn1gLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBwYXRoOiBwYXRoLFxyXG4gICAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICByZXR1cm4gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkuZGF0YTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUZpbGUocGF0aCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9maWxlL3JlbW92ZUZpbGUnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgVG9rZW4gJHtjb25maWcoKS50b2tlbn1gLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBwYXRoOiBwYXRoLFxyXG4gICAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHJldHVybjtcclxuICAgIGVsc2UgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IGxhbmd1YWdlID0gd2luZG93LnRoZW1lPy5sYW5ndWFnZU1vZGU7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVzaE1zZyhtZXNzYWdlID0gbnVsbCwgdGV4dCA9IG51bGwsIHRpbWVvdXQgPSA3MDAwKSB7XHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9ub3RpZmljYXRpb24vcHVzaE1zZyc7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIG1zZzogbWVzc2FnZSA/IG1lc3NhZ2VbbGFuZ3VhZ2VdIHx8IG1lc3NhZ2Uub3RoZXIgOiB0ZXh0LFxyXG4gICAgICAgIHRpbWVvdXQ6IHRpbWVvdXQsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVzaEVyck1zZyhtZXNzYWdlID0gbnVsbCwgdGV4dCA9IG51bGwsIHRpbWVvdXQgPSA3MDAwKSB7XHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9ub3RpZmljYXRpb24vcHVzaEVyck1zZyc7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIG1zZzogbWVzc2FnZSA/IG1lc3NhZ2VbbGFuZ3VhZ2VdIHx8IG1lc3NhZ2Uub3RoZXIgOiB0ZXh0LFxyXG4gICAgICAgIHRpbWVvdXQ6IHRpbWVvdXQsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgZGF0YSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0U3RvcmFnZVZhbChrZXk6IHN0cmluZywgdmFsOiBhbnkpIHtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3N0b3JhZ2Uvc2V0TG9jYWxTdG9yYWdlVmFsJztcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgYXBwOiBnZW5VVUlEKCksXHJcbiAgICAgICAga2V5LFxyXG4gICAgICAgIHZhbCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBkYXRhKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9zdG9yYWdlL2dldExvY2FsU3RvcmFnZSc7XHJcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlcXVlc3QodXJsLCBudWxsKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJTcHJpZyhzcHJpZzogc3RyaW5nKSB7XHJcbiAgICBsZXQgdXJsID0gJy9hcGkvdGVtcGxhdGUvcmVuZGVyU3ByaWcnO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwge3RlbXBsYXRlOiBzcHJpZ30pKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJhenphcldpZGdldCgpIHtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL2JhemFhci9nZXRCYXphYXJXaWRnZXQnO1xyXG4gICAgcmV0dXJuIHBhcnNlQm9keShyZXF1ZXN0KHVybCwgbnVsbCkpO1xyXG59XHJcbiIsImltcG9ydCAqIGFzIHNlcnZlckFwaSBmcm9tICcuLi8uLi9hcGkvc2VydmVyLWFwaSc7XHJcbmltcG9ydCB7IElOb3RpY2F0aW9uT3B0aW9uLCBJTm90aWZpY2F0aW9uIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5vdGlmaWNhdGlvbiBpbXBsZW1lbnRzIElOb3RpZmljYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBvcHRpb246IElOb3RpY2F0aW9uT3B0aW9uKSB7fVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9uLnR5cGUgPT09ICdlcnJvcicpIHtcclxuICAgICAgICAgICAgc2VydmVyQXBpLnB1c2hFcnJNc2cobnVsbCwgdGhpcy5vcHRpb24ubWVzc2FnZSwgdGhpcy5vcHRpb24udGltZW91dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VydmVyQXBpLnB1c2hNc2cobnVsbCwgdGhpcy5vcHRpb24ubWVzc2FnZSwgdGhpcy5vcHRpb24udGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInZhciB6ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIEQgPSAoaSwgZSwgdCkgPT4gZSBpbiBpID8geihpLCBlLCB7IGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAsIHZhbHVlOiB0IH0pIDogaVtlXSA9IHQ7XG52YXIgXyA9IChpLCBlLCB0KSA9PiAoRChpLCB0eXBlb2YgZSAhPSBcInN5bWJvbFwiID8gZSArIFwiXCIgOiBlLCB0KSwgdCk7XG52YXIgUCA9IHR5cGVvZiBnbG9iYWxUaGlzIDwgXCJ1XCIgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyA8IFwidVwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCA8IFwidVwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgPCBcInVcIiA/IHNlbGYgOiB7fSwgYiA9IHt9LCBXID0ge1xuICBnZXQgZXhwb3J0cygpIHtcbiAgICByZXR1cm4gYjtcbiAgfSxcbiAgc2V0IGV4cG9ydHMoaSkge1xuICAgIGIgPSBpO1xuICB9XG59O1xuKGZ1bmN0aW9uKGkpIHtcbiAgKGZ1bmN0aW9uKGUsIHQpIHtcbiAgICBpLmV4cG9ydHMgPyBpLmV4cG9ydHMgPSB0KCkgOiBlLmxvZyA9IHQoKTtcbiAgfSkoUCwgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGUgPSBmdW5jdGlvbigpIHtcbiAgICB9LCB0ID0gXCJ1bmRlZmluZWRcIiwgbCA9IHR5cGVvZiB3aW5kb3cgIT09IHQgJiYgdHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IgIT09IHQgJiYgL1RyaWRlbnRcXC98TVNJRSAvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpLCBwID0gW1xuICAgICAgXCJ0cmFjZVwiLFxuICAgICAgXCJkZWJ1Z1wiLFxuICAgICAgXCJpbmZvXCIsXG4gICAgICBcIndhcm5cIixcbiAgICAgIFwiZXJyb3JcIlxuICAgIF07XG4gICAgZnVuY3Rpb24gYyhhLCBzKSB7XG4gICAgICB2YXIgZiA9IGFbc107XG4gICAgICBpZiAodHlwZW9mIGYuYmluZCA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIHJldHVybiBmLmJpbmQoYSk7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChmLCBhKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5hcHBseShmLCBbYSwgYXJndW1lbnRzXSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGcoKSB7XG4gICAgICBjb25zb2xlLmxvZyAmJiAoY29uc29sZS5sb2cuYXBwbHkgPyBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpIDogRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KGNvbnNvbGUubG9nLCBbY29uc29sZSwgYXJndW1lbnRzXSkpLCBjb25zb2xlLnRyYWNlICYmIGNvbnNvbGUudHJhY2UoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdyhhKSB7XG4gICAgICByZXR1cm4gYSA9PT0gXCJkZWJ1Z1wiICYmIChhID0gXCJsb2dcIiksIHR5cGVvZiBjb25zb2xlID09PSB0ID8gITEgOiBhID09PSBcInRyYWNlXCIgJiYgbCA/IGcgOiBjb25zb2xlW2FdICE9PSB2b2lkIDAgPyBjKGNvbnNvbGUsIGEpIDogY29uc29sZS5sb2cgIT09IHZvaWQgMCA/IGMoY29uc29sZSwgXCJsb2dcIikgOiBlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBFKGEsIHMpIHtcbiAgICAgIGZvciAodmFyIGYgPSAwOyBmIDwgcC5sZW5ndGg7IGYrKykge1xuICAgICAgICB2YXIgbyA9IHBbZl07XG4gICAgICAgIHRoaXNbb10gPSBmIDwgYSA/IGUgOiB0aGlzLm1ldGhvZEZhY3RvcnkobywgYSwgcyk7XG4gICAgICB9XG4gICAgICB0aGlzLmxvZyA9IHRoaXMuZGVidWc7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEYoYSwgcywgZikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB0eXBlb2YgY29uc29sZSAhPT0gdCAmJiAoRS5jYWxsKHRoaXMsIHMsIGYpLCB0aGlzW2FdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcihhLCBzLCBmKSB7XG4gICAgICByZXR1cm4gdyhhKSB8fCBGLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHYoYSwgcywgZikge1xuICAgICAgdmFyIG8gPSB0aGlzLCBPO1xuICAgICAgcyA9IHMgPz8gXCJXQVJOXCI7XG4gICAgICB2YXIgdSA9IFwibG9nbGV2ZWxcIjtcbiAgICAgIHR5cGVvZiBhID09IFwic3RyaW5nXCIgPyB1ICs9IFwiOlwiICsgYSA6IHR5cGVvZiBhID09IFwic3ltYm9sXCIgJiYgKHUgPSB2b2lkIDApO1xuICAgICAgZnVuY3Rpb24gQyhuKSB7XG4gICAgICAgIHZhciBkID0gKHBbbl0gfHwgXCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gdCB8fCAhdSkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZVt1XSA9IGQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KHUpICsgXCI9XCIgKyBkICsgXCI7XCI7XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBrKCkge1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gdCB8fCAhdSkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2VbdV07XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2YgbiA9PT0gdClcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHZhciBkID0gd2luZG93LmRvY3VtZW50LmNvb2tpZSwgbSA9IGQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQodSkgKyBcIj1cIlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBtICE9PSAtMSAmJiAobiA9IC9eKFteO10rKS8uZXhlYyhkLnNsaWNlKG0pKVsxXSk7XG4gICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gby5sZXZlbHNbbl0gPT09IHZvaWQgMCAmJiAobiA9IHZvaWQgMCksIG47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIFYoKSB7XG4gICAgICAgIGlmICghKHR5cGVvZiB3aW5kb3cgPT09IHQgfHwgIXUpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh1KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICB9XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5jb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQodSkgKyBcIj07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVENcIjtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG8ubmFtZSA9IGEsIG8ubGV2ZWxzID0ge1xuICAgICAgICBUUkFDRTogMCxcbiAgICAgICAgREVCVUc6IDEsXG4gICAgICAgIElORk86IDIsXG4gICAgICAgIFdBUk46IDMsXG4gICAgICAgIEVSUk9SOiA0LFxuICAgICAgICBTSUxFTlQ6IDVcbiAgICAgIH0sIG8ubWV0aG9kRmFjdG9yeSA9IGYgfHwgciwgby5nZXRMZXZlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTztcbiAgICAgIH0sIG8uc2V0TGV2ZWwgPSBmdW5jdGlvbihuLCBkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbiA9PSBcInN0cmluZ1wiICYmIG8ubGV2ZWxzW24udG9VcHBlckNhc2UoKV0gIT09IHZvaWQgMCAmJiAobiA9IG8ubGV2ZWxzW24udG9VcHBlckNhc2UoKV0pLCB0eXBlb2YgbiA9PSBcIm51bWJlclwiICYmIG4gPj0gMCAmJiBuIDw9IG8ubGV2ZWxzLlNJTEVOVCkge1xuICAgICAgICAgIGlmIChPID0gbiwgZCAhPT0gITEgJiYgQyhuKSwgRS5jYWxsKG8sIG4sIGEpLCB0eXBlb2YgY29uc29sZSA9PT0gdCAmJiBuIDwgby5sZXZlbHMuU0lMRU5UKVxuICAgICAgICAgICAgcmV0dXJuIFwiTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmdcIjtcbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgdGhyb3cgXCJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiBcIiArIG47XG4gICAgICB9LCBvLnNldERlZmF1bHRMZXZlbCA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgcyA9IG4sIGsoKSB8fCBvLnNldExldmVsKG4sICExKTtcbiAgICAgIH0sIG8ucmVzZXRMZXZlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBvLnNldExldmVsKHMsICExKSwgVigpO1xuICAgICAgfSwgby5lbmFibGVBbGwgPSBmdW5jdGlvbihuKSB7XG4gICAgICAgIG8uc2V0TGV2ZWwoby5sZXZlbHMuVFJBQ0UsIG4pO1xuICAgICAgfSwgby5kaXNhYmxlQWxsID0gZnVuY3Rpb24obikge1xuICAgICAgICBvLnNldExldmVsKG8ubGV2ZWxzLlNJTEVOVCwgbik7XG4gICAgICB9O1xuICAgICAgdmFyIHkgPSBrKCk7XG4gICAgICB5ID09IG51bGwgJiYgKHkgPSBzKSwgby5zZXRMZXZlbCh5LCAhMSk7XG4gICAgfVxuICAgIHZhciBMID0gbmV3IHYoKSwgaCA9IHt9O1xuICAgIEwuZ2V0TG9nZ2VyID0gZnVuY3Rpb24ocykge1xuICAgICAgaWYgKHR5cGVvZiBzICE9IFwic3ltYm9sXCIgJiYgdHlwZW9mIHMgIT0gXCJzdHJpbmdcIiB8fCBzID09PSBcIlwiKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTtcbiAgICAgIHZhciBmID0gaFtzXTtcbiAgICAgIHJldHVybiBmIHx8IChmID0gaFtzXSA9IG5ldyB2KFxuICAgICAgICBzLFxuICAgICAgICBMLmdldExldmVsKCksXG4gICAgICAgIEwubWV0aG9kRmFjdG9yeVxuICAgICAgKSksIGY7XG4gICAgfTtcbiAgICB2YXIgRyA9IHR5cGVvZiB3aW5kb3cgIT09IHQgPyB3aW5kb3cubG9nIDogdm9pZCAwO1xuICAgIHJldHVybiBMLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSB0ICYmIHdpbmRvdy5sb2cgPT09IEwgJiYgKHdpbmRvdy5sb2cgPSBHKSwgTDtcbiAgICB9LCBMLmdldExvZ2dlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBoO1xuICAgIH0sIEwuZGVmYXVsdCA9IEwsIEw7XG4gIH0pO1xufSkoVyk7XG52YXIgUiA9IHt9LCBCID0ge1xuICBnZXQgZXhwb3J0cygpIHtcbiAgICByZXR1cm4gUjtcbiAgfSxcbiAgc2V0IGV4cG9ydHMoaSkge1xuICAgIFIgPSBpO1xuICB9XG59O1xuKGZ1bmN0aW9uKGkpIHtcbiAgKGZ1bmN0aW9uKGUsIHQpIHtcbiAgICBpLmV4cG9ydHMgPyBpLmV4cG9ydHMgPSB0KCkgOiBlLnByZWZpeCA9IHQoZSk7XG4gIH0pKFAsIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgdCA9IGZ1bmN0aW9uKHIpIHtcbiAgICAgIGZvciAodmFyIHYgPSAxLCBMID0gYXJndW1lbnRzLmxlbmd0aCwgaDsgdiA8IEw7IHYrKylcbiAgICAgICAgZm9yIChoIGluIGFyZ3VtZW50c1t2XSlcbiAgICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXJndW1lbnRzW3ZdLCBoKSAmJiAocltoXSA9IGFyZ3VtZW50c1t2XVtoXSk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9LCBsID0ge1xuICAgICAgdGVtcGxhdGU6IFwiWyV0XSAlbDpcIixcbiAgICAgIGxldmVsRm9ybWF0dGVyOiBmdW5jdGlvbihyKSB7XG4gICAgICAgIHJldHVybiByLnRvVXBwZXJDYXNlKCk7XG4gICAgICB9LFxuICAgICAgbmFtZUZvcm1hdHRlcjogZnVuY3Rpb24ocikge1xuICAgICAgICByZXR1cm4gciB8fCBcInJvb3RcIjtcbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXBGb3JtYXR0ZXI6IGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgcmV0dXJuIHIudG9UaW1lU3RyaW5nKCkucmVwbGFjZSgvLiooXFxkezJ9OlxcZHsyfTpcXGR7Mn0pLiovLCBcIiQxXCIpO1xuICAgICAgfSxcbiAgICAgIGZvcm1hdDogdm9pZCAwXG4gICAgfSwgcCwgYyA9IHt9LCBnID0gZnVuY3Rpb24ocikge1xuICAgICAgaWYgKCFyIHx8ICFyLmdldExvZ2dlcilcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IGlzIG5vdCBhIHJvb3QgbG9nZ2VyXCIpO1xuICAgICAgcCA9IHI7XG4gICAgfSwgdyA9IGZ1bmN0aW9uKHIsIHYpIHtcbiAgICAgIGlmICghciB8fCAhci5zZXRMZXZlbClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IGlzIG5vdCBhIGxvZ2dlclwiKTtcbiAgICAgIHZhciBMID0gci5tZXRob2RGYWN0b3J5LCBoID0gci5uYW1lIHx8IFwiXCIsIEcgPSBjW2hdIHx8IGNbXCJcIl0gfHwgbDtcbiAgICAgIGZ1bmN0aW9uIGEocywgZiwgbykge1xuICAgICAgICB2YXIgTyA9IEwocywgZiwgbyksIHUgPSBjW29dIHx8IGNbXCJcIl0sIEMgPSB1LnRlbXBsYXRlLmluZGV4T2YoXCIldFwiKSAhPT0gLTEsIGsgPSB1LnRlbXBsYXRlLmluZGV4T2YoXCIlbFwiKSAhPT0gLTEsIFYgPSB1LnRlbXBsYXRlLmluZGV4T2YoXCIlblwiKSAhPT0gLTE7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBmb3IgKHZhciB5ID0gXCJcIiwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGQgPSBBcnJheShuKSwgbSA9IDA7IG0gPCBuOyBtKyspXG4gICAgICAgICAgICBkW21dID0gYXJndW1lbnRzW21dO1xuICAgICAgICAgIGlmIChoIHx8ICFjW29dKSB7XG4gICAgICAgICAgICB2YXIgeCA9IHUudGltZXN0YW1wRm9ybWF0dGVyKG5ldyBEYXRlKCkpLCBVID0gdS5sZXZlbEZvcm1hdHRlcihzKSwgQSA9IHUubmFtZUZvcm1hdHRlcihvKTtcbiAgICAgICAgICAgIHUuZm9ybWF0ID8geSArPSB1LmZvcm1hdChVLCBBLCB4KSA6ICh5ICs9IHUudGVtcGxhdGUsIEMgJiYgKHkgPSB5LnJlcGxhY2UoLyV0LywgeCkpLCBrICYmICh5ID0geS5yZXBsYWNlKC8lbC8sIFUpKSwgViAmJiAoeSA9IHkucmVwbGFjZSgvJW4vLCBBKSkpLCBkLmxlbmd0aCAmJiB0eXBlb2YgZFswXSA9PSBcInN0cmluZ1wiID8gZFswXSA9IHkgKyBcIiBcIiArIGRbMF0gOiBkLnVuc2hpZnQoeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIE8uYXBwbHkodm9pZCAwLCBkKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjW2hdIHx8IChyLm1ldGhvZEZhY3RvcnkgPSBhKSwgdiA9IHYgfHwge30sIHYudGVtcGxhdGUgJiYgKHYuZm9ybWF0ID0gdm9pZCAwKSwgY1toXSA9IHQoe30sIEcsIHYpLCByLnNldExldmVsKHIuZ2V0TGV2ZWwoKSksIHAgfHwgci53YXJuKFxuICAgICAgICBcIkl0IGlzIG5lY2Vzc2FyeSB0byBjYWxsIHRoZSBmdW5jdGlvbiByZWcoKSBvZiBsb2dsZXZlbC1wbHVnaW4tcHJlZml4IGJlZm9yZSBjYWxsaW5nIGFwcGx5LiBGcm9tIHRoZSBuZXh0IHJlbGVhc2UsIGl0IHdpbGwgdGhyb3cgYW4gZXJyb3IuIFNlZSBtb3JlOiBodHRwczovL2dpdGh1Yi5jb20va3V0dWx1ay9sb2dsZXZlbC1wbHVnaW4tcHJlZml4L2Jsb2IvbWFzdGVyL1JFQURNRS5tZFwiXG4gICAgICApLCByO1xuICAgIH0sIEUgPSB7XG4gICAgICByZWc6IGcsXG4gICAgICBhcHBseTogd1xuICAgIH0sIEY7XG4gICAgcmV0dXJuIGUgJiYgKEYgPSBlLnByZWZpeCwgRS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZS5wcmVmaXggPT09IEUgJiYgKGUucHJlZml4ID0gRiksIEU7XG4gICAgfSksIEU7XG4gIH0pO1xufSkoQik7XG5jbGFzcyBUIHtcbn1cbl8oVCwgXCJMT0dfTEVWRUxfS0VZXCIsIFwiVklURV9MT0dfTEVWRUxcIiksIF8oVCwgXCJMT0dfUFJFRklYX0tFWVwiLCBcIlZJVEVfTE9HX1BSRUZJWFwiKTtcbnZhciBTID0gLyogQF9fUFVSRV9fICovICgoaSkgPT4gKGkuTE9HX0xFVkVMX0RFQlVHID0gXCJERUJVR1wiLCBpLkxPR19MRVZFTF9JTkZPID0gXCJJTkZPXCIsIGkuTE9HX0xFVkVMX1dBUk4gPSBcIldBUk5cIiwgaS5MT0dfTEVWRUxfRVJST1IgPSBcIkVSUk9SXCIsIGkpKShTIHx8IHt9KTtcbmZ1bmN0aW9uIEsoKSB7XG4gIGNvbnN0IGkgPSBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZTtcbiAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSAodCwgbCkgPT4gbDtcbiAgY29uc3QgZSA9IG5ldyBFcnJvcigpLnN0YWNrLnNsaWNlKDEpO1xuICByZXR1cm4gRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBpLCBlO1xufVxuY2xhc3MgSSB7XG4gIC8qKlxuICAgKiDop6PmnpDml6Xlv5fnuqfliKvkuLrmnprkuL5cbiAgICpcbiAgICogQHBhcmFtIGVudW1PYmog5p6a5Li+5a+56LGhXG4gICAqIEBwYXJhbSB2YWx1ZSDphY3nva7nmoTlgLxcbiAgICovXG4gIHN0YXRpYyBzdHJpbmdUb0VudW1WYWx1ZShlLCB0KSB7XG4gICAgcmV0dXJuIGVbT2JqZWN0LmtleXMoZSkuZmlsdGVyKFxuICAgICAgKGwpID0+IGVbbF0udG9TdHJpbmcoKSA9PT0gdFxuICAgIClbMF1dO1xuICB9XG4gIC8qKlxuICAgKiDojrflj5bphY3nva7nmoTml6Xlv5fnuqfliKtcbiAgICovXG4gIHN0YXRpYyBnZXRFbnZMZXZlbChlKSB7XG4gICAgaWYgKCFlKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHQgPSBlLmdldEVudk9yRGVmYXVsdChcbiAgICAgIFQuTE9HX0xFVkVMX0tFWSxcbiAgICAgIFMuTE9HX0xFVkVMX0lORk9cbiAgICApLCBsID0gSS5zdHJpbmdUb0VudW1WYWx1ZShcbiAgICAgIFMsXG4gICAgICB0LnRvVXBwZXJDYXNlKClcbiAgICApO1xuICAgIHJldHVybiBsIHx8IGNvbnNvbGUud2FybihcbiAgICAgIFwiW3poaS1sb2ddIExPR19MRVZFTCBpcyBpbnZhbGlkIGluIHlvdSAuZW52IGZpbGUuTXVzdCBiZSBlaXRoZXIgZGVidWcsIGluZm8sIHdhcm4gb3IgZXJyb3IsIGZhbGxiYWNrIHRvIGRlZmF1bHQgaW5mbyBsZXZlbFwiXG4gICAgKSwgbDtcbiAgfVxuICAvKipcbiAgICog6I635Y+W6buY6K6k5pel5b+XXG4gICAqL1xuICBzdGF0aWMgZ2V0RW52TG9nZ2VyKGUpIHtcbiAgICBpZiAoZSlcbiAgICAgIHJldHVybiBlLmdldEVudihULkxPR19QUkVGSVhfS0VZKTtcbiAgfVxufVxuY2xhc3MgWSB7XG4gIGNvbnN0cnVjdG9yKGUsIHQsIGwpIHtcbiAgICBfKHRoaXMsIFwiY29uc29sZUxvZ2dlclwiLCBcImNvbnNvbGVcIik7XG4gICAgXyh0aGlzLCBcInN0YWNrU2l6ZVwiLCAxKTtcbiAgICAvKipcbiAgICAgKiDojrflj5bml6Xlv5forrDlvZXlmahcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsb2dnZXJOYW1lIC0g5pel5b+X6K6w5b2V5Zmo77yM6buY6K6k5Li6IGNvbnNvbGVcbiAgICAgKiBAYXV0aG9yIHRlcndlclxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIF8odGhpcywgXCJnZXRMb2dnZXJcIiwgKGUpID0+IHtcbiAgICAgIGxldCB0O1xuICAgICAgaWYgKGUpXG4gICAgICAgIHQgPSBlO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGwgPSB0aGlzLmdldENhbGxTdGFjaygpLCBwID0gW10sIGMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZyA9IDA7IGcgPCBsLmxlbmd0aDsgZysrKSB7XG4gICAgICAgICAgY29uc3QgdyA9IGxbZ10sIEUgPSB3LmdldEZpbGVOYW1lKCkgPz8gXCJub25lXCI7XG4gICAgICAgICAgaWYgKGcgPiB0aGlzLnN0YWNrU2l6ZSAtIDEpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjb25zdCBGID0gRSArIFwiLVwiICsgdy5nZXRMaW5lTnVtYmVyKCkgKyBcIjpcIiArIHcuZ2V0Q29sdW1uTnVtYmVyKCk7XG4gICAgICAgICAgcC5wdXNoKEYpO1xuICAgICAgICB9XG4gICAgICAgIGMubGVuZ3RoID4gMCAmJiAodCA9IHAuam9pbihcIiAtPiBcIikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuICghdCB8fCB0LnRyaW0oKS5sZW5ndGggPT09IDApICYmICh0ID0gdGhpcy5jb25zb2xlTG9nZ2VyKSwgYi5nZXRMb2dnZXIodCk7XG4gICAgfSk7XG4gICAgdGhpcy5zdGFja1NpemUgPSAxO1xuICAgIGxldCBwO1xuICAgIGUgPyBwID0gZSA6IHAgPSBJLmdldEVudkxldmVsKGwpLCBwID0gcCA/PyBTLkxPR19MRVZFTF9JTkZPLCBiLnNldExldmVsKHApO1xuICAgIGNvbnN0IGMgPSB7XG4gICAgICBncmF5OiAoZykgPT4gZy50b1N0cmluZygpLFxuICAgICAgZ3JlZW46IChnKSA9PiBnLnRvU3RyaW5nKCksXG4gICAgICB5ZWxsb3c6IChnKSA9PiBnLnRvU3RyaW5nKCksXG4gICAgICByZWQ6IChnKSA9PiBnLnRvU3RyaW5nKClcbiAgICB9O1xuICAgIFIucmVnKGIpLCBSLmFwcGx5KGIsIHtcbiAgICAgIGZvcm1hdChnLCB3LCBFKSB7XG4gICAgICAgIGNvbnN0IHIgPSBbXCJbXCIgKyAodCA/PyBJLmdldEVudkxvZ2dlcihsKSA/PyBcInpoaVwiKSArIFwiXVwiXTtcbiAgICAgICAgc3dpdGNoIChyLnB1c2goXG4gICAgICAgICAgYy5ncmF5KFwiW1wiKSArIGMuZ3JlZW4oRSkudG9TdHJpbmcoKSArIGMuZ3JheShcIl1cIilcbiAgICAgICAgKSwgZykge1xuICAgICAgICAgIGNhc2UgUy5MT0dfTEVWRUxfREVCVUc6XG4gICAgICAgICAgICByLnB1c2goYy5ncmF5KGcudG9VcHBlckNhc2UoKS50b1N0cmluZygpKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFMuTE9HX0xFVkVMX0lORk86XG4gICAgICAgICAgICByLnB1c2goYy5ncmVlbihnLnRvVXBwZXJDYXNlKCkudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBTLkxPR19MRVZFTF9XQVJOOlxuICAgICAgICAgICAgci5wdXNoKGMueWVsbG93KGcudG9VcHBlckNhc2UoKS50b1N0cmluZygpKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFMuTE9HX0xFVkVMX0VSUk9SOlxuICAgICAgICAgICAgci5wdXNoKGMucmVkKGcudG9VcHBlckNhc2UoKS50b1N0cmluZygpKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gci5wdXNoKGMuZ3JlZW4odykudG9TdHJpbmcoKSksIHIucHVzaChjLmdyYXkoXCI6XCIpKSwgci5qb2luKFwiIFwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICog6K6+572u6L6T5Ye65qCI55qE5rex5bqm77yM6buY6K6kMVxuICAgKlxuICAgKiBAcGFyYW0gc3RhY2tTaXplIC0g5qCI55qE5rex5bqmXG4gICAqL1xuICBzZXRTdGFja1NpemUoZSkge1xuICAgIHRoaXMuc3RhY2tTaXplID0gZSA/PyAxO1xuICB9XG4gIC8qKlxuICAgKiDojrflj5bosIPnlKjloIbmoIjvvIzoi6XmnKrojrflj5bliLDnm7TmjqXov5Tlm57nqbrmlbDnu4RcbiAgICpcbiAgICogQGF1dGhvciB0ZXJ3ZXJcbiAgICogQHNpbmNlIDEuNi4wXG4gICAqL1xuICBnZXRDYWxsU3RhY2soKSB7XG4gICAgbGV0IGU7XG4gICAgdHJ5IHtcbiAgICAgIGUgPSBLKCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICBlID0gW107XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9XG59XG5jbGFzcyBYIHtcbiAgLyoqXG4gICAqIOm7mOiupOaXpeW/l+e6p+WIq1xuICAgKlxuICAgKiBAcGFyYW0gbGV2ZWwgLSDlj6/pgInvvIzmnKrorr7nva7pu5jorqRJTkZPXG4gICAqIEBwYXJhbSBzaWduIC0g5Y+v6YCJ5YmN57yA77yM6buY6K6kemhpXG4gICAqIEBwYXJhbSBlbnYgLSDlj6/pgInnjq/looPlj5jph4/lrp7kvotcbiAgICovXG4gIGNvbnN0cnVjdG9yKGUsIHQsIGwpIHtcbiAgICBfKHRoaXMsIFwibG9nZ2VyXCIpO1xuICAgIHRoaXMubG9nZ2VyID0gbmV3IFkoZSwgdCwgbCk7XG4gIH1cbiAgLyoqXG4gICAqIOiOt+WPluaXpeW/l+iusOW9leWZqFxuICAgKlxuICAgKiBAcGFyYW0gbG9nZ2VyTmFtZSAtIOaXpeW/l+iusOW9leWZqOWQjeensFxuICAgKiBAcGFyYW0gc3RhY2tTaXplIC0g5omT5Y2w5qCI55qE5rex5bqmXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGdldExvZ2dlcihlLCB0KSB7XG4gICAgcmV0dXJuIHRoaXMubG9nZ2VyLnNldFN0YWNrU2l6ZSh0KSwgdGhpcy5sb2dnZXIuZ2V0TG9nZ2VyKGUpO1xuICB9XG59XG5jbGFzcyBOIGV4dGVuZHMgWCB7XG4gIGNvbnN0cnVjdG9yKGUsIHQsIGwpIHtcbiAgICBzdXBlcihlLCB0LCBsKTtcbiAgfVxuICAvKipcbiAgICog6I635Y+W6buY6K6k55qE5pel5b+X6K6w5b2V5ZmoXG4gICAqXG4gICAqIEBwYXJhbSBsb2dnZXJOYW1lIC0g5pel5b+X6K6w5b2V5Zmo5ZCN56ewXG4gICAqIEBwYXJhbSBzdGFja1NpemUgLSDmiZPljbDmoIjnmoTmt7HluqZcbiAgICovXG4gIGdldExvZ2dlcihlLCB0KSB7XG4gICAgcmV0dXJuIHN1cGVyLmdldExvZ2dlcihlLCB0KTtcbiAgfVxufVxuY2xhc3MgTSB7XG4gIC8qKlxuICAgKiDpu5jorqTml6Xlv5forrDlvZXlmahcbiAgICpcbiAgICogQHBhcmFtIHN0YWNrU2l6ZSAtIOagiOeahOa3seW6plxuICAgKiBAcGFyYW0gZW52IC0g546v5aKD5Y+Y6YeP5a6e5L6LXG4gICAqL1xuICBzdGF0aWMgZGVmYXVsdExvZ2dlcihlLCB0KSB7XG4gICAgcmV0dXJuIE0uY3VzdG9tTG9nRmFjdG9yeSh2b2lkIDAsIHZvaWQgMCwgZSkuZ2V0TG9nZ2VyKFxuICAgICAgdm9pZCAwLFxuICAgICAgdFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIOiHquWumuS5ieaXpeW/l+W3peWOglxuICAgKi9cbiAgc3RhdGljIGN1c3RvbUxvZ0ZhY3RvcnkoZSwgdCwgbCkge1xuICAgIHJldHVybiBuZXcgTihlLCB0LCBsKTtcbiAgfVxuICAvKipcbiAgICog6Ieq5a6a5LmJ5pel5b+X5bel5Y6C77yM6Ieq5a6a5LmJ5YmN57yAXG4gICAqL1xuICBzdGF0aWMgY3VzdG9tU2lnbkxvZ0ZhY3RvcnkoZSwgdCkge1xuICAgIHJldHVybiBuZXcgTih2b2lkIDAsIGUsIHQpO1xuICB9XG59XG5leHBvcnQge1xuICBYIGFzIEFic3RyYWN0TG9nRmFjdG9yeSxcbiAgTiBhcyBDdXN0b21Mb2dGYWN0b3J5LFxuICBTIGFzIExvZ0xldmVsRW51bSxcbiAgTSBhcyBkZWZhdWx0XG59O1xuIiwiaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vdXRpbCc7XHJcblxyXG5mdW5jdGlvbiBpbnNlcnRCZWZvcmUocG9zaXRpb25FbDogRWxlbWVudCwgZWw6IEVsZW1lbnQpIHtcclxuICAgIHJldHVybiBwb3NpdGlvbkVsLmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlYmVnaW4nLCBlbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydEFmdGVyKHBvc2l0aW9uRWw6IEVsZW1lbnQsIGVsOiBFbGVtZW50KSB7XHJcbiAgICByZXR1cm4gcG9zaXRpb25FbC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgZWwpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkVG9vbGJhckxlZnQoZWw6IEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2xiYXInKT8uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZm5fX2VsbGlwc2lzJyk7XHJcbiAgICBpZiAoIXRpdGxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaW5zZXJ0QmVmb3JlKHRpdGxlWzBdLCBlbCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRUb29sYmFyUmlnaHQoZWw6IEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2xiYXInKT8uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZm5fX2VsbGlwc2lzJyk7XHJcbiAgICBpZiAoIXRpdGxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaW5zZXJ0QWZ0ZXIodGl0bGVbMF0sIGVsKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUxvZ2dlciA9IChuYW1lOiBzdHJpbmcpID0+IGdldExvZ2dlcihuYW1lKTtcclxuIiwiZXhwb3J0IGludGVyZmFjZSBJTWVudUl0ZW1PcHRpb24ge1xyXG4gICAgbGFiZWw/OiBzdHJpbmc7XHJcbiAgICBjbGljaz86IChlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4gdm9pZDtcclxuICAgIHR5cGU/OiAnc2VwYXJhdG9yJyB8ICdzdWJtZW51JyB8ICdyZWFkb25seSc7XHJcbiAgICBhY2NlbGVyYXRvcj86IHN0cmluZztcclxuICAgIGFjdGlvbj86IHN0cmluZztcclxuICAgIGlkPzogc3RyaW5nO1xyXG4gICAgc3VibWVudT86IElNZW51SXRlbU9wdGlvbltdO1xyXG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xyXG4gICAgaWNvbj86IHN0cmluZztcclxuICAgIGljb25IVE1MPzogc3RyaW5nO1xyXG4gICAgY3VycmVudD86IGJvb2xlYW47XHJcbiAgICBiaW5kPzogKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTWVudSB7XHJcbiAgICBtZW51OiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG1lbnUgPSB3aW5kb3cuc2l5dWFuPy5tZW51cz8ubWVudTtcclxuICAgICAgICBpZiAoIW1lbnUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1NpeXVhbiBpbnRlcm5hbCBtZW51IG5vdCBmb3VuZCEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tZW51ID0gbWVudTtcclxuICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdNZW51IG11c3QgaGFzIGFuIGlkLCBnb3QgZW1wdHkgb3IgdW5kZWZpbmVkIScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZW51LnJlbW92ZSgpO1xyXG4gICAgICAgIG1lbnUuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsIGlkKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGl0ZW06IE1lbnVJdGVtKSB7XHJcbiAgICAgICAgdGhpcy5tZW51LmFwcGVuZChpdGVtLmVsZW1lbnQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFNlcGFyYXRvcigpIHtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0obmV3IE1lbnVJdGVtKHsgdHlwZTogJ3NlcGFyYXRvcicgfSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dBdE1vdXNlRXZlbnQoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICB0aGlzLm1lbnUucG9wdXAoeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dBdFBvc2l0aW9uKHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0pIHtcclxuICAgICAgICB0aGlzLm1lbnUucG9wdXAoeyB4OiBwb3NpdGlvbi54LCB5OiBwb3NpdGlvbi55IH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMubWVudS5yZW1vdmUoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENvcHkgZnJvbSBzaXl1YW4gc291cmNlIGNvZGVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZW51SXRlbSB7XHJcbiAgICBwdWJsaWMgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogSU1lbnVJdGVtT3B0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ3NlcGFyYXRvcicpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2IzLW1lbnVfX3NlcGFyYXRvcicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdiMy1tZW51X19pdGVtJyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY3VycmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYjMtbWVudV9faXRlbS0tc2VsZWN0ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY2xpY2spIHtcclxuICAgICAgICAgICAgLy8g6ZyA5L2/55SoIGNsaWNr77yM5ZCm5YiZ56e75Yqo56uv5peg5rOV5rua5YqoXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNsaWNrKHRoaXMuZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zaXl1YW4ubWVudXMubWVudS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBodG1sID0gYDxzcGFuIGNsYXNzPVwiYjMtbWVudV9fbGFiZWxcIj4ke29wdGlvbnMubGFiZWx9PC9zcGFuPmA7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaWNvbkhUTUwpIHtcclxuICAgICAgICAgICAgaHRtbCA9IG9wdGlvbnMuaWNvbkhUTUwgKyBodG1sO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGh0bWwgPSBgPHN2ZyBjbGFzcz1cImIzLW1lbnVfX2ljb24ke1xyXG4gICAgICAgICAgICAgICAgWydIVE1MIChTaVl1YW4pJywgd2luZG93LnNpeXVhbi5sYW5ndWFnZXMudGVtcGxhdGVdLmluY2x1ZGVzKG9wdGlvbnMubGFiZWwpID8gJyBmdF9fZXJyb3InIDogJydcclxuICAgICAgICAgICAgfVwiIHN0eWxlPVwiJHtvcHRpb25zLmljb24gPT09ICdpY29uQ2xvc2UnID8gJ2hlaWdodDoxMHB4OycgOiAnJ31cIj48dXNlIHhsaW5rOmhyZWY9XCIjJHtvcHRpb25zLmljb24gfHwgJyd9XCI+PC91c2U+PC9zdmc+JHtodG1sfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIChvcHRpb25zLmFjY2VsZXJhdG9yKSB7XHJcbiAgICAgICAgLy8gICAgIGh0bWwgKz0gYDxzcGFuIGNsYXNzPVwiYjMtbWVudV9fYWNjZWxlcmF0b3JcIj4ke3VwZGF0ZUhvdGtleVRpcChvcHRpb25zLmFjY2VsZXJhdG9yKX08L3NwYW4+YDtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gYDxzdmcgY2xhc3M9XCJiMy1tZW51X19hY3Rpb25cIj48dXNlIHhsaW5rOmhyZWY9XCIjJHtvcHRpb25zLmFjdGlvbn1cIj48L3VzZT48L3N2Zz5gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3B0aW9ucy5pZCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgb3B0aW9ucy5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb25zLnR5cGUgPT09ICdyZWFkb25seScpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2IzLW1lbnVfX2l0ZW0tLXJlYWRvbmx5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmJpbmQpIHtcclxuICAgICAgICAgICAgLy8g5Li76aKYIHJlbSBjcmFmdCDpnIDopoHkvb/nlKggYjMtbWVudV9faXRlbS0tY3VzdG9tIOadpeWMuuWIhuiHquWumuS5ieiPnOWNlSBieSAyODEyNjEzNjFcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2IzLW1lbnVfX2l0ZW0tLWN1c3RvbScpO1xyXG4gICAgICAgICAgICBvcHRpb25zLmJpbmQodGhpcy5lbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuc3VibWVudSkge1xyXG4gICAgICAgICAgICBjb25zdCBzdWJtZW51RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBzdWJtZW51RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdiMy1tZW51X19zdWJtZW51Jyk7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuc3VibWVudS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdWJtZW51RWxlbWVudC5hcHBlbmQobmV3IE1lbnVJdGVtKGl0ZW0pLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJzxzdmcgY2xhc3M9XCJiMy1tZW51X19pY29uIGIzLW1lbnVfX2ljb24tLWFycm93XCI+PHVzZSB4bGluazpocmVmPVwiI2ljb25SaWdodFwiPjwvdXNlPjwvc3ZnPicpO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kKHN1Ym1lbnVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNZW51U2VwYXJhdG9yIHt9XHJcbiIsIi8qKlxyXG4gKiBDb3B5IGZyb20gc2l5dWFuIHNvdXJjZSBjb2RlXHJcbiAqL1xyXG5pbXBvcnQgeyBnZW5VVUlEIH0gZnJvbSAnLi4vLi4vdXRpbCc7XHJcblxyXG5leHBvcnQgY2xhc3MgRGlhbG9nIHtcclxuICAgIHByaXZhdGUgZGVzdHJveUNhbGxiYWNrOiAoKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBpZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBkaXNhYmxlQ2xvc2U6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczoge1xyXG4gICAgICAgIHRpdGxlPzogc3RyaW5nO1xyXG4gICAgICAgIHRyYW5zcGFyZW50PzogYm9vbGVhbjtcclxuICAgICAgICBjb250ZW50OiBzdHJpbmc7XHJcbiAgICAgICAgd2lkdGg/OiBzdHJpbmc7XHJcbiAgICAgICAgaGVpZ2h0Pzogc3RyaW5nO1xyXG4gICAgICAgIGRlc3Ryb3lDYWxsYmFjaz86ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgZGlzYWJsZUNsb3NlPzogYm9vbGVhbjtcclxuICAgICAgICBkaXNhYmxlQW5pbWF0aW9uPzogYm9vbGVhbjtcclxuICAgIH0pIHtcclxuICAgICAgICB0aGlzLmRpc2FibGVDbG9zZSA9IG9wdGlvbnMuZGlzYWJsZUNsb3NlO1xyXG4gICAgICAgIHRoaXMuaWQgPSBnZW5VVUlEKCk7XHJcbiAgICAgICAgd2luZG93LnNpeXVhbi5kaWFsb2dzLnB1c2godGhpcyk7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95Q2FsbGJhY2sgPSBvcHRpb25zLmRlc3Ryb3lDYWxsYmFjaztcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwiYjMtZGlhbG9nXCI+XHJcbjxkaXYgY2xhc3M9XCJiMy1kaWFsb2dfX3NjcmltXCIke29wdGlvbnMudHJhbnNwYXJlbnQgPyAnc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50XCInIDogJyd9PjwvZGl2PlxyXG48ZGl2IGNsYXNzPVwiYjMtZGlhbG9nX19jb250YWluZXJcIiBzdHlsZT1cIndpZHRoOiR7b3B0aW9ucy53aWR0aCB8fCAnYXV0byd9XCI+XHJcbiAgPHN2ZyBjbGFzcz1cImIzLWRpYWxvZ19fY2xvc2UgZm5fX2Eke3RoaXMuZGlzYWJsZUNsb3NlID8gJyBmbl9fbm9uZScgOiAnJ31cIj48dXNlIHhsaW5rOmhyZWY9XCIjaWNvbkNsb3NlXCI+PC91c2U+PC9zdmc+XHJcbiAgPGRpdiBjbGFzcz1cImIzLWRpYWxvZ19faGVhZGVyJHtvcHRpb25zLnRpdGxlID8gJycgOiAnIGZuX19ub25lJ31cIiBvbnNlbGVjdHN0YXJ0PVwicmV0dXJuIGZhbHNlO1wiPiR7b3B0aW9ucy50aXRsZSB8fCAnJ308L2Rpdj5cclxuICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiR7b3B0aW9ucy5oZWlnaHQgfHwgJ2F1dG8nfVwiPiR7b3B0aW9ucy5jb250ZW50fTwvZGl2PlxyXG48L2Rpdj48L2Rpdj5gO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmIzLWRpYWxvZ19fc2NyaW0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZUNsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9sZDI0Ni5jb20vYXJ0aWNsZS8xNjU3OTY5MjkyNzAwL2NvbW1lbnQvMTY1ODE0NzAwNjY2OSNjb21tZW50c1xyXG4gICAgICAgICAgICB3aW5kb3cuc2l5dWFuLm1lbnVzLm1lbnUucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVDbG9zZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmIzLWRpYWxvZ19fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0aGlzLmVsZW1lbnQpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmRpc2FibGVBbmltYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2IzLWRpYWxvZy0tb3BlbicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2IzLWRpYWxvZy0tb3BlbicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3NpeXVhbi1ub3RlL3NpeXVhbi9pc3N1ZXMvNjc4M1xyXG4gICAgICAgIHdpbmRvdy5zaXl1YW4ubWVudXMubWVudS5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGVzdHJveUFsbCgpIHtcclxuICAgICAgICB3aW5kb3cuc2l5dWFuLmRpYWxvZ3MuZm9yRWFjaCgocCkgPT4gcC5kZXN0cm95KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc2l5dWFuLW5vdGUvc2l5dWFuL2lzc3Vlcy82NzgzXHJcbiAgICAgICAgd2luZG93LnNpeXVhbi5tZW51cy5tZW51LnJlbW92ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3lDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lDYWxsYmFjaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aW5kb3cuc2l5dWFuLmRpYWxvZ3MuZmluZCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IHRoaXMuaWQpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zaXl1YW4uZGlhbG9ncy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmluZElucHV0KGlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudCB8IEhUTUxUZXh0QXJlYUVsZW1lbnQsIGVudGVyRXZlbnQ/OiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmlzQ29tcG9zaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInICYmIGVudGVyRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGVudGVyRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xyXG5pbXBvcnQgeyBJUGx1Z2luLCBJUGx1Z2luQ29tbWFuZCwgU2V0dGluZ1JlbmRlciB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQbHVnaW4gaW1wbGVtZW50cyBJUGx1Z2luIHtcclxuICAgIF9pZDogc3RyaW5nO1xyXG4gICAgb25sb2FkKCkge31cclxuICAgIG9udW5sb2FkKCkge31cclxuICAgIHJlZ2lzdGVyQ29tbWFuZChjb21tYW5kOiBJUGx1Z2luQ29tbWFuZCkge31cclxuICAgIHJlZ2lzdGVyU2V0dGluZ1JlbmRlcihzZXR0aW5nUmVuZGVyOiBTZXR0aW5nUmVuZGVyKSB7fVxyXG4gICAgYXN5bmMgbG9hZFN0b3JhZ2UoZmlsZW5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgd3JpdGVTdG9yYWdlKGZpbGVuYW1lOiBzdHJpbmcsIGNvbnRlbnQ6IGFueSkge31cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBzZXJ2ZXJBcGkgZnJvbSAnLi9hcGkvc2VydmVyLWFwaSc7XHJcbmltcG9ydCAqIGFzIGNsaWVudEFwaSBmcm9tICcuL2FwaS9jbGllbnQtYXBpJztcclxuaW1wb3J0IHsgTWVudSwgTWVudUl0ZW0sIE1lbnVTZXBhcmF0b3IgfSBmcm9tICcuL2ludGVybmFsL2NsYXNzZXMvbWVudSc7XHJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gJy4vaW50ZXJuYWwvY2xhc3Nlcy9kaWFsb2cnO1xyXG5pbXBvcnQgeyBOb3RpZmljYXRpb24gfSBmcm9tICcuL2ludGVybmFsL2NsYXNzZXMvbm90aWZpY2F0aW9uJztcclxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnLi9hcGkvcGx1Z2luJztcclxuXHJcbmV4cG9ydCB7IGNsaWVudEFwaSwgc2VydmVyQXBpLCBNZW51LCBNZW51SXRlbSwgTWVudVNlcGFyYXRvciwgTm90aWZpY2F0aW9uLCBEaWFsb2csIFBsdWdpbiB9O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgY2xpZW50QXBpLFxyXG4gICAgc2VydmVyQXBpLFxyXG4gICAgUGx1Z2luLFxyXG4gICAgTWVudSxcclxuICAgIE1lbnVJdGVtLFxyXG4gICAgTWVudVNlcGFyYXRvcixcclxuICAgIE5vdGlmaWNhdGlvbixcclxuICAgIERpYWxvZyxcclxufTtcclxuIiwiaW1wb3J0IHsgc2VydmVyQXBpIH0gZnJvbSAnLi4vYXBpJztcclxuaW1wb3J0IHsgbG9nIH0gZnJvbSAnLi4vdXRpbCc7XHJcbmltcG9ydCB7IFN0YXRzIH0gZnJvbSAnZnMnO1xyXG5pbXBvcnQgc2VtdmVyIGZyb20gJ3NlbXZlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZUNsaWVudCB7XHJcbiAgICBzdGF0aWMgZmlsZUNsaWVudDogRmlsZUNsaWVudDtcclxuXHJcbiAgICBnZXRWZXJzaW9uKCkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuc2l5dWFuLmNvbmZpZy5zeXN0ZW0ua2VybmVsVmVyc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICBmaWxlQXBpOiB7XHJcbiAgICAgICAgcmVhZERpcjogKHBhdGg6IHN0cmluZykgPT4gUHJvbWlzZTxBcnJheTx7IGlzRGlyOiBib29sZWFuOyBuYW1lOiBzdHJpbmcgfT4+O1xyXG4gICAgICAgIGdldEZpbGU6IChwYXRoOiBzdHJpbmcsIHR5cGU/OiAnanNvbicgfCAndGV4dCcpID0+IFByb21pc2U8YW55PjtcclxuICAgICAgICBwdXRGaWxlOiAocGF0aCwgZmlsZWRhdGEsIGlzRGlyPzogYm9vbGVhbiwgbW9kVGltZT86IG51bWJlcikgPT4gUHJvbWlzZTxhbnk+O1xyXG4gICAgICAgIHJlbW92ZUZpbGU6IChwYXRoOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5maWxlQXBpID0gdGhpcy5zZXJ2ZXJBcGk7XHJcbiAgICAgICAgLy8gY29uc3QgdiA9IHRoaXMuZ2V0VmVyc2lvbigpO1xyXG4gICAgICAgIC8vIGlmIChzZW12ZXIuY29tcGFyZSh2LCAnMi44LjEnKSA8IDApIHtcclxuICAgICAgICAvLyAgICAgLy8gb2xkIHZlcnNpb24sIGVsZWN0cm9uIGFwaSBzdXBwb3J0XHJcbiAgICAgICAgLy8gICAgIHRoaXMuZmlsZUFwaSA9IHRoaXMuZWxlY3Ryb25BcGk7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgLy8gbmV3IGFwaSwgZmlsZSBhcGkgc3VwcG9ydFxyXG4gICAgICAgIC8vICAgICB0aGlzLmZpbGVBcGkgPSB0aGlzLnNlcnZlckFwaTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlQXBpKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5maWxlQ2xpZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsZUNsaWVudCA9IG5ldyBGaWxlQ2xpZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbGVDbGllbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZWxlY3Ryb25BcGkgPSB7XHJcbiAgICAgICAgcmVhZERpcihwOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PHsgaXNEaXI6IGJvb2xlYW47IG5hbWU6IHN0cmluZyB9Pj4ge1xyXG4gICAgICAgICAgICBjb25zdCBmcyA9IHdpbmRvdy5yZXF1aXJlKCdmcycpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoID0gd2luZG93LnJlcXVpcmUoJ3BhdGgnKTtcclxuICAgICAgICAgICAgY29uc3QgU0lZVUFOX1dPUktTUEFDRSA9IHBhdGguam9pbih3aW5kb3cuc2l5dWFuLmNvbmZpZy5zeXN0ZW0uZGF0YURpciwgJy4uJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZnMucmVhZGRpcihwYXRoLmpvaW4oU0lZVUFOX1dPUktTUEFDRSwgcCksIChlcnIsIGZpbGVzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZXMubWFwPHsgaXNEaXI6IGJvb2xlYW47IG5hbWU6IHN0cmluZyB9PigoZjogc3RyaW5nKSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RpcjogKGZzLnN0YXRTeW5jKHBhdGguam9pbihTSVlVQU5fV09SS1NQQUNFLCBwLCBmKSkgYXMgU3RhdHMpLmlzRGlyZWN0b3J5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGYsXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldEZpbGUoZjogc3RyaW5nLCB0eXBlOiAnanNvbicgfCAndGV4dCcgPSAndGV4dCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZzID0gd2luZG93LnJlcXVpcmUoJ2ZzJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gd2luZG93LnJlcXVpcmUoJ3BhdGgnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFNJWVVBTl9XT1JLU1BBQ0UgPSBwYXRoLmpvaW4od2luZG93LnNpeXVhbi5jb25maWcuc3lzdGVtLmRhdGFEaXIsICcuLicpO1xyXG4gICAgICAgICAgICAgICAgZnMucmVhZEZpbGUocGF0aC5qb2luKFNJWVVBTl9XT1JLU1BBQ0UsIGYpLCAoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBkYXRhLnRvU3RyaW5nKCd1dGY4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdqc29uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoSlNPTi5wYXJzZSh0ZXh0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0ZXh0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHB1dEZpbGU6IHNlcnZlckFwaS5wdXRGaWxlLFxyXG4gICAgICAgIHJlbW92ZUZpbGUoZjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcyA9IHdpbmRvdy5yZXF1aXJlKCdmcycpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5yZXF1aXJlKCdwYXRoJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBTSVlVQU5fV09SS1NQQUNFID0gcGF0aC5qb2luKHdpbmRvdy5zaXl1YW4uY29uZmlnLnN5c3RlbS5kYXRhRGlyLCAnLi4nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBwYXRoLmpvaW4oU0lZVUFOX1dPUktTUEFDRSwgZik7XHJcbiAgICAgICAgICAgICAgICBsb2coJ1JlbW92ZSBmaWxlcyBmcm9tJywgcCk7XHJcbiAgICAgICAgICAgICAgICBmcy5ybShwLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIHNlcnZlckFwaSA9IHtcclxuICAgICAgICByZWFkRGlyOiBzZXJ2ZXJBcGkucmVhZERpcixcclxuICAgICAgICBnZXRGaWxlOiBzZXJ2ZXJBcGkuZ2V0RmlsZSxcclxuICAgICAgICBwdXRGaWxlOiBzZXJ2ZXJBcGkucHV0RmlsZSxcclxuICAgICAgICByZW1vdmVGaWxlOiBzZXJ2ZXJBcGkucmVtb3ZlRmlsZSxcclxuICAgIH07XHJcbn1cclxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xuICB9O1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgYmluZCBmcm9tICcuL2hlbHBlcnMvYmluZC5qcyc7XG5cbi8vIHV0aWxzIGlzIGEgbGlicmFyeSBvZiBnZW5lcmljIGhlbHBlciBmdW5jdGlvbnMgbm9uLXNwZWNpZmljIHRvIGF4aW9zXG5cbmNvbnN0IHt0b1N0cmluZ30gPSBPYmplY3QucHJvdG90eXBlO1xuY29uc3Qge2dldFByb3RvdHlwZU9mfSA9IE9iamVjdDtcblxuY29uc3Qga2luZE9mID0gKGNhY2hlID0+IHRoaW5nID0+IHtcbiAgICBjb25zdCBzdHIgPSB0b1N0cmluZy5jYWxsKHRoaW5nKTtcbiAgICByZXR1cm4gY2FjaGVbc3RyXSB8fCAoY2FjaGVbc3RyXSA9IHN0ci5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKSk7XG59KShPYmplY3QuY3JlYXRlKG51bGwpKTtcblxuY29uc3Qga2luZE9mVGVzdCA9ICh0eXBlKSA9PiB7XG4gIHR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAodGhpbmcpID0+IGtpbmRPZih0aGluZykgPT09IHR5cGVcbn1cblxuY29uc3QgdHlwZU9mVGVzdCA9IHR5cGUgPT4gdGhpbmcgPT4gdHlwZW9mIHRoaW5nID09PSB0eXBlO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3Qge2lzQXJyYXl9ID0gQXJyYXk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgdW5kZWZpbmVkXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNVbmRlZmluZWQgPSB0eXBlT2ZUZXN0KCd1bmRlZmluZWQnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0J1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodmFsKSAmJiB2YWwuY29uc3RydWN0b3IgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbC5jb25zdHJ1Y3RvcilcbiAgICAmJiBpc0Z1bmN0aW9uKHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcikgJiYgdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyKHZhbCk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNBcnJheUJ1ZmZlciA9IGtpbmRPZlRlc3QoJ0FycmF5QnVmZmVyJyk7XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkge1xuICBsZXQgcmVzdWx0O1xuICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpICYmIChBcnJheUJ1ZmZlci5pc1ZpZXcpKSB7XG4gICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHZhbCkgJiYgKHZhbC5idWZmZXIpICYmIChpc0FycmF5QnVmZmVyKHZhbC5idWZmZXIpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmluZywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzU3RyaW5nID0gdHlwZU9mVGVzdCgnc3RyaW5nJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNGdW5jdGlvbiA9IHR5cGVPZlRlc3QoJ2Z1bmN0aW9uJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXJcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgTnVtYmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNOdW1iZXIgPSB0eXBlT2ZUZXN0KCdudW1iZXInKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IHRoaW5nIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNPYmplY3QgPSAodGhpbmcpID0+IHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCb29sZWFuXG4gKlxuICogQHBhcmFtIHsqfSB0aGluZyBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCb29sZWFuLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNCb29sZWFuID0gdGhpbmcgPT4gdGhpbmcgPT09IHRydWUgfHwgdGhpbmcgPT09IGZhbHNlO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgcGxhaW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHBsYWluIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzUGxhaW5PYmplY3QgPSAodmFsKSA9PiB7XG4gIGlmIChraW5kT2YodmFsKSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBwcm90b3R5cGUgPSBnZXRQcm90b3R5cGVPZih2YWwpO1xuICByZXR1cm4gKHByb3RvdHlwZSA9PT0gbnVsbCB8fCBwcm90b3R5cGUgPT09IE9iamVjdC5wcm90b3R5cGUgfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvdHlwZSkgPT09IG51bGwpICYmICEoU3ltYm9sLnRvU3RyaW5nVGFnIGluIHZhbCkgJiYgIShTeW1ib2wuaXRlcmF0b3IgaW4gdmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRGF0ZSA9IGtpbmRPZlRlc3QoJ0RhdGUnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRmlsZSA9IGtpbmRPZlRlc3QoJ0ZpbGUnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2JcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzQmxvYiA9IGtpbmRPZlRlc3QoJ0Jsb2InKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVMaXN0XG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc0ZpbGVMaXN0ID0ga2luZE9mVGVzdCgnRmlsZUxpc3QnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1N0cmVhbSA9ICh2YWwpID0+IGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7Kn0gdGhpbmcgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRm9ybURhdGEgPSAodGhpbmcpID0+IHtcbiAgY29uc3QgcGF0dGVybiA9ICdbb2JqZWN0IEZvcm1EYXRhXSc7XG4gIHJldHVybiB0aGluZyAmJiAoXG4gICAgKHR5cGVvZiBGb3JtRGF0YSA9PT0gJ2Z1bmN0aW9uJyAmJiB0aGluZyBpbnN0YW5jZW9mIEZvcm1EYXRhKSB8fFxuICAgIHRvU3RyaW5nLmNhbGwodGhpbmcpID09PSBwYXR0ZXJuIHx8XG4gICAgKGlzRnVuY3Rpb24odGhpbmcudG9TdHJpbmcpICYmIHRoaW5nLnRvU3RyaW5nKCkgPT09IHBhdHRlcm4pXG4gICk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1VSTFNlYXJjaFBhcmFtcyA9IGtpbmRPZlRlc3QoJ1VSTFNlYXJjaFBhcmFtcycpO1xuXG4vKipcbiAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG4gKlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIFN0cmluZyBmcmVlZCBvZiBleGNlc3Mgd2hpdGVzcGFjZVxuICovXG5jb25zdCB0cmltID0gKHN0cikgPT4gc3RyLnRyaW0gP1xuICBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLCAnJyk7XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCBpbnZva2luZyBhIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBpbmRleCwgYW5kIGNvbXBsZXRlIGFycmF5IGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwga2V5LCBhbmQgY29tcGxldGUgb2JqZWN0IGZvciBlYWNoIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIGZvciBlYWNoIGl0ZW1cbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFthbGxPd25LZXlzID0gZmFsc2VdXG4gKiBAcmV0dXJucyB7YW55fVxuICovXG5mdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4sIHthbGxPd25LZXlzID0gZmFsc2V9ID0ge30pIHtcbiAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkXG4gIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgaTtcbiAgbGV0IGw7XG5cbiAgLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlXG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAgIG9iaiA9IFtvYmpdO1xuICB9XG5cbiAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBhcnJheSB2YWx1ZXNcbiAgICBmb3IgKGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZm4uY2FsbChudWxsLCBvYmpbaV0sIGksIG9iaik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xuICAgIGNvbnN0IGtleXMgPSBhbGxPd25LZXlzID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKSA6IE9iamVjdC5rZXlzKG9iaik7XG4gICAgY29uc3QgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgbGV0IGtleTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZEtleShvYmosIGtleSkge1xuICBrZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIGxldCBpID0ga2V5cy5sZW5ndGg7XG4gIGxldCBfa2V5O1xuICB3aGlsZSAoaS0tID4gMCkge1xuICAgIF9rZXkgPSBrZXlzW2ldO1xuICAgIGlmIChrZXkgPT09IF9rZXkudG9Mb3dlckNhc2UoKSkge1xuICAgICAgcmV0dXJuIF9rZXk7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5jb25zdCBfZ2xvYmFsID0gKCgpID0+IHtcbiAgLyplc2xpbnQgbm8tdW5kZWY6MCovXG4gIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGdsb2JhbFRoaXM7XG4gIHJldHVybiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiBnbG9iYWwpXG59KSgpO1xuXG5jb25zdCBpc0NvbnRleHREZWZpbmVkID0gKGNvbnRleHQpID0+ICFpc1VuZGVmaW5lZChjb250ZXh0KSAmJiBjb250ZXh0ICE9PSBfZ2xvYmFsO1xuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG4gIGNvbnN0IHtjYXNlbGVzc30gPSBpc0NvbnRleHREZWZpbmVkKHRoaXMpICYmIHRoaXMgfHwge307XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBjb25zdCBhc3NpZ25WYWx1ZSA9ICh2YWwsIGtleSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldEtleSA9IGNhc2VsZXNzICYmIGZpbmRLZXkocmVzdWx0LCBrZXkpIHx8IGtleTtcbiAgICBpZiAoaXNQbGFpbk9iamVjdChyZXN1bHRbdGFyZ2V0S2V5XSkgJiYgaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgICByZXN1bHRbdGFyZ2V0S2V5XSA9IG1lcmdlKHJlc3VsdFt0YXJnZXRLZXldLCB2YWwpO1xuICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgICByZXN1bHRbdGFyZ2V0S2V5XSA9IG1lcmdlKHt9LCB2YWwpO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXN1bHRbdGFyZ2V0S2V5XSA9IHZhbC5zbGljZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRbdGFyZ2V0S2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBmb3IgKGxldCBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBhcmd1bWVudHNbaV0gJiYgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZFxuICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBbYWxsT3duS2V5c11cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGFcbiAqL1xuY29uc3QgZXh0ZW5kID0gKGEsIGIsIHRoaXNBcmcsIHthbGxPd25LZXlzfT0ge30pID0+IHtcbiAgZm9yRWFjaChiLCAodmFsLCBrZXkpID0+IHtcbiAgICBpZiAodGhpc0FyZyAmJiBpc0Z1bmN0aW9uKHZhbCkpIHtcbiAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYVtrZXldID0gdmFsO1xuICAgIH1cbiAgfSwge2FsbE93bktleXN9KTtcbiAgcmV0dXJuIGE7XG59XG5cbi8qKlxuICogUmVtb3ZlIGJ5dGUgb3JkZXIgbWFya2VyLiBUaGlzIGNhdGNoZXMgRUYgQkIgQkYgKHRoZSBVVEYtOCBCT00pXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnQgd2l0aCBCT01cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBjb250ZW50IHZhbHVlIHdpdGhvdXQgQk9NXG4gKi9cbmNvbnN0IHN0cmlwQk9NID0gKGNvbnRlbnQpID0+IHtcbiAgaWYgKGNvbnRlbnQuY2hhckNvZGVBdCgwKSA9PT0gMHhGRUZGKSB7XG4gICAgY29udGVudCA9IGNvbnRlbnQuc2xpY2UoMSk7XG4gIH1cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDb25zdHJ1Y3RvclxuICogQHBhcmFtIHtvYmplY3R9IFtwcm9wc11cbiAqIEBwYXJhbSB7b2JqZWN0fSBbZGVzY3JpcHRvcnNdXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmNvbnN0IGluaGVyaXRzID0gKGNvbnN0cnVjdG9yLCBzdXBlckNvbnN0cnVjdG9yLCBwcm9wcywgZGVzY3JpcHRvcnMpID0+IHtcbiAgY29uc3RydWN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNvbnN0cnVjdG9yLnByb3RvdHlwZSwgZGVzY3JpcHRvcnMpO1xuICBjb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjb25zdHJ1Y3RvcjtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnN0cnVjdG9yLCAnc3VwZXInLCB7XG4gICAgdmFsdWU6IHN1cGVyQ29uc3RydWN0b3IucHJvdG90eXBlXG4gIH0pO1xuICBwcm9wcyAmJiBPYmplY3QuYXNzaWduKGNvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvcHMpO1xufVxuXG4vKipcbiAqIFJlc29sdmUgb2JqZWN0IHdpdGggZGVlcCBwcm90b3R5cGUgY2hhaW4gdG8gYSBmbGF0IG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZU9iaiBzb3VyY2Ugb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gW2Rlc3RPYmpdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEJvb2xlYW59IFtmaWx0ZXJdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcEZpbHRlcl1cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5jb25zdCB0b0ZsYXRPYmplY3QgPSAoc291cmNlT2JqLCBkZXN0T2JqLCBmaWx0ZXIsIHByb3BGaWx0ZXIpID0+IHtcbiAgbGV0IHByb3BzO1xuICBsZXQgaTtcbiAgbGV0IHByb3A7XG4gIGNvbnN0IG1lcmdlZCA9IHt9O1xuXG4gIGRlc3RPYmogPSBkZXN0T2JqIHx8IHt9O1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXEtbnVsbCxlcWVxZXFcbiAgaWYgKHNvdXJjZU9iaiA9PSBudWxsKSByZXR1cm4gZGVzdE9iajtcblxuICBkbyB7XG4gICAgcHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2VPYmopO1xuICAgIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSA+IDApIHtcbiAgICAgIHByb3AgPSBwcm9wc1tpXTtcbiAgICAgIGlmICgoIXByb3BGaWx0ZXIgfHwgcHJvcEZpbHRlcihwcm9wLCBzb3VyY2VPYmosIGRlc3RPYmopKSAmJiAhbWVyZ2VkW3Byb3BdKSB7XG4gICAgICAgIGRlc3RPYmpbcHJvcF0gPSBzb3VyY2VPYmpbcHJvcF07XG4gICAgICAgIG1lcmdlZFtwcm9wXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHNvdXJjZU9iaiA9IGZpbHRlciAhPT0gZmFsc2UgJiYgZ2V0UHJvdG90eXBlT2Yoc291cmNlT2JqKTtcbiAgfSB3aGlsZSAoc291cmNlT2JqICYmICghZmlsdGVyIHx8IGZpbHRlcihzb3VyY2VPYmosIGRlc3RPYmopKSAmJiBzb3VyY2VPYmogIT09IE9iamVjdC5wcm90b3R5cGUpO1xuXG4gIHJldHVybiBkZXN0T2JqO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhIHN0cmluZyBlbmRzIHdpdGggdGhlIGNoYXJhY3RlcnMgb2YgYSBzcGVjaWZpZWQgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFN0cmluZ1xuICogQHBhcmFtIHtOdW1iZXJ9IFtwb3NpdGlvbj0gMF1cbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuY29uc3QgZW5kc1dpdGggPSAoc3RyLCBzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKSA9PiB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fCBwb3NpdGlvbiA+IHN0ci5sZW5ndGgpIHtcbiAgICBwb3NpdGlvbiA9IHN0ci5sZW5ndGg7XG4gIH1cbiAgcG9zaXRpb24gLT0gc2VhcmNoU3RyaW5nLmxlbmd0aDtcbiAgY29uc3QgbGFzdEluZGV4ID0gc3RyLmluZGV4T2Yoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbik7XG4gIHJldHVybiBsYXN0SW5kZXggIT09IC0xICYmIGxhc3RJbmRleCA9PT0gcG9zaXRpb247XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIG5ldyBhcnJheSBmcm9tIGFycmF5IGxpa2Ugb2JqZWN0IG9yIG51bGwgaWYgZmFpbGVkXG4gKlxuICogQHBhcmFtIHsqfSBbdGhpbmddXG4gKlxuICogQHJldHVybnMgez9BcnJheX1cbiAqL1xuY29uc3QgdG9BcnJheSA9ICh0aGluZykgPT4ge1xuICBpZiAoIXRoaW5nKSByZXR1cm4gbnVsbDtcbiAgaWYgKGlzQXJyYXkodGhpbmcpKSByZXR1cm4gdGhpbmc7XG4gIGxldCBpID0gdGhpbmcubGVuZ3RoO1xuICBpZiAoIWlzTnVtYmVyKGkpKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgYXJyID0gbmV3IEFycmF5KGkpO1xuICB3aGlsZSAoaS0tID4gMCkge1xuICAgIGFycltpXSA9IHRoaW5nW2ldO1xuICB9XG4gIHJldHVybiBhcnI7XG59XG5cbi8qKlxuICogQ2hlY2tpbmcgaWYgdGhlIFVpbnQ4QXJyYXkgZXhpc3RzIGFuZCBpZiBpdCBkb2VzLCBpdCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBjaGVja3MgaWYgdGhlXG4gKiB0aGluZyBwYXNzZWQgaW4gaXMgYW4gaW5zdGFuY2Ugb2YgVWludDhBcnJheVxuICpcbiAqIEBwYXJhbSB7VHlwZWRBcnJheX1cbiAqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5jb25zdCBpc1R5cGVkQXJyYXkgPSAoVHlwZWRBcnJheSA9PiB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gIHJldHVybiB0aGluZyA9PiB7XG4gICAgcmV0dXJuIFR5cGVkQXJyYXkgJiYgdGhpbmcgaW5zdGFuY2VvZiBUeXBlZEFycmF5O1xuICB9O1xufSkodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnICYmIGdldFByb3RvdHlwZU9mKFVpbnQ4QXJyYXkpKTtcblxuLyoqXG4gKiBGb3IgZWFjaCBlbnRyeSBpbiB0aGUgb2JqZWN0LCBjYWxsIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBrZXkgYW5kIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0PGFueSwgYW55Pn0gb2JqIC0gVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGVudHJ5LlxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5jb25zdCBmb3JFYWNoRW50cnkgPSAob2JqLCBmbikgPT4ge1xuICBjb25zdCBnZW5lcmF0b3IgPSBvYmogJiYgb2JqW1N5bWJvbC5pdGVyYXRvcl07XG5cbiAgY29uc3QgaXRlcmF0b3IgPSBnZW5lcmF0b3IuY2FsbChvYmopO1xuXG4gIGxldCByZXN1bHQ7XG5cbiAgd2hpbGUgKChyZXN1bHQgPSBpdGVyYXRvci5uZXh0KCkpICYmICFyZXN1bHQuZG9uZSkge1xuICAgIGNvbnN0IHBhaXIgPSByZXN1bHQudmFsdWU7XG4gICAgZm4uY2FsbChvYmosIHBhaXJbMF0sIHBhaXJbMV0pO1xuICB9XG59XG5cbi8qKlxuICogSXQgdGFrZXMgYSByZWd1bGFyIGV4cHJlc3Npb24gYW5kIGEgc3RyaW5nLCBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBhbGwgdGhlIG1hdGNoZXNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVnRXhwIC0gVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBhZ2FpbnN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gc2VhcmNoLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheTxib29sZWFuPn1cbiAqL1xuY29uc3QgbWF0Y2hBbGwgPSAocmVnRXhwLCBzdHIpID0+IHtcbiAgbGV0IG1hdGNoZXM7XG4gIGNvbnN0IGFyciA9IFtdO1xuXG4gIHdoaWxlICgobWF0Y2hlcyA9IHJlZ0V4cC5leGVjKHN0cikpICE9PSBudWxsKSB7XG4gICAgYXJyLnB1c2gobWF0Y2hlcyk7XG4gIH1cblxuICByZXR1cm4gYXJyO1xufVxuXG4vKiBDaGVja2luZyBpZiB0aGUga2luZE9mVGVzdCBmdW5jdGlvbiByZXR1cm5zIHRydWUgd2hlbiBwYXNzZWQgYW4gSFRNTEZvcm1FbGVtZW50LiAqL1xuY29uc3QgaXNIVE1MRm9ybSA9IGtpbmRPZlRlc3QoJ0hUTUxGb3JtRWxlbWVudCcpO1xuXG5jb25zdCB0b0NhbWVsQ2FzZSA9IHN0ciA9PiB7XG4gIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bLV9cXHNdKFthLXpcXGRdKShcXHcqKS9nLFxuICAgIGZ1bmN0aW9uIHJlcGxhY2VyKG0sIHAxLCBwMikge1xuICAgICAgcmV0dXJuIHAxLnRvVXBwZXJDYXNlKCkgKyBwMjtcbiAgICB9XG4gICk7XG59O1xuXG4vKiBDcmVhdGluZyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBjaGVjayBpZiBhbiBvYmplY3QgaGFzIGEgcHJvcGVydHkuICovXG5jb25zdCBoYXNPd25Qcm9wZXJ0eSA9ICgoe2hhc093blByb3BlcnR5fSkgPT4gKG9iaiwgcHJvcCkgPT4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKShPYmplY3QucHJvdG90eXBlKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFJlZ0V4cCBvYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzUmVnRXhwID0ga2luZE9mVGVzdCgnUmVnRXhwJyk7XG5cbmNvbnN0IHJlZHVjZURlc2NyaXB0b3JzID0gKG9iaiwgcmVkdWNlcikgPT4ge1xuICBjb25zdCBkZXNjcmlwdG9ycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iaik7XG4gIGNvbnN0IHJlZHVjZWREZXNjcmlwdG9ycyA9IHt9O1xuXG4gIGZvckVhY2goZGVzY3JpcHRvcnMsIChkZXNjcmlwdG9yLCBuYW1lKSA9PiB7XG4gICAgaWYgKHJlZHVjZXIoZGVzY3JpcHRvciwgbmFtZSwgb2JqKSAhPT0gZmFsc2UpIHtcbiAgICAgIHJlZHVjZWREZXNjcmlwdG9yc1tuYW1lXSA9IGRlc2NyaXB0b3I7XG4gICAgfVxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHJlZHVjZWREZXNjcmlwdG9ycyk7XG59XG5cbi8qKlxuICogTWFrZXMgYWxsIG1ldGhvZHMgcmVhZC1vbmx5XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKi9cblxuY29uc3QgZnJlZXplTWV0aG9kcyA9IChvYmopID0+IHtcbiAgcmVkdWNlRGVzY3JpcHRvcnMob2JqLCAoZGVzY3JpcHRvciwgbmFtZSkgPT4ge1xuICAgIC8vIHNraXAgcmVzdHJpY3RlZCBwcm9wcyBpbiBzdHJpY3QgbW9kZVxuICAgIGlmIChpc0Z1bmN0aW9uKG9iaikgJiYgWydhcmd1bWVudHMnLCAnY2FsbGVyJywgJ2NhbGxlZSddLmluZGV4T2YobmFtZSkgIT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgdmFsdWUgPSBvYmpbbmFtZV07XG5cbiAgICBpZiAoIWlzRnVuY3Rpb24odmFsdWUpKSByZXR1cm47XG5cbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBmYWxzZTtcblxuICAgIGlmICgnd3JpdGFibGUnIGluIGRlc2NyaXB0b3IpIHtcbiAgICAgIGRlc2NyaXB0b3Iud3JpdGFibGUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgICBkZXNjcmlwdG9yLnNldCA9ICgpID0+IHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0NhbiBub3QgcmV3cml0ZSByZWFkLW9ubHkgbWV0aG9kIFxcJycgKyBuYW1lICsgJ1xcJycpO1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5jb25zdCB0b09iamVjdFNldCA9IChhcnJheU9yU3RyaW5nLCBkZWxpbWl0ZXIpID0+IHtcbiAgY29uc3Qgb2JqID0ge307XG5cbiAgY29uc3QgZGVmaW5lID0gKGFycikgPT4ge1xuICAgIGFyci5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgIG9ialt2YWx1ZV0gPSB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgaXNBcnJheShhcnJheU9yU3RyaW5nKSA/IGRlZmluZShhcnJheU9yU3RyaW5nKSA6IGRlZmluZShTdHJpbmcoYXJyYXlPclN0cmluZykuc3BsaXQoZGVsaW1pdGVyKSk7XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuY29uc3Qgbm9vcCA9ICgpID0+IHt9XG5cbmNvbnN0IHRvRmluaXRlTnVtYmVyID0gKHZhbHVlLCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgdmFsdWUgPSArdmFsdWU7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUodmFsdWUpID8gdmFsdWUgOiBkZWZhdWx0VmFsdWU7XG59XG5cbmNvbnN0IEFMUEhBID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6J1xuXG5jb25zdCBESUdJVCA9ICcwMTIzNDU2Nzg5JztcblxuY29uc3QgQUxQSEFCRVQgPSB7XG4gIERJR0lULFxuICBBTFBIQSxcbiAgQUxQSEFfRElHSVQ6IEFMUEhBICsgQUxQSEEudG9VcHBlckNhc2UoKSArIERJR0lUXG59XG5cbmNvbnN0IGdlbmVyYXRlU3RyaW5nID0gKHNpemUgPSAxNiwgYWxwaGFiZXQgPSBBTFBIQUJFVC5BTFBIQV9ESUdJVCkgPT4ge1xuICBsZXQgc3RyID0gJyc7XG4gIGNvbnN0IHtsZW5ndGh9ID0gYWxwaGFiZXQ7XG4gIHdoaWxlIChzaXplLS0pIHtcbiAgICBzdHIgKz0gYWxwaGFiZXRbTWF0aC5yYW5kb20oKSAqIGxlbmd0aHwwXVxuICB9XG5cbiAgcmV0dXJuIHN0cjtcbn1cblxuLyoqXG4gKiBJZiB0aGUgdGhpbmcgaXMgYSBGb3JtRGF0YSBvYmplY3QsIHJldHVybiB0cnVlLCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxuICpcbiAqIEBwYXJhbSB7dW5rbm93bn0gdGhpbmcgLSBUaGUgdGhpbmcgdG8gY2hlY2suXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU3BlY0NvbXBsaWFudEZvcm0odGhpbmcpIHtcbiAgcmV0dXJuICEhKHRoaW5nICYmIGlzRnVuY3Rpb24odGhpbmcuYXBwZW5kKSAmJiB0aGluZ1tTeW1ib2wudG9TdHJpbmdUYWddID09PSAnRm9ybURhdGEnICYmIHRoaW5nW1N5bWJvbC5pdGVyYXRvcl0pO1xufVxuXG5jb25zdCB0b0pTT05PYmplY3QgPSAob2JqKSA9PiB7XG4gIGNvbnN0IHN0YWNrID0gbmV3IEFycmF5KDEwKTtcblxuICBjb25zdCB2aXNpdCA9IChzb3VyY2UsIGkpID0+IHtcblxuICAgIGlmIChpc09iamVjdChzb3VyY2UpKSB7XG4gICAgICBpZiAoc3RhY2suaW5kZXhPZihzb3VyY2UpID49IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZighKCd0b0pTT04nIGluIHNvdXJjZSkpIHtcbiAgICAgICAgc3RhY2tbaV0gPSBzb3VyY2U7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGlzQXJyYXkoc291cmNlKSA/IFtdIDoge307XG5cbiAgICAgICAgZm9yRWFjaChzb3VyY2UsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVkdWNlZFZhbHVlID0gdmlzaXQodmFsdWUsIGkgKyAxKTtcbiAgICAgICAgICAhaXNVbmRlZmluZWQocmVkdWNlZFZhbHVlKSAmJiAodGFyZ2V0W2tleV0gPSByZWR1Y2VkVmFsdWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzdGFja1tpXSA9IHVuZGVmaW5lZDtcblxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICByZXR1cm4gdmlzaXQob2JqLCAwKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcixcbiAgaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nLFxuICBpc051bWJlcixcbiAgaXNCb29sZWFuLFxuICBpc09iamVjdCxcbiAgaXNQbGFpbk9iamVjdCxcbiAgaXNVbmRlZmluZWQsXG4gIGlzRGF0ZSxcbiAgaXNGaWxlLFxuICBpc0Jsb2IsXG4gIGlzUmVnRXhwLFxuICBpc0Z1bmN0aW9uLFxuICBpc1N0cmVhbSxcbiAgaXNVUkxTZWFyY2hQYXJhbXMsXG4gIGlzVHlwZWRBcnJheSxcbiAgaXNGaWxlTGlzdCxcbiAgZm9yRWFjaCxcbiAgbWVyZ2UsXG4gIGV4dGVuZCxcbiAgdHJpbSxcbiAgc3RyaXBCT00sXG4gIGluaGVyaXRzLFxuICB0b0ZsYXRPYmplY3QsXG4gIGtpbmRPZixcbiAga2luZE9mVGVzdCxcbiAgZW5kc1dpdGgsXG4gIHRvQXJyYXksXG4gIGZvckVhY2hFbnRyeSxcbiAgbWF0Y2hBbGwsXG4gIGlzSFRNTEZvcm0sXG4gIGhhc093blByb3BlcnR5LFxuICBoYXNPd25Qcm9wOiBoYXNPd25Qcm9wZXJ0eSwgLy8gYW4gYWxpYXMgdG8gYXZvaWQgRVNMaW50IG5vLXByb3RvdHlwZS1idWlsdGlucyBkZXRlY3Rpb25cbiAgcmVkdWNlRGVzY3JpcHRvcnMsXG4gIGZyZWV6ZU1ldGhvZHMsXG4gIHRvT2JqZWN0U2V0LFxuICB0b0NhbWVsQ2FzZSxcbiAgbm9vcCxcbiAgdG9GaW5pdGVOdW1iZXIsXG4gIGZpbmRLZXksXG4gIGdsb2JhbDogX2dsb2JhbCxcbiAgaXNDb250ZXh0RGVmaW5lZCxcbiAgQUxQSEFCRVQsXG4gIGdlbmVyYXRlU3RyaW5nLFxuICBpc1NwZWNDb21wbGlhbnRGb3JtLFxuICB0b0pTT05PYmplY3Rcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5mdW5jdGlvbiBBeGlvc0Vycm9yKG1lc3NhZ2UsIGNvZGUsIGNvbmZpZywgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgRXJyb3IuY2FsbCh0aGlzKTtcblxuICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnN0YWNrID0gKG5ldyBFcnJvcigpKS5zdGFjaztcbiAgfVxuXG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIHRoaXMubmFtZSA9ICdBeGlvc0Vycm9yJztcbiAgY29kZSAmJiAodGhpcy5jb2RlID0gY29kZSk7XG4gIGNvbmZpZyAmJiAodGhpcy5jb25maWcgPSBjb25maWcpO1xuICByZXF1ZXN0ICYmICh0aGlzLnJlcXVlc3QgPSByZXF1ZXN0KTtcbiAgcmVzcG9uc2UgJiYgKHRoaXMucmVzcG9uc2UgPSByZXNwb25zZSk7XG59XG5cbnV0aWxzLmluaGVyaXRzKEF4aW9zRXJyb3IsIEVycm9yLCB7XG4gIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBTdGFuZGFyZFxuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgLy8gTWljcm9zb2Z0XG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgIG51bWJlcjogdGhpcy5udW1iZXIsXG4gICAgICAvLyBNb3ppbGxhXG4gICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSxcbiAgICAgIGxpbmVOdW1iZXI6IHRoaXMubGluZU51bWJlcixcbiAgICAgIGNvbHVtbk51bWJlcjogdGhpcy5jb2x1bW5OdW1iZXIsXG4gICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICAgIC8vIEF4aW9zXG4gICAgICBjb25maWc6IHV0aWxzLnRvSlNPTk9iamVjdCh0aGlzLmNvbmZpZyksXG4gICAgICBjb2RlOiB0aGlzLmNvZGUsXG4gICAgICBzdGF0dXM6IHRoaXMucmVzcG9uc2UgJiYgdGhpcy5yZXNwb25zZS5zdGF0dXMgPyB0aGlzLnJlc3BvbnNlLnN0YXR1cyA6IG51bGxcbiAgICB9O1xuICB9XG59KTtcblxuY29uc3QgcHJvdG90eXBlID0gQXhpb3NFcnJvci5wcm90b3R5cGU7XG5jb25zdCBkZXNjcmlwdG9ycyA9IHt9O1xuXG5bXG4gICdFUlJfQkFEX09QVElPTl9WQUxVRScsXG4gICdFUlJfQkFEX09QVElPTicsXG4gICdFQ09OTkFCT1JURUQnLFxuICAnRVRJTUVET1VUJyxcbiAgJ0VSUl9ORVRXT1JLJyxcbiAgJ0VSUl9GUl9UT09fTUFOWV9SRURJUkVDVFMnLFxuICAnRVJSX0RFUFJFQ0FURUQnLFxuICAnRVJSX0JBRF9SRVNQT05TRScsXG4gICdFUlJfQkFEX1JFUVVFU1QnLFxuICAnRVJSX0NBTkNFTEVEJyxcbiAgJ0VSUl9OT1RfU1VQUE9SVCcsXG4gICdFUlJfSU5WQUxJRF9VUkwnXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXS5mb3JFYWNoKGNvZGUgPT4ge1xuICBkZXNjcmlwdG9yc1tjb2RlXSA9IHt2YWx1ZTogY29kZX07XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQXhpb3NFcnJvciwgZGVzY3JpcHRvcnMpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgJ2lzQXhpb3NFcnJvcicsIHt2YWx1ZTogdHJ1ZX0pO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuQXhpb3NFcnJvci5mcm9tID0gKGVycm9yLCBjb2RlLCBjb25maWcsIHJlcXVlc3QsIHJlc3BvbnNlLCBjdXN0b21Qcm9wcykgPT4ge1xuICBjb25zdCBheGlvc0Vycm9yID0gT2JqZWN0LmNyZWF0ZShwcm90b3R5cGUpO1xuXG4gIHV0aWxzLnRvRmxhdE9iamVjdChlcnJvciwgYXhpb3NFcnJvciwgZnVuY3Rpb24gZmlsdGVyKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IEVycm9yLnByb3RvdHlwZTtcbiAgfSwgcHJvcCA9PiB7XG4gICAgcmV0dXJuIHByb3AgIT09ICdpc0F4aW9zRXJyb3InO1xuICB9KTtcblxuICBBeGlvc0Vycm9yLmNhbGwoYXhpb3NFcnJvciwgZXJyb3IubWVzc2FnZSwgY29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSk7XG5cbiAgYXhpb3NFcnJvci5jYXVzZSA9IGVycm9yO1xuXG4gIGF4aW9zRXJyb3IubmFtZSA9IGVycm9yLm5hbWU7XG5cbiAgY3VzdG9tUHJvcHMgJiYgT2JqZWN0LmFzc2lnbihheGlvc0Vycm9yLCBjdXN0b21Qcm9wcyk7XG5cbiAgcmV0dXJuIGF4aW9zRXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvc0Vycm9yO1xuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHN0cmljdFxuZXhwb3J0IGRlZmF1bHQgbnVsbDtcbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcbmltcG9ydCBBeGlvc0Vycm9yIGZyb20gJy4uL2NvcmUvQXhpb3NFcnJvci5qcyc7XG4vLyB0ZW1wb3JhcnkgaG90Zml4IHRvIGF2b2lkIGNpcmN1bGFyIHJlZmVyZW5jZXMgdW50aWwgQXhpb3NVUkxTZWFyY2hQYXJhbXMgaXMgcmVmYWN0b3JlZFxuaW1wb3J0IFBsYXRmb3JtRm9ybURhdGEgZnJvbSAnLi4vcGxhdGZvcm0vbm9kZS9jbGFzc2VzL0Zvcm1EYXRhLmpzJztcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiB0aGluZyBpcyBhIGFycmF5IG9yIGpzIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGhpbmcgLSBUaGUgb2JqZWN0IG9yIGFycmF5IHRvIGJlIHZpc2l0ZWQuXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVmlzaXRhYmxlKHRoaW5nKSB7XG4gIHJldHVybiB1dGlscy5pc1BsYWluT2JqZWN0KHRoaW5nKSB8fCB1dGlscy5pc0FycmF5KHRoaW5nKTtcbn1cblxuLyoqXG4gKiBJdCByZW1vdmVzIHRoZSBicmFja2V0cyBmcm9tIHRoZSBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIGtleSBvZiB0aGUgcGFyYW1ldGVyLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBrZXkgd2l0aG91dCB0aGUgYnJhY2tldHMuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUJyYWNrZXRzKGtleSkge1xuICByZXR1cm4gdXRpbHMuZW5kc1dpdGgoa2V5LCAnW10nKSA/IGtleS5zbGljZSgwLCAtMikgOiBrZXk7XG59XG5cbi8qKlxuICogSXQgdGFrZXMgYSBwYXRoLCBhIGtleSwgYW5kIGEgYm9vbGVhbiwgYW5kIHJldHVybnMgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBwYXRoIHRvIHRoZSBjdXJyZW50IGtleS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUga2V5IG9mIHRoZSBjdXJyZW50IG9iamVjdCBiZWluZyBpdGVyYXRlZCBvdmVyLlxuICogQHBhcmFtIHtzdHJpbmd9IGRvdHMgLSBJZiB0cnVlLCB0aGUga2V5IHdpbGwgYmUgcmVuZGVyZWQgd2l0aCBkb3RzIGluc3RlYWQgb2YgYnJhY2tldHMuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIHBhdGggdG8gdGhlIGN1cnJlbnQga2V5LlxuICovXG5mdW5jdGlvbiByZW5kZXJLZXkocGF0aCwga2V5LCBkb3RzKSB7XG4gIGlmICghcGF0aCkgcmV0dXJuIGtleTtcbiAgcmV0dXJuIHBhdGguY29uY2F0KGtleSkubWFwKGZ1bmN0aW9uIGVhY2godG9rZW4sIGkpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB0b2tlbiA9IHJlbW92ZUJyYWNrZXRzKHRva2VuKTtcbiAgICByZXR1cm4gIWRvdHMgJiYgaSA/ICdbJyArIHRva2VuICsgJ10nIDogdG9rZW47XG4gIH0pLmpvaW4oZG90cyA/ICcuJyA6ICcnKTtcbn1cblxuLyoqXG4gKiBJZiB0aGUgYXJyYXkgaXMgYW4gYXJyYXkgYW5kIG5vbmUgb2YgaXRzIGVsZW1lbnRzIGFyZSB2aXNpdGFibGUsIHRoZW4gaXQncyBhIGZsYXQgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheTxhbnk+fSBhcnIgLSBUaGUgYXJyYXkgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGbGF0QXJyYXkoYXJyKSB7XG4gIHJldHVybiB1dGlscy5pc0FycmF5KGFycikgJiYgIWFyci5zb21lKGlzVmlzaXRhYmxlKTtcbn1cblxuY29uc3QgcHJlZGljYXRlcyA9IHV0aWxzLnRvRmxhdE9iamVjdCh1dGlscywge30sIG51bGwsIGZ1bmN0aW9uIGZpbHRlcihwcm9wKSB7XG4gIHJldHVybiAvXmlzW0EtWl0vLnRlc3QocHJvcCk7XG59KTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgZGF0YSBvYmplY3QgdG8gRm9ybURhdGFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0gez9PYmplY3R9IFtmb3JtRGF0YV1cbiAqIEBwYXJhbSB7P09iamVjdH0gW29wdGlvbnNdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy52aXNpdG9yXVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5tZXRhVG9rZW5zID0gdHJ1ZV1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZG90cyA9IGZhbHNlXVxuICogQHBhcmFtIHs/Qm9vbGVhbn0gW29wdGlvbnMuaW5kZXhlcyA9IGZhbHNlXVxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKiovXG5cbi8qKlxuICogSXQgY29udmVydHMgYW4gb2JqZWN0IGludG8gYSBGb3JtRGF0YSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdDxhbnksIGFueT59IG9iaiAtIFRoZSBvYmplY3QgdG8gY29udmVydCB0byBmb3JtIGRhdGEuXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybURhdGEgLSBUaGUgRm9ybURhdGEgb2JqZWN0IHRvIGFwcGVuZCB0by5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zXG4gKi9cbmZ1bmN0aW9uIHRvRm9ybURhdGEob2JqLCBmb3JtRGF0YSwgb3B0aW9ucykge1xuICBpZiAoIXV0aWxzLmlzT2JqZWN0KG9iaikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0YXJnZXQgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBmb3JtRGF0YSA9IGZvcm1EYXRhIHx8IG5ldyAoUGxhdGZvcm1Gb3JtRGF0YSB8fCBGb3JtRGF0YSkoKTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgb3B0aW9ucyA9IHV0aWxzLnRvRmxhdE9iamVjdChvcHRpb25zLCB7XG4gICAgbWV0YVRva2VuczogdHJ1ZSxcbiAgICBkb3RzOiBmYWxzZSxcbiAgICBpbmRleGVzOiBmYWxzZVxuICB9LCBmYWxzZSwgZnVuY3Rpb24gZGVmaW5lZChvcHRpb24sIHNvdXJjZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLGVxZXFlcVxuICAgIHJldHVybiAhdXRpbHMuaXNVbmRlZmluZWQoc291cmNlW29wdGlvbl0pO1xuICB9KTtcblxuICBjb25zdCBtZXRhVG9rZW5zID0gb3B0aW9ucy5tZXRhVG9rZW5zO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgY29uc3QgdmlzaXRvciA9IG9wdGlvbnMudmlzaXRvciB8fCBkZWZhdWx0VmlzaXRvcjtcbiAgY29uc3QgZG90cyA9IG9wdGlvbnMuZG90cztcbiAgY29uc3QgaW5kZXhlcyA9IG9wdGlvbnMuaW5kZXhlcztcbiAgY29uc3QgX0Jsb2IgPSBvcHRpb25zLkJsb2IgfHwgdHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnICYmIEJsb2I7XG4gIGNvbnN0IHVzZUJsb2IgPSBfQmxvYiAmJiB1dGlscy5pc1NwZWNDb21wbGlhbnRGb3JtKGZvcm1EYXRhKTtcblxuICBpZiAoIXV0aWxzLmlzRnVuY3Rpb24odmlzaXRvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2aXNpdG9yIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29udmVydFZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gJyc7XG5cbiAgICBpZiAodXRpbHMuaXNEYXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VCbG9iICYmIHV0aWxzLmlzQmxvYih2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKCdCbG9iIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSBhIEJ1ZmZlciBpbnN0ZWFkLicpO1xuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyKHZhbHVlKSB8fCB1dGlscy5pc1R5cGVkQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdXNlQmxvYiAmJiB0eXBlb2YgQmxvYiA9PT0gJ2Z1bmN0aW9uJyA/IG5ldyBCbG9iKFt2YWx1ZV0pIDogQnVmZmVyLmZyb20odmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZhdWx0IHZpc2l0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBrZXlcbiAgICogQHBhcmFtIHtBcnJheTxTdHJpbmd8TnVtYmVyPn0gcGF0aFxuICAgKiBAdGhpcyB7Rm9ybURhdGF9XG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSByZXR1cm4gdHJ1ZSB0byB2aXNpdCB0aGUgZWFjaCBwcm9wIG9mIHRoZSB2YWx1ZSByZWN1cnNpdmVseVxuICAgKi9cbiAgZnVuY3Rpb24gZGVmYXVsdFZpc2l0b3IodmFsdWUsIGtleSwgcGF0aCkge1xuICAgIGxldCBhcnIgPSB2YWx1ZTtcblxuICAgIGlmICh2YWx1ZSAmJiAhcGF0aCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAodXRpbHMuZW5kc1dpdGgoa2V5LCAne30nKSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAga2V5ID0gbWV0YVRva2VucyA/IGtleSA6IGtleS5zbGljZSgwLCAtMik7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh1dGlscy5pc0FycmF5KHZhbHVlKSAmJiBpc0ZsYXRBcnJheSh2YWx1ZSkpIHx8XG4gICAgICAgICgodXRpbHMuaXNGaWxlTGlzdCh2YWx1ZSkgfHwgdXRpbHMuZW5kc1dpdGgoa2V5LCAnW10nKSkgJiYgKGFyciA9IHV0aWxzLnRvQXJyYXkodmFsdWUpKVxuICAgICAgICApKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBrZXkgPSByZW1vdmVCcmFja2V0cyhrZXkpO1xuXG4gICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIGVhY2goZWwsIGluZGV4KSB7XG4gICAgICAgICAgISh1dGlscy5pc1VuZGVmaW5lZChlbCkgfHwgZWwgPT09IG51bGwpICYmIGZvcm1EYXRhLmFwcGVuZChcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgICAgICAgICAgaW5kZXhlcyA9PT0gdHJ1ZSA/IHJlbmRlcktleShba2V5XSwgaW5kZXgsIGRvdHMpIDogKGluZGV4ZXMgPT09IG51bGwgPyBrZXkgOiBrZXkgKyAnW10nKSxcbiAgICAgICAgICAgIGNvbnZlcnRWYWx1ZShlbClcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc1Zpc2l0YWJsZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvcm1EYXRhLmFwcGVuZChyZW5kZXJLZXkocGF0aCwga2V5LCBkb3RzKSwgY29udmVydFZhbHVlKHZhbHVlKSk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBzdGFjayA9IFtdO1xuXG4gIGNvbnN0IGV4cG9zZWRIZWxwZXJzID0gT2JqZWN0LmFzc2lnbihwcmVkaWNhdGVzLCB7XG4gICAgZGVmYXVsdFZpc2l0b3IsXG4gICAgY29udmVydFZhbHVlLFxuICAgIGlzVmlzaXRhYmxlXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGJ1aWxkKHZhbHVlLCBwYXRoKSB7XG4gICAgaWYgKHV0aWxzLmlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgaWYgKHN0YWNrLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ0NpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZCBpbiAnICsgcGF0aC5qb2luKCcuJykpO1xuICAgIH1cblxuICAgIHN0YWNrLnB1c2godmFsdWUpO1xuXG4gICAgdXRpbHMuZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24gZWFjaChlbCwga2V5KSB7XG4gICAgICBjb25zdCByZXN1bHQgPSAhKHV0aWxzLmlzVW5kZWZpbmVkKGVsKSB8fCBlbCA9PT0gbnVsbCkgJiYgdmlzaXRvci5jYWxsKFxuICAgICAgICBmb3JtRGF0YSwgZWwsIHV0aWxzLmlzU3RyaW5nKGtleSkgPyBrZXkudHJpbSgpIDoga2V5LCBwYXRoLCBleHBvc2VkSGVscGVyc1xuICAgICAgKTtcblxuICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICBidWlsZChlbCwgcGF0aCA/IHBhdGguY29uY2F0KGtleSkgOiBba2V5XSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdGFjay5wb3AoKTtcbiAgfVxuXG4gIGlmICghdXRpbHMuaXNPYmplY3Qob2JqKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2RhdGEgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuXG4gIGJ1aWxkKG9iaik7XG5cbiAgcmV0dXJuIGZvcm1EYXRhO1xufVxuXG5leHBvcnQgZGVmYXVsdCB0b0Zvcm1EYXRhO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdG9Gb3JtRGF0YSBmcm9tICcuL3RvRm9ybURhdGEuanMnO1xuXG4vKipcbiAqIEl0IGVuY29kZXMgYSBzdHJpbmcgYnkgcmVwbGFjaW5nIGFsbCBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBpbiB0aGUgdW5yZXNlcnZlZCBzZXQgd2l0aFxuICogdGhlaXIgcGVyY2VudC1lbmNvZGVkIGVxdWl2YWxlbnRzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gZW5jb2RlLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBlbmNvZGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZW5jb2RlKHN0cikge1xuICBjb25zdCBjaGFyTWFwID0ge1xuICAgICchJzogJyUyMScsXG4gICAgXCInXCI6ICclMjcnLFxuICAgICcoJzogJyUyOCcsXG4gICAgJyknOiAnJTI5JyxcbiAgICAnfic6ICclN0UnLFxuICAgICclMjAnOiAnKycsXG4gICAgJyUwMCc6ICdcXHgwMCdcbiAgfTtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoL1shJygpfl18JTIwfCUwMC9nLCBmdW5jdGlvbiByZXBsYWNlcihtYXRjaCkge1xuICAgIHJldHVybiBjaGFyTWFwW21hdGNoXTtcbiAgfSk7XG59XG5cbi8qKlxuICogSXQgdGFrZXMgYSBwYXJhbXMgb2JqZWN0IGFuZCBjb252ZXJ0cyBpdCB0byBhIEZvcm1EYXRhIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gcGFyYW1zIC0gVGhlIHBhcmFtZXRlcnMgdG8gYmUgY29udmVydGVkIHRvIGEgRm9ybURhdGEgb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBhbnk+fSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgb2JqZWN0IHBhc3NlZCB0byB0aGUgQXhpb3MgY29uc3RydWN0b3IuXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIEF4aW9zVVJMU2VhcmNoUGFyYW1zKHBhcmFtcywgb3B0aW9ucykge1xuICB0aGlzLl9wYWlycyA9IFtdO1xuXG4gIHBhcmFtcyAmJiB0b0Zvcm1EYXRhKHBhcmFtcywgdGhpcywgb3B0aW9ucyk7XG59XG5cbmNvbnN0IHByb3RvdHlwZSA9IEF4aW9zVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZTtcblxucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIGFwcGVuZChuYW1lLCB2YWx1ZSkge1xuICB0aGlzLl9wYWlycy5wdXNoKFtuYW1lLCB2YWx1ZV0pO1xufTtcblxucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoZW5jb2Rlcikge1xuICBjb25zdCBfZW5jb2RlID0gZW5jb2RlciA/IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVuY29kZXIuY2FsbCh0aGlzLCB2YWx1ZSwgZW5jb2RlKTtcbiAgfSA6IGVuY29kZTtcblxuICByZXR1cm4gdGhpcy5fcGFpcnMubWFwKGZ1bmN0aW9uIGVhY2gocGFpcikge1xuICAgIHJldHVybiBfZW5jb2RlKHBhaXJbMF0pICsgJz0nICsgX2VuY29kZShwYWlyWzFdKTtcbiAgfSwgJycpLmpvaW4oJyYnKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEF4aW9zVVJMU2VhcmNoUGFyYW1zO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zVVJMU2VhcmNoUGFyYW1zIGZyb20gJy4uL2hlbHBlcnMvQXhpb3NVUkxTZWFyY2hQYXJhbXMuanMnO1xuXG4vKipcbiAqIEl0IHJlcGxhY2VzIGFsbCBpbnN0YW5jZXMgb2YgdGhlIGNoYXJhY3RlcnMgYDpgLCBgJGAsIGAsYCwgYCtgLCBgW2AsIGFuZCBgXWAgd2l0aCB0aGVpclxuICogVVJJIGVuY29kZWQgY291bnRlcnBhcnRzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbCBUaGUgdmFsdWUgdG8gYmUgZW5jb2RlZC5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZW5jb2RlZCB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICByZXBsYWNlKC8lMjAvZywgJysnKS5cbiAgICByZXBsYWNlKC8lNUIvZ2ksICdbJykuXG4gICAgcmVwbGFjZSgvJTVEL2dpLCAnXScpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGJhc2Ugb2YgdGhlIHVybCAoZS5nLiwgaHR0cDovL3d3dy5nb29nbGUuY29tKVxuICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWRcbiAqIEBwYXJhbSB7P29iamVjdH0gb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgdXJsXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBvcHRpb25zKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICBpZiAoIXBhcmFtcykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgXG4gIGNvbnN0IF9lbmNvZGUgPSBvcHRpb25zICYmIG9wdGlvbnMuZW5jb2RlIHx8IGVuY29kZTtcblxuICBjb25zdCBzZXJpYWxpemVGbiA9IG9wdGlvbnMgJiYgb3B0aW9ucy5zZXJpYWxpemU7XG5cbiAgbGV0IHNlcmlhbGl6ZWRQYXJhbXM7XG5cbiAgaWYgKHNlcmlhbGl6ZUZuKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHNlcmlhbGl6ZUZuKHBhcmFtcywgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykgP1xuICAgICAgcGFyYW1zLnRvU3RyaW5nKCkgOlxuICAgICAgbmV3IEF4aW9zVVJMU2VhcmNoUGFyYW1zKHBhcmFtcywgb3B0aW9ucykudG9TdHJpbmcoX2VuY29kZSk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIGNvbnN0IGhhc2htYXJrSW5kZXggPSB1cmwuaW5kZXhPZihcIiNcIik7XG5cbiAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHtcbiAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTtcbiAgICB9XG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuXG5jbGFzcyBJbnRlcmNlcHRvck1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdWxmaWxsZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgdGhlbmAgZm9yIGEgYFByb21pc2VgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gICAqXG4gICAqIEByZXR1cm4ge051bWJlcn0gQW4gSUQgdXNlZCB0byByZW1vdmUgaW50ZXJjZXB0b3IgbGF0ZXJcbiAgICovXG4gIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkLCBvcHRpb25zKSB7XG4gICAgdGhpcy5oYW5kbGVycy5wdXNoKHtcbiAgICAgIGZ1bGZpbGxlZCxcbiAgICAgIHJlamVjdGVkLFxuICAgICAgc3luY2hyb25vdXM6IG9wdGlvbnMgPyBvcHRpb25zLnN5bmNocm9ub3VzIDogZmFsc2UsXG4gICAgICBydW5XaGVuOiBvcHRpb25zID8gb3B0aW9ucy5ydW5XaGVuIDogbnVsbFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmhhbmRsZXJzLmxlbmd0aCAtIDE7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFuIGludGVyY2VwdG9yIGZyb20gdGhlIHN0YWNrXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWBcbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgaW50ZXJjZXB0b3Igd2FzIHJlbW92ZWQsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gICAqL1xuICBlamVjdChpZCkge1xuICAgIGlmICh0aGlzLmhhbmRsZXJzW2lkXSkge1xuICAgICAgdGhpcy5oYW5kbGVyc1tpZF0gPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgaW50ZXJjZXB0b3JzIGZyb20gdGhlIHN0YWNrXG4gICAqXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgY2xlYXIoKSB7XG4gICAgaWYgKHRoaXMuaGFuZGxlcnMpIHtcbiAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igc2tpcHBpbmcgb3ZlciBhbnlcbiAgICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGludGVyY2VwdG9yXG4gICAqXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZm9yRWFjaChmbikge1xuICAgIHV0aWxzLmZvckVhY2godGhpcy5oYW5kbGVycywgZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIoaCkge1xuICAgICAgaWYgKGggIT09IG51bGwpIHtcbiAgICAgICAgZm4oaCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJjZXB0b3JNYW5hZ2VyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHNpbGVudEpTT05QYXJzaW5nOiB0cnVlLFxuICBmb3JjZWRKU09OUGFyc2luZzogdHJ1ZSxcbiAgY2xhcmlmeVRpbWVvdXRFcnJvcjogZmFsc2Vcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBBeGlvc1VSTFNlYXJjaFBhcmFtcyBmcm9tICcuLi8uLi8uLi9oZWxwZXJzL0F4aW9zVVJMU2VhcmNoUGFyYW1zLmpzJztcbmV4cG9ydCBkZWZhdWx0IHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnID8gVVJMU2VhcmNoUGFyYW1zIDogQXhpb3NVUkxTZWFyY2hQYXJhbXM7XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IHR5cGVvZiBGb3JtRGF0YSAhPT0gJ3VuZGVmaW5lZCcgPyBGb3JtRGF0YSA6IG51bGw7XG4iLCIndXNlIHN0cmljdCdcblxuZXhwb3J0IGRlZmF1bHQgdHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnID8gQmxvYiA6IG51bGxcbiIsImltcG9ydCBVUkxTZWFyY2hQYXJhbXMgZnJvbSAnLi9jbGFzc2VzL1VSTFNlYXJjaFBhcmFtcy5qcydcbmltcG9ydCBGb3JtRGF0YSBmcm9tICcuL2NsYXNzZXMvRm9ybURhdGEuanMnXG5pbXBvcnQgQmxvYiBmcm9tICcuL2NsYXNzZXMvQmxvYi5qcydcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBUaGlzIGFsbG93cyBheGlvcyB0byBydW4gaW4gYSB3ZWIgd29ya2VyLCBhbmQgcmVhY3QtbmF0aXZlLlxuICogQm90aCBlbnZpcm9ubWVudHMgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdCwgYnV0IG5vdCBmdWxseSBzdGFuZGFyZCBnbG9iYWxzLlxuICpcbiAqIHdlYiB3b3JrZXJzOlxuICogIHR5cGVvZiB3aW5kb3cgLT4gdW5kZWZpbmVkXG4gKiAgdHlwZW9mIGRvY3VtZW50IC0+IHVuZGVmaW5lZFxuICpcbiAqIHJlYWN0LW5hdGl2ZTpcbiAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnUmVhY3ROYXRpdmUnXG4gKiBuYXRpdmVzY3JpcHRcbiAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnTmF0aXZlU2NyaXB0JyBvciAnTlMnXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmNvbnN0IGlzU3RhbmRhcmRCcm93c2VyRW52ID0gKCgpID0+IHtcbiAgbGV0IHByb2R1Y3Q7XG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAoXG4gICAgKHByb2R1Y3QgPSBuYXZpZ2F0b3IucHJvZHVjdCkgPT09ICdSZWFjdE5hdGl2ZScgfHxcbiAgICBwcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fFxuICAgIHByb2R1Y3QgPT09ICdOUycpXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnO1xufSkoKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgd2ViV29ya2VyIGVudmlyb25tZW50XG4gKlxuICogQWx0aG91Z2ggdGhlIGBpc1N0YW5kYXJkQnJvd3NlckVudmAgbWV0aG9kIGluZGljYXRlcyB0aGF0XG4gKiBgYWxsb3dzIGF4aW9zIHRvIHJ1biBpbiBhIHdlYiB3b3JrZXJgLCB0aGUgV2ViV29ya2VyIHdpbGwgc3RpbGwgYmVcbiAqIGZpbHRlcmVkIG91dCBkdWUgdG8gaXRzIGp1ZGdtZW50IHN0YW5kYXJkXG4gKiBgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ2AuXG4gKiBUaGlzIGxlYWRzIHRvIGEgcHJvYmxlbSB3aGVuIGF4aW9zIHBvc3QgYEZvcm1EYXRhYCBpbiB3ZWJXb3JrZXJcbiAqL1xuIGNvbnN0IGlzU3RhbmRhcmRCcm93c2VyV2ViV29ya2VyRW52ID0gKCgpID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlICYmXG4gICAgdHlwZW9mIHNlbGYuaW1wb3J0U2NyaXB0cyA9PT0gJ2Z1bmN0aW9uJ1xuICApO1xufSkoKTtcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGlzQnJvd3NlcjogdHJ1ZSxcbiAgY2xhc3Nlczoge1xuICAgIFVSTFNlYXJjaFBhcmFtcyxcbiAgICBGb3JtRGF0YSxcbiAgICBCbG9iXG4gIH0sXG4gIGlzU3RhbmRhcmRCcm93c2VyRW52LFxuICBpc1N0YW5kYXJkQnJvd3NlcldlYldvcmtlckVudixcbiAgcHJvdG9jb2xzOiBbJ2h0dHAnLCAnaHR0cHMnLCAnZmlsZScsICdibG9iJywgJ3VybCcsICdkYXRhJ11cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgdG9Gb3JtRGF0YSBmcm9tICcuL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IHBsYXRmb3JtIGZyb20gJy4uL3BsYXRmb3JtL2luZGV4LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9VUkxFbmNvZGVkRm9ybShkYXRhLCBvcHRpb25zKSB7XG4gIHJldHVybiB0b0Zvcm1EYXRhKGRhdGEsIG5ldyBwbGF0Zm9ybS5jbGFzc2VzLlVSTFNlYXJjaFBhcmFtcygpLCBPYmplY3QuYXNzaWduKHtcbiAgICB2aXNpdG9yOiBmdW5jdGlvbih2YWx1ZSwga2V5LCBwYXRoLCBoZWxwZXJzKSB7XG4gICAgICBpZiAocGxhdGZvcm0uaXNOb2RlICYmIHV0aWxzLmlzQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICB0aGlzLmFwcGVuZChrZXksIHZhbHVlLnRvU3RyaW5nKCdiYXNlNjQnKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhlbHBlcnMuZGVmYXVsdFZpc2l0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH0sIG9wdGlvbnMpKTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcblxuLyoqXG4gKiBJdCB0YWtlcyBhIHN0cmluZyBsaWtlIGBmb29beF1beV1bel1gIGFuZCByZXR1cm5zIGFuIGFycmF5IGxpa2UgYFsnZm9vJywgJ3gnLCAneScsICd6J11cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKlxuICogQHJldHVybnMgQW4gYXJyYXkgb2Ygc3RyaW5ncy5cbiAqL1xuZnVuY3Rpb24gcGFyc2VQcm9wUGF0aChuYW1lKSB7XG4gIC8vIGZvb1t4XVt5XVt6XVxuICAvLyBmb28ueC55LnpcbiAgLy8gZm9vLXgteS16XG4gIC8vIGZvbyB4IHkgelxuICByZXR1cm4gdXRpbHMubWF0Y2hBbGwoL1xcdyt8XFxbKFxcdyopXS9nLCBuYW1lKS5tYXAobWF0Y2ggPT4ge1xuICAgIHJldHVybiBtYXRjaFswXSA9PT0gJ1tdJyA/ICcnIDogbWF0Y2hbMV0gfHwgbWF0Y2hbMF07XG4gIH0pO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYW4gYXJyYXkgdG8gYW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8YW55Pn0gYXJyIC0gVGhlIGFycmF5IHRvIGNvbnZlcnQgdG8gYW4gb2JqZWN0LlxuICpcbiAqIEByZXR1cm5zIEFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIGtleXMgYW5kIHZhbHVlcyBhcyB0aGUgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGFycmF5VG9PYmplY3QoYXJyKSB7XG4gIGNvbnN0IG9iaiA9IHt9O1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYXJyKTtcbiAgbGV0IGk7XG4gIGNvbnN0IGxlbiA9IGtleXMubGVuZ3RoO1xuICBsZXQga2V5O1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBrZXkgPSBrZXlzW2ldO1xuICAgIG9ialtrZXldID0gYXJyW2tleV07XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBJdCB0YWtlcyBhIEZvcm1EYXRhIG9iamVjdCBhbmQgcmV0dXJucyBhIEphdmFTY3JpcHQgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvcm1EYXRhIFRoZSBGb3JtRGF0YSBvYmplY3QgdG8gY29udmVydCB0byBKU09OLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3Q8c3RyaW5nLCBhbnk+IHwgbnVsbH0gVGhlIGNvbnZlcnRlZCBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGZvcm1EYXRhVG9KU09OKGZvcm1EYXRhKSB7XG4gIGZ1bmN0aW9uIGJ1aWxkUGF0aChwYXRoLCB2YWx1ZSwgdGFyZ2V0LCBpbmRleCkge1xuICAgIGxldCBuYW1lID0gcGF0aFtpbmRleCsrXTtcbiAgICBjb25zdCBpc051bWVyaWNLZXkgPSBOdW1iZXIuaXNGaW5pdGUoK25hbWUpO1xuICAgIGNvbnN0IGlzTGFzdCA9IGluZGV4ID49IHBhdGgubGVuZ3RoO1xuICAgIG5hbWUgPSAhbmFtZSAmJiB1dGlscy5pc0FycmF5KHRhcmdldCkgPyB0YXJnZXQubGVuZ3RoIDogbmFtZTtcblxuICAgIGlmIChpc0xhc3QpIHtcbiAgICAgIGlmICh1dGlscy5oYXNPd25Qcm9wKHRhcmdldCwgbmFtZSkpIHtcbiAgICAgICAgdGFyZ2V0W25hbWVdID0gW3RhcmdldFtuYW1lXSwgdmFsdWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W25hbWVdID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAhaXNOdW1lcmljS2V5O1xuICAgIH1cblxuICAgIGlmICghdGFyZ2V0W25hbWVdIHx8ICF1dGlscy5pc09iamVjdCh0YXJnZXRbbmFtZV0pKSB7XG4gICAgICB0YXJnZXRbbmFtZV0gPSBbXTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBidWlsZFBhdGgocGF0aCwgdmFsdWUsIHRhcmdldFtuYW1lXSwgaW5kZXgpO1xuXG4gICAgaWYgKHJlc3VsdCAmJiB1dGlscy5pc0FycmF5KHRhcmdldFtuYW1lXSkpIHtcbiAgICAgIHRhcmdldFtuYW1lXSA9IGFycmF5VG9PYmplY3QodGFyZ2V0W25hbWVdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gIWlzTnVtZXJpY0tleTtcbiAgfVxuXG4gIGlmICh1dGlscy5pc0Zvcm1EYXRhKGZvcm1EYXRhKSAmJiB1dGlscy5pc0Z1bmN0aW9uKGZvcm1EYXRhLmVudHJpZXMpKSB7XG4gICAgY29uc3Qgb2JqID0ge307XG5cbiAgICB1dGlscy5mb3JFYWNoRW50cnkoZm9ybURhdGEsIChuYW1lLCB2YWx1ZSkgPT4ge1xuICAgICAgYnVpbGRQYXRoKHBhcnNlUHJvcFBhdGgobmFtZSksIHZhbHVlLCBvYmosIDApO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmb3JtRGF0YVRvSlNPTjtcbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcbmltcG9ydCBBeGlvc0Vycm9yIGZyb20gJy4uL2NvcmUvQXhpb3NFcnJvci5qcyc7XG5pbXBvcnQgdHJhbnNpdGlvbmFsRGVmYXVsdHMgZnJvbSAnLi90cmFuc2l0aW9uYWwuanMnO1xuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi4vaGVscGVycy90b0Zvcm1EYXRhLmpzJztcbmltcG9ydCB0b1VSTEVuY29kZWRGb3JtIGZyb20gJy4uL2hlbHBlcnMvdG9VUkxFbmNvZGVkRm9ybS5qcyc7XG5pbXBvcnQgcGxhdGZvcm0gZnJvbSAnLi4vcGxhdGZvcm0vaW5kZXguanMnO1xuaW1wb3J0IGZvcm1EYXRhVG9KU09OIGZyb20gJy4uL2hlbHBlcnMvZm9ybURhdGFUb0pTT04uanMnO1xuXG5jb25zdCBERUZBVUxUX0NPTlRFTlRfVFlQRSA9IHtcbiAgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZFxufTtcblxuLyoqXG4gKiBJdCB0YWtlcyBhIHN0cmluZywgdHJpZXMgdG8gcGFyc2UgaXQsIGFuZCBpZiBpdCBmYWlscywgaXQgcmV0dXJucyB0aGUgc3RyaW5naWZpZWQgdmVyc2lvblxuICogb2YgdGhlIGlucHV0XG4gKlxuICogQHBhcmFtIHthbnl9IHJhd1ZhbHVlIC0gVGhlIHZhbHVlIHRvIGJlIHN0cmluZ2lmaWVkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGFyc2VyIC0gQSBmdW5jdGlvbiB0aGF0IHBhcnNlcyBhIHN0cmluZyBpbnRvIGEgSmF2YVNjcmlwdCBvYmplY3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlbmNvZGVyIC0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgdmFsdWUgYW5kIHJldHVybnMgYSBzdHJpbmcuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmdpZmllZCB2ZXJzaW9uIG9mIHRoZSByYXdWYWx1ZS5cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5U2FmZWx5KHJhd1ZhbHVlLCBwYXJzZXIsIGVuY29kZXIpIHtcbiAgaWYgKHV0aWxzLmlzU3RyaW5nKHJhd1ZhbHVlKSkge1xuICAgIHRyeSB7XG4gICAgICAocGFyc2VyIHx8IEpTT04ucGFyc2UpKHJhd1ZhbHVlKTtcbiAgICAgIHJldHVybiB1dGlscy50cmltKHJhd1ZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZS5uYW1lICE9PSAnU3ludGF4RXJyb3InKSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChlbmNvZGVyIHx8IEpTT04uc3RyaW5naWZ5KShyYXdWYWx1ZSk7XG59XG5cbmNvbnN0IGRlZmF1bHRzID0ge1xuXG4gIHRyYW5zaXRpb25hbDogdHJhbnNpdGlvbmFsRGVmYXVsdHMsXG5cbiAgYWRhcHRlcjogWyd4aHInLCAnaHR0cCddLFxuXG4gIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsIGhlYWRlcnMpIHtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IGhlYWRlcnMuZ2V0Q29udGVudFR5cGUoKSB8fCAnJztcbiAgICBjb25zdCBoYXNKU09OQ29udGVudFR5cGUgPSBjb250ZW50VHlwZS5pbmRleE9mKCdhcHBsaWNhdGlvbi9qc29uJykgPiAtMTtcbiAgICBjb25zdCBpc09iamVjdFBheWxvYWQgPSB1dGlscy5pc09iamVjdChkYXRhKTtcblxuICAgIGlmIChpc09iamVjdFBheWxvYWQgJiYgdXRpbHMuaXNIVE1MRm9ybShkYXRhKSkge1xuICAgICAgZGF0YSA9IG5ldyBGb3JtRGF0YShkYXRhKTtcbiAgICB9XG5cbiAgICBjb25zdCBpc0Zvcm1EYXRhID0gdXRpbHMuaXNGb3JtRGF0YShkYXRhKTtcblxuICAgIGlmIChpc0Zvcm1EYXRhKSB7XG4gICAgICBpZiAoIWhhc0pTT05Db250ZW50VHlwZSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNKU09OQ29udGVudFR5cGUgPyBKU09OLnN0cmluZ2lmeShmb3JtRGF0YVRvSlNPTihkYXRhKSkgOiBkYXRhO1xuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzRmlsZShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkge1xuICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZSgnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnLCBmYWxzZSk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGxldCBpc0ZpbGVMaXN0O1xuXG4gICAgaWYgKGlzT2JqZWN0UGF5bG9hZCkge1xuICAgICAgaWYgKGNvbnRlbnRUeXBlLmluZGV4T2YoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRvVVJMRW5jb2RlZEZvcm0oZGF0YSwgdGhpcy5mb3JtU2VyaWFsaXplcikudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKChpc0ZpbGVMaXN0ID0gdXRpbHMuaXNGaWxlTGlzdChkYXRhKSkgfHwgY29udGVudFR5cGUuaW5kZXhPZignbXVsdGlwYXJ0L2Zvcm0tZGF0YScpID4gLTEpIHtcbiAgICAgICAgY29uc3QgX0Zvcm1EYXRhID0gdGhpcy5lbnYgJiYgdGhpcy5lbnYuRm9ybURhdGE7XG5cbiAgICAgICAgcmV0dXJuIHRvRm9ybURhdGEoXG4gICAgICAgICAgaXNGaWxlTGlzdCA/IHsnZmlsZXNbXSc6IGRhdGF9IDogZGF0YSxcbiAgICAgICAgICBfRm9ybURhdGEgJiYgbmV3IF9Gb3JtRGF0YSgpLFxuICAgICAgICAgIHRoaXMuZm9ybVNlcmlhbGl6ZXJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNPYmplY3RQYXlsb2FkIHx8IGhhc0pTT05Db250ZW50VHlwZSApIHtcbiAgICAgIGhlYWRlcnMuc2V0Q29udGVudFR5cGUoJ2FwcGxpY2F0aW9uL2pzb24nLCBmYWxzZSk7XG4gICAgICByZXR1cm4gc3RyaW5naWZ5U2FmZWx5KGRhdGEpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICBjb25zdCB0cmFuc2l0aW9uYWwgPSB0aGlzLnRyYW5zaXRpb25hbCB8fCBkZWZhdWx0cy50cmFuc2l0aW9uYWw7XG4gICAgY29uc3QgZm9yY2VkSlNPTlBhcnNpbmcgPSB0cmFuc2l0aW9uYWwgJiYgdHJhbnNpdGlvbmFsLmZvcmNlZEpTT05QYXJzaW5nO1xuICAgIGNvbnN0IEpTT05SZXF1ZXN0ZWQgPSB0aGlzLnJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nO1xuXG4gICAgaWYgKGRhdGEgJiYgdXRpbHMuaXNTdHJpbmcoZGF0YSkgJiYgKChmb3JjZWRKU09OUGFyc2luZyAmJiAhdGhpcy5yZXNwb25zZVR5cGUpIHx8IEpTT05SZXF1ZXN0ZWQpKSB7XG4gICAgICBjb25zdCBzaWxlbnRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbCAmJiB0cmFuc2l0aW9uYWwuc2lsZW50SlNPTlBhcnNpbmc7XG4gICAgICBjb25zdCBzdHJpY3RKU09OUGFyc2luZyA9ICFzaWxlbnRKU09OUGFyc2luZyAmJiBKU09OUmVxdWVzdGVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKHN0cmljdEpTT05QYXJzaW5nKSB7XG4gICAgICAgICAgaWYgKGUubmFtZSA9PT0gJ1N5bnRheEVycm9yJykge1xuICAgICAgICAgICAgdGhyb3cgQXhpb3NFcnJvci5mcm9tKGUsIEF4aW9zRXJyb3IuRVJSX0JBRF9SRVNQT05TRSwgdGhpcywgbnVsbCwgdGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgLyoqXG4gICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYVxuICAgKiB0aW1lb3V0IGlzIG5vdCBjcmVhdGVkLlxuICAgKi9cbiAgdGltZW91dDogMCxcblxuICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsXG5cbiAgbWF4Q29udGVudExlbmd0aDogLTEsXG4gIG1heEJvZHlMZW5ndGg6IC0xLFxuXG4gIGVudjoge1xuICAgIEZvcm1EYXRhOiBwbGF0Zm9ybS5jbGFzc2VzLkZvcm1EYXRhLFxuICAgIEJsb2I6IHBsYXRmb3JtLmNsYXNzZXMuQmxvYlxuICB9LFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH0sXG5cbiAgaGVhZGVyczoge1xuICAgIGNvbW1vbjoge1xuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG4gICAgfVxuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBkZWZhdWx0cztcbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuXG4vLyBSYXdBeGlvc0hlYWRlcnMgd2hvc2UgZHVwbGljYXRlcyBhcmUgaWdub3JlZCBieSBub2RlXG4vLyBjLmYuIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzXG5jb25zdCBpZ25vcmVEdXBsaWNhdGVPZiA9IHV0aWxzLnRvT2JqZWN0U2V0KFtcbiAgJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJyxcbiAgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLFxuICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXG5dKTtcblxuLyoqXG4gKiBQYXJzZSBoZWFkZXJzIGludG8gYW4gb2JqZWN0XG4gKlxuICogYGBgXG4gKiBEYXRlOiBXZWQsIDI3IEF1ZyAyMDE0IDA4OjU4OjQ5IEdNVFxuICogQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXG4gKiBDb25uZWN0aW9uOiBrZWVwLWFsaXZlXG4gKiBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZFxuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHJhd0hlYWRlcnMgSGVhZGVycyBuZWVkaW5nIHRvIGJlIHBhcnNlZFxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHJhd0hlYWRlcnMgPT4ge1xuICBjb25zdCBwYXJzZWQgPSB7fTtcbiAgbGV0IGtleTtcbiAgbGV0IHZhbDtcbiAgbGV0IGk7XG5cbiAgcmF3SGVhZGVycyAmJiByYXdIZWFkZXJzLnNwbGl0KCdcXG4nKS5mb3JFYWNoKGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IGxpbmUuc3Vic3RyaW5nKDAsIGkpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IGxpbmUuc3Vic3RyaW5nKGkgKyAxKS50cmltKCk7XG5cbiAgICBpZiAoIWtleSB8fCAocGFyc2VkW2tleV0gJiYgaWdub3JlRHVwbGljYXRlT2Zba2V5XSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHtcbiAgICAgIGlmIChwYXJzZWRba2V5XSkge1xuICAgICAgICBwYXJzZWRba2V5XS5wdXNoKHZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZWRba2V5XSA9IFt2YWxdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgcGFyc2VIZWFkZXJzIGZyb20gJy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzJztcblxuY29uc3QgJGludGVybmFscyA9IFN5bWJvbCgnaW50ZXJuYWxzJyk7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlcihoZWFkZXIpIHtcbiAgcmV0dXJuIGhlYWRlciAmJiBTdHJpbmcoaGVhZGVyKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHV0aWxzLmlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKG5vcm1hbGl6ZVZhbHVlKSA6IFN0cmluZyh2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVG9rZW5zKHN0cikge1xuICBjb25zdCB0b2tlbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBjb25zdCB0b2tlbnNSRSA9IC8oW15cXHMsOz1dKylcXHMqKD86PVxccyooW14sO10rKSk/L2c7XG4gIGxldCBtYXRjaDtcblxuICB3aGlsZSAoKG1hdGNoID0gdG9rZW5zUkUuZXhlYyhzdHIpKSkge1xuICAgIHRva2Vuc1ttYXRjaFsxXV0gPSBtYXRjaFsyXTtcbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRIZWFkZXJOYW1lKHN0cikge1xuICByZXR1cm4gL15bLV9hLXpBLVpdKyQvLnRlc3Qoc3RyLnRyaW0oKSk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoSGVhZGVyVmFsdWUoY29udGV4dCwgdmFsdWUsIGhlYWRlciwgZmlsdGVyLCBpc0hlYWRlck5hbWVGaWx0ZXIpIHtcbiAgaWYgKHV0aWxzLmlzRnVuY3Rpb24oZmlsdGVyKSkge1xuICAgIHJldHVybiBmaWx0ZXIuY2FsbCh0aGlzLCB2YWx1ZSwgaGVhZGVyKTtcbiAgfVxuXG4gIGlmIChpc0hlYWRlck5hbWVGaWx0ZXIpIHtcbiAgICB2YWx1ZSA9IGhlYWRlcjtcbiAgfVxuXG4gIGlmICghdXRpbHMuaXNTdHJpbmcodmFsdWUpKSByZXR1cm47XG5cbiAgaWYgKHV0aWxzLmlzU3RyaW5nKGZpbHRlcikpIHtcbiAgICByZXR1cm4gdmFsdWUuaW5kZXhPZihmaWx0ZXIpICE9PSAtMTtcbiAgfVxuXG4gIGlmICh1dGlscy5pc1JlZ0V4cChmaWx0ZXIpKSB7XG4gICAgcmV0dXJuIGZpbHRlci50ZXN0KHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXRIZWFkZXIoaGVhZGVyKSB7XG4gIHJldHVybiBoZWFkZXIudHJpbSgpXG4gICAgLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvKFthLXpcXGRdKShcXHcqKS9nLCAodywgY2hhciwgc3RyKSA9PiB7XG4gICAgICByZXR1cm4gY2hhci50b1VwcGVyQ2FzZSgpICsgc3RyO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBidWlsZEFjY2Vzc29ycyhvYmosIGhlYWRlcikge1xuICBjb25zdCBhY2Nlc3Nvck5hbWUgPSB1dGlscy50b0NhbWVsQ2FzZSgnICcgKyBoZWFkZXIpO1xuXG4gIFsnZ2V0JywgJ3NldCcsICdoYXMnXS5mb3JFYWNoKG1ldGhvZE5hbWUgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIG1ldGhvZE5hbWUgKyBhY2Nlc3Nvck5hbWUsIHtcbiAgICAgIHZhbHVlOiBmdW5jdGlvbihhcmcxLCBhcmcyLCBhcmczKSB7XG4gICAgICAgIHJldHVybiB0aGlzW21ldGhvZE5hbWVdLmNhbGwodGhpcywgaGVhZGVyLCBhcmcxLCBhcmcyLCBhcmczKTtcbiAgICAgIH0sXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfSk7XG59XG5cbmNsYXNzIEF4aW9zSGVhZGVycyB7XG4gIGNvbnN0cnVjdG9yKGhlYWRlcnMpIHtcbiAgICBoZWFkZXJzICYmIHRoaXMuc2V0KGhlYWRlcnMpO1xuICB9XG5cbiAgc2V0KGhlYWRlciwgdmFsdWVPclJld3JpdGUsIHJld3JpdGUpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIHNldEhlYWRlcihfdmFsdWUsIF9oZWFkZXIsIF9yZXdyaXRlKSB7XG4gICAgICBjb25zdCBsSGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKF9oZWFkZXIpO1xuXG4gICAgICBpZiAoIWxIZWFkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdoZWFkZXIgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHNlbGYsIGxIZWFkZXIpO1xuXG4gICAgICBpZigha2V5IHx8IHNlbGZba2V5XSA9PT0gdW5kZWZpbmVkIHx8IF9yZXdyaXRlID09PSB0cnVlIHx8IChfcmV3cml0ZSA9PT0gdW5kZWZpbmVkICYmIHNlbGZba2V5XSAhPT0gZmFsc2UpKSB7XG4gICAgICAgIHNlbGZba2V5IHx8IF9oZWFkZXJdID0gbm9ybWFsaXplVmFsdWUoX3ZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZXRIZWFkZXJzID0gKGhlYWRlcnMsIF9yZXdyaXRlKSA9PlxuICAgICAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCAoX3ZhbHVlLCBfaGVhZGVyKSA9PiBzZXRIZWFkZXIoX3ZhbHVlLCBfaGVhZGVyLCBfcmV3cml0ZSkpO1xuXG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QoaGVhZGVyKSB8fCBoZWFkZXIgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKSB7XG4gICAgICBzZXRIZWFkZXJzKGhlYWRlciwgdmFsdWVPclJld3JpdGUpXG4gICAgfSBlbHNlIGlmKHV0aWxzLmlzU3RyaW5nKGhlYWRlcikgJiYgKGhlYWRlciA9IGhlYWRlci50cmltKCkpICYmICFpc1ZhbGlkSGVhZGVyTmFtZShoZWFkZXIpKSB7XG4gICAgICBzZXRIZWFkZXJzKHBhcnNlSGVhZGVycyhoZWFkZXIpLCB2YWx1ZU9yUmV3cml0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWRlciAhPSBudWxsICYmIHNldEhlYWRlcih2YWx1ZU9yUmV3cml0ZSwgaGVhZGVyLCByZXdyaXRlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldChoZWFkZXIsIHBhcnNlcikge1xuICAgIGhlYWRlciA9IG5vcm1hbGl6ZUhlYWRlcihoZWFkZXIpO1xuXG4gICAgaWYgKGhlYWRlcikge1xuICAgICAgY29uc3Qga2V5ID0gdXRpbHMuZmluZEtleSh0aGlzLCBoZWFkZXIpO1xuXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpc1trZXldO1xuXG4gICAgICAgIGlmICghcGFyc2VyKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcnNlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBwYXJzZVRva2Vucyh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNGdW5jdGlvbihwYXJzZXIpKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlci5jYWxsKHRoaXMsIHZhbHVlLCBrZXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzUmVnRXhwKHBhcnNlcikpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VyLmV4ZWModmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyc2VyIG11c3QgYmUgYm9vbGVhbnxyZWdleHB8ZnVuY3Rpb24nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYXMoaGVhZGVyLCBtYXRjaGVyKSB7XG4gICAgaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKGhlYWRlcik7XG5cbiAgICBpZiAoaGVhZGVyKSB7XG4gICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHRoaXMsIGhlYWRlcik7XG5cbiAgICAgIHJldHVybiAhIShrZXkgJiYgdGhpc1trZXldICE9PSB1bmRlZmluZWQgJiYgKCFtYXRjaGVyIHx8IG1hdGNoSGVhZGVyVmFsdWUodGhpcywgdGhpc1trZXldLCBrZXksIG1hdGNoZXIpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZGVsZXRlKGhlYWRlciwgbWF0Y2hlcikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGxldCBkZWxldGVkID0gZmFsc2U7XG5cbiAgICBmdW5jdGlvbiBkZWxldGVIZWFkZXIoX2hlYWRlcikge1xuICAgICAgX2hlYWRlciA9IG5vcm1hbGl6ZUhlYWRlcihfaGVhZGVyKTtcblxuICAgICAgaWYgKF9oZWFkZXIpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gdXRpbHMuZmluZEtleShzZWxmLCBfaGVhZGVyKTtcblxuICAgICAgICBpZiAoa2V5ICYmICghbWF0Y2hlciB8fCBtYXRjaEhlYWRlclZhbHVlKHNlbGYsIHNlbGZba2V5XSwga2V5LCBtYXRjaGVyKSkpIHtcbiAgICAgICAgICBkZWxldGUgc2VsZltrZXldO1xuXG4gICAgICAgICAgZGVsZXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNBcnJheShoZWFkZXIpKSB7XG4gICAgICBoZWFkZXIuZm9yRWFjaChkZWxldGVIZWFkZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGVIZWFkZXIoaGVhZGVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVsZXRlZDtcbiAgfVxuXG4gIGNsZWFyKG1hdGNoZXIpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcyk7XG4gICAgbGV0IGkgPSBrZXlzLmxlbmd0aDtcbiAgICBsZXQgZGVsZXRlZCA9IGZhbHNlO1xuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmKCFtYXRjaGVyIHx8IG1hdGNoSGVhZGVyVmFsdWUodGhpcywgdGhpc1trZXldLCBrZXksIG1hdGNoZXIsIHRydWUpKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgICAgIGRlbGV0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZWxldGVkO1xuICB9XG5cbiAgbm9ybWFsaXplKGZvcm1hdCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcblxuICAgIHV0aWxzLmZvckVhY2godGhpcywgKHZhbHVlLCBoZWFkZXIpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IHV0aWxzLmZpbmRLZXkoaGVhZGVycywgaGVhZGVyKTtcblxuICAgICAgaWYgKGtleSkge1xuICAgICAgICBzZWxmW2tleV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIGRlbGV0ZSBzZWxmW2hlYWRlcl07XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IGZvcm1hdCA/IGZvcm1hdEhlYWRlcihoZWFkZXIpIDogU3RyaW5nKGhlYWRlcikudHJpbSgpO1xuXG4gICAgICBpZiAobm9ybWFsaXplZCAhPT0gaGVhZGVyKSB7XG4gICAgICAgIGRlbGV0ZSBzZWxmW2hlYWRlcl07XG4gICAgICB9XG5cbiAgICAgIHNlbGZbbm9ybWFsaXplZF0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSk7XG5cbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZF0gPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjb25jYXQoLi4udGFyZ2V0cykge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmNvbmNhdCh0aGlzLCAuLi50YXJnZXRzKTtcbiAgfVxuXG4gIHRvSlNPTihhc1N0cmluZ3MpIHtcbiAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgdXRpbHMuZm9yRWFjaCh0aGlzLCAodmFsdWUsIGhlYWRlcikgPT4ge1xuICAgICAgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UgJiYgKG9ialtoZWFkZXJdID0gYXNTdHJpbmdzICYmIHV0aWxzLmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbignLCAnKSA6IHZhbHVlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy50b0pTT04oKSlbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMudG9KU09OKCkpLm1hcCgoW2hlYWRlciwgdmFsdWVdKSA9PiBoZWFkZXIgKyAnOiAnICsgdmFsdWUpLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgIHJldHVybiAnQXhpb3NIZWFkZXJzJztcbiAgfVxuXG4gIHN0YXRpYyBmcm9tKHRoaW5nKSB7XG4gICAgcmV0dXJuIHRoaW5nIGluc3RhbmNlb2YgdGhpcyA/IHRoaW5nIDogbmV3IHRoaXModGhpbmcpO1xuICB9XG5cbiAgc3RhdGljIGNvbmNhdChmaXJzdCwgLi4udGFyZ2V0cykge1xuICAgIGNvbnN0IGNvbXB1dGVkID0gbmV3IHRoaXMoZmlyc3QpO1xuXG4gICAgdGFyZ2V0cy5mb3JFYWNoKCh0YXJnZXQpID0+IGNvbXB1dGVkLnNldCh0YXJnZXQpKTtcblxuICAgIHJldHVybiBjb21wdXRlZDtcbiAgfVxuXG4gIHN0YXRpYyBhY2Nlc3NvcihoZWFkZXIpIHtcbiAgICBjb25zdCBpbnRlcm5hbHMgPSB0aGlzWyRpbnRlcm5hbHNdID0gKHRoaXNbJGludGVybmFsc10gPSB7XG4gICAgICBhY2Nlc3NvcnM6IHt9XG4gICAgfSk7XG5cbiAgICBjb25zdCBhY2Nlc3NvcnMgPSBpbnRlcm5hbHMuYWNjZXNzb3JzO1xuICAgIGNvbnN0IHByb3RvdHlwZSA9IHRoaXMucHJvdG90eXBlO1xuXG4gICAgZnVuY3Rpb24gZGVmaW5lQWNjZXNzb3IoX2hlYWRlcikge1xuICAgICAgY29uc3QgbEhlYWRlciA9IG5vcm1hbGl6ZUhlYWRlcihfaGVhZGVyKTtcblxuICAgICAgaWYgKCFhY2Nlc3NvcnNbbEhlYWRlcl0pIHtcbiAgICAgICAgYnVpbGRBY2Nlc3NvcnMocHJvdG90eXBlLCBfaGVhZGVyKTtcbiAgICAgICAgYWNjZXNzb3JzW2xIZWFkZXJdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1dGlscy5pc0FycmF5KGhlYWRlcikgPyBoZWFkZXIuZm9yRWFjaChkZWZpbmVBY2Nlc3NvcikgOiBkZWZpbmVBY2Nlc3NvcihoZWFkZXIpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuQXhpb3NIZWFkZXJzLmFjY2Vzc29yKFsnQ29udGVudC1UeXBlJywgJ0NvbnRlbnQtTGVuZ3RoJywgJ0FjY2VwdCcsICdBY2NlcHQtRW5jb2RpbmcnLCAnVXNlci1BZ2VudCcsICdBdXRob3JpemF0aW9uJ10pO1xuXG51dGlscy5mcmVlemVNZXRob2RzKEF4aW9zSGVhZGVycy5wcm90b3R5cGUpO1xudXRpbHMuZnJlZXplTWV0aG9kcyhBeGlvc0hlYWRlcnMpO1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvc0hlYWRlcnM7XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcbmltcG9ydCBkZWZhdWx0cyBmcm9tICcuLi9kZWZhdWx0cy9pbmRleC5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gJy4uL2NvcmUvQXhpb3NIZWFkZXJzLmpzJztcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHBhcmFtIHs/T2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2Ugb2JqZWN0XG4gKlxuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGZucywgcmVzcG9uc2UpIHtcbiAgY29uc3QgY29uZmlnID0gdGhpcyB8fCBkZWZhdWx0cztcbiAgY29uc3QgY29udGV4dCA9IHJlc3BvbnNlIHx8IGNvbmZpZztcbiAgY29uc3QgaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKGNvbnRleHQuaGVhZGVycyk7XG4gIGxldCBkYXRhID0gY29udGV4dC5kYXRhO1xuXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4uY2FsbChjb25maWcsIGRhdGEsIGhlYWRlcnMubm9ybWFsaXplKCksIHJlc3BvbnNlID8gcmVzcG9uc2Uuc3RhdHVzIDogdW5kZWZpbmVkKTtcbiAgfSk7XG5cbiAgaGVhZGVycy5ub3JtYWxpemUoKTtcblxuICByZXR1cm4gZGF0YTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tICcuLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcblxuLyoqXG4gKiBBIGBDYW5jZWxlZEVycm9yYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gcmVxdWVzdCBUaGUgcmVxdWVzdC5cbiAqXG4gKiBAcmV0dXJucyB7Q2FuY2VsZWRFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuXG4gKi9cbmZ1bmN0aW9uIENhbmNlbGVkRXJyb3IobWVzc2FnZSwgY29uZmlnLCByZXF1ZXN0KSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLGVxZXFlcVxuICBBeGlvc0Vycm9yLmNhbGwodGhpcywgbWVzc2FnZSA9PSBudWxsID8gJ2NhbmNlbGVkJyA6IG1lc3NhZ2UsIEF4aW9zRXJyb3IuRVJSX0NBTkNFTEVELCBjb25maWcsIHJlcXVlc3QpO1xuICB0aGlzLm5hbWUgPSAnQ2FuY2VsZWRFcnJvcic7XG59XG5cbnV0aWxzLmluaGVyaXRzKENhbmNlbGVkRXJyb3IsIEF4aW9zRXJyb3IsIHtcbiAgX19DQU5DRUxfXzogdHJ1ZVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IENhbmNlbGVkRXJyb3I7XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBBeGlvc0Vycm9yIGZyb20gJy4vQXhpb3NFcnJvci5qcyc7XG5cbi8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKlxuICogQHJldHVybnMge29iamVjdH0gVGhlIHJlc3BvbnNlLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuICBjb25zdCB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztcbiAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgfSBlbHNlIHtcbiAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoXG4gICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgW0F4aW9zRXJyb3IuRVJSX0JBRF9SRVFVRVNULCBBeGlvc0Vycm9yLkVSUl9CQURfUkVTUE9OU0VdW01hdGguZmxvb3IocmVzcG9uc2Uuc3RhdHVzIC8gMTAwKSAtIDRdLFxuICAgICAgcmVzcG9uc2UuY29uZmlnLFxuICAgICAgcmVzcG9uc2UucmVxdWVzdCxcbiAgICAgIHJlc3BvbnNlXG4gICAgKSk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuaW1wb3J0IHBsYXRmb3JtIGZyb20gJy4uL3BsYXRmb3JtL2luZGV4LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgcGxhdGZvcm0uaXNTdGFuZGFyZEJyb3dzZXJFbnYgP1xuXG4vLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICBjb25zdCBjb29raWUgPSBbXTtcbiAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuXG4gICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhwYXRoKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhkb21haW4pKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7XG4gICAgICAgIHJldHVybiAobWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbCk7XG4gICAgICB9LFxuXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7XG4gICAgICAgIHRoaXMud3JpdGUobmFtZSwgJycsIERhdGUubm93KCkgLSA4NjQwMDAwMCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkoKSA6XG5cbi8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG4gICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkge1xuICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG4gIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi5cbiAgcmV0dXJuIC9eKFthLXpdW2EtelxcZCtcXC0uXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgaXNBYnNvbHV0ZVVSTCBmcm9tICcuLi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanMnO1xuaW1wb3J0IGNvbWJpbmVVUkxzIGZyb20gJy4uL2hlbHBlcnMvY29tYmluZVVSTHMuanMnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgYmFzZVVSTCB3aXRoIHRoZSByZXF1ZXN0ZWRVUkwsXG4gKiBvbmx5IHdoZW4gdGhlIHJlcXVlc3RlZFVSTCBpcyBub3QgYWxyZWFkeSBhbiBhYnNvbHV0ZSBVUkwuXG4gKiBJZiB0aGUgcmVxdWVzdFVSTCBpcyBhYnNvbHV0ZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSByZXF1ZXN0ZWRVUkwgdW50b3VjaGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RlZFVSTCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgdG8gY29tYmluZVxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBmdWxsIHBhdGhcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYnVpbGRGdWxsUGF0aChiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpIHtcbiAgaWYgKGJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwocmVxdWVzdGVkVVJMKSkge1xuICAgIHJldHVybiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpO1xuICB9XG4gIHJldHVybiByZXF1ZXN0ZWRVUkw7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXRmb3JtLmlzU3RhbmRhcmRCcm93c2VyRW52ID9cblxuLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0XG4vLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICBjb25zdCBtc2llID0gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICBjb25zdCB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBsZXQgb3JpZ2luVVJMO1xuXG4gICAgLyoqXG4gICAgKiBQYXJzZSBhIFVSTCB0byBkaXNjb3ZlciBpdCdzIGNvbXBvbmVudHNcbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgdG8gYmUgcGFyc2VkXG4gICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICovXG4gICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHtcbiAgICAgIGxldCBocmVmID0gdXJsO1xuXG4gICAgICBpZiAobXNpZSkge1xuICAgICAgICAvLyBJRSBuZWVkcyBhdHRyaWJ1dGUgc2V0IHR3aWNlIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgICAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgICAgIH1cblxuICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cbiAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG4gICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG4gICAgICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG4gICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcbiAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcbiAgICAgICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxuICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG4gICAgICAgICAgdXJsUGFyc2luZ05vZGUucGF0aG5hbWUgOlxuICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICB9O1xuICAgIH1cblxuICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyZXF1ZXN0VVJMKSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSAodXRpbHMuaXNTdHJpbmcocmVxdWVzdFVSTCkpID8gcmVzb2x2ZVVSTChyZXF1ZXN0VVJMKSA6IHJlcXVlc3RVUkw7XG4gICAgICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmXG4gICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZVByb3RvY29sKHVybCkge1xuICBjb25zdCBtYXRjaCA9IC9eKFstK1xcd117MSwyNX0pKDo/XFwvXFwvfDopLy5leGVjKHVybCk7XG4gIHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXSB8fCAnJztcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDYWxjdWxhdGUgZGF0YSBtYXhSYXRlXG4gKiBAcGFyYW0ge051bWJlcn0gW3NhbXBsZXNDb3VudD0gMTBdXG4gKiBAcGFyYW0ge051bWJlcn0gW21pbj0gMTAwMF1cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gc3BlZWRvbWV0ZXIoc2FtcGxlc0NvdW50LCBtaW4pIHtcbiAgc2FtcGxlc0NvdW50ID0gc2FtcGxlc0NvdW50IHx8IDEwO1xuICBjb25zdCBieXRlcyA9IG5ldyBBcnJheShzYW1wbGVzQ291bnQpO1xuICBjb25zdCB0aW1lc3RhbXBzID0gbmV3IEFycmF5KHNhbXBsZXNDb3VudCk7XG4gIGxldCBoZWFkID0gMDtcbiAgbGV0IHRhaWwgPSAwO1xuICBsZXQgZmlyc3RTYW1wbGVUUztcblxuICBtaW4gPSBtaW4gIT09IHVuZGVmaW5lZCA/IG1pbiA6IDEwMDA7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHB1c2goY2h1bmtMZW5ndGgpIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgY29uc3Qgc3RhcnRlZEF0ID0gdGltZXN0YW1wc1t0YWlsXTtcblxuICAgIGlmICghZmlyc3RTYW1wbGVUUykge1xuICAgICAgZmlyc3RTYW1wbGVUUyA9IG5vdztcbiAgICB9XG5cbiAgICBieXRlc1toZWFkXSA9IGNodW5rTGVuZ3RoO1xuICAgIHRpbWVzdGFtcHNbaGVhZF0gPSBub3c7XG5cbiAgICBsZXQgaSA9IHRhaWw7XG4gICAgbGV0IGJ5dGVzQ291bnQgPSAwO1xuXG4gICAgd2hpbGUgKGkgIT09IGhlYWQpIHtcbiAgICAgIGJ5dGVzQ291bnQgKz0gYnl0ZXNbaSsrXTtcbiAgICAgIGkgPSBpICUgc2FtcGxlc0NvdW50O1xuICAgIH1cblxuICAgIGhlYWQgPSAoaGVhZCArIDEpICUgc2FtcGxlc0NvdW50O1xuXG4gICAgaWYgKGhlYWQgPT09IHRhaWwpIHtcbiAgICAgIHRhaWwgPSAodGFpbCArIDEpICUgc2FtcGxlc0NvdW50O1xuICAgIH1cblxuICAgIGlmIChub3cgLSBmaXJzdFNhbXBsZVRTIDwgbWluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGFzc2VkID0gc3RhcnRlZEF0ICYmIG5vdyAtIHN0YXJ0ZWRBdDtcblxuICAgIHJldHVybiBwYXNzZWQgPyBNYXRoLnJvdW5kKGJ5dGVzQ291bnQgKiAxMDAwIC8gcGFzc2VkKSA6IHVuZGVmaW5lZDtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3BlZWRvbWV0ZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcbmltcG9ydCBzZXR0bGUgZnJvbSAnLi8uLi9jb3JlL3NldHRsZS5qcyc7XG5pbXBvcnQgY29va2llcyBmcm9tICcuLy4uL2hlbHBlcnMvY29va2llcy5qcyc7XG5pbXBvcnQgYnVpbGRVUkwgZnJvbSAnLi8uLi9oZWxwZXJzL2J1aWxkVVJMLmpzJztcbmltcG9ydCBidWlsZEZ1bGxQYXRoIGZyb20gJy4uL2NvcmUvYnVpbGRGdWxsUGF0aC5qcyc7XG5pbXBvcnQgaXNVUkxTYW1lT3JpZ2luIGZyb20gJy4vLi4vaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMnO1xuaW1wb3J0IHRyYW5zaXRpb25hbERlZmF1bHRzIGZyb20gJy4uL2RlZmF1bHRzL3RyYW5zaXRpb25hbC5qcyc7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tICcuLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IHBhcnNlUHJvdG9jb2wgZnJvbSAnLi4vaGVscGVycy9wYXJzZVByb3RvY29sLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gJy4uL2NvcmUvQXhpb3NIZWFkZXJzLmpzJztcbmltcG9ydCBzcGVlZG9tZXRlciBmcm9tICcuLi9oZWxwZXJzL3NwZWVkb21ldGVyLmpzJztcblxuZnVuY3Rpb24gcHJvZ3Jlc3NFdmVudFJlZHVjZXIobGlzdGVuZXIsIGlzRG93bmxvYWRTdHJlYW0pIHtcbiAgbGV0IGJ5dGVzTm90aWZpZWQgPSAwO1xuICBjb25zdCBfc3BlZWRvbWV0ZXIgPSBzcGVlZG9tZXRlcig1MCwgMjUwKTtcblxuICByZXR1cm4gZSA9PiB7XG4gICAgY29uc3QgbG9hZGVkID0gZS5sb2FkZWQ7XG4gICAgY29uc3QgdG90YWwgPSBlLmxlbmd0aENvbXB1dGFibGUgPyBlLnRvdGFsIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHByb2dyZXNzQnl0ZXMgPSBsb2FkZWQgLSBieXRlc05vdGlmaWVkO1xuICAgIGNvbnN0IHJhdGUgPSBfc3BlZWRvbWV0ZXIocHJvZ3Jlc3NCeXRlcyk7XG4gICAgY29uc3QgaW5SYW5nZSA9IGxvYWRlZCA8PSB0b3RhbDtcblxuICAgIGJ5dGVzTm90aWZpZWQgPSBsb2FkZWQ7XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbG9hZGVkLFxuICAgICAgdG90YWwsXG4gICAgICBwcm9ncmVzczogdG90YWwgPyAobG9hZGVkIC8gdG90YWwpIDogdW5kZWZpbmVkLFxuICAgICAgYnl0ZXM6IHByb2dyZXNzQnl0ZXMsXG4gICAgICByYXRlOiByYXRlID8gcmF0ZSA6IHVuZGVmaW5lZCxcbiAgICAgIGVzdGltYXRlZDogcmF0ZSAmJiB0b3RhbCAmJiBpblJhbmdlID8gKHRvdGFsIC0gbG9hZGVkKSAvIHJhdGUgOiB1bmRlZmluZWQsXG4gICAgICBldmVudDogZVxuICAgIH07XG5cbiAgICBkYXRhW2lzRG93bmxvYWRTdHJlYW0gPyAnZG93bmxvYWQnIDogJ3VwbG9hZCddID0gdHJ1ZTtcblxuICAgIGxpc3RlbmVyKGRhdGEpO1xuICB9O1xufVxuXG5jb25zdCBpc1hIUkFkYXB0ZXJTdXBwb3J0ZWQgPSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnO1xuXG5leHBvcnQgZGVmYXVsdCBpc1hIUkFkYXB0ZXJTdXBwb3J0ZWQgJiYgZnVuY3Rpb24gKGNvbmZpZykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xuICAgIGxldCByZXF1ZXN0RGF0YSA9IGNvbmZpZy5kYXRhO1xuICAgIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oY29uZmlnLmhlYWRlcnMpLm5vcm1hbGl6ZSgpO1xuICAgIGNvbnN0IHJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgbGV0IG9uQ2FuY2VsZWQ7XG4gICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICAgICAgY29uZmlnLmNhbmNlbFRva2VuLnVuc3Vic2NyaWJlKG9uQ2FuY2VsZWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29uZmlnLnNpZ25hbCkge1xuICAgICAgICBjb25maWcuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpICYmIChwbGF0Zm9ybS5pc1N0YW5kYXJkQnJvd3NlckVudiB8fCBwbGF0Zm9ybS5pc1N0YW5kYXJkQnJvd3NlcldlYldvcmtlckVudikpIHtcbiAgICAgIHJlcXVlc3RIZWFkZXJzLnNldENvbnRlbnRUeXBlKGZhbHNlKTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuICAgIH1cblxuICAgIGxldCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAvLyBIVFRQIGJhc2ljIGF1dGhlbnRpY2F0aW9uXG4gICAgaWYgKGNvbmZpZy5hdXRoKSB7XG4gICAgICBjb25zdCB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnO1xuICAgICAgY29uc3QgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCA/IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChjb25maWcuYXV0aC5wYXNzd29yZCkpIDogJyc7XG4gICAgICByZXF1ZXN0SGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCkpO1xuICAgIH1cblxuICAgIGNvbnN0IGZ1bGxQYXRoID0gYnVpbGRGdWxsUGF0aChjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7XG5cbiAgICByZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBidWlsZFVSTChmdWxsUGF0aCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblxuICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG4gICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cbiAgICBmdW5jdGlvbiBvbmxvYWRlbmQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2VcbiAgICAgIGNvbnN0IHJlc3BvbnNlSGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKFxuICAgICAgICAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ICYmIHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcbiAgICAgICk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSAhcmVzcG9uc2VUeXBlIHx8IHJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnIHx8IHJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nID9cbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogcmVxdWVzdC5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKGZ1bmN0aW9uIF9yZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCBmdW5jdGlvbiBfcmVqZWN0KGVycikge1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoJ29ubG9hZGVuZCcgaW4gcmVxdWVzdCkge1xuICAgICAgLy8gVXNlIG9ubG9hZGVuZCBpZiBhdmFpbGFibGVcbiAgICAgIHJlcXVlc3Qub25sb2FkZW5kID0gb25sb2FkZW5kO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlIHRvIGVtdWxhdGUgb25sb2FkZW5kXG4gICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCB8fCByZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbiAgICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcbiAgICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVhZHlzdGF0ZSBoYW5kbGVyIGlzIGNhbGxpbmcgYmVmb3JlIG9uZXJyb3Igb3Igb250aW1lb3V0IGhhbmRsZXJzLFxuICAgICAgICAvLyBzbyB3ZSBzaG91bGQgY2FsbCBvbmxvYWRlbmQgb24gdGhlIG5leHQgJ3RpY2snXG4gICAgICAgIHNldFRpbWVvdXQob25sb2FkZW5kKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGJyb3dzZXIgcmVxdWVzdCBjYW5jZWxsYXRpb24gKGFzIG9wcG9zZWQgdG8gYSBtYW51YWwgY2FuY2VsbGF0aW9uKVxuICAgIHJlcXVlc3Qub25hYm9ydCA9IGZ1bmN0aW9uIGhhbmRsZUFib3J0KCkge1xuICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKCdSZXF1ZXN0IGFib3J0ZWQnLCBBeGlvc0Vycm9yLkVDT05OQUJPUlRFRCwgY29uZmlnLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKCdOZXR3b3JrIEVycm9yJywgQXhpb3NFcnJvci5FUlJfTkVUV09SSywgY29uZmlnLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgdGltZW91dFxuICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcbiAgICAgIGxldCB0aW1lb3V0RXJyb3JNZXNzYWdlID0gY29uZmlnLnRpbWVvdXQgPyAndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnIDogJ3RpbWVvdXQgZXhjZWVkZWQnO1xuICAgICAgY29uc3QgdHJhbnNpdGlvbmFsID0gY29uZmlnLnRyYW5zaXRpb25hbCB8fCB0cmFuc2l0aW9uYWxEZWZhdWx0cztcbiAgICAgIGlmIChjb25maWcudGltZW91dEVycm9yTWVzc2FnZSkge1xuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlID0gY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2U7XG4gICAgICB9XG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoXG4gICAgICAgIHRpbWVvdXRFcnJvck1lc3NhZ2UsXG4gICAgICAgIHRyYW5zaXRpb25hbC5jbGFyaWZ5VGltZW91dEVycm9yID8gQXhpb3NFcnJvci5FVElNRURPVVQgOiBBeGlvc0Vycm9yLkVDT05OQUJPUlRFRCxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuICAgIGlmIChwbGF0Zm9ybS5pc1N0YW5kYXJkQnJvd3NlckVudikge1xuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICBjb25zdCB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oZnVsbFBhdGgpKVxuICAgICAgICAmJiBjb25maWcueHNyZkNvb2tpZU5hbWUgJiYgY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSk7XG5cbiAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnMuc2V0KGNvbmZpZy54c3JmSGVhZGVyTmFtZSwgeHNyZlZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gICAgcmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCAmJiByZXF1ZXN0SGVhZGVycy5zZXRDb250ZW50VHlwZShudWxsKTtcblxuICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7XG4gICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLnRvSlNPTigpLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7XG4gICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSAhIWNvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChyZXNwb25zZVR5cGUgJiYgcmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgcHJvZ3Jlc3NFdmVudFJlZHVjZXIoY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcywgdHJ1ZSkpO1xuICAgIH1cblxuICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25VcGxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJyAmJiByZXF1ZXN0LnVwbG9hZCkge1xuICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBwcm9ncmVzc0V2ZW50UmVkdWNlcihjb25maWcub25VcGxvYWRQcm9ncmVzcykpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4gfHwgY29uZmlnLnNpZ25hbCkge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAgIG9uQ2FuY2VsZWQgPSBjYW5jZWwgPT4ge1xuICAgICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KCFjYW5jZWwgfHwgY2FuY2VsLnR5cGUgPyBuZXcgQ2FuY2VsZWRFcnJvcihudWxsLCBjb25maWcsIHJlcXVlc3QpIDogY2FuY2VsKTtcbiAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbiAmJiBjb25maWcuY2FuY2VsVG9rZW4uc3Vic2NyaWJlKG9uQ2FuY2VsZWQpO1xuICAgICAgaWYgKGNvbmZpZy5zaWduYWwpIHtcbiAgICAgICAgY29uZmlnLnNpZ25hbC5hYm9ydGVkID8gb25DYW5jZWxlZCgpIDogY29uZmlnLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uQ2FuY2VsZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHByb3RvY29sID0gcGFyc2VQcm90b2NvbChmdWxsUGF0aCk7XG5cbiAgICBpZiAocHJvdG9jb2wgJiYgcGxhdGZvcm0ucHJvdG9jb2xzLmluZGV4T2YocHJvdG9jb2wpID09PSAtMSkge1xuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKCdVbnN1cHBvcnRlZCBwcm90b2NvbCAnICsgcHJvdG9jb2wgKyAnOicsIEF4aW9zRXJyb3IuRVJSX0JBRF9SRVFVRVNULCBjb25maWcpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEgfHwgbnVsbCk7XG4gIH0pO1xufVxuIiwiaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcbmltcG9ydCBodHRwQWRhcHRlciBmcm9tICcuL2h0dHAuanMnO1xuaW1wb3J0IHhockFkYXB0ZXIgZnJvbSAnLi94aHIuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSBcIi4uL2NvcmUvQXhpb3NFcnJvci5qc1wiO1xuXG5jb25zdCBrbm93bkFkYXB0ZXJzID0ge1xuICBodHRwOiBodHRwQWRhcHRlcixcbiAgeGhyOiB4aHJBZGFwdGVyXG59XG5cbnV0aWxzLmZvckVhY2goa25vd25BZGFwdGVycywgKGZuLCB2YWx1ZSkgPT4ge1xuICBpZihmbikge1xuICAgIHRyeSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sICduYW1lJywge3ZhbHVlfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgJ2FkYXB0ZXJOYW1lJywge3ZhbHVlfSk7XG4gIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGdldEFkYXB0ZXI6IChhZGFwdGVycykgPT4ge1xuICAgIGFkYXB0ZXJzID0gdXRpbHMuaXNBcnJheShhZGFwdGVycykgPyBhZGFwdGVycyA6IFthZGFwdGVyc107XG5cbiAgICBjb25zdCB7bGVuZ3RofSA9IGFkYXB0ZXJzO1xuICAgIGxldCBuYW1lT3JBZGFwdGVyO1xuICAgIGxldCBhZGFwdGVyO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbmFtZU9yQWRhcHRlciA9IGFkYXB0ZXJzW2ldO1xuICAgICAgaWYoKGFkYXB0ZXIgPSB1dGlscy5pc1N0cmluZyhuYW1lT3JBZGFwdGVyKSA/IGtub3duQWRhcHRlcnNbbmFtZU9yQWRhcHRlci50b0xvd2VyQ2FzZSgpXSA6IG5hbWVPckFkYXB0ZXIpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghYWRhcHRlcikge1xuICAgICAgaWYgKGFkYXB0ZXIgPT09IGZhbHNlKSB7XG4gICAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICAgIGBBZGFwdGVyICR7bmFtZU9yQWRhcHRlcn0gaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgZW52aXJvbm1lbnRgLFxuICAgICAgICAgICdFUlJfTk9UX1NVUFBPUlQnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgdXRpbHMuaGFzT3duUHJvcChrbm93bkFkYXB0ZXJzLCBuYW1lT3JBZGFwdGVyKSA/XG4gICAgICAgICAgYEFkYXB0ZXIgJyR7bmFtZU9yQWRhcHRlcn0nIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGJ1aWxkYCA6XG4gICAgICAgICAgYFVua25vd24gYWRhcHRlciAnJHtuYW1lT3JBZGFwdGVyfSdgXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghdXRpbHMuaXNGdW5jdGlvbihhZGFwdGVyKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYWRhcHRlciBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgIH1cblxuICAgIHJldHVybiBhZGFwdGVyO1xuICB9LFxuICBhZGFwdGVyczoga25vd25BZGFwdGVyc1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHJhbnNmb3JtRGF0YSBmcm9tICcuL3RyYW5zZm9ybURhdGEuanMnO1xuaW1wb3J0IGlzQ2FuY2VsIGZyb20gJy4uL2NhbmNlbC9pc0NhbmNlbC5qcyc7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi4vZGVmYXVsdHMvaW5kZXguanMnO1xuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tICcuLi9jb3JlL0F4aW9zSGVhZGVycy5qcyc7XG5pbXBvcnQgYWRhcHRlcnMgZnJvbSBcIi4uL2FkYXB0ZXJzL2FkYXB0ZXJzLmpzXCI7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cblxuICBpZiAoY29uZmlnLnNpZ25hbCAmJiBjb25maWcuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICB0aHJvdyBuZXcgQ2FuY2VsZWRFcnJvcihudWxsLCBjb25maWcpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgY29uZmlnLmhlYWRlcnMgPSBBeGlvc0hlYWRlcnMuZnJvbShjb25maWcuaGVhZGVycyk7XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICBjb25maWcsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICBpZiAoWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLmluZGV4T2YoY29uZmlnLm1ldGhvZCkgIT09IC0xKSB7XG4gICAgY29uZmlnLmhlYWRlcnMuc2V0Q29udGVudFR5cGUoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsIGZhbHNlKTtcbiAgfVxuXG4gIGNvbnN0IGFkYXB0ZXIgPSBhZGFwdGVycy5nZXRBZGFwdGVyKGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXIpO1xuXG4gIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG4gICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKFxuICAgICAgY29uZmlnLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2VcbiAgICApO1xuXG4gICAgcmVzcG9uc2UuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKHJlc3BvbnNlLmhlYWRlcnMpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7XG4gICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG4gICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZVxuICAgICAgICApO1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuL0F4aW9zSGVhZGVycy5qc1wiO1xuXG5jb25zdCBoZWFkZXJzVG9PYmplY3QgPSAodGhpbmcpID0+IHRoaW5nIGluc3RhbmNlb2YgQXhpb3NIZWFkZXJzID8gdGhpbmcudG9KU09OKCkgOiB0aGluZztcblxuLyoqXG4gKiBDb25maWctc3BlY2lmaWMgbWVyZ2UtZnVuY3Rpb24gd2hpY2ggY3JlYXRlcyBhIG5ldyBjb25maWctb2JqZWN0XG4gKiBieSBtZXJnaW5nIHR3byBjb25maWd1cmF0aW9uIG9iamVjdHMgdG9nZXRoZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzFcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcyXG4gKlxuICogQHJldHVybnMge09iamVjdH0gTmV3IG9iamVjdCByZXN1bHRpbmcgZnJvbSBtZXJnaW5nIGNvbmZpZzIgdG8gY29uZmlnMVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBjb25maWcyID0gY29uZmlnMiB8fCB7fTtcbiAgY29uc3QgY29uZmlnID0ge307XG5cbiAgZnVuY3Rpb24gZ2V0TWVyZ2VkVmFsdWUodGFyZ2V0LCBzb3VyY2UsIGNhc2VsZXNzKSB7XG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QodGFyZ2V0KSAmJiB1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZS5jYWxsKHtjYXNlbGVzc30sIHRhcmdldCwgc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlKHt9LCBzb3VyY2UpO1xuICAgIH0gZWxzZSBpZiAodXRpbHMuaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gc291cmNlLnNsaWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gbWVyZ2VEZWVwUHJvcGVydGllcyhhLCBiLCBjYXNlbGVzcykge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYikpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShhLCBiLCBjYXNlbGVzcyk7XG4gICAgfSBlbHNlIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGEsIGNhc2VsZXNzKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gdmFsdWVGcm9tQ29uZmlnMihhLCBiKSB7XG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChiKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgYik7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIGRlZmF1bHRUb0NvbmZpZzIoYSwgYikge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYikpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGIpO1xuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGEpKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBhKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gbWVyZ2VEaXJlY3RLZXlzKGEsIGIsIHByb3ApIHtcbiAgICBpZiAocHJvcCBpbiBjb25maWcyKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUoYSwgYik7XG4gICAgfSBlbHNlIGlmIChwcm9wIGluIGNvbmZpZzEpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGEpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG1lcmdlTWFwID0ge1xuICAgIHVybDogdmFsdWVGcm9tQ29uZmlnMixcbiAgICBtZXRob2Q6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgZGF0YTogdmFsdWVGcm9tQ29uZmlnMixcbiAgICBiYXNlVVJMOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdHJhbnNmb3JtUmVzcG9uc2U6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgcGFyYW1zU2VyaWFsaXplcjogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB0aW1lb3V0OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHRpbWVvdXRNZXNzYWdlOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHdpdGhDcmVkZW50aWFsczogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBhZGFwdGVyOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHJlc3BvbnNlVHlwZTogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB4c3JmQ29va2llTmFtZTogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB4c3JmSGVhZGVyTmFtZTogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBvblVwbG9hZFByb2dyZXNzOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIG9uRG93bmxvYWRQcm9ncmVzczogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBkZWNvbXByZXNzOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIG1heENvbnRlbnRMZW5ndGg6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgbWF4Qm9keUxlbmd0aDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBiZWZvcmVSZWRpcmVjdDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB0cmFuc3BvcnQ6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgaHR0cEFnZW50OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGh0dHBzQWdlbnQ6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgY2FuY2VsVG9rZW46IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgc29ja2V0UGF0aDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICByZXNwb25zZUVuY29kaW5nOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHZhbGlkYXRlU3RhdHVzOiBtZXJnZURpcmVjdEtleXMsXG4gICAgaGVhZGVyczogKGEsIGIpID0+IG1lcmdlRGVlcFByb3BlcnRpZXMoaGVhZGVyc1RvT2JqZWN0KGEpLCBoZWFkZXJzVG9PYmplY3QoYiksIHRydWUpXG4gIH07XG5cbiAgdXRpbHMuZm9yRWFjaChPYmplY3Qua2V5cyhjb25maWcxKS5jb25jYXQoT2JqZWN0LmtleXMoY29uZmlnMikpLCBmdW5jdGlvbiBjb21wdXRlQ29uZmlnVmFsdWUocHJvcCkge1xuICAgIGNvbnN0IG1lcmdlID0gbWVyZ2VNYXBbcHJvcF0gfHwgbWVyZ2VEZWVwUHJvcGVydGllcztcbiAgICBjb25zdCBjb25maWdWYWx1ZSA9IG1lcmdlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0sIHByb3ApO1xuICAgICh1dGlscy5pc1VuZGVmaW5lZChjb25maWdWYWx1ZSkgJiYgbWVyZ2UgIT09IG1lcmdlRGlyZWN0S2V5cykgfHwgKGNvbmZpZ1twcm9wXSA9IGNvbmZpZ1ZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn1cbiIsImV4cG9ydCBjb25zdCBWRVJTSU9OID0gXCIxLjMuNFwiOyIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtWRVJTSU9OfSBmcm9tICcuLi9lbnYvZGF0YS5qcyc7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tICcuLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuXG5jb25zdCB2YWxpZGF0b3JzID0ge307XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5bJ29iamVjdCcsICdib29sZWFuJywgJ251bWJlcicsICdmdW5jdGlvbicsICdzdHJpbmcnLCAnc3ltYm9sJ10uZm9yRWFjaCgodHlwZSwgaSkgPT4ge1xuICB2YWxpZGF0b3JzW3R5cGVdID0gZnVuY3Rpb24gdmFsaWRhdG9yKHRoaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gdHlwZSB8fCAnYScgKyAoaSA8IDEgPyAnbiAnIDogJyAnKSArIHR5cGU7XG4gIH07XG59KTtcblxuY29uc3QgZGVwcmVjYXRlZFdhcm5pbmdzID0ge307XG5cbi8qKlxuICogVHJhbnNpdGlvbmFsIG9wdGlvbiB2YWxpZGF0b3JcbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufGJvb2xlYW4/fSB2YWxpZGF0b3IgLSBzZXQgdG8gZmFsc2UgaWYgdGhlIHRyYW5zaXRpb25hbCBvcHRpb24gaGFzIGJlZW4gcmVtb3ZlZFxuICogQHBhcmFtIHtzdHJpbmc/fSB2ZXJzaW9uIC0gZGVwcmVjYXRlZCB2ZXJzaW9uIC8gcmVtb3ZlZCBzaW5jZSB2ZXJzaW9uXG4gKiBAcGFyYW0ge3N0cmluZz99IG1lc3NhZ2UgLSBzb21lIG1lc3NhZ2Ugd2l0aCBhZGRpdGlvbmFsIGluZm9cbiAqXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb259XG4gKi9cbnZhbGlkYXRvcnMudHJhbnNpdGlvbmFsID0gZnVuY3Rpb24gdHJhbnNpdGlvbmFsKHZhbGlkYXRvciwgdmVyc2lvbiwgbWVzc2FnZSkge1xuICBmdW5jdGlvbiBmb3JtYXRNZXNzYWdlKG9wdCwgZGVzYykge1xuICAgIHJldHVybiAnW0F4aW9zIHYnICsgVkVSU0lPTiArICddIFRyYW5zaXRpb25hbCBvcHRpb24gXFwnJyArIG9wdCArICdcXCcnICsgZGVzYyArIChtZXNzYWdlID8gJy4gJyArIG1lc3NhZ2UgOiAnJyk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICByZXR1cm4gKHZhbHVlLCBvcHQsIG9wdHMpID0+IHtcbiAgICBpZiAodmFsaWRhdG9yID09PSBmYWxzZSkge1xuICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoXG4gICAgICAgIGZvcm1hdE1lc3NhZ2Uob3B0LCAnIGhhcyBiZWVuIHJlbW92ZWQnICsgKHZlcnNpb24gPyAnIGluICcgKyB2ZXJzaW9uIDogJycpKSxcbiAgICAgICAgQXhpb3NFcnJvci5FUlJfREVQUkVDQVRFRFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodmVyc2lvbiAmJiAhZGVwcmVjYXRlZFdhcm5pbmdzW29wdF0pIHtcbiAgICAgIGRlcHJlY2F0ZWRXYXJuaW5nc1tvcHRdID0gdHJ1ZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGZvcm1hdE1lc3NhZ2UoXG4gICAgICAgICAgb3B0LFxuICAgICAgICAgICcgaGFzIGJlZW4gZGVwcmVjYXRlZCBzaW5jZSB2JyArIHZlcnNpb24gKyAnIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlJ1xuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0b3IgPyB2YWxpZGF0b3IodmFsdWUsIG9wdCwgb3B0cykgOiB0cnVlO1xuICB9O1xufTtcblxuLyoqXG4gKiBBc3NlcnQgb2JqZWN0J3MgcHJvcGVydGllcyB0eXBlXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7b2JqZWN0fSBzY2hlbWFcbiAqIEBwYXJhbSB7Ym9vbGVhbj99IGFsbG93VW5rbm93blxuICpcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0T3B0aW9ucyhvcHRpb25zLCBzY2hlbWEsIGFsbG93VW5rbm93bikge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ29wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QnLCBBeGlvc0Vycm9yLkVSUl9CQURfT1BUSU9OX1ZBTFVFKTtcbiAgfVxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gIGxldCBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgY29uc3Qgb3B0ID0ga2V5c1tpXTtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBzY2hlbWFbb3B0XTtcbiAgICBpZiAodmFsaWRhdG9yKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9wdGlvbnNbb3B0XTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdGlvbnMpO1xuICAgICAgaWYgKHJlc3VsdCAhPT0gdHJ1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcignb3B0aW9uICcgKyBvcHQgKyAnIG11c3QgYmUgJyArIHJlc3VsdCwgQXhpb3NFcnJvci5FUlJfQkFEX09QVElPTl9WQUxVRSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGFsbG93VW5rbm93biAhPT0gdHJ1ZSkge1xuICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ1Vua25vd24gb3B0aW9uICcgKyBvcHQsIEF4aW9zRXJyb3IuRVJSX0JBRF9PUFRJT04pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGFzc2VydE9wdGlvbnMsXG4gIHZhbGlkYXRvcnNcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcbmltcG9ydCBidWlsZFVSTCBmcm9tICcuLi9oZWxwZXJzL2J1aWxkVVJMLmpzJztcbmltcG9ydCBJbnRlcmNlcHRvck1hbmFnZXIgZnJvbSAnLi9JbnRlcmNlcHRvck1hbmFnZXIuanMnO1xuaW1wb3J0IGRpc3BhdGNoUmVxdWVzdCBmcm9tICcuL2Rpc3BhdGNoUmVxdWVzdC5qcyc7XG5pbXBvcnQgbWVyZ2VDb25maWcgZnJvbSAnLi9tZXJnZUNvbmZpZy5qcyc7XG5pbXBvcnQgYnVpbGRGdWxsUGF0aCBmcm9tICcuL2J1aWxkRnVsbFBhdGguanMnO1xuaW1wb3J0IHZhbGlkYXRvciBmcm9tICcuLi9oZWxwZXJzL3ZhbGlkYXRvci5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gJy4vQXhpb3NIZWFkZXJzLmpzJztcblxuY29uc3QgdmFsaWRhdG9ycyA9IHZhbGlkYXRvci52YWxpZGF0b3JzO1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZUNvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICpcbiAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICovXG5jbGFzcyBBeGlvcyB7XG4gIGNvbnN0cnVjdG9yKGluc3RhbmNlQ29uZmlnKSB7XG4gICAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuICAgIHRoaXMuaW50ZXJjZXB0b3JzID0ge1xuICAgICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuICAgICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRGlzcGF0Y2ggYSByZXF1ZXN0XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gY29uZmlnT3JVcmwgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICAgKiBAcGFyYW0gez9PYmplY3R9IGNvbmZpZ1xuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkXG4gICAqL1xuICByZXF1ZXN0KGNvbmZpZ09yVXJsLCBjb25maWcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG4gICAgaWYgKHR5cGVvZiBjb25maWdPclVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICAgIGNvbmZpZy51cmwgPSBjb25maWdPclVybDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnID0gY29uZmlnT3JVcmwgfHwge307XG4gICAgfVxuXG4gICAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTtcblxuICAgIGNvbnN0IHt0cmFuc2l0aW9uYWwsIHBhcmFtc1NlcmlhbGl6ZXIsIGhlYWRlcnN9ID0gY29uZmlnO1xuXG4gICAgaWYgKHRyYW5zaXRpb25hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWxpZGF0b3IuYXNzZXJ0T3B0aW9ucyh0cmFuc2l0aW9uYWwsIHtcbiAgICAgICAgc2lsZW50SlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICAgIGZvcmNlZEpTT05QYXJzaW5nOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pLFxuICAgICAgICBjbGFyaWZ5VGltZW91dEVycm9yOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pXG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFsaWRhdG9yLmFzc2VydE9wdGlvbnMocGFyYW1zU2VyaWFsaXplciwge1xuICAgICAgICBlbmNvZGU6IHZhbGlkYXRvcnMuZnVuY3Rpb24sXG4gICAgICAgIHNlcmlhbGl6ZTogdmFsaWRhdG9ycy5mdW5jdGlvblxuICAgICAgfSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gU2V0IGNvbmZpZy5tZXRob2RcbiAgICBjb25maWcubWV0aG9kID0gKGNvbmZpZy5tZXRob2QgfHwgdGhpcy5kZWZhdWx0cy5tZXRob2QgfHwgJ2dldCcpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBsZXQgY29udGV4dEhlYWRlcnM7XG5cbiAgICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgICBjb250ZXh0SGVhZGVycyA9IGhlYWRlcnMgJiYgdXRpbHMubWVyZ2UoXG4gICAgICBoZWFkZXJzLmNvbW1vbixcbiAgICAgIGhlYWRlcnNbY29uZmlnLm1ldGhvZF1cbiAgICApO1xuXG4gICAgY29udGV4dEhlYWRlcnMgJiYgdXRpbHMuZm9yRWFjaChcbiAgICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgICAgKG1ldGhvZCkgPT4ge1xuICAgICAgICBkZWxldGUgaGVhZGVyc1ttZXRob2RdO1xuICAgICAgfVxuICAgICk7XG5cbiAgICBjb25maWcuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5jb25jYXQoY29udGV4dEhlYWRlcnMsIGhlYWRlcnMpO1xuXG4gICAgLy8gZmlsdGVyIG91dCBza2lwcGVkIGludGVyY2VwdG9yc1xuICAgIGNvbnN0IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluID0gW107XG4gICAgbGV0IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHRydWU7XG4gICAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgICBpZiAodHlwZW9mIGludGVyY2VwdG9yLnJ1bldoZW4gPT09ICdmdW5jdGlvbicgJiYgaW50ZXJjZXB0b3IucnVuV2hlbihjb25maWcpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyAmJiBpbnRlcmNlcHRvci5zeW5jaHJvbm91cztcblxuICAgICAgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICAgIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgICByZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgICB9KTtcblxuICAgIGxldCBwcm9taXNlO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgbGVuO1xuXG4gICAgaWYgKCFzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMpIHtcbiAgICAgIGNvbnN0IGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdC5iaW5kKHRoaXMpLCB1bmRlZmluZWRdO1xuICAgICAgY2hhaW4udW5zaGlmdC5hcHBseShjaGFpbiwgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4pO1xuICAgICAgY2hhaW4ucHVzaC5hcHBseShjaGFpbiwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTtcbiAgICAgIGxlbiA9IGNoYWluLmxlbmd0aDtcblxuICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXG4gICAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluW2krK10sIGNoYWluW2krK10pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZW4gPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi5sZW5ndGg7XG5cbiAgICBsZXQgbmV3Q29uZmlnID0gY29uZmlnO1xuXG4gICAgaSA9IDA7XG5cbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgY29uc3Qgb25GdWxmaWxsZWQgPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbltpKytdO1xuICAgICAgY29uc3Qgb25SZWplY3RlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluW2krK107XG4gICAgICB0cnkge1xuICAgICAgICBuZXdDb25maWcgPSBvbkZ1bGZpbGxlZChuZXdDb25maWcpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgb25SZWplY3RlZC5jYWxsKHRoaXMsIGVycm9yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHByb21pc2UgPSBkaXNwYXRjaFJlcXVlc3QuY2FsbCh0aGlzLCBuZXdDb25maWcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIGkgPSAwO1xuICAgIGxlbiA9IHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbi5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW5baSsrXSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluW2krK10pO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgZ2V0VXJpKGNvbmZpZykge1xuICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG4gICAgY29uc3QgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcbiAgICByZXR1cm4gYnVpbGRVUkwoZnVsbFBhdGgsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKTtcbiAgfVxufVxuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZCxcbiAgICAgIHVybCxcbiAgICAgIGRhdGE6IChjb25maWcgfHwge30pLmRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cblxuICBmdW5jdGlvbiBnZW5lcmF0ZUhUVFBNZXRob2QoaXNGb3JtKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGh0dHBNZXRob2QodXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QobWVyZ2VDb25maWcoY29uZmlnIHx8IHt9LCB7XG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgaGVhZGVyczogaXNGb3JtID8ge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcbiAgICAgICAgfSA6IHt9LFxuICAgICAgICB1cmwsXG4gICAgICAgIGRhdGFcbiAgICAgIH0pKTtcbiAgICB9O1xuICB9XG5cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBnZW5lcmF0ZUhUVFBNZXRob2QoKTtcblxuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kICsgJ0Zvcm0nXSA9IGdlbmVyYXRlSFRUUE1ldGhvZCh0cnVlKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvcztcbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi9DYW5jZWxlZEVycm9yLmpzJztcblxuLyoqXG4gKiBBIGBDYW5jZWxUb2tlbmAgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVxdWVzdCBjYW5jZWxsYXRpb24gb2YgYW4gb3BlcmF0aW9uLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Q2FuY2VsVG9rZW59XG4gKi9cbmNsYXNzIENhbmNlbFRva2VuIHtcbiAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgbGV0IHJlc29sdmVQcm9taXNlO1xuXG4gICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHRva2VuID0gdGhpcztcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdGhpcy5wcm9taXNlLnRoZW4oY2FuY2VsID0+IHtcbiAgICAgIGlmICghdG9rZW4uX2xpc3RlbmVycykgcmV0dXJuO1xuXG4gICAgICBsZXQgaSA9IHRva2VuLl9saXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoaS0tID4gMCkge1xuICAgICAgICB0b2tlbi5fbGlzdGVuZXJzW2ldKGNhbmNlbCk7XG4gICAgICB9XG4gICAgICB0b2tlbi5fbGlzdGVuZXJzID0gbnVsbDtcbiAgICB9KTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdGhpcy5wcm9taXNlLnRoZW4gPSBvbmZ1bGZpbGxlZCA9PiB7XG4gICAgICBsZXQgX3Jlc29sdmU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICB0b2tlbi5zdWJzY3JpYmUocmVzb2x2ZSk7XG4gICAgICAgIF9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIH0pLnRoZW4ob25mdWxmaWxsZWQpO1xuXG4gICAgICBwcm9taXNlLmNhbmNlbCA9IGZ1bmN0aW9uIHJlamVjdCgpIHtcbiAgICAgICAgdG9rZW4udW5zdWJzY3JpYmUoX3Jlc29sdmUpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlLCBjb25maWcsIHJlcXVlc3QpIHtcbiAgICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbGVkRXJyb3IobWVzc2FnZSwgY29uZmlnLCByZXF1ZXN0KTtcbiAgICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gICAqL1xuICB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICAgIGlmICh0aGlzLnJlYXNvbikge1xuICAgICAgdGhyb3cgdGhpcy5yZWFzb247XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byB0aGUgY2FuY2VsIHNpZ25hbFxuICAgKi9cblxuICBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICAgIGxpc3RlbmVyKHRoaXMucmVhc29uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtsaXN0ZW5lcl07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlIGZyb20gdGhlIGNhbmNlbCBzaWduYWxcbiAgICovXG5cbiAgdW5zdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLFxuICAgKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICAgKi9cbiAgc3RhdGljIHNvdXJjZSgpIHtcbiAgICBsZXQgY2FuY2VsO1xuICAgIGNvbnN0IHRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGMpIHtcbiAgICAgIGNhbmNlbCA9IGM7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRva2VuLFxuICAgICAgY2FuY2VsXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYW5jZWxUb2tlbjtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHBheWxvYWQgaXMgYW4gZXJyb3IgdGhyb3duIGJ5IEF4aW9zXG4gKlxuICogQHBhcmFtIHsqfSBwYXlsb2FkIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHBheWxvYWQgaXMgYW4gZXJyb3IgdGhyb3duIGJ5IEF4aW9zLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNBeGlvc0Vycm9yKHBheWxvYWQpIHtcbiAgcmV0dXJuIHV0aWxzLmlzT2JqZWN0KHBheWxvYWQpICYmIChwYXlsb2FkLmlzQXhpb3NFcnJvciA9PT0gdHJ1ZSk7XG59XG4iLCJjb25zdCBIdHRwU3RhdHVzQ29kZSA9IHtcbiAgQ29udGludWU6IDEwMCxcbiAgU3dpdGNoaW5nUHJvdG9jb2xzOiAxMDEsXG4gIFByb2Nlc3Npbmc6IDEwMixcbiAgRWFybHlIaW50czogMTAzLFxuICBPazogMjAwLFxuICBDcmVhdGVkOiAyMDEsXG4gIEFjY2VwdGVkOiAyMDIsXG4gIE5vbkF1dGhvcml0YXRpdmVJbmZvcm1hdGlvbjogMjAzLFxuICBOb0NvbnRlbnQ6IDIwNCxcbiAgUmVzZXRDb250ZW50OiAyMDUsXG4gIFBhcnRpYWxDb250ZW50OiAyMDYsXG4gIE11bHRpU3RhdHVzOiAyMDcsXG4gIEFscmVhZHlSZXBvcnRlZDogMjA4LFxuICBJbVVzZWQ6IDIyNixcbiAgTXVsdGlwbGVDaG9pY2VzOiAzMDAsXG4gIE1vdmVkUGVybWFuZW50bHk6IDMwMSxcbiAgRm91bmQ6IDMwMixcbiAgU2VlT3RoZXI6IDMwMyxcbiAgTm90TW9kaWZpZWQ6IDMwNCxcbiAgVXNlUHJveHk6IDMwNSxcbiAgVW51c2VkOiAzMDYsXG4gIFRlbXBvcmFyeVJlZGlyZWN0OiAzMDcsXG4gIFBlcm1hbmVudFJlZGlyZWN0OiAzMDgsXG4gIEJhZFJlcXVlc3Q6IDQwMCxcbiAgVW5hdXRob3JpemVkOiA0MDEsXG4gIFBheW1lbnRSZXF1aXJlZDogNDAyLFxuICBGb3JiaWRkZW46IDQwMyxcbiAgTm90Rm91bmQ6IDQwNCxcbiAgTWV0aG9kTm90QWxsb3dlZDogNDA1LFxuICBOb3RBY2NlcHRhYmxlOiA0MDYsXG4gIFByb3h5QXV0aGVudGljYXRpb25SZXF1aXJlZDogNDA3LFxuICBSZXF1ZXN0VGltZW91dDogNDA4LFxuICBDb25mbGljdDogNDA5LFxuICBHb25lOiA0MTAsXG4gIExlbmd0aFJlcXVpcmVkOiA0MTEsXG4gIFByZWNvbmRpdGlvbkZhaWxlZDogNDEyLFxuICBQYXlsb2FkVG9vTGFyZ2U6IDQxMyxcbiAgVXJpVG9vTG9uZzogNDE0LFxuICBVbnN1cHBvcnRlZE1lZGlhVHlwZTogNDE1LFxuICBSYW5nZU5vdFNhdGlzZmlhYmxlOiA0MTYsXG4gIEV4cGVjdGF0aW9uRmFpbGVkOiA0MTcsXG4gIEltQVRlYXBvdDogNDE4LFxuICBNaXNkaXJlY3RlZFJlcXVlc3Q6IDQyMSxcbiAgVW5wcm9jZXNzYWJsZUVudGl0eTogNDIyLFxuICBMb2NrZWQ6IDQyMyxcbiAgRmFpbGVkRGVwZW5kZW5jeTogNDI0LFxuICBUb29FYXJseTogNDI1LFxuICBVcGdyYWRlUmVxdWlyZWQ6IDQyNixcbiAgUHJlY29uZGl0aW9uUmVxdWlyZWQ6IDQyOCxcbiAgVG9vTWFueVJlcXVlc3RzOiA0MjksXG4gIFJlcXVlc3RIZWFkZXJGaWVsZHNUb29MYXJnZTogNDMxLFxuICBVbmF2YWlsYWJsZUZvckxlZ2FsUmVhc29uczogNDUxLFxuICBJbnRlcm5hbFNlcnZlckVycm9yOiA1MDAsXG4gIE5vdEltcGxlbWVudGVkOiA1MDEsXG4gIEJhZEdhdGV3YXk6IDUwMixcbiAgU2VydmljZVVuYXZhaWxhYmxlOiA1MDMsXG4gIEdhdGV3YXlUaW1lb3V0OiA1MDQsXG4gIEh0dHBWZXJzaW9uTm90U3VwcG9ydGVkOiA1MDUsXG4gIFZhcmlhbnRBbHNvTmVnb3RpYXRlczogNTA2LFxuICBJbnN1ZmZpY2llbnRTdG9yYWdlOiA1MDcsXG4gIExvb3BEZXRlY3RlZDogNTA4LFxuICBOb3RFeHRlbmRlZDogNTEwLFxuICBOZXR3b3JrQXV0aGVudGljYXRpb25SZXF1aXJlZDogNTExLFxufTtcblxuT2JqZWN0LmVudHJpZXMoSHR0cFN0YXR1c0NvZGUpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICBIdHRwU3RhdHVzQ29kZVt2YWx1ZV0gPSBrZXk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgSHR0cFN0YXR1c0NvZGU7XG4iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCBiaW5kIGZyb20gJy4vaGVscGVycy9iaW5kLmpzJztcbmltcG9ydCBBeGlvcyBmcm9tICcuL2NvcmUvQXhpb3MuanMnO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gJy4vY29yZS9tZXJnZUNvbmZpZy5qcyc7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi9kZWZhdWx0cy9pbmRleC5qcyc7XG5pbXBvcnQgZm9ybURhdGFUb0pTT04gZnJvbSAnLi9oZWxwZXJzL2Zvcm1EYXRhVG9KU09OLmpzJztcbmltcG9ydCBDYW5jZWxlZEVycm9yIGZyb20gJy4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IENhbmNlbFRva2VuIGZyb20gJy4vY2FuY2VsL0NhbmNlbFRva2VuLmpzJztcbmltcG9ydCBpc0NhbmNlbCBmcm9tICcuL2NhbmNlbC9pc0NhbmNlbC5qcyc7XG5pbXBvcnQge1ZFUlNJT059IGZyb20gJy4vZW52L2RhdGEuanMnO1xuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi9oZWxwZXJzL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IHNwcmVhZCBmcm9tICcuL2hlbHBlcnMvc3ByZWFkLmpzJztcbmltcG9ydCBpc0F4aW9zRXJyb3IgZnJvbSAnLi9oZWxwZXJzL2lzQXhpb3NFcnJvci5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuL2NvcmUvQXhpb3NIZWFkZXJzLmpzXCI7XG5pbXBvcnQgSHR0cFN0YXR1c0NvZGUgZnJvbSAnLi9oZWxwZXJzL0h0dHBTdGF0dXNDb2RlLmpzJztcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICpcbiAqIEByZXR1cm5zIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICBjb25zdCBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICBjb25zdCBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0LCB7YWxsT3duS2V5czogdHJ1ZX0pO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQsIG51bGwsIHthbGxPd25LZXlzOiB0cnVlfSk7XG5cbiAgLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuICBpbnN0YW5jZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgICByZXR1cm4gY3JlYXRlSW5zdGFuY2UobWVyZ2VDb25maWcoZGVmYXVsdENvbmZpZywgaW5zdGFuY2VDb25maWcpKTtcbiAgfTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxuY29uc3QgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWxlZEVycm9yID0gQ2FuY2VsZWRFcnJvcjtcbmF4aW9zLkNhbmNlbFRva2VuID0gQ2FuY2VsVG9rZW47XG5heGlvcy5pc0NhbmNlbCA9IGlzQ2FuY2VsO1xuYXhpb3MuVkVSU0lPTiA9IFZFUlNJT047XG5heGlvcy50b0Zvcm1EYXRhID0gdG9Gb3JtRGF0YTtcblxuLy8gRXhwb3NlIEF4aW9zRXJyb3IgY2xhc3NcbmF4aW9zLkF4aW9zRXJyb3IgPSBBeGlvc0Vycm9yO1xuXG4vLyBhbGlhcyBmb3IgQ2FuY2VsZWRFcnJvciBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuYXhpb3MuQ2FuY2VsID0gYXhpb3MuQ2FuY2VsZWRFcnJvcjtcblxuLy8gRXhwb3NlIGFsbC9zcHJlYWRcbmF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcblxuYXhpb3Muc3ByZWFkID0gc3ByZWFkO1xuXG4vLyBFeHBvc2UgaXNBeGlvc0Vycm9yXG5heGlvcy5pc0F4aW9zRXJyb3IgPSBpc0F4aW9zRXJyb3I7XG5cbi8vIEV4cG9zZSBtZXJnZUNvbmZpZ1xuYXhpb3MubWVyZ2VDb25maWcgPSBtZXJnZUNvbmZpZztcblxuYXhpb3MuQXhpb3NIZWFkZXJzID0gQXhpb3NIZWFkZXJzO1xuXG5heGlvcy5mb3JtVG9KU09OID0gdGhpbmcgPT4gZm9ybURhdGFUb0pTT04odXRpbHMuaXNIVE1MRm9ybSh0aGluZykgPyBuZXcgRm9ybURhdGEodGhpbmcpIDogdGhpbmcpO1xuXG5heGlvcy5IdHRwU3RhdHVzQ29kZSA9IEh0dHBTdGF0dXNDb2RlO1xuXG5heGlvcy5kZWZhdWx0ID0gYXhpb3M7XG5cbi8vIHRoaXMgbW9kdWxlIHNob3VsZCBvbmx5IGhhdmUgYSBkZWZhdWx0IGV4cG9ydFxuZXhwb3J0IGRlZmF1bHQgYXhpb3NcbiIsImltcG9ydCB7IE5vdGlmaWNhdGlvbiB9IGZyb20gJy4uL2ludGVybmFsL2NsYXNzZXMvbm90aWZpY2F0aW9uJztcclxuaW1wb3J0IExvZ2dlckZhY3RvcnksIHsgTG9nTGV2ZWxFbnVtIH0gZnJvbSAnemhpLWxvZyc7XHJcbmltcG9ydCB7IEZpbGVDbGllbnQgfSBmcm9tICcuLi9hcGkvZmlsZS1hcGknO1xyXG5cclxuaW1wb3J0IHpoX0NOIGZyb20gJy4uL2kxOG4vemhfQ04uanNvbic7XHJcbmltcG9ydCBlbl9VUyBmcm9tICcuLi9pMThuL2VuX1VTLmpzb24nO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuY29uc3QgZmFjdG9yeSA9IExvZ2dlckZhY3RvcnkuY3VzdG9tTG9nRmFjdG9yeShMb2dMZXZlbEVudW0uTE9HX0xFVkVMX0lORk8sICdQbHVnaW5TeXN0ZW0nKTtcclxuY29uc3QgcGx1Z2luU3lzdGVtTG9nZ2VyID0gZmFjdG9yeS5nZXRMb2dnZXIoJ3BsdWdpbiBzeXN0ZW0nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBsb2cgPSAoLi4ucCkgPT4ge1xyXG4gICAgcGx1Z2luU3lzdGVtTG9nZ2VyLmluZm8oLi4ucCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcmVxdWVzdCA9IGF4aW9zLmNyZWF0ZSh7XHJcbiAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcclxuICAgICAgICBQcmFnbWE6ICduby1jYWNoZScsXHJcbiAgICAgICAgRXhwaXJlczogJzAnLFxyXG4gICAgfSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3Qgc2xlZXAgPSBhc3luYyAodDogbnVtYmVyKSA9PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUobnVsbCksIHQpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZXJyb3IgPSAoLi4ucCkgPT4gcGx1Z2luU3lzdGVtTG9nZ2VyLmVycm9yKC4uLnApO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbG9hZFdpbmRvdyA9ICgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRDcm9zc1BsYXRmb3JtQXBwRGF0YUZvbGRlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IFBST0NFU1NfRU5WID0gd2luZG93LnByb2Nlc3M/LmVudjtcclxuICAgIGxldCBjb25maWdGaWxlUGF0aDtcclxuICAgIGlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnZGFyd2luJykge1xyXG4gICAgICAgIGNvbmZpZ0ZpbGVQYXRoID0gYCR7UFJPQ0VTU19FTlYuSE9NRX0vTGlicmFyeS9BcHBsaWNhdGlvbiBTdXBwb3J0YDtcclxuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xyXG4gICAgICAgIC8vIFJvYW1pbmfljIXlkKvlnKhBUFBEQVRB5Lit5LqGXHJcbiAgICAgICAgY29uZmlnRmlsZVBhdGggPSBQUk9DRVNTX0VOVi5BUFBEQVRBO1xyXG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnbGludXgnKSB7XHJcbiAgICAgICAgY29uZmlnRmlsZVBhdGggPSBQUk9DRVNTX0VOVi5IT01FO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbmZpZ0ZpbGVQYXRoO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIGdlblVVSUQgIGdlbmVybmF0ZSBVVUlELCBjb3B5IGZyb20gc2l5dWFuXHJcbiAqIEByZXR1cm5zXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2VuVVVJRCA9ICgpID0+XHJcbiAgICAoWzFlN10udG9TdHJpbmcoKSArIC0xZTMgKyAtNGUzICsgLThlMyArIC0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLCAoYykgPT5cclxuICAgICAgICAocGFyc2VJbnQoYywgMTApIF4gKHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50MzJBcnJheSgxKSlbMF0gJiAoMTUgPj4gKHBhcnNlSW50KGMsIDEwKSAvIDQpKSkpLnRvU3RyaW5nKDE2KVxyXG4gICAgKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0RpcihwOiBzdHJpbmcpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignY2FuIG5vdCBnZXQgZGlyIGJ5IHBhdGg6JyArIHApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNFeGlzdHMocDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IEZpbGVDbGllbnQuZ2V0SW5zdGFuY2VBcGkoKS5maWxlQXBpLmdldEZpbGUocCk7XHJcbiAgICAgICAgcmV0dXJuIHJlcyAhPT0gbnVsbDtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEluZm8ge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmcpIHt9XHJcbn1cclxuLy8gcm9tZS1pZ25vcmUgbGludC9zdXNwaWNpb3VzL25vU2hhZG93UmVzdHJpY3RlZE5hbWVzOiA8ZXhwbGFuYXRpb24+XHJcbmV4cG9ydCAgY2xhc3MgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmcpIHt9XHJcbn1cclxuZXhwb3J0IGNsYXNzIFdhcm5pbmcge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmcpIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzaG93SW5mb01lc3NhZ2UgPSAobWVzc2FnZTogc3RyaW5nLCB0aW1lb3V0PzogbnVtYmVyKSA9PiBuZXcgTm90aWZpY2F0aW9uKHsgdHlwZTogJ2luZm8nLCBtZXNzYWdlLCB0aW1lb3V0IH0pLnNob3coKTtcclxuZXhwb3J0IGNvbnN0IHNob3dFcnJvck1lc3NhZ2UgPSAobWVzc2FnZTogc3RyaW5nLCB0aW1lb3V0PzogbnVtYmVyKSA9PiBuZXcgTm90aWZpY2F0aW9uKHsgdHlwZTogJ2Vycm9yJywgbWVzc2FnZSwgdGltZW91dCB9KS5zaG93KCk7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0TG9nZ2VyID0gKG5hbWU6IHN0cmluZykgPT4gZmFjdG9yeS5nZXRMb2dnZXIobmFtZSk7XHJcblxyXG5jb25zdCBsYW5ncyA9IHtcclxuICAgIHpoX0NOLFxyXG4gICAgZW5fVVMsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgXyA9ICh2OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgcmV0dXJuIGxhbmdzW3dpbmRvdy5zaXl1YW4uY29uZmlnLmxhbmddW3ZdIHx8ICdub3QgZGVmaW5lZCc7XHJcbn07XHJcbiIsImV4cG9ydCB2YXIgTkFNRURfVEFHID0gXCJuYW1lZFwiO1xuZXhwb3J0IHZhciBOQU1FX1RBRyA9IFwibmFtZVwiO1xuZXhwb3J0IHZhciBVTk1BTkFHRURfVEFHID0gXCJ1bm1hbmFnZWRcIjtcbmV4cG9ydCB2YXIgT1BUSU9OQUxfVEFHID0gXCJvcHRpb25hbFwiO1xuZXhwb3J0IHZhciBJTkpFQ1RfVEFHID0gXCJpbmplY3RcIjtcbmV4cG9ydCB2YXIgTVVMVElfSU5KRUNUX1RBRyA9IFwibXVsdGlfaW5qZWN0XCI7XG5leHBvcnQgdmFyIFRBR0dFRCA9IFwiaW52ZXJzaWZ5OnRhZ2dlZFwiO1xuZXhwb3J0IHZhciBUQUdHRURfUFJPUCA9IFwiaW52ZXJzaWZ5OnRhZ2dlZF9wcm9wc1wiO1xuZXhwb3J0IHZhciBQQVJBTV9UWVBFUyA9IFwiaW52ZXJzaWZ5OnBhcmFtdHlwZXNcIjtcbmV4cG9ydCB2YXIgREVTSUdOX1BBUkFNX1RZUEVTID0gXCJkZXNpZ246cGFyYW10eXBlc1wiO1xuZXhwb3J0IHZhciBQT1NUX0NPTlNUUlVDVCA9IFwicG9zdF9jb25zdHJ1Y3RcIjtcbmV4cG9ydCB2YXIgUFJFX0RFU1RST1kgPSBcInByZV9kZXN0cm95XCI7XG5mdW5jdGlvbiBnZXROb25DdXN0b21UYWdLZXlzKCkge1xuICAgIHJldHVybiBbXG4gICAgICAgIElOSkVDVF9UQUcsXG4gICAgICAgIE1VTFRJX0lOSkVDVF9UQUcsXG4gICAgICAgIE5BTUVfVEFHLFxuICAgICAgICBVTk1BTkFHRURfVEFHLFxuICAgICAgICBOQU1FRF9UQUcsXG4gICAgICAgIE9QVElPTkFMX1RBRyxcbiAgICBdO1xufVxuZXhwb3J0IHZhciBOT05fQ1VTVE9NX1RBR19LRVlTID0gZ2V0Tm9uQ3VzdG9tVGFnS2V5cygpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWV0YWRhdGFfa2V5cy5qcy5tYXAiLCJ2YXIgQmluZGluZ1Njb3BlRW51bSA9IHtcbiAgICBSZXF1ZXN0OiBcIlJlcXVlc3RcIixcbiAgICBTaW5nbGV0b246IFwiU2luZ2xldG9uXCIsXG4gICAgVHJhbnNpZW50OiBcIlRyYW5zaWVudFwiXG59O1xudmFyIEJpbmRpbmdUeXBlRW51bSA9IHtcbiAgICBDb25zdGFudFZhbHVlOiBcIkNvbnN0YW50VmFsdWVcIixcbiAgICBDb25zdHJ1Y3RvcjogXCJDb25zdHJ1Y3RvclwiLFxuICAgIER5bmFtaWNWYWx1ZTogXCJEeW5hbWljVmFsdWVcIixcbiAgICBGYWN0b3J5OiBcIkZhY3RvcnlcIixcbiAgICBGdW5jdGlvbjogXCJGdW5jdGlvblwiLFxuICAgIEluc3RhbmNlOiBcIkluc3RhbmNlXCIsXG4gICAgSW52YWxpZDogXCJJbnZhbGlkXCIsXG4gICAgUHJvdmlkZXI6IFwiUHJvdmlkZXJcIlxufTtcbnZhciBUYXJnZXRUeXBlRW51bSA9IHtcbiAgICBDbGFzc1Byb3BlcnR5OiBcIkNsYXNzUHJvcGVydHlcIixcbiAgICBDb25zdHJ1Y3RvckFyZ3VtZW50OiBcIkNvbnN0cnVjdG9yQXJndW1lbnRcIixcbiAgICBWYXJpYWJsZTogXCJWYXJpYWJsZVwiXG59O1xuZXhwb3J0IHsgQmluZGluZ1Njb3BlRW51bSwgQmluZGluZ1R5cGVFbnVtLCBUYXJnZXRUeXBlRW51bSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl0ZXJhbF90eXBlcy5qcy5tYXAiLCJ2YXIgaWRDb3VudGVyID0gMDtcbmZ1bmN0aW9uIGlkKCkge1xuICAgIHJldHVybiBpZENvdW50ZXIrKztcbn1cbmV4cG9ydCB7IGlkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pZC5qcy5tYXAiLCJpbXBvcnQgeyBCaW5kaW5nU2NvcGVFbnVtLCBCaW5kaW5nVHlwZUVudW0gfSBmcm9tIFwiLi4vY29uc3RhbnRzL2xpdGVyYWxfdHlwZXNcIjtcbmltcG9ydCB7IGlkIH0gZnJvbSBcIi4uL3V0aWxzL2lkXCI7XG52YXIgQmluZGluZyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmluZGluZyhzZXJ2aWNlSWRlbnRpZmllciwgc2NvcGUpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkKCk7XG4gICAgICAgIHRoaXMuYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VydmljZUlkZW50aWZpZXIgPSBzZXJ2aWNlSWRlbnRpZmllcjtcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgICAgICB0aGlzLnR5cGUgPSBCaW5kaW5nVHlwZUVudW0uSW52YWxpZDtcbiAgICAgICAgdGhpcy5jb25zdHJhaW50ID0gZnVuY3Rpb24gKHJlcXVlc3QpIHsgcmV0dXJuIHRydWU7IH07XG4gICAgICAgIHRoaXMuaW1wbGVtZW50YXRpb25UeXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYWNoZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvdmlkZXIgPSBudWxsO1xuICAgICAgICB0aGlzLm9uQWN0aXZhdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMub25EZWFjdGl2YXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmR5bmFtaWNWYWx1ZSA9IG51bGw7XG4gICAgfVxuICAgIEJpbmRpbmcucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2xvbmUgPSBuZXcgQmluZGluZyh0aGlzLnNlcnZpY2VJZGVudGlmaWVyLCB0aGlzLnNjb3BlKTtcbiAgICAgICAgY2xvbmUuYWN0aXZhdGVkID0gKGNsb25lLnNjb3BlID09PSBCaW5kaW5nU2NvcGVFbnVtLlNpbmdsZXRvbikgPyB0aGlzLmFjdGl2YXRlZCA6IGZhbHNlO1xuICAgICAgICBjbG9uZS5pbXBsZW1lbnRhdGlvblR5cGUgPSB0aGlzLmltcGxlbWVudGF0aW9uVHlwZTtcbiAgICAgICAgY2xvbmUuZHluYW1pY1ZhbHVlID0gdGhpcy5keW5hbWljVmFsdWU7XG4gICAgICAgIGNsb25lLnNjb3BlID0gdGhpcy5zY29wZTtcbiAgICAgICAgY2xvbmUudHlwZSA9IHRoaXMudHlwZTtcbiAgICAgICAgY2xvbmUuZmFjdG9yeSA9IHRoaXMuZmFjdG9yeTtcbiAgICAgICAgY2xvbmUucHJvdmlkZXIgPSB0aGlzLnByb3ZpZGVyO1xuICAgICAgICBjbG9uZS5jb25zdHJhaW50ID0gdGhpcy5jb25zdHJhaW50O1xuICAgICAgICBjbG9uZS5vbkFjdGl2YXRpb24gPSB0aGlzLm9uQWN0aXZhdGlvbjtcbiAgICAgICAgY2xvbmUub25EZWFjdGl2YXRpb24gPSB0aGlzLm9uRGVhY3RpdmF0aW9uO1xuICAgICAgICBjbG9uZS5jYWNoZSA9IHRoaXMuY2FjaGU7XG4gICAgICAgIHJldHVybiBjbG9uZTtcbiAgICB9O1xuICAgIHJldHVybiBCaW5kaW5nO1xufSgpKTtcbmV4cG9ydCB7IEJpbmRpbmcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmRpbmcuanMubWFwIiwiZXhwb3J0IHZhciBEVVBMSUNBVEVEX0lOSkVDVEFCTEVfREVDT1JBVE9SID0gXCJDYW5ub3QgYXBwbHkgQGluamVjdGFibGUgZGVjb3JhdG9yIG11bHRpcGxlIHRpbWVzLlwiO1xuZXhwb3J0IHZhciBEVVBMSUNBVEVEX01FVEFEQVRBID0gXCJNZXRhZGF0YSBrZXkgd2FzIHVzZWQgbW9yZSB0aGFuIG9uY2UgaW4gYSBwYXJhbWV0ZXI6XCI7XG5leHBvcnQgdmFyIE5VTExfQVJHVU1FTlQgPSBcIk5VTEwgYXJndW1lbnRcIjtcbmV4cG9ydCB2YXIgS0VZX05PVF9GT1VORCA9IFwiS2V5IE5vdCBGb3VuZFwiO1xuZXhwb3J0IHZhciBBTUJJR1VPVVNfTUFUQ0ggPSBcIkFtYmlndW91cyBtYXRjaCBmb3VuZCBmb3Igc2VydmljZUlkZW50aWZpZXI6XCI7XG5leHBvcnQgdmFyIENBTk5PVF9VTkJJTkQgPSBcIkNvdWxkIG5vdCB1bmJpbmQgc2VydmljZUlkZW50aWZpZXI6XCI7XG5leHBvcnQgdmFyIE5PVF9SRUdJU1RFUkVEID0gXCJObyBtYXRjaGluZyBiaW5kaW5ncyBmb3VuZCBmb3Igc2VydmljZUlkZW50aWZpZXI6XCI7XG5leHBvcnQgdmFyIE1JU1NJTkdfSU5KRUNUQUJMRV9BTk5PVEFUSU9OID0gXCJNaXNzaW5nIHJlcXVpcmVkIEBpbmplY3RhYmxlIGFubm90YXRpb24gaW46XCI7XG5leHBvcnQgdmFyIE1JU1NJTkdfSU5KRUNUX0FOTk9UQVRJT04gPSBcIk1pc3NpbmcgcmVxdWlyZWQgQGluamVjdCBvciBAbXVsdGlJbmplY3QgYW5ub3RhdGlvbiBpbjpcIjtcbmV4cG9ydCB2YXIgVU5ERUZJTkVEX0lOSkVDVF9BTk5PVEFUSU9OID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICByZXR1cm4gXCJAaW5qZWN0IGNhbGxlZCB3aXRoIHVuZGVmaW5lZCB0aGlzIGNvdWxkIG1lYW4gdGhhdCB0aGUgY2xhc3MgXCIgKyBuYW1lICsgXCIgaGFzIFwiICtcbiAgICAgICAgXCJhIGNpcmN1bGFyIGRlcGVuZGVuY3kgcHJvYmxlbS4gWW91IGNhbiB1c2UgYSBMYXp5U2VydmljZUlkZW50aWZlciB0byAgXCIgK1xuICAgICAgICBcIm92ZXJjb21lIHRoaXMgbGltaXRhdGlvbi5cIjtcbn07XG5leHBvcnQgdmFyIENJUkNVTEFSX0RFUEVOREVOQ1kgPSBcIkNpcmN1bGFyIGRlcGVuZGVuY3kgZm91bmQ6XCI7XG5leHBvcnQgdmFyIE5PVF9JTVBMRU1FTlRFRCA9IFwiU29ycnksIHRoaXMgZmVhdHVyZSBpcyBub3QgZnVsbHkgaW1wbGVtZW50ZWQgeWV0LlwiO1xuZXhwb3J0IHZhciBJTlZBTElEX0JJTkRJTkdfVFlQRSA9IFwiSW52YWxpZCBiaW5kaW5nIHR5cGU6XCI7XG5leHBvcnQgdmFyIE5PX01PUkVfU05BUFNIT1RTX0FWQUlMQUJMRSA9IFwiTm8gc25hcHNob3QgYXZhaWxhYmxlIHRvIHJlc3RvcmUuXCI7XG5leHBvcnQgdmFyIElOVkFMSURfTUlERExFV0FSRV9SRVRVUk4gPSBcIkludmFsaWQgcmV0dXJuIHR5cGUgaW4gbWlkZGxld2FyZS4gTWlkZGxld2FyZSBtdXN0IHJldHVybiFcIjtcbmV4cG9ydCB2YXIgSU5WQUxJRF9GVU5DVElPTl9CSU5ESU5HID0gXCJWYWx1ZSBwcm92aWRlZCB0byBmdW5jdGlvbiBiaW5kaW5nIG11c3QgYmUgYSBmdW5jdGlvbiFcIjtcbmV4cG9ydCB2YXIgTEFaWV9JTl9TWU5DID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gXCJZb3UgYXJlIGF0dGVtcHRpbmcgdG8gY29uc3RydWN0ICdcIiArIGtleSArIFwiJyBpbiBhIHN5bmNocm9ub3VzIHdheVxcbiBidXQgaXQgaGFzIGFzeW5jaHJvbm91cyBkZXBlbmRlbmNpZXMuXCI7IH07XG5leHBvcnQgdmFyIElOVkFMSURfVE9fU0VMRl9WQUxVRSA9IFwiVGhlIHRvU2VsZiBmdW5jdGlvbiBjYW4gb25seSBiZSBhcHBsaWVkIHdoZW4gYSBjb25zdHJ1Y3RvciBpcyBcIiArXG4gICAgXCJ1c2VkIGFzIHNlcnZpY2UgaWRlbnRpZmllclwiO1xuZXhwb3J0IHZhciBJTlZBTElEX0RFQ09SQVRPUl9PUEVSQVRJT04gPSBcIlRoZSBAaW5qZWN0IEBtdWx0aUluamVjdCBAdGFnZ2VkIGFuZCBAbmFtZWQgZGVjb3JhdG9ycyBcIiArXG4gICAgXCJtdXN0IGJlIGFwcGxpZWQgdG8gdGhlIHBhcmFtZXRlcnMgb2YgYSBjbGFzcyBjb25zdHJ1Y3RvciBvciBhIGNsYXNzIHByb3BlcnR5LlwiO1xuZXhwb3J0IHZhciBBUkdVTUVOVFNfTEVOR1RIX01JU01BVENIID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YWx1ZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIFwiVGhlIG51bWJlciBvZiBjb25zdHJ1Y3RvciBhcmd1bWVudHMgaW4gdGhlIGRlcml2ZWQgY2xhc3MgXCIgK1xuICAgICAgICAodmFsdWVzWzBdICsgXCIgbXVzdCBiZSA+PSB0aGFuIHRoZSBudW1iZXIgb2YgY29uc3RydWN0b3IgYXJndW1lbnRzIG9mIGl0cyBiYXNlIGNsYXNzLlwiKTtcbn07XG5leHBvcnQgdmFyIENPTlRBSU5FUl9PUFRJT05TX01VU1RfQkVfQU5fT0JKRUNUID0gXCJJbnZhbGlkIENvbnRhaW5lciBjb25zdHJ1Y3RvciBhcmd1bWVudC4gQ29udGFpbmVyIG9wdGlvbnMgXCIgK1xuICAgIFwibXVzdCBiZSBhbiBvYmplY3QuXCI7XG5leHBvcnQgdmFyIENPTlRBSU5FUl9PUFRJT05TX0lOVkFMSURfREVGQVVMVF9TQ09QRSA9IFwiSW52YWxpZCBDb250YWluZXIgb3B0aW9uLiBEZWZhdWx0IHNjb3BlIG11c3QgXCIgK1xuICAgIFwiYmUgYSBzdHJpbmcgKCdzaW5nbGV0b24nIG9yICd0cmFuc2llbnQnKS5cIjtcbmV4cG9ydCB2YXIgQ09OVEFJTkVSX09QVElPTlNfSU5WQUxJRF9BVVRPX0JJTkRfSU5KRUNUQUJMRSA9IFwiSW52YWxpZCBDb250YWluZXIgb3B0aW9uLiBBdXRvIGJpbmQgaW5qZWN0YWJsZSBtdXN0IFwiICtcbiAgICBcImJlIGEgYm9vbGVhblwiO1xuZXhwb3J0IHZhciBDT05UQUlORVJfT1BUSU9OU19JTlZBTElEX1NLSVBfQkFTRV9DSEVDSyA9IFwiSW52YWxpZCBDb250YWluZXIgb3B0aW9uLiBTa2lwIGJhc2UgY2hlY2sgbXVzdCBcIiArXG4gICAgXCJiZSBhIGJvb2xlYW5cIjtcbmV4cG9ydCB2YXIgTVVMVElQTEVfUFJFX0RFU1RST1lfTUVUSE9EUyA9IFwiQ2Fubm90IGFwcGx5IEBwcmVEZXN0cm95IGRlY29yYXRvciBtdWx0aXBsZSB0aW1lcyBpbiB0aGUgc2FtZSBjbGFzc1wiO1xuZXhwb3J0IHZhciBNVUxUSVBMRV9QT1NUX0NPTlNUUlVDVF9NRVRIT0RTID0gXCJDYW5ub3QgYXBwbHkgQHBvc3RDb25zdHJ1Y3QgZGVjb3JhdG9yIG11bHRpcGxlIHRpbWVzIGluIHRoZSBzYW1lIGNsYXNzXCI7XG5leHBvcnQgdmFyIEFTWU5DX1VOQklORF9SRVFVSVJFRCA9IFwiQXR0ZW1wdGluZyB0byB1bmJpbmQgZGVwZW5kZW5jeSB3aXRoIGFzeW5jaHJvbm91cyBkZXN0cnVjdGlvbiAoQHByZURlc3Ryb3kgb3Igb25EZWFjdGl2YXRpb24pXCI7XG5leHBvcnQgdmFyIFBPU1RfQ09OU1RSVUNUX0VSUk9SID0gZnVuY3Rpb24gKGNsYXp6LCBlcnJvck1lc3NhZ2UpIHsgcmV0dXJuIFwiQHBvc3RDb25zdHJ1Y3QgZXJyb3IgaW4gY2xhc3MgXCIgKyBjbGF6eiArIFwiOiBcIiArIGVycm9yTWVzc2FnZTsgfTtcbmV4cG9ydCB2YXIgUFJFX0RFU1RST1lfRVJST1IgPSBmdW5jdGlvbiAoY2xhenosIGVycm9yTWVzc2FnZSkgeyByZXR1cm4gXCJAcHJlRGVzdHJveSBlcnJvciBpbiBjbGFzcyBcIiArIGNsYXp6ICsgXCI6IFwiICsgZXJyb3JNZXNzYWdlOyB9O1xuZXhwb3J0IHZhciBPTl9ERUFDVElWQVRJT05fRVJST1IgPSBmdW5jdGlvbiAoY2xhenosIGVycm9yTWVzc2FnZSkgeyByZXR1cm4gXCJvbkRlYWN0aXZhdGlvbigpIGVycm9yIGluIGNsYXNzIFwiICsgY2xhenogKyBcIjogXCIgKyBlcnJvck1lc3NhZ2U7IH07XG5leHBvcnQgdmFyIENJUkNVTEFSX0RFUEVOREVOQ1lfSU5fRkFDVE9SWSA9IGZ1bmN0aW9uIChmYWN0b3J5VHlwZSwgc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gXCJJdCBsb29rcyBsaWtlIHRoZXJlIGlzIGEgY2lyY3VsYXIgZGVwZW5kZW5jeSBpbiBvbmUgb2YgdGhlICdcIiArIGZhY3RvcnlUeXBlICsgXCInIGJpbmRpbmdzLiBQbGVhc2UgaW52ZXN0aWdhdGUgYmluZGluZ3Mgd2l0aFwiICtcbiAgICAgICAgKFwic2VydmljZSBpZGVudGlmaWVyICdcIiArIHNlcnZpY2VJZGVudGlmaWVyICsgXCInLlwiKTtcbn07XG5leHBvcnQgdmFyIFNUQUNLX09WRVJGTE9XID0gXCJNYXhpbXVtIGNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JfbXNncy5qcy5tYXAiLCJpbXBvcnQgKiBhcyBNRVRBREFUQV9LRVkgZnJvbSBcIi4uL2NvbnN0YW50cy9tZXRhZGF0YV9rZXlzXCI7XG52YXIgTWV0YWRhdGFSZWFkZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1ldGFkYXRhUmVhZGVyKCkge1xuICAgIH1cbiAgICBNZXRhZGF0YVJlYWRlci5wcm90b3R5cGUuZ2V0Q29uc3RydWN0b3JNZXRhZGF0YSA9IGZ1bmN0aW9uIChjb25zdHJ1Y3RvckZ1bmMpIHtcbiAgICAgICAgdmFyIGNvbXBpbGVyR2VuZXJhdGVkTWV0YWRhdGEgPSBSZWZsZWN0LmdldE1ldGFkYXRhKE1FVEFEQVRBX0tFWS5QQVJBTV9UWVBFUywgY29uc3RydWN0b3JGdW5jKTtcbiAgICAgICAgdmFyIHVzZXJHZW5lcmF0ZWRNZXRhZGF0YSA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoTUVUQURBVEFfS0VZLlRBR0dFRCwgY29uc3RydWN0b3JGdW5jKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBpbGVyR2VuZXJhdGVkTWV0YWRhdGE6IGNvbXBpbGVyR2VuZXJhdGVkTWV0YWRhdGEsXG4gICAgICAgICAgICB1c2VyR2VuZXJhdGVkTWV0YWRhdGE6IHVzZXJHZW5lcmF0ZWRNZXRhZGF0YSB8fCB7fVxuICAgICAgICB9O1xuICAgIH07XG4gICAgTWV0YWRhdGFSZWFkZXIucHJvdG90eXBlLmdldFByb3BlcnRpZXNNZXRhZGF0YSA9IGZ1bmN0aW9uIChjb25zdHJ1Y3RvckZ1bmMpIHtcbiAgICAgICAgdmFyIHVzZXJHZW5lcmF0ZWRNZXRhZGF0YSA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoTUVUQURBVEFfS0VZLlRBR0dFRF9QUk9QLCBjb25zdHJ1Y3RvckZ1bmMpIHx8IFtdO1xuICAgICAgICByZXR1cm4gdXNlckdlbmVyYXRlZE1ldGFkYXRhO1xuICAgIH07XG4gICAgcmV0dXJuIE1ldGFkYXRhUmVhZGVyO1xufSgpKTtcbmV4cG9ydCB7IE1ldGFkYXRhUmVhZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRhZGF0YV9yZWFkZXIuanMubWFwIiwidmFyIEJpbmRpbmdDb3VudCA9IHtcbiAgICBNdWx0aXBsZUJpbmRpbmdzQXZhaWxhYmxlOiAyLFxuICAgIE5vQmluZGluZ3NBdmFpbGFibGU6IDAsXG4gICAgT25seU9uZUJpbmRpbmdBdmFpbGFibGU6IDFcbn07XG5leHBvcnQgeyBCaW5kaW5nQ291bnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmRpbmdfY291bnQuanMubWFwIiwiaW1wb3J0ICogYXMgRVJST1JfTVNHUyBmcm9tIFwiLi4vY29uc3RhbnRzL2Vycm9yX21zZ3NcIjtcbmV4cG9ydCBmdW5jdGlvbiBpc1N0YWNrT3ZlcmZsb3dFeGVwdGlvbihlcnJvcikge1xuICAgIHJldHVybiAoZXJyb3IgaW5zdGFuY2VvZiBSYW5nZUVycm9yIHx8XG4gICAgICAgIGVycm9yLm1lc3NhZ2UgPT09IEVSUk9SX01TR1MuU1RBQ0tfT1ZFUkZMT1cpO1xufVxuZXhwb3J0IHZhciB0cnlBbmRUaHJvd0Vycm9ySWZTdGFja092ZXJmbG93ID0gZnVuY3Rpb24gKGZuLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoaXNTdGFja092ZXJmbG93RXhlcHRpb24oZXJyb3IpKSB7XG4gICAgICAgICAgICBlcnJvciA9IGVycm9yQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhjZXB0aW9ucy5qcy5tYXAiLCJpbXBvcnQgKiBhcyBFUlJPUl9NU0dTIGZyb20gXCIuLi9jb25zdGFudHMvZXJyb3JfbXNnc1wiO1xuZnVuY3Rpb24gZ2V0U2VydmljZUlkZW50aWZpZXJBc1N0cmluZyhzZXJ2aWNlSWRlbnRpZmllcikge1xuICAgIGlmICh0eXBlb2Ygc2VydmljZUlkZW50aWZpZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgX3NlcnZpY2VJZGVudGlmaWVyID0gc2VydmljZUlkZW50aWZpZXI7XG4gICAgICAgIHJldHVybiBfc2VydmljZUlkZW50aWZpZXIubmFtZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHNlcnZpY2VJZGVudGlmaWVyID09PSBcInN5bWJvbFwiKSB7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlSWRlbnRpZmllci50b1N0cmluZygpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIF9zZXJ2aWNlSWRlbnRpZmllciA9IHNlcnZpY2VJZGVudGlmaWVyO1xuICAgICAgICByZXR1cm4gX3NlcnZpY2VJZGVudGlmaWVyO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxpc3RSZWdpc3RlcmVkQmluZGluZ3NGb3JTZXJ2aWNlSWRlbnRpZmllcihjb250YWluZXIsIHNlcnZpY2VJZGVudGlmaWVyLCBnZXRCaW5kaW5ncykge1xuICAgIHZhciByZWdpc3RlcmVkQmluZGluZ3NMaXN0ID0gXCJcIjtcbiAgICB2YXIgcmVnaXN0ZXJlZEJpbmRpbmdzID0gZ2V0QmluZGluZ3MoY29udGFpbmVyLCBzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgaWYgKHJlZ2lzdGVyZWRCaW5kaW5ncy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgcmVnaXN0ZXJlZEJpbmRpbmdzTGlzdCA9IFwiXFxuUmVnaXN0ZXJlZCBiaW5kaW5nczpcIjtcbiAgICAgICAgcmVnaXN0ZXJlZEJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24gKGJpbmRpbmcpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gXCJPYmplY3RcIjtcbiAgICAgICAgICAgIGlmIChiaW5kaW5nLmltcGxlbWVudGF0aW9uVHlwZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBnZXRGdW5jdGlvbk5hbWUoYmluZGluZy5pbXBsZW1lbnRhdGlvblR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVnaXN0ZXJlZEJpbmRpbmdzTGlzdCA9IHJlZ2lzdGVyZWRCaW5kaW5nc0xpc3QgKyBcIlxcbiBcIiArIG5hbWU7XG4gICAgICAgICAgICBpZiAoYmluZGluZy5jb25zdHJhaW50Lm1ldGFEYXRhKSB7XG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJlZEJpbmRpbmdzTGlzdCA9IHJlZ2lzdGVyZWRCaW5kaW5nc0xpc3QgKyBcIiAtIFwiICsgYmluZGluZy5jb25zdHJhaW50Lm1ldGFEYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlZ2lzdGVyZWRCaW5kaW5nc0xpc3Q7XG59XG5mdW5jdGlvbiBhbHJlYWR5RGVwZW5kZW5jeUNoYWluKHJlcXVlc3QsIHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgaWYgKHJlcXVlc3QucGFyZW50UmVxdWVzdCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlcXVlc3QucGFyZW50UmVxdWVzdC5zZXJ2aWNlSWRlbnRpZmllciA9PT0gc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYWxyZWFkeURlcGVuZGVuY3lDaGFpbihyZXF1ZXN0LnBhcmVudFJlcXVlc3QsIHNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXBlbmRlbmN5Q2hhaW5Ub1N0cmluZyhyZXF1ZXN0KSB7XG4gICAgZnVuY3Rpb24gX2NyZWF0ZVN0cmluZ0FycihyZXEsIHJlc3VsdCkge1xuICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsgcmVzdWx0ID0gW107IH1cbiAgICAgICAgdmFyIHNlcnZpY2VJZGVudGlmaWVyID0gZ2V0U2VydmljZUlkZW50aWZpZXJBc1N0cmluZyhyZXEuc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICByZXN1bHQucHVzaChzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgICAgIGlmIChyZXEucGFyZW50UmVxdWVzdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIF9jcmVhdGVTdHJpbmdBcnIocmVxLnBhcmVudFJlcXVlc3QsIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdmFyIHN0cmluZ0FyciA9IF9jcmVhdGVTdHJpbmdBcnIocmVxdWVzdCk7XG4gICAgcmV0dXJuIHN0cmluZ0Fyci5yZXZlcnNlKCkuam9pbihcIiAtLT4gXCIpO1xufVxuZnVuY3Rpb24gY2lyY3VsYXJEZXBlbmRlbmN5VG9FeGNlcHRpb24ocmVxdWVzdCkge1xuICAgIHJlcXVlc3QuY2hpbGRSZXF1ZXN0cy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZFJlcXVlc3QpIHtcbiAgICAgICAgaWYgKGFscmVhZHlEZXBlbmRlbmN5Q2hhaW4oY2hpbGRSZXF1ZXN0LCBjaGlsZFJlcXVlc3Quc2VydmljZUlkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICB2YXIgc2VydmljZXMgPSBkZXBlbmRlbmN5Q2hhaW5Ub1N0cmluZyhjaGlsZFJlcXVlc3QpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01TR1MuQ0lSQ1VMQVJfREVQRU5ERU5DWSArIFwiIFwiICsgc2VydmljZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2lyY3VsYXJEZXBlbmRlbmN5VG9FeGNlcHRpb24oY2hpbGRSZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gbGlzdE1ldGFkYXRhRm9yVGFyZ2V0KHNlcnZpY2VJZGVudGlmaWVyU3RyaW5nLCB0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0LmlzVGFnZ2VkKCkgfHwgdGFyZ2V0LmlzTmFtZWQoKSkge1xuICAgICAgICB2YXIgbV8xID0gXCJcIjtcbiAgICAgICAgdmFyIG5hbWVkVGFnID0gdGFyZ2V0LmdldE5hbWVkVGFnKCk7XG4gICAgICAgIHZhciBvdGhlclRhZ3MgPSB0YXJnZXQuZ2V0Q3VzdG9tVGFncygpO1xuICAgICAgICBpZiAobmFtZWRUYWcgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG1fMSArPSBuYW1lZFRhZy50b1N0cmluZygpICsgXCJcXG5cIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3RoZXJUYWdzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBvdGhlclRhZ3MuZm9yRWFjaChmdW5jdGlvbiAodGFnKSB7XG4gICAgICAgICAgICAgICAgbV8xICs9IHRhZy50b1N0cmluZygpICsgXCJcXG5cIjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIiBcIiArIHNlcnZpY2VJZGVudGlmaWVyU3RyaW5nICsgXCJcXG4gXCIgKyBzZXJ2aWNlSWRlbnRpZmllclN0cmluZyArIFwiIC0gXCIgKyBtXzE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gXCIgXCIgKyBzZXJ2aWNlSWRlbnRpZmllclN0cmluZztcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRGdW5jdGlvbk5hbWUoZnVuYykge1xuICAgIGlmIChmdW5jLm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMubmFtZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBuYW1lXzEgPSBmdW5jLnRvU3RyaW5nKCk7XG4gICAgICAgIHZhciBtYXRjaCA9IG5hbWVfMS5tYXRjaCgvXmZ1bmN0aW9uXFxzKihbXlxccyhdKykvKTtcbiAgICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBcIkFub255bW91cyBmdW5jdGlvbjogXCIgKyBuYW1lXzE7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0U3ltYm9sRGVzY3JpcHRpb24oc3ltYm9sKSB7XG4gICAgcmV0dXJuIHN5bWJvbC50b1N0cmluZygpLnNsaWNlKDcsIC0xKTtcbn1cbmV4cG9ydCB7IGdldEZ1bmN0aW9uTmFtZSwgZ2V0U2VydmljZUlkZW50aWZpZXJBc1N0cmluZywgbGlzdFJlZ2lzdGVyZWRCaW5kaW5nc0ZvclNlcnZpY2VJZGVudGlmaWVyLCBsaXN0TWV0YWRhdGFGb3JUYXJnZXQsIGNpcmN1bGFyRGVwZW5kZW5jeVRvRXhjZXB0aW9uLCBnZXRTeW1ib2xEZXNjcmlwdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VyaWFsaXphdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBpZCB9IGZyb20gXCIuLi91dGlscy9pZFwiO1xudmFyIENvbnRleHQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbnRleHQoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZCgpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG4gICAgQ29udGV4dC5wcm90b3R5cGUuYWRkUGxhbiA9IGZ1bmN0aW9uIChwbGFuKSB7XG4gICAgICAgIHRoaXMucGxhbiA9IHBsYW47XG4gICAgfTtcbiAgICBDb250ZXh0LnByb3RvdHlwZS5zZXRDdXJyZW50UmVxdWVzdCA9IGZ1bmN0aW9uIChjdXJyZW50UmVxdWVzdCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRSZXF1ZXN0ID0gY3VycmVudFJlcXVlc3Q7XG4gICAgfTtcbiAgICByZXR1cm4gQ29udGV4dDtcbn0oKSk7XG5leHBvcnQgeyBDb250ZXh0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0LmpzLm1hcCIsImltcG9ydCAqIGFzIE1FVEFEQVRBX0tFWSBmcm9tIFwiLi4vY29uc3RhbnRzL21ldGFkYXRhX2tleXNcIjtcbnZhciBNZXRhZGF0YSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWV0YWRhdGEoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBNZXRhZGF0YS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmtleSA9PT0gTUVUQURBVEFfS0VZLk5BTUVEX1RBRykge1xuICAgICAgICAgICAgcmV0dXJuIFwibmFtZWQ6IFwiICsgU3RyaW5nKHRoaXMudmFsdWUpLnRvU3RyaW5nKCkgKyBcIiBcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcInRhZ2dlZDogeyBrZXk6XCIgKyB0aGlzLmtleS50b1N0cmluZygpICsgXCIsIHZhbHVlOiBcIiArIFN0cmluZyh0aGlzLnZhbHVlKSArIFwiIH1cIjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1ldGFkYXRhO1xufSgpKTtcbmV4cG9ydCB7IE1ldGFkYXRhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRhZGF0YS5qcy5tYXAiLCJ2YXIgUGxhbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGxhbihwYXJlbnRDb250ZXh0LCByb290UmVxdWVzdCkge1xuICAgICAgICB0aGlzLnBhcmVudENvbnRleHQgPSBwYXJlbnRDb250ZXh0O1xuICAgICAgICB0aGlzLnJvb3RSZXF1ZXN0ID0gcm9vdFJlcXVlc3Q7XG4gICAgfVxuICAgIHJldHVybiBQbGFuO1xufSgpKTtcbmV4cG9ydCB7IFBsYW4gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsYW4uanMubWFwIiwidmFyIExhenlTZXJ2aWNlSWRlbnRpZmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMYXp5U2VydmljZUlkZW50aWZlcihjYikge1xuICAgICAgICB0aGlzLl9jYiA9IGNiO1xuICAgIH1cbiAgICBMYXp5U2VydmljZUlkZW50aWZlci5wcm90b3R5cGUudW53cmFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2IoKTtcbiAgICB9O1xuICAgIHJldHVybiBMYXp5U2VydmljZUlkZW50aWZlcjtcbn0oKSk7XG5leHBvcnQgeyBMYXp5U2VydmljZUlkZW50aWZlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGF6eV9zZXJ2aWNlX2lkZW50aWZpZXIuanMubWFwIiwidmFyIFF1ZXJ5YWJsZVN0cmluZyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVlcnlhYmxlU3RyaW5nKHN0cikge1xuICAgICAgICB0aGlzLnN0ciA9IHN0cjtcbiAgICB9XG4gICAgUXVlcnlhYmxlU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHIuaW5kZXhPZihzZWFyY2hTdHJpbmcpID09PSAwO1xuICAgIH07XG4gICAgUXVlcnlhYmxlU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aCA9IGZ1bmN0aW9uIChzZWFyY2hTdHJpbmcpIHtcbiAgICAgICAgdmFyIHJldmVyc2VTdHJpbmcgPSBcIlwiO1xuICAgICAgICB2YXIgcmV2ZXJzZVNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZy5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKTtcbiAgICAgICAgcmV2ZXJzZVN0cmluZyA9IHRoaXMuc3RyLnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydHNXaXRoLmNhbGwoeyBzdHI6IHJldmVyc2VTdHJpbmcgfSwgcmV2ZXJzZVNlYXJjaFN0cmluZyk7XG4gICAgfTtcbiAgICBRdWVyeWFibGVTdHJpbmcucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZykge1xuICAgICAgICByZXR1cm4gKHRoaXMuc3RyLmluZGV4T2Yoc2VhcmNoU3RyaW5nKSAhPT0gLTEpO1xuICAgIH07XG4gICAgUXVlcnlhYmxlU3RyaW5nLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAoY29tcGFyZVN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHIgPT09IGNvbXBhcmVTdHJpbmc7XG4gICAgfTtcbiAgICBRdWVyeWFibGVTdHJpbmcucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHI7XG4gICAgfTtcbiAgICByZXR1cm4gUXVlcnlhYmxlU3RyaW5nO1xufSgpKTtcbmV4cG9ydCB7IFF1ZXJ5YWJsZVN0cmluZyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnlhYmxlX3N0cmluZy5qcy5tYXAiLCJpbXBvcnQgKiBhcyBNRVRBREFUQV9LRVkgZnJvbSAnLi4vY29uc3RhbnRzL21ldGFkYXRhX2tleXMnO1xuaW1wb3J0IHsgaWQgfSBmcm9tICcuLi91dGlscy9pZCc7XG5pbXBvcnQgeyBnZXRTeW1ib2xEZXNjcmlwdGlvbiB9IGZyb20gJy4uL3V0aWxzL3NlcmlhbGl6YXRpb24nO1xuaW1wb3J0IHsgTWV0YWRhdGEgfSBmcm9tICcuL21ldGFkYXRhJztcbmltcG9ydCB7IFF1ZXJ5YWJsZVN0cmluZyB9IGZyb20gJy4vcXVlcnlhYmxlX3N0cmluZyc7XG52YXIgVGFyZ2V0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUYXJnZXQodHlwZSwgaWRlbnRpZmllciwgc2VydmljZUlkZW50aWZpZXIsIG5hbWVkT3JUYWdnZWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkKCk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuc2VydmljZUlkZW50aWZpZXIgPSBzZXJ2aWNlSWRlbnRpZmllcjtcbiAgICAgICAgdmFyIHF1ZXJ5YWJsZU5hbWUgPSB0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N5bWJvbCcgPyBnZXRTeW1ib2xEZXNjcmlwdGlvbihpZGVudGlmaWVyKSA6IGlkZW50aWZpZXI7XG4gICAgICAgIHRoaXMubmFtZSA9IG5ldyBRdWVyeWFibGVTdHJpbmcocXVlcnlhYmxlTmFtZSB8fCBcIlwiKTtcbiAgICAgICAgdGhpcy5pZGVudGlmaWVyID0gaWRlbnRpZmllcjtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBBcnJheSgpO1xuICAgICAgICB2YXIgbWV0YWRhdGFJdGVtID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lZE9yVGFnZ2VkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbWV0YWRhdGFJdGVtID0gbmV3IE1ldGFkYXRhKE1FVEFEQVRBX0tFWS5OQU1FRF9UQUcsIG5hbWVkT3JUYWdnZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5hbWVkT3JUYWdnZWQgaW5zdGFuY2VvZiBNZXRhZGF0YSkge1xuICAgICAgICAgICAgbWV0YWRhdGFJdGVtID0gbmFtZWRPclRhZ2dlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0YWRhdGFJdGVtICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm1ldGFkYXRhLnB1c2gobWV0YWRhdGFJdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBUYXJnZXQucHJvdG90eXBlLmhhc1RhZyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMubWV0YWRhdGE7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgbSA9IF9hW19pXTtcbiAgICAgICAgICAgIGlmIChtLmtleSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgVGFyZ2V0LnByb3RvdHlwZS5pc0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNUYWcoTUVUQURBVEFfS0VZLk1VTFRJX0lOSkVDVF9UQUcpO1xuICAgIH07XG4gICAgVGFyZ2V0LnByb3RvdHlwZS5tYXRjaGVzQXJyYXkgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVzVGFnKE1FVEFEQVRBX0tFWS5NVUxUSV9JTkpFQ1RfVEFHKShuYW1lKTtcbiAgICB9O1xuICAgIFRhcmdldC5wcm90b3R5cGUuaXNOYW1lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzVGFnKE1FVEFEQVRBX0tFWS5OQU1FRF9UQUcpO1xuICAgIH07XG4gICAgVGFyZ2V0LnByb3RvdHlwZS5pc1RhZ2dlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEuc29tZShmdW5jdGlvbiAobWV0YWRhdGEpIHsgcmV0dXJuIE1FVEFEQVRBX0tFWS5OT05fQ1VTVE9NX1RBR19LRVlTLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIG1ldGFkYXRhLmtleSAhPT0ga2V5OyB9KTsgfSk7XG4gICAgfTtcbiAgICBUYXJnZXQucHJvdG90eXBlLmlzT3B0aW9uYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoZXNUYWcoTUVUQURBVEFfS0VZLk9QVElPTkFMX1RBRykodHJ1ZSk7XG4gICAgfTtcbiAgICBUYXJnZXQucHJvdG90eXBlLmdldE5hbWVkVGFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc05hbWVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLmZpbHRlcihmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5rZXkgPT09IE1FVEFEQVRBX0tFWS5OQU1FRF9UQUc7IH0pWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgVGFyZ2V0LnByb3RvdHlwZS5nZXRDdXN0b21UYWdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc1RhZ2dlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YS5maWx0ZXIoZnVuY3Rpb24gKG1ldGFkYXRhKSB7IHJldHVybiBNRVRBREFUQV9LRVkuTk9OX0NVU1RPTV9UQUdfS0VZUy5ldmVyeShmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBtZXRhZGF0YS5rZXkgIT09IGtleTsgfSk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRhcmdldC5wcm90b3R5cGUubWF0Y2hlc05hbWVkVGFnID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2hlc1RhZyhNRVRBREFUQV9LRVkuTkFNRURfVEFHKShuYW1lKTtcbiAgICB9O1xuICAgIFRhcmdldC5wcm90b3R5cGUubWF0Y2hlc1RhZyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLm1ldGFkYXRhOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChtLmtleSA9PT0ga2V5ICYmIG0udmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBUYXJnZXQ7XG59KCkpO1xuZXhwb3J0IHsgVGFyZ2V0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YXJnZXQuanMubWFwIiwidmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuaW1wb3J0IHsgTGF6eVNlcnZpY2VJZGVudGlmZXIgfSBmcm9tIFwiLi4vYW5ub3RhdGlvbi9sYXp5X3NlcnZpY2VfaWRlbnRpZmllclwiO1xuaW1wb3J0ICogYXMgRVJST1JfTVNHUyBmcm9tIFwiLi4vY29uc3RhbnRzL2Vycm9yX21zZ3NcIjtcbmltcG9ydCB7IFRhcmdldFR5cGVFbnVtIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9saXRlcmFsX3R5cGVzXCI7XG5pbXBvcnQgKiBhcyBNRVRBREFUQV9LRVkgZnJvbSBcIi4uL2NvbnN0YW50cy9tZXRhZGF0YV9rZXlzXCI7XG5pbXBvcnQgeyBnZXRGdW5jdGlvbk5hbWUgfSBmcm9tIFwiLi4vdXRpbHMvc2VyaWFsaXphdGlvblwiO1xuaW1wb3J0IHsgVGFyZ2V0IH0gZnJvbSBcIi4vdGFyZ2V0XCI7XG5mdW5jdGlvbiBnZXREZXBlbmRlbmNpZXMobWV0YWRhdGFSZWFkZXIsIGZ1bmMpIHtcbiAgICB2YXIgY29uc3RydWN0b3JOYW1lID0gZ2V0RnVuY3Rpb25OYW1lKGZ1bmMpO1xuICAgIHJldHVybiBnZXRUYXJnZXRzKG1ldGFkYXRhUmVhZGVyLCBjb25zdHJ1Y3Rvck5hbWUsIGZ1bmMsIGZhbHNlKTtcbn1cbmZ1bmN0aW9uIGdldFRhcmdldHMobWV0YWRhdGFSZWFkZXIsIGNvbnN0cnVjdG9yTmFtZSwgZnVuYywgaXNCYXNlQ2xhc3MpIHtcbiAgICB2YXIgbWV0YWRhdGEgPSBtZXRhZGF0YVJlYWRlci5nZXRDb25zdHJ1Y3Rvck1ldGFkYXRhKGZ1bmMpO1xuICAgIHZhciBzZXJ2aWNlSWRlbnRpZmllcnMgPSBtZXRhZGF0YS5jb21waWxlckdlbmVyYXRlZE1ldGFkYXRhO1xuICAgIGlmIChzZXJ2aWNlSWRlbnRpZmllcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgbXNnID0gRVJST1JfTVNHUy5NSVNTSU5HX0lOSkVDVEFCTEVfQU5OT1RBVElPTiArIFwiIFwiICsgY29uc3RydWN0b3JOYW1lICsgXCIuXCI7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgIH1cbiAgICB2YXIgY29uc3RydWN0b3JBcmdzTWV0YWRhdGEgPSBtZXRhZGF0YS51c2VyR2VuZXJhdGVkTWV0YWRhdGE7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjb25zdHJ1Y3RvckFyZ3NNZXRhZGF0YSk7XG4gICAgdmFyIGhhc1VzZXJEZWNsYXJlZFVua25vd25JbmplY3Rpb25zID0gKGZ1bmMubGVuZ3RoID09PSAwICYmIGtleXMubGVuZ3RoID4gMCk7XG4gICAgdmFyIGhhc09wdGlvbmFsUGFyYW1ldGVycyA9IGtleXMubGVuZ3RoID4gZnVuYy5sZW5ndGg7XG4gICAgdmFyIGl0ZXJhdGlvbnMgPSAoaGFzVXNlckRlY2xhcmVkVW5rbm93bkluamVjdGlvbnMgfHwgaGFzT3B0aW9uYWxQYXJhbWV0ZXJzKSA/IGtleXMubGVuZ3RoIDogZnVuYy5sZW5ndGg7XG4gICAgdmFyIGNvbnN0cnVjdG9yVGFyZ2V0cyA9IGdldENvbnN0cnVjdG9yQXJnc0FzVGFyZ2V0cyhpc0Jhc2VDbGFzcywgY29uc3RydWN0b3JOYW1lLCBzZXJ2aWNlSWRlbnRpZmllcnMsIGNvbnN0cnVjdG9yQXJnc01ldGFkYXRhLCBpdGVyYXRpb25zKTtcbiAgICB2YXIgcHJvcGVydHlUYXJnZXRzID0gZ2V0Q2xhc3NQcm9wc0FzVGFyZ2V0cyhtZXRhZGF0YVJlYWRlciwgZnVuYywgY29uc3RydWN0b3JOYW1lKTtcbiAgICB2YXIgdGFyZ2V0cyA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgY29uc3RydWN0b3JUYXJnZXRzLCB0cnVlKSwgcHJvcGVydHlUYXJnZXRzLCB0cnVlKTtcbiAgICByZXR1cm4gdGFyZ2V0cztcbn1cbmZ1bmN0aW9uIGdldENvbnN0cnVjdG9yQXJnc0FzVGFyZ2V0KGluZGV4LCBpc0Jhc2VDbGFzcywgY29uc3RydWN0b3JOYW1lLCBzZXJ2aWNlSWRlbnRpZmllcnMsIGNvbnN0cnVjdG9yQXJnc01ldGFkYXRhKSB7XG4gICAgdmFyIHRhcmdldE1ldGFkYXRhID0gY29uc3RydWN0b3JBcmdzTWV0YWRhdGFbaW5kZXgudG9TdHJpbmcoKV0gfHwgW107XG4gICAgdmFyIG1ldGFkYXRhID0gZm9ybWF0VGFyZ2V0TWV0YWRhdGEodGFyZ2V0TWV0YWRhdGEpO1xuICAgIHZhciBpc01hbmFnZWQgPSBtZXRhZGF0YS51bm1hbmFnZWQgIT09IHRydWU7XG4gICAgdmFyIHNlcnZpY2VJZGVudGlmaWVyID0gc2VydmljZUlkZW50aWZpZXJzW2luZGV4XTtcbiAgICB2YXIgaW5qZWN0SWRlbnRpZmllciA9IChtZXRhZGF0YS5pbmplY3QgfHwgbWV0YWRhdGEubXVsdGlJbmplY3QpO1xuICAgIHNlcnZpY2VJZGVudGlmaWVyID0gKGluamVjdElkZW50aWZpZXIpID8gKGluamVjdElkZW50aWZpZXIpIDogc2VydmljZUlkZW50aWZpZXI7XG4gICAgaWYgKHNlcnZpY2VJZGVudGlmaWVyIGluc3RhbmNlb2YgTGF6eVNlcnZpY2VJZGVudGlmZXIpIHtcbiAgICAgICAgc2VydmljZUlkZW50aWZpZXIgPSBzZXJ2aWNlSWRlbnRpZmllci51bndyYXAoKTtcbiAgICB9XG4gICAgaWYgKGlzTWFuYWdlZCkge1xuICAgICAgICB2YXIgaXNPYmplY3QgPSBzZXJ2aWNlSWRlbnRpZmllciA9PT0gT2JqZWN0O1xuICAgICAgICB2YXIgaXNGdW5jdGlvbiA9IHNlcnZpY2VJZGVudGlmaWVyID09PSBGdW5jdGlvbjtcbiAgICAgICAgdmFyIGlzVW5kZWZpbmVkID0gc2VydmljZUlkZW50aWZpZXIgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIGlzVW5rbm93blR5cGUgPSAoaXNPYmplY3QgfHwgaXNGdW5jdGlvbiB8fCBpc1VuZGVmaW5lZCk7XG4gICAgICAgIGlmICghaXNCYXNlQ2xhc3MgJiYgaXNVbmtub3duVHlwZSkge1xuICAgICAgICAgICAgdmFyIG1zZyA9IEVSUk9SX01TR1MuTUlTU0lOR19JTkpFQ1RfQU5OT1RBVElPTiArIFwiIGFyZ3VtZW50IFwiICsgaW5kZXggKyBcIiBpbiBjbGFzcyBcIiArIGNvbnN0cnVjdG9yTmFtZSArIFwiLlwiO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldCA9IG5ldyBUYXJnZXQoVGFyZ2V0VHlwZUVudW0uQ29uc3RydWN0b3JBcmd1bWVudCwgbWV0YWRhdGEudGFyZ2V0TmFtZSwgc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICB0YXJnZXQubWV0YWRhdGEgPSB0YXJnZXRNZXRhZGF0YTtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBnZXRDb25zdHJ1Y3RvckFyZ3NBc1RhcmdldHMoaXNCYXNlQ2xhc3MsIGNvbnN0cnVjdG9yTmFtZSwgc2VydmljZUlkZW50aWZpZXJzLCBjb25zdHJ1Y3RvckFyZ3NNZXRhZGF0YSwgaXRlcmF0aW9ucykge1xuICAgIHZhciB0YXJnZXRzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgdmFyIGluZGV4ID0gaTtcbiAgICAgICAgdmFyIHRhcmdldCA9IGdldENvbnN0cnVjdG9yQXJnc0FzVGFyZ2V0KGluZGV4LCBpc0Jhc2VDbGFzcywgY29uc3RydWN0b3JOYW1lLCBzZXJ2aWNlSWRlbnRpZmllcnMsIGNvbnN0cnVjdG9yQXJnc01ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhcmdldCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGFyZ2V0cy5wdXNoKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldHM7XG59XG5mdW5jdGlvbiBfZ2V0U2VydmljZUlkZW50aWZpZXJGb3JQcm9wZXJ0eShpbmplY3QsIG11bHRpSW5qZWN0LCBwcm9wZXJ0eU5hbWUsIGNsYXNzTmFtZSkge1xuICAgIHZhciBzZXJ2aWNlSWRlbnRpZmllciA9IChpbmplY3QgfHwgbXVsdGlJbmplY3QpO1xuICAgIGlmIChzZXJ2aWNlSWRlbnRpZmllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBtc2cgPSBFUlJPUl9NU0dTLk1JU1NJTkdfSU5KRUNUQUJMRV9BTk5PVEFUSU9OICsgXCIgZm9yIHByb3BlcnR5IFwiICsgU3RyaW5nKHByb3BlcnR5TmFtZSkgKyBcIiBpbiBjbGFzcyBcIiArIGNsYXNzTmFtZSArIFwiLlwiO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICB9XG4gICAgcmV0dXJuIHNlcnZpY2VJZGVudGlmaWVyO1xufVxuZnVuY3Rpb24gZ2V0Q2xhc3NQcm9wc0FzVGFyZ2V0cyhtZXRhZGF0YVJlYWRlciwgY29uc3RydWN0b3JGdW5jLCBjb25zdHJ1Y3Rvck5hbWUpIHtcbiAgICB2YXIgY2xhc3NQcm9wc01ldGFkYXRhID0gbWV0YWRhdGFSZWFkZXIuZ2V0UHJvcGVydGllc01ldGFkYXRhKGNvbnN0cnVjdG9yRnVuYyk7XG4gICAgdmFyIHRhcmdldHMgPSBbXTtcbiAgICB2YXIgc3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoY2xhc3NQcm9wc01ldGFkYXRhKTtcbiAgICB2YXIgc3RyaW5nS2V5cyA9IE9iamVjdC5rZXlzKGNsYXNzUHJvcHNNZXRhZGF0YSk7XG4gICAgdmFyIGtleXMgPSBzdHJpbmdLZXlzLmNvbmNhdChzeW1ib2xLZXlzKTtcbiAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIga2V5ID0ga2V5c18xW19pXTtcbiAgICAgICAgdmFyIHRhcmdldE1ldGFkYXRhID0gY2xhc3NQcm9wc01ldGFkYXRhW2tleV07XG4gICAgICAgIHZhciBtZXRhZGF0YSA9IGZvcm1hdFRhcmdldE1ldGFkYXRhKHRhcmdldE1ldGFkYXRhKTtcbiAgICAgICAgdmFyIGlkZW50aWZpZXIgPSBtZXRhZGF0YS50YXJnZXROYW1lIHx8IGtleTtcbiAgICAgICAgdmFyIHNlcnZpY2VJZGVudGlmaWVyID0gX2dldFNlcnZpY2VJZGVudGlmaWVyRm9yUHJvcGVydHkobWV0YWRhdGEuaW5qZWN0LCBtZXRhZGF0YS5tdWx0aUluamVjdCwga2V5LCBjb25zdHJ1Y3Rvck5hbWUpO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gbmV3IFRhcmdldChUYXJnZXRUeXBlRW51bS5DbGFzc1Byb3BlcnR5LCBpZGVudGlmaWVyLCBzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgICAgIHRhcmdldC5tZXRhZGF0YSA9IHRhcmdldE1ldGFkYXRhO1xuICAgICAgICB0YXJnZXRzLnB1c2godGFyZ2V0KTtcbiAgICB9XG4gICAgdmFyIGJhc2VDb25zdHJ1Y3RvciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjb25zdHJ1Y3RvckZ1bmMucHJvdG90eXBlKS5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoYmFzZUNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHtcbiAgICAgICAgdmFyIGJhc2VUYXJnZXRzID0gZ2V0Q2xhc3NQcm9wc0FzVGFyZ2V0cyhtZXRhZGF0YVJlYWRlciwgYmFzZUNvbnN0cnVjdG9yLCBjb25zdHJ1Y3Rvck5hbWUpO1xuICAgICAgICB0YXJnZXRzID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCB0YXJnZXRzLCB0cnVlKSwgYmFzZVRhcmdldHMsIHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0cztcbn1cbmZ1bmN0aW9uIGdldEJhc2VDbGFzc0RlcGVuZGVuY3lDb3VudChtZXRhZGF0YVJlYWRlciwgZnVuYykge1xuICAgIHZhciBiYXNlQ29uc3RydWN0b3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZnVuYy5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO1xuICAgIGlmIChiYXNlQ29uc3RydWN0b3IgIT09IE9iamVjdCkge1xuICAgICAgICB2YXIgYmFzZUNvbnN0cnVjdG9yTmFtZSA9IGdldEZ1bmN0aW9uTmFtZShiYXNlQ29uc3RydWN0b3IpO1xuICAgICAgICB2YXIgdGFyZ2V0cyA9IGdldFRhcmdldHMobWV0YWRhdGFSZWFkZXIsIGJhc2VDb25zdHJ1Y3Rvck5hbWUsIGJhc2VDb25zdHJ1Y3RvciwgdHJ1ZSk7XG4gICAgICAgIHZhciBtZXRhZGF0YSA9IHRhcmdldHMubWFwKGZ1bmN0aW9uICh0KSB7IHJldHVybiB0Lm1ldGFkYXRhLmZpbHRlcihmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5rZXkgPT09IE1FVEFEQVRBX0tFWS5VTk1BTkFHRURfVEFHOyB9KTsgfSk7XG4gICAgICAgIHZhciB1bm1hbmFnZWRDb3VudCA9IFtdLmNvbmNhdC5hcHBseShbXSwgbWV0YWRhdGEpLmxlbmd0aDtcbiAgICAgICAgdmFyIGRlcGVuZGVuY3lDb3VudCA9IHRhcmdldHMubGVuZ3RoIC0gdW5tYW5hZ2VkQ291bnQ7XG4gICAgICAgIGlmIChkZXBlbmRlbmN5Q291bnQgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVwZW5kZW5jeUNvdW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGdldEJhc2VDbGFzc0RlcGVuZGVuY3lDb3VudChtZXRhZGF0YVJlYWRlciwgYmFzZUNvbnN0cnVjdG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0VGFyZ2V0TWV0YWRhdGEodGFyZ2V0TWV0YWRhdGEpIHtcbiAgICB2YXIgdGFyZ2V0TWV0YWRhdGFNYXAgPSB7fTtcbiAgICB0YXJnZXRNZXRhZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHRhcmdldE1ldGFkYXRhTWFwW20ua2V5LnRvU3RyaW5nKCldID0gbS52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbmplY3Q6IHRhcmdldE1ldGFkYXRhTWFwW01FVEFEQVRBX0tFWS5JTkpFQ1RfVEFHXSxcbiAgICAgICAgbXVsdGlJbmplY3Q6IHRhcmdldE1ldGFkYXRhTWFwW01FVEFEQVRBX0tFWS5NVUxUSV9JTkpFQ1RfVEFHXSxcbiAgICAgICAgdGFyZ2V0TmFtZTogdGFyZ2V0TWV0YWRhdGFNYXBbTUVUQURBVEFfS0VZLk5BTUVfVEFHXSxcbiAgICAgICAgdW5tYW5hZ2VkOiB0YXJnZXRNZXRhZGF0YU1hcFtNRVRBREFUQV9LRVkuVU5NQU5BR0VEX1RBR11cbiAgICB9O1xufVxuZXhwb3J0IHsgZ2V0RGVwZW5kZW5jaWVzLCBnZXRCYXNlQ2xhc3NEZXBlbmRlbmN5Q291bnQsIGdldEZ1bmN0aW9uTmFtZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVmbGVjdGlvbl91dGlscy5qcy5tYXAiLCJpbXBvcnQgeyBpZCB9IGZyb20gXCIuLi91dGlscy9pZFwiO1xudmFyIFJlcXVlc3QgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlcXVlc3Qoc2VydmljZUlkZW50aWZpZXIsIHBhcmVudENvbnRleHQsIHBhcmVudFJlcXVlc3QsIGJpbmRpbmdzLCB0YXJnZXQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkKCk7XG4gICAgICAgIHRoaXMuc2VydmljZUlkZW50aWZpZXIgPSBzZXJ2aWNlSWRlbnRpZmllcjtcbiAgICAgICAgdGhpcy5wYXJlbnRDb250ZXh0ID0gcGFyZW50Q29udGV4dDtcbiAgICAgICAgdGhpcy5wYXJlbnRSZXF1ZXN0ID0gcGFyZW50UmVxdWVzdDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMuY2hpbGRSZXF1ZXN0cyA9IFtdO1xuICAgICAgICB0aGlzLmJpbmRpbmdzID0gKEFycmF5LmlzQXJyYXkoYmluZGluZ3MpID8gYmluZGluZ3MgOiBbYmluZGluZ3NdKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0U2NvcGUgPSBwYXJlbnRSZXF1ZXN0ID09PSBudWxsXG4gICAgICAgICAgICA/IG5ldyBNYXAoKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgIH1cbiAgICBSZXF1ZXN0LnByb3RvdHlwZS5hZGRDaGlsZFJlcXVlc3QgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIsIGJpbmRpbmdzLCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gbmV3IFJlcXVlc3Qoc2VydmljZUlkZW50aWZpZXIsIHRoaXMucGFyZW50Q29udGV4dCwgdGhpcywgYmluZGluZ3MsIHRhcmdldCk7XG4gICAgICAgIHRoaXMuY2hpbGRSZXF1ZXN0cy5wdXNoKGNoaWxkKTtcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcXVlc3Q7XG59KCkpO1xuZXhwb3J0IHsgUmVxdWVzdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVxdWVzdC5qcy5tYXAiLCJpbXBvcnQgeyBCaW5kaW5nQ291bnQgfSBmcm9tIFwiLi4vYmluZGluZ3MvYmluZGluZ19jb3VudFwiO1xuaW1wb3J0ICogYXMgRVJST1JfTVNHUyBmcm9tIFwiLi4vY29uc3RhbnRzL2Vycm9yX21zZ3NcIjtcbmltcG9ydCB7IEJpbmRpbmdUeXBlRW51bSwgVGFyZ2V0VHlwZUVudW0gfSBmcm9tIFwiLi4vY29uc3RhbnRzL2xpdGVyYWxfdHlwZXNcIjtcbmltcG9ydCAqIGFzIE1FVEFEQVRBX0tFWSBmcm9tIFwiLi4vY29uc3RhbnRzL21ldGFkYXRhX2tleXNcIjtcbmltcG9ydCB7IGlzU3RhY2tPdmVyZmxvd0V4ZXB0aW9uIH0gZnJvbSBcIi4uL3V0aWxzL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IGNpcmN1bGFyRGVwZW5kZW5jeVRvRXhjZXB0aW9uLCBnZXRTZXJ2aWNlSWRlbnRpZmllckFzU3RyaW5nLCBsaXN0TWV0YWRhdGFGb3JUYXJnZXQsIGxpc3RSZWdpc3RlcmVkQmluZGluZ3NGb3JTZXJ2aWNlSWRlbnRpZmllciB9IGZyb20gXCIuLi91dGlscy9zZXJpYWxpemF0aW9uXCI7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSBcIi4vY29udGV4dFwiO1xuaW1wb3J0IHsgTWV0YWRhdGEgfSBmcm9tIFwiLi9tZXRhZGF0YVwiO1xuaW1wb3J0IHsgUGxhbiB9IGZyb20gXCIuL3BsYW5cIjtcbmltcG9ydCB7IGdldEJhc2VDbGFzc0RlcGVuZGVuY3lDb3VudCwgZ2V0RGVwZW5kZW5jaWVzLCBnZXRGdW5jdGlvbk5hbWUgfSBmcm9tIFwiLi9yZWZsZWN0aW9uX3V0aWxzXCI7XG5pbXBvcnQgeyBSZXF1ZXN0IH0gZnJvbSBcIi4vcmVxdWVzdFwiO1xuaW1wb3J0IHsgVGFyZ2V0IH0gZnJvbSBcIi4vdGFyZ2V0XCI7XG5mdW5jdGlvbiBnZXRCaW5kaW5nRGljdGlvbmFyeShjbnRucikge1xuICAgIHJldHVybiBjbnRuci5fYmluZGluZ0RpY3Rpb25hcnk7XG59XG5mdW5jdGlvbiBfY3JlYXRlVGFyZ2V0KGlzTXVsdGlJbmplY3QsIHRhcmdldFR5cGUsIHNlcnZpY2VJZGVudGlmaWVyLCBuYW1lLCBrZXksIHZhbHVlKSB7XG4gICAgdmFyIG1ldGFkYXRhS2V5ID0gaXNNdWx0aUluamVjdCA/IE1FVEFEQVRBX0tFWS5NVUxUSV9JTkpFQ1RfVEFHIDogTUVUQURBVEFfS0VZLklOSkVDVF9UQUc7XG4gICAgdmFyIGluamVjdE1ldGFkYXRhID0gbmV3IE1ldGFkYXRhKG1ldGFkYXRhS2V5LCBzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgdmFyIHRhcmdldCA9IG5ldyBUYXJnZXQodGFyZ2V0VHlwZSwgbmFtZSwgc2VydmljZUlkZW50aWZpZXIsIGluamVjdE1ldGFkYXRhKTtcbiAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHRhZ01ldGFkYXRhID0gbmV3IE1ldGFkYXRhKGtleSwgdmFsdWUpO1xuICAgICAgICB0YXJnZXQubWV0YWRhdGEucHVzaCh0YWdNZXRhZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBfZ2V0QWN0aXZlQmluZGluZ3MobWV0YWRhdGFSZWFkZXIsIGF2b2lkQ29uc3RyYWludHMsIGNvbnRleHQsIHBhcmVudFJlcXVlc3QsIHRhcmdldCkge1xuICAgIHZhciBiaW5kaW5ncyA9IGdldEJpbmRpbmdzKGNvbnRleHQuY29udGFpbmVyLCB0YXJnZXQuc2VydmljZUlkZW50aWZpZXIpO1xuICAgIHZhciBhY3RpdmVCaW5kaW5ncyA9IFtdO1xuICAgIGlmIChiaW5kaW5ncy5sZW5ndGggPT09IEJpbmRpbmdDb3VudC5Ob0JpbmRpbmdzQXZhaWxhYmxlICYmXG4gICAgICAgIGNvbnRleHQuY29udGFpbmVyLm9wdGlvbnMuYXV0b0JpbmRJbmplY3RhYmxlICYmXG4gICAgICAgIHR5cGVvZiB0YXJnZXQuc2VydmljZUlkZW50aWZpZXIgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICBtZXRhZGF0YVJlYWRlci5nZXRDb25zdHJ1Y3Rvck1ldGFkYXRhKHRhcmdldC5zZXJ2aWNlSWRlbnRpZmllcikuY29tcGlsZXJHZW5lcmF0ZWRNZXRhZGF0YSkge1xuICAgICAgICBjb250ZXh0LmNvbnRhaW5lci5iaW5kKHRhcmdldC5zZXJ2aWNlSWRlbnRpZmllcikudG9TZWxmKCk7XG4gICAgICAgIGJpbmRpbmdzID0gZ2V0QmluZGluZ3MoY29udGV4dC5jb250YWluZXIsIHRhcmdldC5zZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgfVxuICAgIGlmICghYXZvaWRDb25zdHJhaW50cykge1xuICAgICAgICBhY3RpdmVCaW5kaW5ncyA9IGJpbmRpbmdzLmZpbHRlcihmdW5jdGlvbiAoYmluZGluZykge1xuICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChiaW5kaW5nLnNlcnZpY2VJZGVudGlmaWVyLCBjb250ZXh0LCBwYXJlbnRSZXF1ZXN0LCBiaW5kaW5nLCB0YXJnZXQpO1xuICAgICAgICAgICAgcmV0dXJuIGJpbmRpbmcuY29uc3RyYWludChyZXF1ZXN0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhY3RpdmVCaW5kaW5ncyA9IGJpbmRpbmdzO1xuICAgIH1cbiAgICBfdmFsaWRhdGVBY3RpdmVCaW5kaW5nQ291bnQodGFyZ2V0LnNlcnZpY2VJZGVudGlmaWVyLCBhY3RpdmVCaW5kaW5ncywgdGFyZ2V0LCBjb250ZXh0LmNvbnRhaW5lcik7XG4gICAgcmV0dXJuIGFjdGl2ZUJpbmRpbmdzO1xufVxuZnVuY3Rpb24gX3ZhbGlkYXRlQWN0aXZlQmluZGluZ0NvdW50KHNlcnZpY2VJZGVudGlmaWVyLCBiaW5kaW5ncywgdGFyZ2V0LCBjb250YWluZXIpIHtcbiAgICBzd2l0Y2ggKGJpbmRpbmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIEJpbmRpbmdDb3VudC5Ob0JpbmRpbmdzQXZhaWxhYmxlOlxuICAgICAgICAgICAgaWYgKHRhcmdldC5pc09wdGlvbmFsKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmluZGluZ3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZUlkZW50aWZpZXJTdHJpbmcgPSBnZXRTZXJ2aWNlSWRlbnRpZmllckFzU3RyaW5nKHNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICAgICAgICAgICAgICB2YXIgbXNnID0gRVJST1JfTVNHUy5OT1RfUkVHSVNURVJFRDtcbiAgICAgICAgICAgICAgICBtc2cgKz0gbGlzdE1ldGFkYXRhRm9yVGFyZ2V0KHNlcnZpY2VJZGVudGlmaWVyU3RyaW5nLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIG1zZyArPSBsaXN0UmVnaXN0ZXJlZEJpbmRpbmdzRm9yU2VydmljZUlkZW50aWZpZXIoY29udGFpbmVyLCBzZXJ2aWNlSWRlbnRpZmllclN0cmluZywgZ2V0QmluZGluZ3MpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICBjYXNlIEJpbmRpbmdDb3VudC5Pbmx5T25lQmluZGluZ0F2YWlsYWJsZTpcbiAgICAgICAgICAgIHJldHVybiBiaW5kaW5ncztcbiAgICAgICAgY2FzZSBCaW5kaW5nQ291bnQuTXVsdGlwbGVCaW5kaW5nc0F2YWlsYWJsZTpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICghdGFyZ2V0LmlzQXJyYXkoKSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlSWRlbnRpZmllclN0cmluZyA9IGdldFNlcnZpY2VJZGVudGlmaWVyQXNTdHJpbmcoc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICAgICAgICAgIHZhciBtc2cgPSBFUlJPUl9NU0dTLkFNQklHVU9VU19NQVRDSCArIFwiIFwiICsgc2VydmljZUlkZW50aWZpZXJTdHJpbmc7XG4gICAgICAgICAgICAgICAgbXNnICs9IGxpc3RSZWdpc3RlcmVkQmluZGluZ3NGb3JTZXJ2aWNlSWRlbnRpZmllcihjb250YWluZXIsIHNlcnZpY2VJZGVudGlmaWVyU3RyaW5nLCBnZXRCaW5kaW5ncyk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmluZGluZ3M7XG4gICAgICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gX2NyZWF0ZVN1YlJlcXVlc3RzKG1ldGFkYXRhUmVhZGVyLCBhdm9pZENvbnN0cmFpbnRzLCBzZXJ2aWNlSWRlbnRpZmllciwgY29udGV4dCwgcGFyZW50UmVxdWVzdCwgdGFyZ2V0KSB7XG4gICAgdmFyIGFjdGl2ZUJpbmRpbmdzO1xuICAgIHZhciBjaGlsZFJlcXVlc3Q7XG4gICAgaWYgKHBhcmVudFJlcXVlc3QgPT09IG51bGwpIHtcbiAgICAgICAgYWN0aXZlQmluZGluZ3MgPSBfZ2V0QWN0aXZlQmluZGluZ3MobWV0YWRhdGFSZWFkZXIsIGF2b2lkQ29uc3RyYWludHMsIGNvbnRleHQsIG51bGwsIHRhcmdldCk7XG4gICAgICAgIGNoaWxkUmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHNlcnZpY2VJZGVudGlmaWVyLCBjb250ZXh0LCBudWxsLCBhY3RpdmVCaW5kaW5ncywgdGFyZ2V0KTtcbiAgICAgICAgdmFyIHRoZVBsYW4gPSBuZXcgUGxhbihjb250ZXh0LCBjaGlsZFJlcXVlc3QpO1xuICAgICAgICBjb250ZXh0LmFkZFBsYW4odGhlUGxhbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhY3RpdmVCaW5kaW5ncyA9IF9nZXRBY3RpdmVCaW5kaW5ncyhtZXRhZGF0YVJlYWRlciwgYXZvaWRDb25zdHJhaW50cywgY29udGV4dCwgcGFyZW50UmVxdWVzdCwgdGFyZ2V0KTtcbiAgICAgICAgY2hpbGRSZXF1ZXN0ID0gcGFyZW50UmVxdWVzdC5hZGRDaGlsZFJlcXVlc3QodGFyZ2V0LnNlcnZpY2VJZGVudGlmaWVyLCBhY3RpdmVCaW5kaW5ncywgdGFyZ2V0KTtcbiAgICB9XG4gICAgYWN0aXZlQmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbiAoYmluZGluZykge1xuICAgICAgICB2YXIgc3ViQ2hpbGRSZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgaWYgKHRhcmdldC5pc0FycmF5KCkpIHtcbiAgICAgICAgICAgIHN1YkNoaWxkUmVxdWVzdCA9IGNoaWxkUmVxdWVzdC5hZGRDaGlsZFJlcXVlc3QoYmluZGluZy5zZXJ2aWNlSWRlbnRpZmllciwgYmluZGluZywgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChiaW5kaW5nLmNhY2hlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3ViQ2hpbGRSZXF1ZXN0ID0gY2hpbGRSZXF1ZXN0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChiaW5kaW5nLnR5cGUgPT09IEJpbmRpbmdUeXBlRW51bS5JbnN0YW5jZSAmJiBiaW5kaW5nLmltcGxlbWVudGF0aW9uVHlwZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGRlcGVuZGVuY2llcyA9IGdldERlcGVuZGVuY2llcyhtZXRhZGF0YVJlYWRlciwgYmluZGluZy5pbXBsZW1lbnRhdGlvblR5cGUpO1xuICAgICAgICAgICAgaWYgKCFjb250ZXh0LmNvbnRhaW5lci5vcHRpb25zLnNraXBCYXNlQ2xhc3NDaGVja3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmFzZUNsYXNzRGVwZW5kZW5jeUNvdW50ID0gZ2V0QmFzZUNsYXNzRGVwZW5kZW5jeUNvdW50KG1ldGFkYXRhUmVhZGVyLCBiaW5kaW5nLmltcGxlbWVudGF0aW9uVHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRlcGVuZGVuY2llcy5sZW5ndGggPCBiYXNlQ2xhc3NEZXBlbmRlbmN5Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gRVJST1JfTVNHUy5BUkdVTUVOVFNfTEVOR1RIX01JU01BVENIKGdldEZ1bmN0aW9uTmFtZShiaW5kaW5nLmltcGxlbWVudGF0aW9uVHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlcGVuZGVuY2llcy5mb3JFYWNoKGZ1bmN0aW9uIChkZXBlbmRlbmN5KSB7XG4gICAgICAgICAgICAgICAgX2NyZWF0ZVN1YlJlcXVlc3RzKG1ldGFkYXRhUmVhZGVyLCBmYWxzZSwgZGVwZW5kZW5jeS5zZXJ2aWNlSWRlbnRpZmllciwgY29udGV4dCwgc3ViQ2hpbGRSZXF1ZXN0LCBkZXBlbmRlbmN5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRCaW5kaW5ncyhjb250YWluZXIsIHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgdmFyIGJpbmRpbmdzID0gW107XG4gICAgdmFyIGJpbmRpbmdEaWN0aW9uYXJ5ID0gZ2V0QmluZGluZ0RpY3Rpb25hcnkoY29udGFpbmVyKTtcbiAgICBpZiAoYmluZGluZ0RpY3Rpb25hcnkuaGFzS2V5KHNlcnZpY2VJZGVudGlmaWVyKSkge1xuICAgICAgICBiaW5kaW5ncyA9IGJpbmRpbmdEaWN0aW9uYXJ5LmdldChzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbnRhaW5lci5wYXJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgYmluZGluZ3MgPSBnZXRCaW5kaW5ncyhjb250YWluZXIucGFyZW50LCBzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgfVxuICAgIHJldHVybiBiaW5kaW5ncztcbn1cbmZ1bmN0aW9uIHBsYW4obWV0YWRhdGFSZWFkZXIsIGNvbnRhaW5lciwgaXNNdWx0aUluamVjdCwgdGFyZ2V0VHlwZSwgc2VydmljZUlkZW50aWZpZXIsIGtleSwgdmFsdWUsIGF2b2lkQ29uc3RyYWludHMpIHtcbiAgICBpZiAoYXZvaWRDb25zdHJhaW50cyA9PT0gdm9pZCAwKSB7IGF2b2lkQ29uc3RyYWludHMgPSBmYWxzZTsgfVxuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQoY29udGFpbmVyKTtcbiAgICB2YXIgdGFyZ2V0ID0gX2NyZWF0ZVRhcmdldChpc011bHRpSW5qZWN0LCB0YXJnZXRUeXBlLCBzZXJ2aWNlSWRlbnRpZmllciwgXCJcIiwga2V5LCB2YWx1ZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgX2NyZWF0ZVN1YlJlcXVlc3RzKG1ldGFkYXRhUmVhZGVyLCBhdm9pZENvbnN0cmFpbnRzLCBzZXJ2aWNlSWRlbnRpZmllciwgY29udGV4dCwgbnVsbCwgdGFyZ2V0KTtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoaXNTdGFja092ZXJmbG93RXhlcHRpb24oZXJyb3IpKSB7XG4gICAgICAgICAgICBjaXJjdWxhckRlcGVuZGVuY3lUb0V4Y2VwdGlvbihjb250ZXh0LnBsYW4ucm9vdFJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZU1vY2tSZXF1ZXN0KGNvbnRhaW5lciwgc2VydmljZUlkZW50aWZpZXIsIGtleSwgdmFsdWUpIHtcbiAgICB2YXIgdGFyZ2V0ID0gbmV3IFRhcmdldChUYXJnZXRUeXBlRW51bS5WYXJpYWJsZSwgXCJcIiwgc2VydmljZUlkZW50aWZpZXIsIG5ldyBNZXRhZGF0YShrZXksIHZhbHVlKSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dChjb250YWluZXIpO1xuICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3Qoc2VydmljZUlkZW50aWZpZXIsIGNvbnRleHQsIG51bGwsIFtdLCB0YXJnZXQpO1xuICAgIHJldHVybiByZXF1ZXN0O1xufVxuZXhwb3J0IHsgcGxhbiwgY3JlYXRlTW9ja1JlcXVlc3QsIGdldEJpbmRpbmdEaWN0aW9uYXJ5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wbGFubmVyLmpzLm1hcCIsImZ1bmN0aW9uIGlzUHJvbWlzZShvYmplY3QpIHtcbiAgICB2YXIgaXNPYmplY3RPckZ1bmN0aW9uID0gKHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gbnVsbCkgfHwgdHlwZW9mIG9iamVjdCA9PT0gJ2Z1bmN0aW9uJztcbiAgICByZXR1cm4gaXNPYmplY3RPckZ1bmN0aW9uICYmIHR5cGVvZiBvYmplY3QudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xufVxuZnVuY3Rpb24gaXNQcm9taXNlT3JDb250YWluc1Byb21pc2Uob2JqZWN0KSB7XG4gICAgaWYgKGlzUHJvbWlzZShvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvYmplY3QpICYmIG9iamVjdC5zb21lKGlzUHJvbWlzZSk7XG59XG5leHBvcnQgeyBpc1Byb21pc2UsIGlzUHJvbWlzZU9yQ29udGFpbnNQcm9taXNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3luYy5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuaW1wb3J0IHsgQmluZGluZ1Njb3BlRW51bSB9IGZyb20gXCIuLi9pbnZlcnNpZnlcIjtcbmltcG9ydCB7IGlzUHJvbWlzZSB9IGZyb20gXCIuLi91dGlscy9hc3luY1wiO1xuZXhwb3J0IHZhciB0cnlHZXRGcm9tU2NvcGUgPSBmdW5jdGlvbiAocmVxdWVzdFNjb3BlLCBiaW5kaW5nKSB7XG4gICAgaWYgKChiaW5kaW5nLnNjb3BlID09PSBCaW5kaW5nU2NvcGVFbnVtLlNpbmdsZXRvbikgJiYgYmluZGluZy5hY3RpdmF0ZWQpIHtcbiAgICAgICAgcmV0dXJuIGJpbmRpbmcuY2FjaGU7XG4gICAgfVxuICAgIGlmIChiaW5kaW5nLnNjb3BlID09PSBCaW5kaW5nU2NvcGVFbnVtLlJlcXVlc3QgJiZcbiAgICAgICAgcmVxdWVzdFNjb3BlLmhhcyhiaW5kaW5nLmlkKSkge1xuICAgICAgICByZXR1cm4gcmVxdWVzdFNjb3BlLmdldChiaW5kaW5nLmlkKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuZXhwb3J0IHZhciBzYXZlVG9TY29wZSA9IGZ1bmN0aW9uIChyZXF1ZXN0U2NvcGUsIGJpbmRpbmcsIHJlc3VsdCkge1xuICAgIGlmIChiaW5kaW5nLnNjb3BlID09PSBCaW5kaW5nU2NvcGVFbnVtLlNpbmdsZXRvbikge1xuICAgICAgICBfc2F2ZVRvU2luZ2xldG9uU2NvcGUoYmluZGluZywgcmVzdWx0KTtcbiAgICB9XG4gICAgaWYgKGJpbmRpbmcuc2NvcGUgPT09IEJpbmRpbmdTY29wZUVudW0uUmVxdWVzdCkge1xuICAgICAgICBfc2F2ZVRvUmVxdWVzdFNjb3BlKHJlcXVlc3RTY29wZSwgYmluZGluZywgcmVzdWx0KTtcbiAgICB9XG59O1xudmFyIF9zYXZlVG9SZXF1ZXN0U2NvcGUgPSBmdW5jdGlvbiAocmVxdWVzdFNjb3BlLCBiaW5kaW5nLCByZXN1bHQpIHtcbiAgICBpZiAoIXJlcXVlc3RTY29wZS5oYXMoYmluZGluZy5pZCkpIHtcbiAgICAgICAgcmVxdWVzdFNjb3BlLnNldChiaW5kaW5nLmlkLCByZXN1bHQpO1xuICAgIH1cbn07XG52YXIgX3NhdmVUb1NpbmdsZXRvblNjb3BlID0gZnVuY3Rpb24gKGJpbmRpbmcsIHJlc3VsdCkge1xuICAgIGJpbmRpbmcuY2FjaGUgPSByZXN1bHQ7XG4gICAgYmluZGluZy5hY3RpdmF0ZWQgPSB0cnVlO1xuICAgIGlmIChpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICB2b2lkIF9zYXZlQXN5bmNSZXN1bHRUb1NpbmdsZXRvblNjb3BlKGJpbmRpbmcsIHJlc3VsdCk7XG4gICAgfVxufTtcbnZhciBfc2F2ZUFzeW5jUmVzdWx0VG9TaW5nbGV0b25TY29wZSA9IGZ1bmN0aW9uIChiaW5kaW5nLCBhc3luY1Jlc3VsdCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0LCBleF8xO1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBhc3luY1Jlc3VsdF07XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgIGJpbmRpbmcuY2FjaGUgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFszLCAzXTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBleF8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgIGJpbmRpbmcuY2FjaGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJpbmRpbmcuYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXhfMTtcbiAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyXTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY29wZS5qcy5tYXAiLCJleHBvcnQgdmFyIEZhY3RvcnlUeXBlO1xuKGZ1bmN0aW9uIChGYWN0b3J5VHlwZSkge1xuICAgIEZhY3RvcnlUeXBlW1wiRHluYW1pY1ZhbHVlXCJdID0gXCJ0b0R5bmFtaWNWYWx1ZVwiO1xuICAgIEZhY3RvcnlUeXBlW1wiRmFjdG9yeVwiXSA9IFwidG9GYWN0b3J5XCI7XG4gICAgRmFjdG9yeVR5cGVbXCJQcm92aWRlclwiXSA9IFwidG9Qcm92aWRlclwiO1xufSkoRmFjdG9yeVR5cGUgfHwgKEZhY3RvcnlUeXBlID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZhY3RvcnlfdHlwZS5qcy5tYXAiLCJpbXBvcnQgeyBnZXRTZXJ2aWNlSWRlbnRpZmllckFzU3RyaW5nIH0gZnJvbSBcIi4uL2ludmVyc2lmeVwiO1xuaW1wb3J0ICogYXMgRVJST1JfTVNHUyBmcm9tIFwiLi4vY29uc3RhbnRzL2Vycm9yX21zZ3NcIjtcbmltcG9ydCB7IEJpbmRpbmdUeXBlRW51bSB9IGZyb20gXCIuLi9jb25zdGFudHMvbGl0ZXJhbF90eXBlc1wiO1xuaW1wb3J0IHsgRmFjdG9yeVR5cGUgfSBmcm9tIFwiLi9mYWN0b3J5X3R5cGVcIjtcbmV4cG9ydCB2YXIgbXVsdGlCaW5kVG9TZXJ2aWNlID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2VydmljZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHR5cGVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHR5cGVzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodCkgeyByZXR1cm4gY29udGFpbmVyLmJpbmQodCkudG9TZXJ2aWNlKHNlcnZpY2UpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xufTtcbmV4cG9ydCB2YXIgZW5zdXJlRnVsbHlCb3VuZCA9IGZ1bmN0aW9uIChiaW5kaW5nKSB7XG4gICAgdmFyIGJvdW5kVmFsdWUgPSBudWxsO1xuICAgIHN3aXRjaCAoYmluZGluZy50eXBlKSB7XG4gICAgICAgIGNhc2UgQmluZGluZ1R5cGVFbnVtLkNvbnN0YW50VmFsdWU6XG4gICAgICAgIGNhc2UgQmluZGluZ1R5cGVFbnVtLkZ1bmN0aW9uOlxuICAgICAgICAgICAgYm91bmRWYWx1ZSA9IGJpbmRpbmcuY2FjaGU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCaW5kaW5nVHlwZUVudW0uQ29uc3RydWN0b3I6XG4gICAgICAgIGNhc2UgQmluZGluZ1R5cGVFbnVtLkluc3RhbmNlOlxuICAgICAgICAgICAgYm91bmRWYWx1ZSA9IGJpbmRpbmcuaW1wbGVtZW50YXRpb25UeXBlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQmluZGluZ1R5cGVFbnVtLkR5bmFtaWNWYWx1ZTpcbiAgICAgICAgICAgIGJvdW5kVmFsdWUgPSBiaW5kaW5nLmR5bmFtaWNWYWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEJpbmRpbmdUeXBlRW51bS5Qcm92aWRlcjpcbiAgICAgICAgICAgIGJvdW5kVmFsdWUgPSBiaW5kaW5nLnByb3ZpZGVyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQmluZGluZ1R5cGVFbnVtLkZhY3Rvcnk6XG4gICAgICAgICAgICBib3VuZFZhbHVlID0gYmluZGluZy5mYWN0b3J5O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChib3VuZFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHZhciBzZXJ2aWNlSWRlbnRpZmllckFzU3RyaW5nID0gZ2V0U2VydmljZUlkZW50aWZpZXJBc1N0cmluZyhiaW5kaW5nLnNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01TR1MuSU5WQUxJRF9CSU5ESU5HX1RZUEUgKyBcIiBcIiArIHNlcnZpY2VJZGVudGlmaWVyQXNTdHJpbmcpO1xuICAgIH1cbn07XG5leHBvcnQgdmFyIGdldEZhY3RvcnlEZXRhaWxzID0gZnVuY3Rpb24gKGJpbmRpbmcpIHtcbiAgICBzd2l0Y2ggKGJpbmRpbmcudHlwZSkge1xuICAgICAgICBjYXNlIEJpbmRpbmdUeXBlRW51bS5GYWN0b3J5OlxuICAgICAgICAgICAgcmV0dXJuIHsgZmFjdG9yeTogYmluZGluZy5mYWN0b3J5LCBmYWN0b3J5VHlwZTogRmFjdG9yeVR5cGUuRmFjdG9yeSB9O1xuICAgICAgICBjYXNlIEJpbmRpbmdUeXBlRW51bS5Qcm92aWRlcjpcbiAgICAgICAgICAgIHJldHVybiB7IGZhY3Rvcnk6IGJpbmRpbmcucHJvdmlkZXIsIGZhY3RvcnlUeXBlOiBGYWN0b3J5VHlwZS5Qcm92aWRlciB9O1xuICAgICAgICBjYXNlIEJpbmRpbmdUeXBlRW51bS5EeW5hbWljVmFsdWU6XG4gICAgICAgICAgICByZXR1cm4geyBmYWN0b3J5OiBiaW5kaW5nLmR5bmFtaWNWYWx1ZSwgZmFjdG9yeVR5cGU6IEZhY3RvcnlUeXBlLkR5bmFtaWNWYWx1ZSB9O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBmYWN0b3J5IHR5cGUgXCIgKyBiaW5kaW5nLnR5cGUpO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kaW5nX3V0aWxzLmpzLm1hcCIsInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuaW1wb3J0IHsgT05fREVBQ1RJVkFUSU9OX0VSUk9SLCBQT1NUX0NPTlNUUlVDVF9FUlJPUiwgUFJFX0RFU1RST1lfRVJST1IgfSBmcm9tIFwiLi4vY29uc3RhbnRzL2Vycm9yX21zZ3NcIjtcbmltcG9ydCB7IEJpbmRpbmdTY29wZUVudW0sIFRhcmdldFR5cGVFbnVtIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9saXRlcmFsX3R5cGVzXCI7XG5pbXBvcnQgKiBhcyBNRVRBREFUQV9LRVkgZnJvbSBcIi4uL2NvbnN0YW50cy9tZXRhZGF0YV9rZXlzXCI7XG5pbXBvcnQgeyBpc1Byb21pc2UsIGlzUHJvbWlzZU9yQ29udGFpbnNQcm9taXNlIH0gZnJvbSBcIi4uL3V0aWxzL2FzeW5jXCI7XG5mdW5jdGlvbiBfcmVzb2x2ZVJlcXVlc3RzKGNoaWxkUmVxdWVzdHMsIHJlc29sdmVSZXF1ZXN0KSB7XG4gICAgcmV0dXJuIGNoaWxkUmVxdWVzdHMucmVkdWNlKGZ1bmN0aW9uIChyZXNvbHZlZFJlcXVlc3RzLCBjaGlsZFJlcXVlc3QpIHtcbiAgICAgICAgdmFyIGluamVjdGlvbiA9IHJlc29sdmVSZXF1ZXN0KGNoaWxkUmVxdWVzdCk7XG4gICAgICAgIHZhciB0YXJnZXRUeXBlID0gY2hpbGRSZXF1ZXN0LnRhcmdldC50eXBlO1xuICAgICAgICBpZiAodGFyZ2V0VHlwZSA9PT0gVGFyZ2V0VHlwZUVudW0uQ29uc3RydWN0b3JBcmd1bWVudCkge1xuICAgICAgICAgICAgcmVzb2x2ZWRSZXF1ZXN0cy5jb25zdHJ1Y3RvckluamVjdGlvbnMucHVzaChpbmplY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZWRSZXF1ZXN0cy5wcm9wZXJ0eVJlcXVlc3RzLnB1c2goY2hpbGRSZXF1ZXN0KTtcbiAgICAgICAgICAgIHJlc29sdmVkUmVxdWVzdHMucHJvcGVydHlJbmplY3Rpb25zLnB1c2goaW5qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc29sdmVkUmVxdWVzdHMuaXNBc3luYykge1xuICAgICAgICAgICAgcmVzb2x2ZWRSZXF1ZXN0cy5pc0FzeW5jID0gaXNQcm9taXNlT3JDb250YWluc1Byb21pc2UoaW5qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x2ZWRSZXF1ZXN0cztcbiAgICB9LCB7IGNvbnN0cnVjdG9ySW5qZWN0aW9uczogW10sIHByb3BlcnR5SW5qZWN0aW9uczogW10sIHByb3BlcnR5UmVxdWVzdHM6IFtdLCBpc0FzeW5jOiBmYWxzZSB9KTtcbn1cbmZ1bmN0aW9uIF9jcmVhdGVJbnN0YW5jZShjb25zdHIsIGNoaWxkUmVxdWVzdHMsIHJlc29sdmVSZXF1ZXN0KSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoY2hpbGRSZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciByZXNvbHZlZCA9IF9yZXNvbHZlUmVxdWVzdHMoY2hpbGRSZXF1ZXN0cywgcmVzb2x2ZVJlcXVlc3QpO1xuICAgICAgICB2YXIgY3JlYXRlSW5zdGFuY2VXaXRoSW5qZWN0aW9uc0FyZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXNvbHZlZCksIHsgY29uc3RyOiBjb25zdHIgfSk7XG4gICAgICAgIGlmIChyZXNvbHZlZC5pc0FzeW5jKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBjcmVhdGVJbnN0YW5jZVdpdGhJbmplY3Rpb25zQXN5bmMoY3JlYXRlSW5zdGFuY2VXaXRoSW5qZWN0aW9uc0FyZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBjcmVhdGVJbnN0YW5jZVdpdGhJbmplY3Rpb25zKGNyZWF0ZUluc3RhbmNlV2l0aEluamVjdGlvbnNBcmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBuZXcgY29uc3RyKCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZVdpdGhJbmplY3Rpb25zKGFyZ3MpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIGluc3RhbmNlID0gbmV3ICgoX2EgPSBhcmdzLmNvbnN0cikuYmluZC5hcHBseShfYSwgX19zcHJlYWRBcnJheShbdm9pZCAwXSwgYXJncy5jb25zdHJ1Y3RvckluamVjdGlvbnMsIGZhbHNlKSkpKCk7XG4gICAgYXJncy5wcm9wZXJ0eVJlcXVlc3RzLmZvckVhY2goZnVuY3Rpb24gKHIsIGluZGV4KSB7XG4gICAgICAgIHZhciBwcm9wZXJ0eSA9IHIudGFyZ2V0LmlkZW50aWZpZXI7XG4gICAgICAgIHZhciBpbmplY3Rpb24gPSBhcmdzLnByb3BlcnR5SW5qZWN0aW9uc1tpbmRleF07XG4gICAgICAgIGluc3RhbmNlW3Byb3BlcnR5XSA9IGluamVjdGlvbjtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG59XG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZVdpdGhJbmplY3Rpb25zQXN5bmMoYXJncykge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnN0cnVjdG9ySW5qZWN0aW9ucywgcHJvcGVydHlJbmplY3Rpb25zO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQsIHBvc3NpYmx5V2FpdEluamVjdGlvbnMoYXJncy5jb25zdHJ1Y3RvckluamVjdGlvbnMpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9ySW5qZWN0aW9ucyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBwb3NzaWJseVdhaXRJbmplY3Rpb25zKGFyZ3MucHJvcGVydHlJbmplY3Rpb25zKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eUluamVjdGlvbnMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgY3JlYXRlSW5zdGFuY2VXaXRoSW5qZWN0aW9ucyhfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYXJncyksIHsgY29uc3RydWN0b3JJbmplY3Rpb25zOiBjb25zdHJ1Y3RvckluamVjdGlvbnMsIHByb3BlcnR5SW5qZWN0aW9uczogcHJvcGVydHlJbmplY3Rpb25zIH0pKV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcG9zc2libHlXYWl0SW5qZWN0aW9ucyhwb3NzaWJsZVByb21pc2VpbmplY3Rpb25zKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5qZWN0aW9ucywgX2ksIHBvc3NpYmxlUHJvbWlzZWluamVjdGlvbnNfMSwgaW5qZWN0aW9uO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBpbmplY3Rpb25zID0gW107XG4gICAgICAgICAgICBmb3IgKF9pID0gMCwgcG9zc2libGVQcm9taXNlaW5qZWN0aW9uc18xID0gcG9zc2libGVQcm9taXNlaW5qZWN0aW9uczsgX2kgPCBwb3NzaWJsZVByb21pc2VpbmplY3Rpb25zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgaW5qZWN0aW9uID0gcG9zc2libGVQcm9taXNlaW5qZWN0aW9uc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbmplY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGluamVjdGlvbnMucHVzaChQcm9taXNlLmFsbChpbmplY3Rpb24pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluamVjdGlvbnMucHVzaChpbmplY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbMiwgUHJvbWlzZS5hbGwoaW5qZWN0aW9ucyldO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIF9nZXRJbnN0YW5jZUFmdGVyUG9zdENvbnN0cnVjdChjb25zdHIsIHJlc3VsdCkge1xuICAgIHZhciBwb3N0Q29uc3RydWN0UmVzdWx0ID0gX3Bvc3RDb25zdHJ1Y3QoY29uc3RyLCByZXN1bHQpO1xuICAgIGlmIChpc1Byb21pc2UocG9zdENvbnN0cnVjdFJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHBvc3RDb25zdHJ1Y3RSZXN1bHQudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHQ7IH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5mdW5jdGlvbiBfcG9zdENvbnN0cnVjdChjb25zdHIsIGluc3RhbmNlKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAoUmVmbGVjdC5oYXNNZXRhZGF0YShNRVRBREFUQV9LRVkuUE9TVF9DT05TVFJVQ1QsIGNvbnN0cikpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBSZWZsZWN0LmdldE1ldGFkYXRhKE1FVEFEQVRBX0tFWS5QT1NUX0NPTlNUUlVDVCwgY29uc3RyKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSBpbnN0YW5jZSlbZGF0YS52YWx1ZV0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFBPU1RfQ09OU1RSVUNUX0VSUk9SKGNvbnN0ci5uYW1lLCBlLm1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIF92YWxpZGF0ZUluc3RhbmNlUmVzb2x1dGlvbihiaW5kaW5nLCBjb25zdHIpIHtcbiAgICBpZiAoYmluZGluZy5zY29wZSAhPT0gQmluZGluZ1Njb3BlRW51bS5TaW5nbGV0b24pIHtcbiAgICAgICAgX3Rocm93SWZIYW5kbGluZ0RlYWN0aXZhdGlvbihiaW5kaW5nLCBjb25zdHIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF90aHJvd0lmSGFuZGxpbmdEZWFjdGl2YXRpb24oYmluZGluZywgY29uc3RyKSB7XG4gICAgdmFyIHNjb3BlRXJyb3JNZXNzYWdlID0gXCJDbGFzcyBjYW5ub3QgYmUgaW5zdGFudGlhdGVkIGluIFwiICsgKGJpbmRpbmcuc2NvcGUgPT09IEJpbmRpbmdTY29wZUVudW0uUmVxdWVzdCA/XG4gICAgICAgIFwicmVxdWVzdFwiIDpcbiAgICAgICAgXCJ0cmFuc2llbnRcIikgKyBcIiBzY29wZS5cIjtcbiAgICBpZiAodHlwZW9mIGJpbmRpbmcub25EZWFjdGl2YXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoT05fREVBQ1RJVkFUSU9OX0VSUk9SKGNvbnN0ci5uYW1lLCBzY29wZUVycm9yTWVzc2FnZSkpO1xuICAgIH1cbiAgICBpZiAoUmVmbGVjdC5oYXNNZXRhZGF0YShNRVRBREFUQV9LRVkuUFJFX0RFU1RST1ksIGNvbnN0cikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFBSRV9ERVNUUk9ZX0VSUk9SKGNvbnN0ci5uYW1lLCBzY29wZUVycm9yTWVzc2FnZSkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlc29sdmVJbnN0YW5jZShiaW5kaW5nLCBjb25zdHIsIGNoaWxkUmVxdWVzdHMsIHJlc29sdmVSZXF1ZXN0KSB7XG4gICAgX3ZhbGlkYXRlSW5zdGFuY2VSZXNvbHV0aW9uKGJpbmRpbmcsIGNvbnN0cik7XG4gICAgdmFyIHJlc3VsdCA9IF9jcmVhdGVJbnN0YW5jZShjb25zdHIsIGNoaWxkUmVxdWVzdHMsIHJlc29sdmVSZXF1ZXN0KTtcbiAgICBpZiAoaXNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZFJlc3VsdCkgeyByZXR1cm4gX2dldEluc3RhbmNlQWZ0ZXJQb3N0Q29uc3RydWN0KGNvbnN0ciwgcmVzb2x2ZWRSZXN1bHQpOyB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBfZ2V0SW5zdGFuY2VBZnRlclBvc3RDb25zdHJ1Y3QoY29uc3RyLCByZXN1bHQpO1xuICAgIH1cbn1cbmV4cG9ydCB7IHJlc29sdmVJbnN0YW5jZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5zdGFudGlhdGlvbi5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuaW1wb3J0ICogYXMgRVJST1JfTVNHUyBmcm9tIFwiLi4vY29uc3RhbnRzL2Vycm9yX21zZ3NcIjtcbmltcG9ydCB7IEJpbmRpbmdUeXBlRW51bSB9IGZyb20gXCIuLi9jb25zdGFudHMvbGl0ZXJhbF90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0QmluZGluZ0RpY3Rpb25hcnkgfSBmcm9tIFwiLi4vcGxhbm5pbmcvcGxhbm5lclwiO1xuaW1wb3J0IHsgc2F2ZVRvU2NvcGUsIHRyeUdldEZyb21TY29wZSB9IGZyb20gXCIuLi9zY29wZS9zY29wZVwiO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSBcIi4uL3V0aWxzL2FzeW5jXCI7XG5pbXBvcnQgeyBnZXRGYWN0b3J5RGV0YWlscywgZW5zdXJlRnVsbHlCb3VuZCB9IGZyb20gXCIuLi91dGlscy9iaW5kaW5nX3V0aWxzXCI7XG5pbXBvcnQgeyB0cnlBbmRUaHJvd0Vycm9ySWZTdGFja092ZXJmbG93IH0gZnJvbSBcIi4uL3V0aWxzL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IHJlc29sdmVJbnN0YW5jZSB9IGZyb20gXCIuL2luc3RhbnRpYXRpb25cIjtcbnZhciBfcmVzb2x2ZVJlcXVlc3QgPSBmdW5jdGlvbiAocmVxdWVzdFNjb3BlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZXF1ZXN0KSB7XG4gICAgICAgIHJlcXVlc3QucGFyZW50Q29udGV4dC5zZXRDdXJyZW50UmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgICAgdmFyIGJpbmRpbmdzID0gcmVxdWVzdC5iaW5kaW5ncztcbiAgICAgICAgdmFyIGNoaWxkUmVxdWVzdHMgPSByZXF1ZXN0LmNoaWxkUmVxdWVzdHM7XG4gICAgICAgIHZhciB0YXJnZXRJc0FuQXJyYXkgPSByZXF1ZXN0LnRhcmdldCAmJiByZXF1ZXN0LnRhcmdldC5pc0FycmF5KCk7XG4gICAgICAgIHZhciB0YXJnZXRQYXJlbnRJc05vdEFuQXJyYXkgPSAhcmVxdWVzdC5wYXJlbnRSZXF1ZXN0IHx8XG4gICAgICAgICAgICAhcmVxdWVzdC5wYXJlbnRSZXF1ZXN0LnRhcmdldCB8fFxuICAgICAgICAgICAgIXJlcXVlc3QudGFyZ2V0IHx8XG4gICAgICAgICAgICAhcmVxdWVzdC5wYXJlbnRSZXF1ZXN0LnRhcmdldC5tYXRjaGVzQXJyYXkocmVxdWVzdC50YXJnZXQuc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICBpZiAodGFyZ2V0SXNBbkFycmF5ICYmIHRhcmdldFBhcmVudElzTm90QW5BcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkUmVxdWVzdHMubWFwKGZ1bmN0aW9uIChjaGlsZFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2YgPSBfcmVzb2x2ZVJlcXVlc3QocmVxdWVzdFNjb3BlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2YoY2hpbGRSZXF1ZXN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3QudGFyZ2V0LmlzT3B0aW9uYWwoKSAmJiBiaW5kaW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJpbmRpbmcgPSBiaW5kaW5nc1swXTtcbiAgICAgICAgICAgIHJldHVybiBfcmVzb2x2ZUJpbmRpbmcocmVxdWVzdFNjb3BlLCByZXF1ZXN0LCBiaW5kaW5nKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xudmFyIF9yZXNvbHZlRmFjdG9yeUZyb21CaW5kaW5nID0gZnVuY3Rpb24gKGJpbmRpbmcsIGNvbnRleHQpIHtcbiAgICB2YXIgZmFjdG9yeURldGFpbHMgPSBnZXRGYWN0b3J5RGV0YWlscyhiaW5kaW5nKTtcbiAgICByZXR1cm4gdHJ5QW5kVGhyb3dFcnJvcklmU3RhY2tPdmVyZmxvdyhmdW5jdGlvbiAoKSB7IHJldHVybiBmYWN0b3J5RGV0YWlscy5mYWN0b3J5LmJpbmQoYmluZGluZykoY29udGV4dCk7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBFcnJvcihFUlJPUl9NU0dTLkNJUkNVTEFSX0RFUEVOREVOQ1lfSU5fRkFDVE9SWShmYWN0b3J5RGV0YWlscy5mYWN0b3J5VHlwZSwgY29udGV4dC5jdXJyZW50UmVxdWVzdC5zZXJ2aWNlSWRlbnRpZmllci50b1N0cmluZygpKSk7IH0pO1xufTtcbnZhciBfZ2V0UmVzb2x2ZWRGcm9tQmluZGluZyA9IGZ1bmN0aW9uIChyZXF1ZXN0U2NvcGUsIHJlcXVlc3QsIGJpbmRpbmcpIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIHZhciBjaGlsZFJlcXVlc3RzID0gcmVxdWVzdC5jaGlsZFJlcXVlc3RzO1xuICAgIGVuc3VyZUZ1bGx5Qm91bmQoYmluZGluZyk7XG4gICAgc3dpdGNoIChiaW5kaW5nLnR5cGUpIHtcbiAgICAgICAgY2FzZSBCaW5kaW5nVHlwZUVudW0uQ29uc3RhbnRWYWx1ZTpcbiAgICAgICAgY2FzZSBCaW5kaW5nVHlwZUVudW0uRnVuY3Rpb246XG4gICAgICAgICAgICByZXN1bHQgPSBiaW5kaW5nLmNhY2hlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQmluZGluZ1R5cGVFbnVtLkNvbnN0cnVjdG9yOlxuICAgICAgICAgICAgcmVzdWx0ID0gYmluZGluZy5pbXBsZW1lbnRhdGlvblR5cGU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCaW5kaW5nVHlwZUVudW0uSW5zdGFuY2U6XG4gICAgICAgICAgICByZXN1bHQgPSByZXNvbHZlSW5zdGFuY2UoYmluZGluZywgYmluZGluZy5pbXBsZW1lbnRhdGlvblR5cGUsIGNoaWxkUmVxdWVzdHMsIF9yZXNvbHZlUmVxdWVzdChyZXF1ZXN0U2NvcGUpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmVzdWx0ID0gX3Jlc29sdmVGYWN0b3J5RnJvbUJpbmRpbmcoYmluZGluZywgcmVxdWVzdC5wYXJlbnRDb250ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG52YXIgX3Jlc29sdmVJblNjb3BlID0gZnVuY3Rpb24gKHJlcXVlc3RTY29wZSwgYmluZGluZywgcmVzb2x2ZUZyb21CaW5kaW5nKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRyeUdldEZyb21TY29wZShyZXF1ZXN0U2NvcGUsIGJpbmRpbmcpO1xuICAgIGlmIChyZXN1bHQgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmVzdWx0ID0gcmVzb2x2ZUZyb21CaW5kaW5nKCk7XG4gICAgc2F2ZVRvU2NvcGUocmVxdWVzdFNjb3BlLCBiaW5kaW5nLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xudmFyIF9yZXNvbHZlQmluZGluZyA9IGZ1bmN0aW9uIChyZXF1ZXN0U2NvcGUsIHJlcXVlc3QsIGJpbmRpbmcpIHtcbiAgICByZXR1cm4gX3Jlc29sdmVJblNjb3BlKHJlcXVlc3RTY29wZSwgYmluZGluZywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gX2dldFJlc29sdmVkRnJvbUJpbmRpbmcocmVxdWVzdFNjb3BlLCByZXF1ZXN0LCBiaW5kaW5nKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQudGhlbihmdW5jdGlvbiAocmVzb2x2ZWQpIHsgcmV0dXJuIF9vbkFjdGl2YXRpb24ocmVxdWVzdCwgYmluZGluZywgcmVzb2x2ZWQpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IF9vbkFjdGl2YXRpb24ocmVxdWVzdCwgYmluZGluZywgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xufTtcbmZ1bmN0aW9uIF9vbkFjdGl2YXRpb24ocmVxdWVzdCwgYmluZGluZywgcmVzb2x2ZWQpIHtcbiAgICB2YXIgcmVzdWx0ID0gX2JpbmRpbmdBY3RpdmF0aW9uKHJlcXVlc3QucGFyZW50Q29udGV4dCwgYmluZGluZywgcmVzb2x2ZWQpO1xuICAgIHZhciBjb250YWluZXJzSXRlcmF0b3IgPSBfZ2V0Q29udGFpbmVyc0l0ZXJhdG9yKHJlcXVlc3QucGFyZW50Q29udGV4dC5jb250YWluZXIpO1xuICAgIHZhciBjb250YWluZXI7XG4gICAgdmFyIGNvbnRhaW5lcnNJdGVyYXRvclJlc3VsdCA9IGNvbnRhaW5lcnNJdGVyYXRvci5uZXh0KCk7XG4gICAgZG8ge1xuICAgICAgICBjb250YWluZXIgPSBjb250YWluZXJzSXRlcmF0b3JSZXN1bHQudmFsdWU7XG4gICAgICAgIHZhciBjb250ZXh0XzEgPSByZXF1ZXN0LnBhcmVudENvbnRleHQ7XG4gICAgICAgIHZhciBzZXJ2aWNlSWRlbnRpZmllciA9IHJlcXVlc3Quc2VydmljZUlkZW50aWZpZXI7XG4gICAgICAgIHZhciBhY3RpdmF0aW9uc0l0ZXJhdG9yID0gX2dldENvbnRhaW5lckFjdGl2YXRpb25zRm9yU2VydmljZShjb250YWluZXIsIHNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBfYWN0aXZhdGVDb250YWluZXJBc3luYyhhY3RpdmF0aW9uc0l0ZXJhdG9yLCBjb250ZXh0XzEsIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBfYWN0aXZhdGVDb250YWluZXIoYWN0aXZhdGlvbnNJdGVyYXRvciwgY29udGV4dF8xLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lcnNJdGVyYXRvclJlc3VsdCA9IGNvbnRhaW5lcnNJdGVyYXRvci5uZXh0KCk7XG4gICAgfSB3aGlsZSAoY29udGFpbmVyc0l0ZXJhdG9yUmVzdWx0LmRvbmUgIT09IHRydWUgJiYgIWdldEJpbmRpbmdEaWN0aW9uYXJ5KGNvbnRhaW5lcikuaGFzS2V5KHJlcXVlc3Quc2VydmljZUlkZW50aWZpZXIpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxudmFyIF9iaW5kaW5nQWN0aXZhdGlvbiA9IGZ1bmN0aW9uIChjb250ZXh0LCBiaW5kaW5nLCBwcmV2aW91c1Jlc3VsdCkge1xuICAgIHZhciByZXN1bHQ7XG4gICAgaWYgKHR5cGVvZiBiaW5kaW5nLm9uQWN0aXZhdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJlc3VsdCA9IGJpbmRpbmcub25BY3RpdmF0aW9uKGNvbnRleHQsIHByZXZpb3VzUmVzdWx0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IHByZXZpb3VzUmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfYWN0aXZhdGVDb250YWluZXIgPSBmdW5jdGlvbiAoYWN0aXZhdGlvbnNJdGVyYXRvciwgY29udGV4dCwgcmVzdWx0KSB7XG4gICAgdmFyIGFjdGl2YXRpb24gPSBhY3RpdmF0aW9uc0l0ZXJhdG9yLm5leHQoKTtcbiAgICB3aGlsZSAoIWFjdGl2YXRpb24uZG9uZSkge1xuICAgICAgICByZXN1bHQgPSBhY3RpdmF0aW9uLnZhbHVlKGNvbnRleHQsIHJlc3VsdCk7XG4gICAgICAgIGlmIChpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIF9hY3RpdmF0ZUNvbnRhaW5lckFzeW5jKGFjdGl2YXRpb25zSXRlcmF0b3IsIGNvbnRleHQsIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgYWN0aXZhdGlvbiA9IGFjdGl2YXRpb25zSXRlcmF0b3IubmV4dCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfYWN0aXZhdGVDb250YWluZXJBc3luYyA9IGZ1bmN0aW9uIChhY3RpdmF0aW9uc0l0ZXJhdG9yLCBjb250ZXh0LCByZXN1bHRQcm9taXNlKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQsIGFjdGl2YXRpb247XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCwgcmVzdWx0UHJvbWlzZV07XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgIGFjdGl2YXRpb24gPSBhY3RpdmF0aW9uc0l0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgaWYgKCEhYWN0aXZhdGlvbi5kb25lKSByZXR1cm4gWzMsIDRdO1xuICAgICAgICAgICAgICAgIHJldHVybiBbNCwgYWN0aXZhdGlvbi52YWx1ZShjb250ZXh0LCByZXN1bHQpXTtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGlvbiA9IGFjdGl2YXRpb25zSXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMywgMl07XG4gICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiwgcmVzdWx0XTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7IH07XG52YXIgX2dldENvbnRhaW5lckFjdGl2YXRpb25zRm9yU2VydmljZSA9IGZ1bmN0aW9uIChjb250YWluZXIsIHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgdmFyIGFjdGl2YXRpb25zID0gY29udGFpbmVyLl9hY3RpdmF0aW9ucztcbiAgICByZXR1cm4gYWN0aXZhdGlvbnMuaGFzS2V5KHNlcnZpY2VJZGVudGlmaWVyKSA/IGFjdGl2YXRpb25zLmdldChzZXJ2aWNlSWRlbnRpZmllcikudmFsdWVzKCkgOiBbXS52YWx1ZXMoKTtcbn07XG52YXIgX2dldENvbnRhaW5lcnNJdGVyYXRvciA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICB2YXIgY29udGFpbmVyc1N0YWNrID0gW2NvbnRhaW5lcl07XG4gICAgdmFyIHBhcmVudCA9IGNvbnRhaW5lci5wYXJlbnQ7XG4gICAgd2hpbGUgKHBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgICBjb250YWluZXJzU3RhY2sucHVzaChwYXJlbnQpO1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgIH1cbiAgICB2YXIgZ2V0TmV4dENvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5leHRDb250YWluZXIgPSBjb250YWluZXJzU3RhY2sucG9wKCk7XG4gICAgICAgIGlmIChuZXh0Q29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogbmV4dENvbnRhaW5lciB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgY29udGFpbmVyc0l0ZXJhdG9yID0ge1xuICAgICAgICBuZXh0OiBnZXROZXh0Q29udGFpbmVyLFxuICAgIH07XG4gICAgcmV0dXJuIGNvbnRhaW5lcnNJdGVyYXRvcjtcbn07XG5mdW5jdGlvbiByZXNvbHZlKGNvbnRleHQpIHtcbiAgICB2YXIgX2YgPSBfcmVzb2x2ZVJlcXVlc3QoY29udGV4dC5wbGFuLnJvb3RSZXF1ZXN0LnJlcXVlc3RTY29wZSk7XG4gICAgcmV0dXJuIF9mKGNvbnRleHQucGxhbi5yb290UmVxdWVzdCk7XG59XG5leHBvcnQgeyByZXNvbHZlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXNvbHZlci5qcy5tYXAiLCJpbXBvcnQgKiBhcyBNRVRBREFUQV9LRVkgZnJvbSBcIi4uL2NvbnN0YW50cy9tZXRhZGF0YV9rZXlzXCI7XG5pbXBvcnQgeyBNZXRhZGF0YSB9IGZyb20gXCIuLi9wbGFubmluZy9tZXRhZGF0YVwiO1xudmFyIHRyYXZlcnNlQW5jZXJzdG9ycyA9IGZ1bmN0aW9uIChyZXF1ZXN0LCBjb25zdHJhaW50KSB7XG4gICAgdmFyIHBhcmVudCA9IHJlcXVlc3QucGFyZW50UmVxdWVzdDtcbiAgICBpZiAocGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJhaW50KHBhcmVudCkgPyB0cnVlIDogdHJhdmVyc2VBbmNlcnN0b3JzKHBhcmVudCwgY29uc3RyYWludCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcbnZhciB0YWdnZWRDb25zdHJhaW50ID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIGNvbnN0cmFpbnQgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICByZXR1cm4gcmVxdWVzdCAhPT0gbnVsbCAmJiByZXF1ZXN0LnRhcmdldCAhPT0gbnVsbCAmJiByZXF1ZXN0LnRhcmdldC5tYXRjaGVzVGFnKGtleSkodmFsdWUpO1xuICAgIH07XG4gICAgY29uc3RyYWludC5tZXRhRGF0YSA9IG5ldyBNZXRhZGF0YShrZXksIHZhbHVlKTtcbiAgICByZXR1cm4gY29uc3RyYWludDtcbn07IH07XG52YXIgbmFtZWRDb25zdHJhaW50ID0gdGFnZ2VkQ29uc3RyYWludChNRVRBREFUQV9LRVkuTkFNRURfVEFHKTtcbnZhciB0eXBlQ29uc3RyYWludCA9IGZ1bmN0aW9uICh0eXBlKSB7IHJldHVybiBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgIHZhciBiaW5kaW5nID0gbnVsbDtcbiAgICBpZiAocmVxdWVzdCAhPT0gbnVsbCkge1xuICAgICAgICBiaW5kaW5nID0gcmVxdWVzdC5iaW5kaW5nc1swXTtcbiAgICAgICAgaWYgKHR5cGVvZiB0eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB2YXIgc2VydmljZUlkZW50aWZpZXIgPSBiaW5kaW5nLnNlcnZpY2VJZGVudGlmaWVyO1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VJZGVudGlmaWVyID09PSB0eXBlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGNvbnN0cnVjdG9yID0gcmVxdWVzdC5iaW5kaW5nc1swXS5pbXBsZW1lbnRhdGlvblR5cGU7XG4gICAgICAgICAgICByZXR1cm4gdHlwZSA9PT0gY29uc3RydWN0b3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTsgfTtcbmV4cG9ydCB7IHRyYXZlcnNlQW5jZXJzdG9ycywgdGFnZ2VkQ29uc3RyYWludCwgbmFtZWRDb25zdHJhaW50LCB0eXBlQ29uc3RyYWludCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RyYWludF9oZWxwZXJzLmpzLm1hcCIsImltcG9ydCB7IEJpbmRpbmdPblN5bnRheCB9IGZyb20gXCIuL2JpbmRpbmdfb25fc3ludGF4XCI7XG5pbXBvcnQgeyBuYW1lZENvbnN0cmFpbnQsIHRhZ2dlZENvbnN0cmFpbnQsIHRyYXZlcnNlQW5jZXJzdG9ycywgdHlwZUNvbnN0cmFpbnQgfSBmcm9tIFwiLi9jb25zdHJhaW50X2hlbHBlcnNcIjtcbnZhciBCaW5kaW5nV2hlblN5bnRheCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmluZGluZ1doZW5TeW50YXgoYmluZGluZykge1xuICAgICAgICB0aGlzLl9iaW5kaW5nID0gYmluZGluZztcbiAgICB9XG4gICAgQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW4gPSBmdW5jdGlvbiAoY29uc3RyYWludCkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSBjb25zdHJhaW50O1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuU3ludGF4LnByb3RvdHlwZS53aGVuVGFyZ2V0TmFtZWQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSBuYW1lZENvbnN0cmFpbnQobmFtZSk7XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5UYXJnZXRJc0RlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcuY29uc3RyYWludCA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0YXJnZXRJc0RlZmF1bHQgPSAocmVxdWVzdC50YXJnZXQgIT09IG51bGwpICYmXG4gICAgICAgICAgICAgICAgKCFyZXF1ZXN0LnRhcmdldC5pc05hbWVkKCkpICYmXG4gICAgICAgICAgICAgICAgKCFyZXF1ZXN0LnRhcmdldC5pc1RhZ2dlZCgpKTtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRJc0RlZmF1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5UYXJnZXRUYWdnZWQgPSBmdW5jdGlvbiAodGFnLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSB0YWdnZWRDb25zdHJhaW50KHRhZykodmFsdWUpO1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuU3ludGF4LnByb3RvdHlwZS53aGVuSW5qZWN0ZWRJbnRvID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QgIT09IG51bGwgJiYgdHlwZUNvbnN0cmFpbnQocGFyZW50KShyZXF1ZXN0LnBhcmVudFJlcXVlc3QpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuU3ludGF4LnByb3RvdHlwZS53aGVuUGFyZW50TmFtZWQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QgIT09IG51bGwgJiYgbmFtZWRDb25zdHJhaW50KG5hbWUpKHJlcXVlc3QucGFyZW50UmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5QYXJlbnRUYWdnZWQgPSBmdW5jdGlvbiAodGFnLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QgIT09IG51bGwgJiYgdGFnZ2VkQ29uc3RyYWludCh0YWcpKHZhbHVlKShyZXF1ZXN0LnBhcmVudFJlcXVlc3QpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuU3ludGF4LnByb3RvdHlwZS53aGVuQW55QW5jZXN0b3JJcyA9IGZ1bmN0aW9uIChhbmNlc3Rvcikge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QgIT09IG51bGwgJiYgdHJhdmVyc2VBbmNlcnN0b3JzKHJlcXVlc3QsIHR5cGVDb25zdHJhaW50KGFuY2VzdG9yKSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9ySXMgPSBmdW5jdGlvbiAoYW5jZXN0b3IpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZy5jb25zdHJhaW50ID0gZnVuY3Rpb24gKHJlcXVlc3QpIHtcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0ICE9PSBudWxsICYmICF0cmF2ZXJzZUFuY2Vyc3RvcnMocmVxdWVzdCwgdHlwZUNvbnN0cmFpbnQoYW5jZXN0b3IpKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nT25TeW50YXgodGhpcy5fYmluZGluZyk7XG4gICAgfTtcbiAgICBCaW5kaW5nV2hlblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9yTmFtZWQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QgIT09IG51bGwgJiYgdHJhdmVyc2VBbmNlcnN0b3JzKHJlcXVlc3QsIG5hbWVkQ29uc3RyYWludChuYW1lKSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9yTmFtZWQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QgIT09IG51bGwgJiYgIXRyYXZlcnNlQW5jZXJzdG9ycyhyZXF1ZXN0LCBuYW1lZENvbnN0cmFpbnQobmFtZSkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuU3ludGF4LnByb3RvdHlwZS53aGVuQW55QW5jZXN0b3JUYWdnZWQgPSBmdW5jdGlvbiAodGFnLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmNvbnN0cmFpbnQgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QgIT09IG51bGwgJiYgdHJhdmVyc2VBbmNlcnN0b3JzKHJlcXVlc3QsIHRhZ2dlZENvbnN0cmFpbnQodGFnKSh2YWx1ZSkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuU3ludGF4LnByb3RvdHlwZS53aGVuTm9BbmNlc3RvclRhZ2dlZCA9IGZ1bmN0aW9uICh0YWcsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcuY29uc3RyYWludCA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdCAhPT0gbnVsbCAmJiAhdHJhdmVyc2VBbmNlcnN0b3JzKHJlcXVlc3QsIHRhZ2dlZENvbnN0cmFpbnQodGFnKSh2YWx1ZSkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuU3ludGF4LnByb3RvdHlwZS53aGVuQW55QW5jZXN0b3JNYXRjaGVzID0gZnVuY3Rpb24gKGNvbnN0cmFpbnQpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZy5jb25zdHJhaW50ID0gZnVuY3Rpb24gKHJlcXVlc3QpIHtcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0ICE9PSBudWxsICYmIHRyYXZlcnNlQW5jZXJzdG9ycyhyZXF1ZXN0LCBjb25zdHJhaW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nT25TeW50YXgodGhpcy5fYmluZGluZyk7XG4gICAgfTtcbiAgICBCaW5kaW5nV2hlblN5bnRheC5wcm90b3R5cGUud2hlbk5vQW5jZXN0b3JNYXRjaGVzID0gZnVuY3Rpb24gKGNvbnN0cmFpbnQpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZy5jb25zdHJhaW50ID0gZnVuY3Rpb24gKHJlcXVlc3QpIHtcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0ICE9PSBudWxsICYmICF0cmF2ZXJzZUFuY2Vyc3RvcnMocmVxdWVzdCwgY29uc3RyYWludCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgcmV0dXJuIEJpbmRpbmdXaGVuU3ludGF4O1xufSgpKTtcbmV4cG9ydCB7IEJpbmRpbmdXaGVuU3ludGF4IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kaW5nX3doZW5fc3ludGF4LmpzLm1hcCIsImltcG9ydCB7IEJpbmRpbmdXaGVuU3ludGF4IH0gZnJvbSBcIi4vYmluZGluZ193aGVuX3N5bnRheFwiO1xudmFyIEJpbmRpbmdPblN5bnRheCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmluZGluZ09uU3ludGF4KGJpbmRpbmcpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZyA9IGJpbmRpbmc7XG4gICAgfVxuICAgIEJpbmRpbmdPblN5bnRheC5wcm90b3R5cGUub25BY3RpdmF0aW9uID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZy5vbkFjdGl2YXRpb24gPSBoYW5kbGVyO1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdXaGVuU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgQmluZGluZ09uU3ludGF4LnByb3RvdHlwZS5vbkRlYWN0aXZhdGlvbiA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcub25EZWFjdGl2YXRpb24gPSBoYW5kbGVyO1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdXaGVuU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgcmV0dXJuIEJpbmRpbmdPblN5bnRheDtcbn0oKSk7XG5leHBvcnQgeyBCaW5kaW5nT25TeW50YXggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmRpbmdfb25fc3ludGF4LmpzLm1hcCIsImltcG9ydCB7IEJpbmRpbmdPblN5bnRheCB9IGZyb20gXCIuL2JpbmRpbmdfb25fc3ludGF4XCI7XG5pbXBvcnQgeyBCaW5kaW5nV2hlblN5bnRheCB9IGZyb20gXCIuL2JpbmRpbmdfd2hlbl9zeW50YXhcIjtcbnZhciBCaW5kaW5nV2hlbk9uU3ludGF4ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCaW5kaW5nV2hlbk9uU3ludGF4KGJpbmRpbmcpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZyA9IGJpbmRpbmc7XG4gICAgICAgIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4ID0gbmV3IEJpbmRpbmdXaGVuU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgICAgICB0aGlzLl9iaW5kaW5nT25TeW50YXggPSBuZXcgQmluZGluZ09uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH1cbiAgICBCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuID0gZnVuY3Rpb24gKGNvbnN0cmFpbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW4oY29uc3RyYWludCk7XG4gICAgfTtcbiAgICBCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuVGFyZ2V0TmFtZWQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlblRhcmdldE5hbWVkKG5hbWUpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlblRhcmdldElzRGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5UYXJnZXRJc0RlZmF1bHQoKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5UYXJnZXRUYWdnZWQgPSBmdW5jdGlvbiAodGFnLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlblRhcmdldFRhZ2dlZCh0YWcsIHZhbHVlKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5JbmplY3RlZEludG8gPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuSW5qZWN0ZWRJbnRvKHBhcmVudCk7XG4gICAgfTtcbiAgICBCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuUGFyZW50TmFtZWQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlblBhcmVudE5hbWVkKG5hbWUpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlblBhcmVudFRhZ2dlZCA9IGZ1bmN0aW9uICh0YWcsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuUGFyZW50VGFnZ2VkKHRhZywgdmFsdWUpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9ySXMgPSBmdW5jdGlvbiAoYW5jZXN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5BbnlBbmNlc3RvcklzKGFuY2VzdG9yKTtcbiAgICB9O1xuICAgIEJpbmRpbmdXaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9ySXMgPSBmdW5jdGlvbiAoYW5jZXN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5Ob0FuY2VzdG9ySXMoYW5jZXN0b3IpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9yTmFtZWQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbkFueUFuY2VzdG9yTmFtZWQobmFtZSk7XG4gICAgfTtcbiAgICBCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuQW55QW5jZXN0b3JUYWdnZWQgPSBmdW5jdGlvbiAodGFnLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbkFueUFuY2VzdG9yVGFnZ2VkKHRhZywgdmFsdWUpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlbk5vQW5jZXN0b3JOYW1lZCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuTm9BbmNlc3Rvck5hbWVkKG5hbWUpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUud2hlbk5vQW5jZXN0b3JUYWdnZWQgPSBmdW5jdGlvbiAodGFnLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbk5vQW5jZXN0b3JUYWdnZWQodGFnLCB2YWx1ZSk7XG4gICAgfTtcbiAgICBCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuQW55QW5jZXN0b3JNYXRjaGVzID0gZnVuY3Rpb24gKGNvbnN0cmFpbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5BbnlBbmNlc3Rvck1hdGNoZXMoY29uc3RyYWludCk7XG4gICAgfTtcbiAgICBCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuTm9BbmNlc3Rvck1hdGNoZXMgPSBmdW5jdGlvbiAoY29uc3RyYWludCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbk5vQW5jZXN0b3JNYXRjaGVzKGNvbnN0cmFpbnQpO1xuICAgIH07XG4gICAgQmluZGluZ1doZW5PblN5bnRheC5wcm90b3R5cGUub25BY3RpdmF0aW9uID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdPblN5bnRheC5vbkFjdGl2YXRpb24oaGFuZGxlcik7XG4gICAgfTtcbiAgICBCaW5kaW5nV2hlbk9uU3ludGF4LnByb3RvdHlwZS5vbkRlYWN0aXZhdGlvbiA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nT25TeW50YXgub25EZWFjdGl2YXRpb24oaGFuZGxlcik7XG4gICAgfTtcbiAgICByZXR1cm4gQmluZGluZ1doZW5PblN5bnRheDtcbn0oKSk7XG5leHBvcnQgeyBCaW5kaW5nV2hlbk9uU3ludGF4IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kaW5nX3doZW5fb25fc3ludGF4LmpzLm1hcCIsImltcG9ydCB7IEJpbmRpbmdTY29wZUVudW0gfSBmcm9tIFwiLi4vY29uc3RhbnRzL2xpdGVyYWxfdHlwZXNcIjtcbmltcG9ydCB7IEJpbmRpbmdXaGVuT25TeW50YXggfSBmcm9tIFwiLi9iaW5kaW5nX3doZW5fb25fc3ludGF4XCI7XG52YXIgQmluZGluZ0luU3ludGF4ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCaW5kaW5nSW5TeW50YXgoYmluZGluZykge1xuICAgICAgICB0aGlzLl9iaW5kaW5nID0gYmluZGluZztcbiAgICB9XG4gICAgQmluZGluZ0luU3ludGF4LnByb3RvdHlwZS5pblJlcXVlc3RTY29wZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZy5zY29wZSA9IEJpbmRpbmdTY29wZUVudW0uUmVxdWVzdDtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nV2hlbk9uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgQmluZGluZ0luU3ludGF4LnByb3RvdHlwZS5pblNpbmdsZXRvblNjb3BlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLnNjb3BlID0gQmluZGluZ1Njb3BlRW51bS5TaW5nbGV0b247XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ1doZW5PblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdJblN5bnRheC5wcm90b3R5cGUuaW5UcmFuc2llbnRTY29wZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZy5zY29wZSA9IEJpbmRpbmdTY29wZUVudW0uVHJhbnNpZW50O1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdXaGVuT25TeW50YXgodGhpcy5fYmluZGluZyk7XG4gICAgfTtcbiAgICByZXR1cm4gQmluZGluZ0luU3ludGF4O1xufSgpKTtcbmV4cG9ydCB7IEJpbmRpbmdJblN5bnRheCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZGluZ19pbl9zeW50YXguanMubWFwIiwiaW1wb3J0IHsgQmluZGluZ0luU3ludGF4IH0gZnJvbSBcIi4vYmluZGluZ19pbl9zeW50YXhcIjtcbmltcG9ydCB7IEJpbmRpbmdPblN5bnRheCB9IGZyb20gXCIuL2JpbmRpbmdfb25fc3ludGF4XCI7XG5pbXBvcnQgeyBCaW5kaW5nV2hlblN5bnRheCB9IGZyb20gXCIuL2JpbmRpbmdfd2hlbl9zeW50YXhcIjtcbnZhciBCaW5kaW5nSW5XaGVuT25TeW50YXggPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJpbmRpbmdJbldoZW5PblN5bnRheChiaW5kaW5nKSB7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcgPSBiaW5kaW5nO1xuICAgICAgICB0aGlzLl9iaW5kaW5nV2hlblN5bnRheCA9IG5ldyBCaW5kaW5nV2hlblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICAgICAgdGhpcy5fYmluZGluZ09uU3ludGF4ID0gbmV3IEJpbmRpbmdPblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICAgICAgdGhpcy5fYmluZGluZ0luU3ludGF4ID0gbmV3IEJpbmRpbmdJblN5bnRheChiaW5kaW5nKTtcbiAgICB9XG4gICAgQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS5pblJlcXVlc3RTY29wZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdJblN5bnRheC5pblJlcXVlc3RTY29wZSgpO1xuICAgIH07XG4gICAgQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS5pblNpbmdsZXRvblNjb3BlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ0luU3ludGF4LmluU2luZ2xldG9uU2NvcGUoKTtcbiAgICB9O1xuICAgIEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUuaW5UcmFuc2llbnRTY29wZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdJblN5bnRheC5pblRyYW5zaWVudFNjb3BlKCk7XG4gICAgfTtcbiAgICBCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW4gPSBmdW5jdGlvbiAoY29uc3RyYWludCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbihjb25zdHJhaW50KTtcbiAgICB9O1xuICAgIEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlblRhcmdldE5hbWVkID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5UYXJnZXROYW1lZChuYW1lKTtcbiAgICB9O1xuICAgIEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlblRhcmdldElzRGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5UYXJnZXRJc0RlZmF1bHQoKTtcbiAgICB9O1xuICAgIEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlblRhcmdldFRhZ2dlZCA9IGZ1bmN0aW9uICh0YWcsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuVGFyZ2V0VGFnZ2VkKHRhZywgdmFsdWUpO1xuICAgIH07XG4gICAgQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuSW5qZWN0ZWRJbnRvID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbkluamVjdGVkSW50byhwYXJlbnQpO1xuICAgIH07XG4gICAgQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuUGFyZW50TmFtZWQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlblBhcmVudE5hbWVkKG5hbWUpO1xuICAgIH07XG4gICAgQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuUGFyZW50VGFnZ2VkID0gZnVuY3Rpb24gKHRhZywgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5QYXJlbnRUYWdnZWQodGFnLCB2YWx1ZSk7XG4gICAgfTtcbiAgICBCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5BbnlBbmNlc3RvcklzID0gZnVuY3Rpb24gKGFuY2VzdG9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuQW55QW5jZXN0b3JJcyhhbmNlc3Rvcik7XG4gICAgfTtcbiAgICBCaW5kaW5nSW5XaGVuT25TeW50YXgucHJvdG90eXBlLndoZW5Ob0FuY2VzdG9ySXMgPSBmdW5jdGlvbiAoYW5jZXN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5Ob0FuY2VzdG9ySXMoYW5jZXN0b3IpO1xuICAgIH07XG4gICAgQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuQW55QW5jZXN0b3JOYW1lZCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuQW55QW5jZXN0b3JOYW1lZChuYW1lKTtcbiAgICB9O1xuICAgIEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9yVGFnZ2VkID0gZnVuY3Rpb24gKHRhZywgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdXaGVuU3ludGF4LndoZW5BbnlBbmNlc3RvclRhZ2dlZCh0YWcsIHZhbHVlKTtcbiAgICB9O1xuICAgIEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlbk5vQW5jZXN0b3JOYW1lZCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuTm9BbmNlc3Rvck5hbWVkKG5hbWUpO1xuICAgIH07XG4gICAgQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuTm9BbmNlc3RvclRhZ2dlZCA9IGZ1bmN0aW9uICh0YWcsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuTm9BbmNlc3RvclRhZ2dlZCh0YWcsIHZhbHVlKTtcbiAgICB9O1xuICAgIEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUud2hlbkFueUFuY2VzdG9yTWF0Y2hlcyA9IGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nV2hlblN5bnRheC53aGVuQW55QW5jZXN0b3JNYXRjaGVzKGNvbnN0cmFpbnQpO1xuICAgIH07XG4gICAgQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS53aGVuTm9BbmNlc3Rvck1hdGNoZXMgPSBmdW5jdGlvbiAoY29uc3RyYWludCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ1doZW5TeW50YXgud2hlbk5vQW5jZXN0b3JNYXRjaGVzKGNvbnN0cmFpbnQpO1xuICAgIH07XG4gICAgQmluZGluZ0luV2hlbk9uU3ludGF4LnByb3RvdHlwZS5vbkFjdGl2YXRpb24gPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ09uU3ludGF4Lm9uQWN0aXZhdGlvbihoYW5kbGVyKTtcbiAgICB9O1xuICAgIEJpbmRpbmdJbldoZW5PblN5bnRheC5wcm90b3R5cGUub25EZWFjdGl2YXRpb24gPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ09uU3ludGF4Lm9uRGVhY3RpdmF0aW9uKGhhbmRsZXIpO1xuICAgIH07XG4gICAgcmV0dXJuIEJpbmRpbmdJbldoZW5PblN5bnRheDtcbn0oKSk7XG5leHBvcnQgeyBCaW5kaW5nSW5XaGVuT25TeW50YXggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmRpbmdfaW5fd2hlbl9vbl9zeW50YXguanMubWFwIiwiaW1wb3J0ICogYXMgRVJST1JfTVNHUyBmcm9tIFwiLi4vY29uc3RhbnRzL2Vycm9yX21zZ3NcIjtcbmltcG9ydCB7IEJpbmRpbmdTY29wZUVudW0sIEJpbmRpbmdUeXBlRW51bSB9IGZyb20gXCIuLi9jb25zdGFudHMvbGl0ZXJhbF90eXBlc1wiO1xuaW1wb3J0IHsgQmluZGluZ0luV2hlbk9uU3ludGF4IH0gZnJvbSBcIi4vYmluZGluZ19pbl93aGVuX29uX3N5bnRheFwiO1xuaW1wb3J0IHsgQmluZGluZ1doZW5PblN5bnRheCB9IGZyb20gXCIuL2JpbmRpbmdfd2hlbl9vbl9zeW50YXhcIjtcbnZhciBCaW5kaW5nVG9TeW50YXggPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJpbmRpbmdUb1N5bnRheChiaW5kaW5nKSB7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcgPSBiaW5kaW5nO1xuICAgIH1cbiAgICBCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvID0gZnVuY3Rpb24gKGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcudHlwZSA9IEJpbmRpbmdUeXBlRW51bS5JbnN0YW5jZTtcbiAgICAgICAgdGhpcy5fYmluZGluZy5pbXBsZW1lbnRhdGlvblR5cGUgPSBjb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nSW5XaGVuT25TeW50YXgodGhpcy5fYmluZGluZyk7XG4gICAgfTtcbiAgICBCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvU2VsZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9iaW5kaW5nLnNlcnZpY2VJZGVudGlmaWVyICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlwiICsgRVJST1JfTVNHUy5JTlZBTElEX1RPX1NFTEZfVkFMVUUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzZWxmID0gdGhpcy5fYmluZGluZy5zZXJ2aWNlSWRlbnRpZmllcjtcbiAgICAgICAgcmV0dXJuIHRoaXMudG8oc2VsZik7XG4gICAgfTtcbiAgICBCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvQ29uc3RhbnRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLnR5cGUgPSBCaW5kaW5nVHlwZUVudW0uQ29uc3RhbnRWYWx1ZTtcbiAgICAgICAgdGhpcy5fYmluZGluZy5jYWNoZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmR5bmFtaWNWYWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcuaW1wbGVtZW50YXRpb25UeXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYmluZGluZy5zY29wZSA9IEJpbmRpbmdTY29wZUVudW0uU2luZ2xldG9uO1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdXaGVuT25TeW50YXgodGhpcy5fYmluZGluZyk7XG4gICAgfTtcbiAgICBCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvRHluYW1pY1ZhbHVlID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZy50eXBlID0gQmluZGluZ1R5cGVFbnVtLkR5bmFtaWNWYWx1ZTtcbiAgICAgICAgdGhpcy5fYmluZGluZy5jYWNoZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcuZHluYW1pY1ZhbHVlID0gZnVuYztcbiAgICAgICAgdGhpcy5fYmluZGluZy5pbXBsZW1lbnRhdGlvblR5cGUgPSBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdJbldoZW5PblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdUb1N5bnRheC5wcm90b3R5cGUudG9Db25zdHJ1Y3RvciA9IGZ1bmN0aW9uIChjb25zdHJ1Y3Rvcikge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLnR5cGUgPSBCaW5kaW5nVHlwZUVudW0uQ29uc3RydWN0b3I7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcuaW1wbGVtZW50YXRpb25UeXBlID0gY29uc3RydWN0b3I7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcuc2NvcGUgPSBCaW5kaW5nU2NvcGVFbnVtLlNpbmdsZXRvbjtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nV2hlbk9uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgQmluZGluZ1RvU3ludGF4LnByb3RvdHlwZS50b0ZhY3RvcnkgPSBmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgICAgICB0aGlzLl9iaW5kaW5nLnR5cGUgPSBCaW5kaW5nVHlwZUVudW0uRmFjdG9yeTtcbiAgICAgICAgdGhpcy5fYmluZGluZy5mYWN0b3J5ID0gZmFjdG9yeTtcbiAgICAgICAgdGhpcy5fYmluZGluZy5zY29wZSA9IEJpbmRpbmdTY29wZUVudW0uU2luZ2xldG9uO1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdXaGVuT25TeW50YXgodGhpcy5fYmluZGluZyk7XG4gICAgfTtcbiAgICBCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvRnVuY3Rpb24gPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICBpZiAodHlwZW9mIGZ1bmMgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01TR1MuSU5WQUxJRF9GVU5DVElPTl9CSU5ESU5HKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYmluZGluZ1doZW5PblN5bnRheCA9IHRoaXMudG9Db25zdGFudFZhbHVlKGZ1bmMpO1xuICAgICAgICB0aGlzLl9iaW5kaW5nLnR5cGUgPSBCaW5kaW5nVHlwZUVudW0uRnVuY3Rpb247XG4gICAgICAgIHRoaXMuX2JpbmRpbmcuc2NvcGUgPSBCaW5kaW5nU2NvcGVFbnVtLlNpbmdsZXRvbjtcbiAgICAgICAgcmV0dXJuIGJpbmRpbmdXaGVuT25TeW50YXg7XG4gICAgfTtcbiAgICBCaW5kaW5nVG9TeW50YXgucHJvdG90eXBlLnRvQXV0b0ZhY3RvcnkgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgdGhpcy5fYmluZGluZy50eXBlID0gQmluZGluZ1R5cGVFbnVtLkZhY3Rvcnk7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcuZmFjdG9yeSA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgYXV0b2ZhY3RvcnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjb250ZXh0LmNvbnRhaW5lci5nZXQoc2VydmljZUlkZW50aWZpZXIpOyB9O1xuICAgICAgICAgICAgcmV0dXJuIGF1dG9mYWN0b3J5O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9iaW5kaW5nLnNjb3BlID0gQmluZGluZ1Njb3BlRW51bS5TaW5nbGV0b247XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ1doZW5PblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdUb1N5bnRheC5wcm90b3R5cGUudG9BdXRvTmFtZWRGYWN0b3J5ID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcudHlwZSA9IEJpbmRpbmdUeXBlRW51bS5GYWN0b3J5O1xuICAgICAgICB0aGlzLl9iaW5kaW5nLmZhY3RvcnkgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lZCkgeyByZXR1cm4gY29udGV4dC5jb250YWluZXIuZ2V0TmFtZWQoc2VydmljZUlkZW50aWZpZXIsIG5hbWVkKTsgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nV2hlbk9uU3ludGF4KHRoaXMuX2JpbmRpbmcpO1xuICAgIH07XG4gICAgQmluZGluZ1RvU3ludGF4LnByb3RvdHlwZS50b1Byb3ZpZGVyID0gZnVuY3Rpb24gKHByb3ZpZGVyKSB7XG4gICAgICAgIHRoaXMuX2JpbmRpbmcudHlwZSA9IEJpbmRpbmdUeXBlRW51bS5Qcm92aWRlcjtcbiAgICAgICAgdGhpcy5fYmluZGluZy5wcm92aWRlciA9IHByb3ZpZGVyO1xuICAgICAgICB0aGlzLl9iaW5kaW5nLnNjb3BlID0gQmluZGluZ1Njb3BlRW51bS5TaW5nbGV0b247XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ1doZW5PblN5bnRheCh0aGlzLl9iaW5kaW5nKTtcbiAgICB9O1xuICAgIEJpbmRpbmdUb1N5bnRheC5wcm90b3R5cGUudG9TZXJ2aWNlID0gZnVuY3Rpb24gKHNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy50b0R5bmFtaWNWYWx1ZShmdW5jdGlvbiAoY29udGV4dCkgeyByZXR1cm4gY29udGV4dC5jb250YWluZXIuZ2V0KHNlcnZpY2UpOyB9KTtcbiAgICB9O1xuICAgIHJldHVybiBCaW5kaW5nVG9TeW50YXg7XG59KCkpO1xuZXhwb3J0IHsgQmluZGluZ1RvU3ludGF4IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kaW5nX3RvX3N5bnRheC5qcy5tYXAiLCJ2YXIgQ29udGFpbmVyU25hcHNob3QgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbnRhaW5lclNuYXBzaG90KCkge1xuICAgIH1cbiAgICBDb250YWluZXJTbmFwc2hvdC5vZiA9IGZ1bmN0aW9uIChiaW5kaW5ncywgbWlkZGxld2FyZSwgYWN0aXZhdGlvbnMsIGRlYWN0aXZhdGlvbnMsIG1vZHVsZUFjdGl2YXRpb25TdG9yZSkge1xuICAgICAgICB2YXIgc25hcHNob3QgPSBuZXcgQ29udGFpbmVyU25hcHNob3QoKTtcbiAgICAgICAgc25hcHNob3QuYmluZGluZ3MgPSBiaW5kaW5ncztcbiAgICAgICAgc25hcHNob3QubWlkZGxld2FyZSA9IG1pZGRsZXdhcmU7XG4gICAgICAgIHNuYXBzaG90LmRlYWN0aXZhdGlvbnMgPSBkZWFjdGl2YXRpb25zO1xuICAgICAgICBzbmFwc2hvdC5hY3RpdmF0aW9ucyA9IGFjdGl2YXRpb25zO1xuICAgICAgICBzbmFwc2hvdC5tb2R1bGVBY3RpdmF0aW9uU3RvcmUgPSBtb2R1bGVBY3RpdmF0aW9uU3RvcmU7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICB9O1xuICAgIHJldHVybiBDb250YWluZXJTbmFwc2hvdDtcbn0oKSk7XG5leHBvcnQgeyBDb250YWluZXJTbmFwc2hvdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGFpbmVyX3NuYXBzaG90LmpzLm1hcCIsImZ1bmN0aW9uIGlzQ2xvbmFibGUob2JqKSB7XG4gICAgcmV0dXJuICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JylcbiAgICAgICAgJiYgKG9iaiAhPT0gbnVsbClcbiAgICAgICAgJiYgKCdjbG9uZScgaW4gb2JqKVxuICAgICAgICAmJiB0eXBlb2Ygb2JqLmNsb25lID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0IHsgaXNDbG9uYWJsZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvbmFibGUuanMubWFwIiwiaW1wb3J0ICogYXMgRVJST1JfTVNHUyBmcm9tIFwiLi4vY29uc3RhbnRzL2Vycm9yX21zZ3NcIjtcbmltcG9ydCB7IGlzQ2xvbmFibGUgfSBmcm9tIFwiLi4vdXRpbHMvY2xvbmFibGVcIjtcbnZhciBMb29rdXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExvb2t1cCgpIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBMb29rdXAucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcDtcbiAgICB9O1xuICAgIExvb2t1cC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyLCB2YWx1ZSkge1xuICAgICAgICBpZiAoc2VydmljZUlkZW50aWZpZXIgPT09IG51bGwgfHwgc2VydmljZUlkZW50aWZpZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01TR1MuTlVMTF9BUkdVTUVOVCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NU0dTLk5VTExfQVJHVU1FTlQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuX21hcC5nZXQoc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICBpZiAoZW50cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZW50cnkucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9tYXAuc2V0KHNlcnZpY2VJZGVudGlmaWVyLCBbdmFsdWVdKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTG9va3VwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgaWYgKHNlcnZpY2VJZGVudGlmaWVyID09PSBudWxsIHx8IHNlcnZpY2VJZGVudGlmaWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NU0dTLk5VTExfQVJHVU1FTlQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuX21hcC5nZXQoc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICBpZiAoZW50cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01TR1MuS0VZX05PVF9GT1VORCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExvb2t1cC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgIGlmIChzZXJ2aWNlSWRlbnRpZmllciA9PT0gbnVsbCB8fCBzZXJ2aWNlSWRlbnRpZmllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTVNHUy5OVUxMX0FSR1VNRU5UKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX21hcC5kZWxldGUoc2VydmljZUlkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTVNHUy5LRVlfTk9UX0ZPVU5EKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTG9va3VwLnByb3RvdHlwZS5yZW1vdmVJbnRlcnNlY3Rpb24gPSBmdW5jdGlvbiAobG9va3VwKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGxvb2t1cEFjdGl2YXRpb25zID0gbG9va3VwLmhhc0tleShzZXJ2aWNlSWRlbnRpZmllcikgPyBsb29rdXAuZ2V0KHNlcnZpY2VJZGVudGlmaWVyKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChsb29rdXBBY3RpdmF0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkVmFsdWVzID0gdmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChsb29rdXBWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWxvb2t1cEFjdGl2YXRpb25zLnNvbWUoZnVuY3Rpb24gKG1vZHVsZUFjdGl2YXRpb24pIHsgcmV0dXJuIGxvb2t1cFZhbHVlID09PSBtb2R1bGVBY3RpdmF0aW9uOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fc2V0VmFsdWUoc2VydmljZUlkZW50aWZpZXIsIGZpbHRlcmVkVmFsdWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMb29rdXAucHJvdG90eXBlLnJlbW92ZUJ5Q29uZGl0aW9uID0gZnVuY3Rpb24gKGNvbmRpdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcmVtb3ZhbHMgPSBbXTtcbiAgICAgICAgdGhpcy5fbWFwLmZvckVhY2goZnVuY3Rpb24gKGVudHJpZXMsIGtleSkge1xuICAgICAgICAgICAgdmFyIHVwZGF0ZWRFbnRyaWVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVudHJpZXNfMSA9IGVudHJpZXM7IF9pIDwgZW50cmllc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHJlbW92ZSA9IGNvbmRpdGlvbihlbnRyeSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmFscy5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRFbnRyaWVzLnB1c2goZW50cnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLl9zZXRWYWx1ZShrZXksIHVwZGF0ZWRFbnRyaWVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZW1vdmFscztcbiAgICB9O1xuICAgIExvb2t1cC5wcm90b3R5cGUuaGFzS2V5ID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgIGlmIChzZXJ2aWNlSWRlbnRpZmllciA9PT0gbnVsbCB8fCBzZXJ2aWNlSWRlbnRpZmllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTVNHUy5OVUxMX0FSR1VNRU5UKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmhhcyhzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgfTtcbiAgICBMb29rdXAucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29weSA9IG5ldyBMb29rdXAoKTtcbiAgICAgICAgdGhpcy5fbWFwLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGNvcHkuYWRkKGtleSwgaXNDbG9uYWJsZShiKSA/IGIuY2xvbmUoKSA6IGIpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb3B5O1xuICAgIH07XG4gICAgTG9va3VwLnByb3RvdHlwZS50cmF2ZXJzZSA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgICAgIHRoaXMuX21hcC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICBmdW5jKGtleSwgdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExvb2t1cC5wcm90b3R5cGUuX3NldFZhbHVlID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyLCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fbWFwLnNldChzZXJ2aWNlSWRlbnRpZmllciwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbWFwLmRlbGV0ZShzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBMb29rdXA7XG59KCkpO1xuZXhwb3J0IHsgTG9va3VwIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb29rdXAuanMubWFwIiwiaW1wb3J0IHsgTG9va3VwIH0gZnJvbSBcIi4vbG9va3VwXCI7XG52YXIgTW9kdWxlQWN0aXZhdGlvblN0b3JlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNb2R1bGVBY3RpdmF0aW9uU3RvcmUoKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgTW9kdWxlQWN0aXZhdGlvblN0b3JlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAobW9kdWxlSWQpIHtcbiAgICAgICAgaWYgKHRoaXMuX21hcC5oYXMobW9kdWxlSWQpKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLl9tYXAuZ2V0KG1vZHVsZUlkKTtcbiAgICAgICAgICAgIHRoaXMuX21hcC5kZWxldGUobW9kdWxlSWQpO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRFbXB0eUhhbmRsZXJzU3RvcmUoKTtcbiAgICB9O1xuICAgIE1vZHVsZUFjdGl2YXRpb25TdG9yZS5wcm90b3R5cGUuYWRkRGVhY3RpdmF0aW9uID0gZnVuY3Rpb24gKG1vZHVsZUlkLCBzZXJ2aWNlSWRlbnRpZmllciwgb25EZWFjdGl2YXRpb24pIHtcbiAgICAgICAgdGhpcy5fZ2V0TW9kdWxlQWN0aXZhdGlvbkhhbmRsZXJzKG1vZHVsZUlkKVxuICAgICAgICAgICAgLm9uRGVhY3RpdmF0aW9ucy5hZGQoc2VydmljZUlkZW50aWZpZXIsIG9uRGVhY3RpdmF0aW9uKTtcbiAgICB9O1xuICAgIE1vZHVsZUFjdGl2YXRpb25TdG9yZS5wcm90b3R5cGUuYWRkQWN0aXZhdGlvbiA9IGZ1bmN0aW9uIChtb2R1bGVJZCwgc2VydmljZUlkZW50aWZpZXIsIG9uQWN0aXZhdGlvbikge1xuICAgICAgICB0aGlzLl9nZXRNb2R1bGVBY3RpdmF0aW9uSGFuZGxlcnMobW9kdWxlSWQpXG4gICAgICAgICAgICAub25BY3RpdmF0aW9ucy5hZGQoc2VydmljZUlkZW50aWZpZXIsIG9uQWN0aXZhdGlvbik7XG4gICAgfTtcbiAgICBNb2R1bGVBY3RpdmF0aW9uU3RvcmUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2xvbmUgPSBuZXcgTW9kdWxlQWN0aXZhdGlvblN0b3JlKCk7XG4gICAgICAgIHRoaXMuX21hcC5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyc1N0b3JlLCBtb2R1bGVJZCkge1xuICAgICAgICAgICAgY2xvbmUuX21hcC5zZXQobW9kdWxlSWQsIHtcbiAgICAgICAgICAgICAgICBvbkFjdGl2YXRpb25zOiBoYW5kbGVyc1N0b3JlLm9uQWN0aXZhdGlvbnMuY2xvbmUoKSxcbiAgICAgICAgICAgICAgICBvbkRlYWN0aXZhdGlvbnM6IGhhbmRsZXJzU3RvcmUub25EZWFjdGl2YXRpb25zLmNsb25lKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjbG9uZTtcbiAgICB9O1xuICAgIE1vZHVsZUFjdGl2YXRpb25TdG9yZS5wcm90b3R5cGUuX2dldE1vZHVsZUFjdGl2YXRpb25IYW5kbGVycyA9IGZ1bmN0aW9uIChtb2R1bGVJZCkge1xuICAgICAgICB2YXIgbW9kdWxlQWN0aXZhdGlvbkhhbmRsZXJzID0gdGhpcy5fbWFwLmdldChtb2R1bGVJZCk7XG4gICAgICAgIGlmIChtb2R1bGVBY3RpdmF0aW9uSGFuZGxlcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbW9kdWxlQWN0aXZhdGlvbkhhbmRsZXJzID0gdGhpcy5fZ2V0RW1wdHlIYW5kbGVyc1N0b3JlKCk7XG4gICAgICAgICAgICB0aGlzLl9tYXAuc2V0KG1vZHVsZUlkLCBtb2R1bGVBY3RpdmF0aW9uSGFuZGxlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb2R1bGVBY3RpdmF0aW9uSGFuZGxlcnM7XG4gICAgfTtcbiAgICBNb2R1bGVBY3RpdmF0aW9uU3RvcmUucHJvdG90eXBlLl9nZXRFbXB0eUhhbmRsZXJzU3RvcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoYW5kbGVyc1N0b3JlID0ge1xuICAgICAgICAgICAgb25BY3RpdmF0aW9uczogbmV3IExvb2t1cCgpLFxuICAgICAgICAgICAgb25EZWFjdGl2YXRpb25zOiBuZXcgTG9va3VwKClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXJzU3RvcmU7XG4gICAgfTtcbiAgICByZXR1cm4gTW9kdWxlQWN0aXZhdGlvblN0b3JlO1xufSgpKTtcbmV4cG9ydCB7IE1vZHVsZUFjdGl2YXRpb25TdG9yZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kdWxlX2FjdGl2YXRpb25fc3RvcmUuanMubWFwIiwidmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5pbXBvcnQgeyBCaW5kaW5nIH0gZnJvbSBcIi4uL2JpbmRpbmdzL2JpbmRpbmdcIjtcbmltcG9ydCAqIGFzIEVSUk9SX01TR1MgZnJvbSBcIi4uL2NvbnN0YW50cy9lcnJvcl9tc2dzXCI7XG5pbXBvcnQgeyBCaW5kaW5nU2NvcGVFbnVtLCBUYXJnZXRUeXBlRW51bSB9IGZyb20gXCIuLi9jb25zdGFudHMvbGl0ZXJhbF90eXBlc1wiO1xuaW1wb3J0ICogYXMgTUVUQURBVEFfS0VZIGZyb20gXCIuLi9jb25zdGFudHMvbWV0YWRhdGFfa2V5c1wiO1xuaW1wb3J0IHsgTWV0YWRhdGFSZWFkZXIgfSBmcm9tIFwiLi4vcGxhbm5pbmcvbWV0YWRhdGFfcmVhZGVyXCI7XG5pbXBvcnQgeyBjcmVhdGVNb2NrUmVxdWVzdCwgZ2V0QmluZGluZ0RpY3Rpb25hcnksIHBsYW4gfSBmcm9tIFwiLi4vcGxhbm5pbmcvcGxhbm5lclwiO1xuaW1wb3J0IHsgcmVzb2x2ZSB9IGZyb20gXCIuLi9yZXNvbHV0aW9uL3Jlc29sdmVyXCI7XG5pbXBvcnQgeyBCaW5kaW5nVG9TeW50YXggfSBmcm9tIFwiLi4vc3ludGF4L2JpbmRpbmdfdG9fc3ludGF4XCI7XG5pbXBvcnQgeyBpc1Byb21pc2UsIGlzUHJvbWlzZU9yQ29udGFpbnNQcm9taXNlIH0gZnJvbSBcIi4uL3V0aWxzL2FzeW5jXCI7XG5pbXBvcnQgeyBpZCB9IGZyb20gXCIuLi91dGlscy9pZFwiO1xuaW1wb3J0IHsgZ2V0U2VydmljZUlkZW50aWZpZXJBc1N0cmluZyB9IGZyb20gXCIuLi91dGlscy9zZXJpYWxpemF0aW9uXCI7XG5pbXBvcnQgeyBDb250YWluZXJTbmFwc2hvdCB9IGZyb20gXCIuL2NvbnRhaW5lcl9zbmFwc2hvdFwiO1xuaW1wb3J0IHsgTG9va3VwIH0gZnJvbSBcIi4vbG9va3VwXCI7XG5pbXBvcnQgeyBNb2R1bGVBY3RpdmF0aW9uU3RvcmUgfSBmcm9tIFwiLi9tb2R1bGVfYWN0aXZhdGlvbl9zdG9yZVwiO1xudmFyIENvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29udGFpbmVyKGNvbnRhaW5lck9wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBjb250YWluZXJPcHRpb25zIHx8IHt9O1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlwiICsgRVJST1JfTVNHUy5DT05UQUlORVJfT1BUSU9OU19NVVNUX0JFX0FOX09CSkVDVCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdFNjb3BlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZGVmYXVsdFNjb3BlID0gQmluZGluZ1Njb3BlRW51bS5UcmFuc2llbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5kZWZhdWx0U2NvcGUgIT09IEJpbmRpbmdTY29wZUVudW0uU2luZ2xldG9uICYmXG4gICAgICAgICAgICBvcHRpb25zLmRlZmF1bHRTY29wZSAhPT0gQmluZGluZ1Njb3BlRW51bS5UcmFuc2llbnQgJiZcbiAgICAgICAgICAgIG9wdGlvbnMuZGVmYXVsdFNjb3BlICE9PSBCaW5kaW5nU2NvcGVFbnVtLlJlcXVlc3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlwiICsgRVJST1JfTVNHUy5DT05UQUlORVJfT1BUSU9OU19JTlZBTElEX0RFRkFVTFRfU0NPUEUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmF1dG9CaW5kSW5qZWN0YWJsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25zLmF1dG9CaW5kSW5qZWN0YWJsZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmF1dG9CaW5kSW5qZWN0YWJsZSAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlwiICsgRVJST1JfTVNHUy5DT05UQUlORVJfT1BUSU9OU19JTlZBTElEX0FVVE9fQklORF9JTkpFQ1RBQkxFKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5za2lwQmFzZUNsYXNzQ2hlY2tzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuc2tpcEJhc2VDbGFzc0NoZWNrcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLnNraXBCYXNlQ2xhc3NDaGVja3MgIT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIiArIEVSUk9SX01TR1MuQ09OVEFJTkVSX09QVElPTlNfSU5WQUxJRF9TS0lQX0JBU0VfQ0hFQ0spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGF1dG9CaW5kSW5qZWN0YWJsZTogb3B0aW9ucy5hdXRvQmluZEluamVjdGFibGUsXG4gICAgICAgICAgICBkZWZhdWx0U2NvcGU6IG9wdGlvbnMuZGVmYXVsdFNjb3BlLFxuICAgICAgICAgICAgc2tpcEJhc2VDbGFzc0NoZWNrczogb3B0aW9ucy5za2lwQmFzZUNsYXNzQ2hlY2tzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaWQgPSBpZCgpO1xuICAgICAgICB0aGlzLl9iaW5kaW5nRGljdGlvbmFyeSA9IG5ldyBMb29rdXAoKTtcbiAgICAgICAgdGhpcy5fc25hcHNob3RzID0gW107XG4gICAgICAgIHRoaXMuX21pZGRsZXdhcmUgPSBudWxsO1xuICAgICAgICB0aGlzLl9hY3RpdmF0aW9ucyA9IG5ldyBMb29rdXAoKTtcbiAgICAgICAgdGhpcy5fZGVhY3RpdmF0aW9ucyA9IG5ldyBMb29rdXAoKTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9tZXRhZGF0YVJlYWRlciA9IG5ldyBNZXRhZGF0YVJlYWRlcigpO1xuICAgICAgICB0aGlzLl9tb2R1bGVBY3RpdmF0aW9uU3RvcmUgPSBuZXcgTW9kdWxlQWN0aXZhdGlvblN0b3JlKCk7XG4gICAgfVxuICAgIENvbnRhaW5lci5tZXJnZSA9IGZ1bmN0aW9uIChjb250YWluZXIxLCBjb250YWluZXIyKSB7XG4gICAgICAgIHZhciBjb250YWluZXJzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBjb250YWluZXJzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7XG4gICAgICAgIHZhciB0YXJnZXRDb250YWluZXJzID0gX19zcHJlYWRBcnJheShbY29udGFpbmVyMSwgY29udGFpbmVyMl0sIGNvbnRhaW5lcnMsIHRydWUpLm1hcChmdW5jdGlvbiAodGFyZ2V0Q29udGFpbmVyKSB7IHJldHVybiBnZXRCaW5kaW5nRGljdGlvbmFyeSh0YXJnZXRDb250YWluZXIpOyB9KTtcbiAgICAgICAgdmFyIGJpbmRpbmdEaWN0aW9uYXJ5ID0gZ2V0QmluZGluZ0RpY3Rpb25hcnkoY29udGFpbmVyKTtcbiAgICAgICAgZnVuY3Rpb24gY29weURpY3Rpb25hcnkob3JpZ2luLCBkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgb3JpZ2luLnRyYXZlcnNlKGZ1bmN0aW9uIChfa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGJpbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb24uYWRkKGJpbmRpbmcuc2VydmljZUlkZW50aWZpZXIsIGJpbmRpbmcuY2xvbmUoKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRDb250YWluZXJzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldEJpbmRpbmdEaWN0aW9uYXJ5KSB7XG4gICAgICAgICAgICBjb3B5RGljdGlvbmFyeSh0YXJnZXRCaW5kaW5nRGljdGlvbmFyeSwgYmluZGluZ0RpY3Rpb25hcnkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG1vZHVsZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZ2V0SGVscGVycyA9IHRoaXMuX2dldENvbnRhaW5lck1vZHVsZUhlbHBlcnNGYWN0b3J5KCk7XG4gICAgICAgIGZvciAodmFyIF9hID0gMCwgbW9kdWxlc18xID0gbW9kdWxlczsgX2EgPCBtb2R1bGVzXzEubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudE1vZHVsZSA9IG1vZHVsZXNfMVtfYV07XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyTW9kdWxlSGVscGVycyA9IGdldEhlbHBlcnMoY3VycmVudE1vZHVsZS5pZCk7XG4gICAgICAgICAgICBjdXJyZW50TW9kdWxlLnJlZ2lzdHJ5KGNvbnRhaW5lck1vZHVsZUhlbHBlcnMuYmluZEZ1bmN0aW9uLCBjb250YWluZXJNb2R1bGVIZWxwZXJzLnVuYmluZEZ1bmN0aW9uLCBjb250YWluZXJNb2R1bGVIZWxwZXJzLmlzYm91bmRGdW5jdGlvbiwgY29udGFpbmVyTW9kdWxlSGVscGVycy5yZWJpbmRGdW5jdGlvbiwgY29udGFpbmVyTW9kdWxlSGVscGVycy51bmJpbmRBc3luY0Z1bmN0aW9uLCBjb250YWluZXJNb2R1bGVIZWxwZXJzLm9uQWN0aXZhdGlvbkZ1bmN0aW9uLCBjb250YWluZXJNb2R1bGVIZWxwZXJzLm9uRGVhY3RpdmF0aW9uRnVuY3Rpb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLmxvYWRBc3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG1vZHVsZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ2V0SGVscGVycywgX2EsIG1vZHVsZXNfMiwgY3VycmVudE1vZHVsZSwgY29udGFpbmVyTW9kdWxlSGVscGVycztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEhlbHBlcnMgPSB0aGlzLl9nZXRDb250YWluZXJNb2R1bGVIZWxwZXJzRmFjdG9yeSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAwLCBtb2R1bGVzXzIgPSBtb2R1bGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfYSA8IG1vZHVsZXNfMi5sZW5ndGgpKSByZXR1cm4gWzMsIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE1vZHVsZSA9IG1vZHVsZXNfMltfYV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJNb2R1bGVIZWxwZXJzID0gZ2V0SGVscGVycyhjdXJyZW50TW9kdWxlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgY3VycmVudE1vZHVsZS5yZWdpc3RyeShjb250YWluZXJNb2R1bGVIZWxwZXJzLmJpbmRGdW5jdGlvbiwgY29udGFpbmVyTW9kdWxlSGVscGVycy51bmJpbmRGdW5jdGlvbiwgY29udGFpbmVyTW9kdWxlSGVscGVycy5pc2JvdW5kRnVuY3Rpb24sIGNvbnRhaW5lck1vZHVsZUhlbHBlcnMucmViaW5kRnVuY3Rpb24sIGNvbnRhaW5lck1vZHVsZUhlbHBlcnMudW5iaW5kQXN5bmNGdW5jdGlvbiwgY29udGFpbmVyTW9kdWxlSGVscGVycy5vbkFjdGl2YXRpb25GdW5jdGlvbiwgY29udGFpbmVyTW9kdWxlSGVscGVycy5vbkRlYWN0aXZhdGlvbkZ1bmN0aW9uKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2ErKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgMV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLnVubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG1vZHVsZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBtb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZSkge1xuICAgICAgICAgICAgdmFyIGRlYWN0aXZhdGlvbnMgPSBfdGhpcy5fcmVtb3ZlTW9kdWxlQmluZGluZ3MobW9kdWxlLmlkKTtcbiAgICAgICAgICAgIF90aGlzLl9kZWFjdGl2YXRlU2luZ2xldG9ucyhkZWFjdGl2YXRpb25zKTtcbiAgICAgICAgICAgIF90aGlzLl9yZW1vdmVNb2R1bGVIYW5kbGVycyhtb2R1bGUuaWQpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUudW5sb2FkQXN5bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtb2R1bGVzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBtb2R1bGVzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBtb2R1bGVzXzMsIG1vZHVsZV8xLCBkZWFjdGl2YXRpb25zO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAwLCBtb2R1bGVzXzMgPSBtb2R1bGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfYSA8IG1vZHVsZXNfMy5sZW5ndGgpKSByZXR1cm4gWzMsIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlXzEgPSBtb2R1bGVzXzNbX2FdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0aW9ucyA9IHRoaXMuX3JlbW92ZU1vZHVsZUJpbmRpbmdzKG1vZHVsZV8xLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgdGhpcy5fZGVhY3RpdmF0ZVNpbmdsZXRvbnNBc3luYyhkZWFjdGl2YXRpb25zKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZU1vZHVsZUhhbmRsZXJzKG1vZHVsZV8xLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2ErKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgMV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcy5vcHRpb25zLmRlZmF1bHRTY29wZSB8fCBCaW5kaW5nU2NvcGVFbnVtLlRyYW5zaWVudDtcbiAgICAgICAgdmFyIGJpbmRpbmcgPSBuZXcgQmluZGluZyhzZXJ2aWNlSWRlbnRpZmllciwgc2NvcGUpO1xuICAgICAgICB0aGlzLl9iaW5kaW5nRGljdGlvbmFyeS5hZGQoc2VydmljZUlkZW50aWZpZXIsIGJpbmRpbmcpO1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdUb1N5bnRheChiaW5kaW5nKTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUucmViaW5kID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgIHRoaXMudW5iaW5kKHNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZChzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLnJlYmluZEFzeW5jID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0LCB0aGlzLnVuYmluZEFzeW5jKHNlcnZpY2VJZGVudGlmaWVyKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgdGhpcy5iaW5kKHNlcnZpY2VJZGVudGlmaWVyKV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS51bmJpbmQgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5Lmhhc0tleShzZXJ2aWNlSWRlbnRpZmllcikpIHtcbiAgICAgICAgICAgIHZhciBiaW5kaW5ncyA9IHRoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5LmdldChzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgICAgICAgICB0aGlzLl9kZWFjdGl2YXRlU2luZ2xldG9ucyhiaW5kaW5ncyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVtb3ZlU2VydmljZUZyb21EaWN0aW9uYXJ5KHNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUudW5iaW5kQXN5bmMgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJpbmRpbmdzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9iaW5kaW5nRGljdGlvbmFyeS5oYXNLZXkoc2VydmljZUlkZW50aWZpZXIpKSByZXR1cm4gWzMsIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZ3MgPSB0aGlzLl9iaW5kaW5nRGljdGlvbmFyeS5nZXQoc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCB0aGlzLl9kZWFjdGl2YXRlU2luZ2xldG9uc0FzeW5jKGJpbmRpbmdzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlU2VydmljZUZyb21EaWN0aW9uYXJ5KHNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS51bmJpbmRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5LnRyYXZlcnNlKGZ1bmN0aW9uIChfa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgX3RoaXMuX2RlYWN0aXZhdGVTaW5nbGV0b25zKHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5ID0gbmV3IExvb2t1cCgpO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS51bmJpbmRBbGxBc3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHByb21pc2VzO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9iaW5kaW5nRGljdGlvbmFyeS50cmF2ZXJzZShmdW5jdGlvbiAoX2tleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLl9kZWFjdGl2YXRlU2luZ2xldG9uc0FzeW5jKHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgUHJvbWlzZS5hbGwocHJvbWlzZXMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYmluZGluZ0RpY3Rpb25hcnkgPSBuZXcgTG9va3VwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUub25BY3RpdmF0aW9uID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyLCBvbkFjdGl2YXRpb24pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZhdGlvbnMuYWRkKHNlcnZpY2VJZGVudGlmaWVyLCBvbkFjdGl2YXRpb24pO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5vbkRlYWN0aXZhdGlvbiA9IGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllciwgb25EZWFjdGl2YXRpb24pIHtcbiAgICAgICAgdGhpcy5fZGVhY3RpdmF0aW9ucy5hZGQoc2VydmljZUlkZW50aWZpZXIsIG9uRGVhY3RpdmF0aW9uKTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuaXNCb3VuZCA9IGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllcikge1xuICAgICAgICB2YXIgYm91bmQgPSB0aGlzLl9iaW5kaW5nRGljdGlvbmFyeS5oYXNLZXkoc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICBpZiAoIWJvdW5kICYmIHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICBib3VuZCA9IHRoaXMucGFyZW50LmlzQm91bmQoc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBib3VuZDtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuaXNDdXJyZW50Qm91bmQgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5Lmhhc0tleShzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLmlzQm91bmROYW1lZCA9IGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllciwgbmFtZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNCb3VuZFRhZ2dlZChzZXJ2aWNlSWRlbnRpZmllciwgTUVUQURBVEFfS0VZLk5BTUVEX1RBRywgbmFtZWQpO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5pc0JvdW5kVGFnZ2VkID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyLCBrZXksIHZhbHVlKSB7XG4gICAgICAgIHZhciBib3VuZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5fYmluZGluZ0RpY3Rpb25hcnkuaGFzS2V5KHNlcnZpY2VJZGVudGlmaWVyKSkge1xuICAgICAgICAgICAgdmFyIGJpbmRpbmdzID0gdGhpcy5fYmluZGluZ0RpY3Rpb25hcnkuZ2V0KHNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICAgICAgICAgIHZhciByZXF1ZXN0XzEgPSBjcmVhdGVNb2NrUmVxdWVzdCh0aGlzLCBzZXJ2aWNlSWRlbnRpZmllciwga2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICBib3VuZCA9IGJpbmRpbmdzLnNvbWUoZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGIuY29uc3RyYWludChyZXF1ZXN0XzEpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWJvdW5kICYmIHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICBib3VuZCA9IHRoaXMucGFyZW50LmlzQm91bmRUYWdnZWQoc2VydmljZUlkZW50aWZpZXIsIGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBib3VuZDtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuc25hcHNob3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90cy5wdXNoKENvbnRhaW5lclNuYXBzaG90Lm9mKHRoaXMuX2JpbmRpbmdEaWN0aW9uYXJ5LmNsb25lKCksIHRoaXMuX21pZGRsZXdhcmUsIHRoaXMuX2FjdGl2YXRpb25zLmNsb25lKCksIHRoaXMuX2RlYWN0aXZhdGlvbnMuY2xvbmUoKSwgdGhpcy5fbW9kdWxlQWN0aXZhdGlvblN0b3JlLmNsb25lKCkpKTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNuYXBzaG90ID0gdGhpcy5fc25hcHNob3RzLnBvcCgpO1xuICAgICAgICBpZiAoc25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01TR1MuTk9fTU9SRV9TTkFQU0hPVFNfQVZBSUxBQkxFKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9iaW5kaW5nRGljdGlvbmFyeSA9IHNuYXBzaG90LmJpbmRpbmdzO1xuICAgICAgICB0aGlzLl9hY3RpdmF0aW9ucyA9IHNuYXBzaG90LmFjdGl2YXRpb25zO1xuICAgICAgICB0aGlzLl9kZWFjdGl2YXRpb25zID0gc25hcHNob3QuZGVhY3RpdmF0aW9ucztcbiAgICAgICAgdGhpcy5fbWlkZGxld2FyZSA9IHNuYXBzaG90Lm1pZGRsZXdhcmU7XG4gICAgICAgIHRoaXMuX21vZHVsZUFjdGl2YXRpb25TdG9yZSA9IHNuYXBzaG90Lm1vZHVsZUFjdGl2YXRpb25TdG9yZTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuY3JlYXRlQ2hpbGQgPSBmdW5jdGlvbiAoY29udGFpbmVyT3B0aW9ucykge1xuICAgICAgICB2YXIgY2hpbGQgPSBuZXcgQ29udGFpbmVyKGNvbnRhaW5lck9wdGlvbnMgfHwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgY2hpbGQucGFyZW50ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5hcHBseU1pZGRsZXdhcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtaWRkbGV3YXJlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgbWlkZGxld2FyZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW5pdGlhbCA9ICh0aGlzLl9taWRkbGV3YXJlKSA/IHRoaXMuX21pZGRsZXdhcmUgOiB0aGlzLl9wbGFuQW5kUmVzb2x2ZSgpO1xuICAgICAgICB0aGlzLl9taWRkbGV3YXJlID0gbWlkZGxld2FyZXMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXJyKSB7IHJldHVybiBjdXJyKHByZXYpOyB9LCBpbml0aWFsKTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuYXBwbHlDdXN0b21NZXRhZGF0YVJlYWRlciA9IGZ1bmN0aW9uIChtZXRhZGF0YVJlYWRlcikge1xuICAgICAgICB0aGlzLl9tZXRhZGF0YVJlYWRlciA9IG1ldGFkYXRhUmVhZGVyO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgdmFyIGdldEFyZ3MgPSB0aGlzLl9nZXROb3RBbGxBcmdzKHNlcnZpY2VJZGVudGlmaWVyLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRCdXRUaHJvd0lmQXN5bmMoZ2V0QXJncyk7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldEFzeW5jID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnZXRBcmdzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGdldEFyZ3MgPSB0aGlzLl9nZXROb3RBbGxBcmdzKHNlcnZpY2VJZGVudGlmaWVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyLCB0aGlzLl9nZXQoZ2V0QXJncyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXRUYWdnZWQgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGdldEFyZ3MgPSB0aGlzLl9nZXROb3RBbGxBcmdzKHNlcnZpY2VJZGVudGlmaWVyLCBmYWxzZSwga2V5LCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRCdXRUaHJvd0lmQXN5bmMoZ2V0QXJncyk7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldFRhZ2dlZEFzeW5jID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyLCBrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnZXRBcmdzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGdldEFyZ3MgPSB0aGlzLl9nZXROb3RBbGxBcmdzKHNlcnZpY2VJZGVudGlmaWVyLCBmYWxzZSwga2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyLCB0aGlzLl9nZXQoZ2V0QXJncyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXROYW1lZCA9IGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllciwgbmFtZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGFnZ2VkKHNlcnZpY2VJZGVudGlmaWVyLCBNRVRBREFUQV9LRVkuTkFNRURfVEFHLCBuYW1lZCk7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldE5hbWVkQXN5bmMgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIsIG5hbWVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRhZ2dlZEFzeW5jKHNlcnZpY2VJZGVudGlmaWVyLCBNRVRBREFUQV9LRVkuTkFNRURfVEFHLCBuYW1lZCk7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllcikge1xuICAgICAgICB2YXIgZ2V0QXJncyA9IHRoaXMuX2dldEFsbEFyZ3Moc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0QnV0VGhyb3dJZkFzeW5jKGdldEFyZ3MpO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXRBbGxBc3luYyA9IGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllcikge1xuICAgICAgICB2YXIgZ2V0QXJncyA9IHRoaXMuX2dldEFsbEFyZ3Moc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0QWxsKGdldEFyZ3MpO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXRBbGxUYWdnZWQgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGdldEFyZ3MgPSB0aGlzLl9nZXROb3RBbGxBcmdzKHNlcnZpY2VJZGVudGlmaWVyLCB0cnVlLCBrZXksIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldEJ1dFRocm93SWZBc3luYyhnZXRBcmdzKTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuZ2V0QWxsVGFnZ2VkQXN5bmMgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGdldEFyZ3MgPSB0aGlzLl9nZXROb3RBbGxBcmdzKHNlcnZpY2VJZGVudGlmaWVyLCB0cnVlLCBrZXksIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldEFsbChnZXRBcmdzKTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuZ2V0QWxsTmFtZWQgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIsIG5hbWVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbFRhZ2dlZChzZXJ2aWNlSWRlbnRpZmllciwgTUVUQURBVEFfS0VZLk5BTUVEX1RBRywgbmFtZWQpO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXRBbGxOYW1lZEFzeW5jID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyLCBuYW1lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxUYWdnZWRBc3luYyhzZXJ2aWNlSWRlbnRpZmllciwgTUVUQURBVEFfS0VZLk5BTUVEX1RBRywgbmFtZWQpO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24gKGNvbnN0cnVjdG9yRnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIGlzQm91bmQgPSB0aGlzLmlzQm91bmQoY29uc3RydWN0b3JGdW5jdGlvbik7XG4gICAgICAgIGlmICghaXNCb3VuZCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kKGNvbnN0cnVjdG9yRnVuY3Rpb24pLnRvU2VsZigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNvbHZlZCA9IHRoaXMuZ2V0KGNvbnN0cnVjdG9yRnVuY3Rpb24pO1xuICAgICAgICBpZiAoIWlzQm91bmQpIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kKGNvbnN0cnVjdG9yRnVuY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlZDtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX3ByZURlc3Ryb3kgPSBmdW5jdGlvbiAoY29uc3RydWN0b3IsIGluc3RhbmNlKSB7XG4gICAgICAgIGlmIChSZWZsZWN0Lmhhc01ldGFkYXRhKE1FVEFEQVRBX0tFWS5QUkVfREVTVFJPWSwgY29uc3RydWN0b3IpKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoTUVUQURBVEFfS0VZLlBSRV9ERVNUUk9ZLCBjb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VbZGF0YS52YWx1ZV0oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5fcmVtb3ZlTW9kdWxlSGFuZGxlcnMgPSBmdW5jdGlvbiAobW9kdWxlSWQpIHtcbiAgICAgICAgdmFyIG1vZHVsZUFjdGl2YXRpb25zSGFuZGxlcnMgPSB0aGlzLl9tb2R1bGVBY3RpdmF0aW9uU3RvcmUucmVtb3ZlKG1vZHVsZUlkKTtcbiAgICAgICAgdGhpcy5fYWN0aXZhdGlvbnMucmVtb3ZlSW50ZXJzZWN0aW9uKG1vZHVsZUFjdGl2YXRpb25zSGFuZGxlcnMub25BY3RpdmF0aW9ucyk7XG4gICAgICAgIHRoaXMuX2RlYWN0aXZhdGlvbnMucmVtb3ZlSW50ZXJzZWN0aW9uKG1vZHVsZUFjdGl2YXRpb25zSGFuZGxlcnMub25EZWFjdGl2YXRpb25zKTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX3JlbW92ZU1vZHVsZUJpbmRpbmdzID0gZnVuY3Rpb24gKG1vZHVsZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nRGljdGlvbmFyeS5yZW1vdmVCeUNvbmRpdGlvbihmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gYmluZGluZy5tb2R1bGVJZCA9PT0gbW9kdWxlSWQ7IH0pO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5fZGVhY3RpdmF0ZSA9IGZ1bmN0aW9uIChiaW5kaW5nLCBpbnN0YW5jZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY29uc3RydWN0b3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5zdGFuY2UpLmNvbnN0cnVjdG9yO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2RlYWN0aXZhdGlvbnMuaGFzS2V5KGJpbmRpbmcuc2VydmljZUlkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2RlYWN0aXZhdGVDb250YWluZXIoaW5zdGFuY2UsIHRoaXMuX2RlYWN0aXZhdGlvbnMuZ2V0KGJpbmRpbmcuc2VydmljZUlkZW50aWZpZXIpLnZhbHVlcygpKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZURlYWN0aXZhdGlvbkVycm9yKHJlc3VsdC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9wcm9wYWdhdGVDb250YWluZXJEZWFjdGl2YXRpb25UaGVuQmluZGluZ0FuZFByZURlc3Ryb3lBc3luYyhiaW5kaW5nLCBpbnN0YW5jZSwgY29uc3RydWN0b3IpOyB9KSwgY29uc3RydWN0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcm9wYWdhdGVEZWFjdGl2YXRpb25SZXN1bHQgPSB0aGlzLl9wcm9wYWdhdGVDb250YWluZXJEZWFjdGl2YXRpb25UaGVuQmluZGluZ0FuZFByZURlc3Ryb3koYmluZGluZywgaW5zdGFuY2UsIGNvbnN0cnVjdG9yKTtcbiAgICAgICAgICAgIGlmIChpc1Byb21pc2UocHJvcGFnYXRlRGVhY3RpdmF0aW9uUmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVEZWFjdGl2YXRpb25FcnJvcihwcm9wYWdhdGVEZWFjdGl2YXRpb25SZXN1bHQsIGNvbnN0cnVjdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NU0dTLk9OX0RFQUNUSVZBVElPTl9FUlJPUihjb25zdHJ1Y3Rvci5uYW1lLCBleC5tZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2hhbmRsZURlYWN0aXZhdGlvbkVycm9yID0gZnVuY3Rpb24gKGFzeW5jUmVzdWx0LCBjb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZXhfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIGFzeW5jUmVzdWx0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXhfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NU0dTLk9OX0RFQUNUSVZBVElPTl9FUlJPUihjb25zdHJ1Y3Rvci5uYW1lLCBleF8xLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2RlYWN0aXZhdGVDb250YWluZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGRlYWN0aXZhdGlvbnNJdGVyYXRvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZGVhY3RpdmF0aW9uID0gZGVhY3RpdmF0aW9uc0l0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgd2hpbGUgKGRlYWN0aXZhdGlvbi52YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGRlYWN0aXZhdGlvbi52YWx1ZShpbnN0YW5jZSk7XG4gICAgICAgICAgICBpZiAoaXNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2RlYWN0aXZhdGVDb250YWluZXJBc3luYyhpbnN0YW5jZSwgZGVhY3RpdmF0aW9uc0l0ZXJhdG9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlYWN0aXZhdGlvbiA9IGRlYWN0aXZhdGlvbnNJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2RlYWN0aXZhdGVDb250YWluZXJBc3luYyA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgZGVhY3RpdmF0aW9uc0l0ZXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkZWFjdGl2YXRpb247XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRpb24gPSBkZWFjdGl2YXRpb25zSXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRlYWN0aXZhdGlvbi52YWx1ZSkgcmV0dXJuIFszLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgZGVhY3RpdmF0aW9uLnZhbHVlKGluc3RhbmNlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGlvbiA9IGRlYWN0aXZhdGlvbnNJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMsIDFdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyTW9kdWxlSGVscGVyc0ZhY3RvcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzZXRNb2R1bGVJZCA9IGZ1bmN0aW9uIChiaW5kaW5nVG9TeW50YXgsIG1vZHVsZUlkKSB7XG4gICAgICAgICAgICBiaW5kaW5nVG9TeW50YXguX2JpbmRpbmcubW9kdWxlSWQgPSBtb2R1bGVJZDtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGdldEJpbmRGdW5jdGlvbiA9IGZ1bmN0aW9uIChtb2R1bGVJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgIHZhciBiaW5kaW5nVG9TeW50YXggPSBfdGhpcy5iaW5kKHNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICAgICAgICAgICAgICBzZXRNb2R1bGVJZChiaW5kaW5nVG9TeW50YXgsIG1vZHVsZUlkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmluZGluZ1RvU3ludGF4O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGdldFVuYmluZEZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51bmJpbmQoc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGdldFVuYmluZEFzeW5jRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVuYmluZEFzeW5jKHNlcnZpY2VJZGVudGlmaWVyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBnZXRJc2JvdW5kRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmlzQm91bmQoc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGdldFJlYmluZEZ1bmN0aW9uID0gZnVuY3Rpb24gKG1vZHVsZUlkKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJpbmRpbmdUb1N5bnRheCA9IF90aGlzLnJlYmluZChzZXJ2aWNlSWRlbnRpZmllcik7XG4gICAgICAgICAgICAgICAgc2V0TW9kdWxlSWQoYmluZGluZ1RvU3ludGF4LCBtb2R1bGVJZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpbmRpbmdUb1N5bnRheDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBnZXRPbkFjdGl2YXRpb25GdW5jdGlvbiA9IGZ1bmN0aW9uIChtb2R1bGVJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllciwgb25BY3RpdmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX21vZHVsZUFjdGl2YXRpb25TdG9yZS5hZGRBY3RpdmF0aW9uKG1vZHVsZUlkLCBzZXJ2aWNlSWRlbnRpZmllciwgb25BY3RpdmF0aW9uKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkFjdGl2YXRpb24oc2VydmljZUlkZW50aWZpZXIsIG9uQWN0aXZhdGlvbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZ2V0T25EZWFjdGl2YXRpb25GdW5jdGlvbiA9IGZ1bmN0aW9uIChtb2R1bGVJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZXJ2aWNlSWRlbnRpZmllciwgb25EZWFjdGl2YXRpb24pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fbW9kdWxlQWN0aXZhdGlvblN0b3JlLmFkZERlYWN0aXZhdGlvbihtb2R1bGVJZCwgc2VydmljZUlkZW50aWZpZXIsIG9uRGVhY3RpdmF0aW9uKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkRlYWN0aXZhdGlvbihzZXJ2aWNlSWRlbnRpZmllciwgb25EZWFjdGl2YXRpb24pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtSWQpIHsgcmV0dXJuICh7XG4gICAgICAgICAgICBiaW5kRnVuY3Rpb246IGdldEJpbmRGdW5jdGlvbihtSWQpLFxuICAgICAgICAgICAgaXNib3VuZEZ1bmN0aW9uOiBnZXRJc2JvdW5kRnVuY3Rpb24oKSxcbiAgICAgICAgICAgIG9uQWN0aXZhdGlvbkZ1bmN0aW9uOiBnZXRPbkFjdGl2YXRpb25GdW5jdGlvbihtSWQpLFxuICAgICAgICAgICAgb25EZWFjdGl2YXRpb25GdW5jdGlvbjogZ2V0T25EZWFjdGl2YXRpb25GdW5jdGlvbihtSWQpLFxuICAgICAgICAgICAgcmViaW5kRnVuY3Rpb246IGdldFJlYmluZEZ1bmN0aW9uKG1JZCksXG4gICAgICAgICAgICB1bmJpbmRGdW5jdGlvbjogZ2V0VW5iaW5kRnVuY3Rpb24oKSxcbiAgICAgICAgICAgIHVuYmluZEFzeW5jRnVuY3Rpb246IGdldFVuYmluZEFzeW5jRnVuY3Rpb24oKVxuICAgICAgICB9KTsgfTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2dldEFsbCA9IGZ1bmN0aW9uIChnZXRBcmdzKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLl9nZXQoZ2V0QXJncykpO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5fZ2V0ID0gZnVuY3Rpb24gKGdldEFyZ3MpIHtcbiAgICAgICAgdmFyIHBsYW5BbmRSZXNvbHZlQXJncyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBnZXRBcmdzKSwgeyBjb250ZXh0SW50ZXJjZXB0b3I6IGZ1bmN0aW9uIChjb250ZXh0KSB7IHJldHVybiBjb250ZXh0OyB9LCB0YXJnZXRUeXBlOiBUYXJnZXRUeXBlRW51bS5WYXJpYWJsZSB9KTtcbiAgICAgICAgaWYgKHRoaXMuX21pZGRsZXdhcmUpIHtcbiAgICAgICAgICAgIHZhciBtaWRkbGV3YXJlUmVzdWx0ID0gdGhpcy5fbWlkZGxld2FyZShwbGFuQW5kUmVzb2x2ZUFyZ3MpO1xuICAgICAgICAgICAgaWYgKG1pZGRsZXdhcmVSZXN1bHQgPT09IHVuZGVmaW5lZCB8fCBtaWRkbGV3YXJlUmVzdWx0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01TR1MuSU5WQUxJRF9NSURETEVXQVJFX1JFVFVSTik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWlkZGxld2FyZVJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcGxhbkFuZFJlc29sdmUoKShwbGFuQW5kUmVzb2x2ZUFyZ3MpO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5fZ2V0QnV0VGhyb3dJZkFzeW5jID0gZnVuY3Rpb24gKGdldEFyZ3MpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2dldChnZXRBcmdzKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZU9yQ29udGFpbnNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NU0dTLkxBWllfSU5fU1lOQyhnZXRBcmdzLnNlcnZpY2VJZGVudGlmaWVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2dldEFsbEFyZ3MgPSBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgdmFyIGdldEFsbEFyZ3MgPSB7XG4gICAgICAgICAgICBhdm9pZENvbnN0cmFpbnRzOiB0cnVlLFxuICAgICAgICAgICAgaXNNdWx0aUluamVjdDogdHJ1ZSxcbiAgICAgICAgICAgIHNlcnZpY2VJZGVudGlmaWVyOiBzZXJ2aWNlSWRlbnRpZmllcixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGdldEFsbEFyZ3M7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLl9nZXROb3RBbGxBcmdzID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyLCBpc011bHRpSW5qZWN0LCBrZXksIHZhbHVlKSB7XG4gICAgICAgIHZhciBnZXROb3RBbGxBcmdzID0ge1xuICAgICAgICAgICAgYXZvaWRDb25zdHJhaW50czogZmFsc2UsXG4gICAgICAgICAgICBpc011bHRpSW5qZWN0OiBpc011bHRpSW5qZWN0LFxuICAgICAgICAgICAgc2VydmljZUlkZW50aWZpZXI6IHNlcnZpY2VJZGVudGlmaWVyLFxuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBnZXROb3RBbGxBcmdzO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5fcGxhbkFuZFJlc29sdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBwbGFuKF90aGlzLl9tZXRhZGF0YVJlYWRlciwgX3RoaXMsIGFyZ3MuaXNNdWx0aUluamVjdCwgYXJncy50YXJnZXRUeXBlLCBhcmdzLnNlcnZpY2VJZGVudGlmaWVyLCBhcmdzLmtleSwgYXJncy52YWx1ZSwgYXJncy5hdm9pZENvbnN0cmFpbnRzKTtcbiAgICAgICAgICAgIGNvbnRleHQgPSBhcmdzLmNvbnRleHRJbnRlcmNlcHRvcihjb250ZXh0KTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXNvbHZlKGNvbnRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2RlYWN0aXZhdGVJZlNpbmdsZXRvbiA9IGZ1bmN0aW9uIChiaW5kaW5nKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghYmluZGluZy5hY3RpdmF0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcm9taXNlKGJpbmRpbmcuY2FjaGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gYmluZGluZy5jYWNoZS50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZCkgeyByZXR1cm4gX3RoaXMuX2RlYWN0aXZhdGUoYmluZGluZywgcmVzb2x2ZWQpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVhY3RpdmF0ZShiaW5kaW5nLCBiaW5kaW5nLmNhY2hlKTtcbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2RlYWN0aXZhdGVTaW5nbGV0b25zID0gZnVuY3Rpb24gKGJpbmRpbmdzKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgYmluZGluZ3NfMSA9IGJpbmRpbmdzOyBfaSA8IGJpbmRpbmdzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYmluZGluZyA9IGJpbmRpbmdzXzFbX2ldO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2RlYWN0aXZhdGVJZlNpbmdsZXRvbihiaW5kaW5nKTtcbiAgICAgICAgICAgIGlmIChpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NU0dTLkFTWU5DX1VOQklORF9SRVFVSVJFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2RlYWN0aXZhdGVTaW5nbGV0b25zQXN5bmMgPSBmdW5jdGlvbiAoYmluZGluZ3MpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0LCBQcm9taXNlLmFsbChiaW5kaW5ncy5tYXAoZnVuY3Rpb24gKGIpIHsgcmV0dXJuIF90aGlzLl9kZWFjdGl2YXRlSWZTaW5nbGV0b24oYik7IH0pKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5fcHJvcGFnYXRlQ29udGFpbmVyRGVhY3RpdmF0aW9uVGhlbkJpbmRpbmdBbmRQcmVEZXN0cm95ID0gZnVuY3Rpb24gKGJpbmRpbmcsIGluc3RhbmNlLCBjb25zdHJ1Y3Rvcikge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWFjdGl2YXRlLmJpbmQodGhpcy5wYXJlbnQpKGJpbmRpbmcsIGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iaW5kaW5nRGVhY3RpdmF0aW9uQW5kUHJlRGVzdHJveShiaW5kaW5nLCBpbnN0YW5jZSwgY29uc3RydWN0b3IpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLl9wcm9wYWdhdGVDb250YWluZXJEZWFjdGl2YXRpb25UaGVuQmluZGluZ0FuZFByZURlc3Ryb3lBc3luYyA9IGZ1bmN0aW9uIChiaW5kaW5nLCBpbnN0YW5jZSwgY29uc3RydWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudCkgcmV0dXJuIFszLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgdGhpcy5fZGVhY3RpdmF0ZS5iaW5kKHRoaXMucGFyZW50KShiaW5kaW5nLCBpbnN0YW5jZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMsIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCwgdGhpcy5fYmluZGluZ0RlYWN0aXZhdGlvbkFuZFByZURlc3Ryb3lBc3luYyhiaW5kaW5nLCBpbnN0YW5jZSwgY29uc3RydWN0b3IpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5fcmVtb3ZlU2VydmljZUZyb21EaWN0aW9uYXJ5ID0gZnVuY3Rpb24gKHNlcnZpY2VJZGVudGlmaWVyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9iaW5kaW5nRGljdGlvbmFyeS5yZW1vdmUoc2VydmljZUlkZW50aWZpZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTVNHUy5DQU5OT1RfVU5CSU5EICsgXCIgXCIgKyBnZXRTZXJ2aWNlSWRlbnRpZmllckFzU3RyaW5nKHNlcnZpY2VJZGVudGlmaWVyKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2JpbmRpbmdEZWFjdGl2YXRpb25BbmRQcmVEZXN0cm95ID0gZnVuY3Rpb24gKGJpbmRpbmcsIGluc3RhbmNlLCBjb25zdHJ1Y3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodHlwZW9mIGJpbmRpbmcub25EZWFjdGl2YXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGJpbmRpbmcub25EZWFjdGl2YXRpb24oaW5zdGFuY2UpO1xuICAgICAgICAgICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9wcmVEZXN0cm95KGNvbnN0cnVjdG9yLCBpbnN0YW5jZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wcmVEZXN0cm95KGNvbnN0cnVjdG9yLCBpbnN0YW5jZSk7XG4gICAgfTtcbiAgICBDb250YWluZXIucHJvdG90eXBlLl9iaW5kaW5nRGVhY3RpdmF0aW9uQW5kUHJlRGVzdHJveUFzeW5jID0gZnVuY3Rpb24gKGJpbmRpbmcsIGluc3RhbmNlLCBjb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgYmluZGluZy5vbkRlYWN0aXZhdGlvbiA9PT0gXCJmdW5jdGlvblwiKSkgcmV0dXJuIFszLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgYmluZGluZy5vbkRlYWN0aXZhdGlvbihpbnN0YW5jZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFs0LCB0aGlzLl9wcmVEZXN0cm95KGNvbnN0cnVjdG9yLCBpbnN0YW5jZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb250YWluZXI7XG59KCkpO1xuZXhwb3J0IHsgQ29udGFpbmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250YWluZXIuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0QXJyYXlEdXBsaWNhdGUoYXJyYXkpIHtcbiAgICB2YXIgc2VlblZhbHVlcyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKHZhciBfaSA9IDAsIGFycmF5XzEgPSBhcnJheTsgX2kgPCBhcnJheV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgZW50cnkgPSBhcnJheV8xW19pXTtcbiAgICAgICAgaWYgKHNlZW5WYWx1ZXMuaGFzKGVudHJ5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VlblZhbHVlcy5hZGQoZW50cnkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qcy5qcy5tYXAiLCJpbXBvcnQgKiBhcyBFUlJPUl9NU0dTIGZyb20gXCIuLi9jb25zdGFudHMvZXJyb3JfbXNnc1wiO1xuaW1wb3J0ICogYXMgTUVUQURBVEFfS0VZIGZyb20gXCIuLi9jb25zdGFudHMvbWV0YWRhdGFfa2V5c1wiO1xuaW1wb3J0IHsgZ2V0Rmlyc3RBcnJheUR1cGxpY2F0ZSB9IGZyb20gXCIuLi91dGlscy9qc1wiO1xuZnVuY3Rpb24gdGFyZ2V0SXNDb25zdHJ1Y3RvckZ1bmN0aW9uKHRhcmdldCkge1xuICAgIHJldHVybiB0YXJnZXQucHJvdG90eXBlICE9PSB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfdGhyb3dJZk1ldGhvZFBhcmFtZXRlcihwYXJhbWV0ZXJOYW1lKSB7XG4gICAgaWYgKHBhcmFtZXRlck5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTVNHUy5JTlZBTElEX0RFQ09SQVRPUl9PUEVSQVRJT04pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRhZ1BhcmFtZXRlcihhbm5vdGF0aW9uVGFyZ2V0LCBwYXJhbWV0ZXJOYW1lLCBwYXJhbWV0ZXJJbmRleCwgbWV0YWRhdGEpIHtcbiAgICBfdGhyb3dJZk1ldGhvZFBhcmFtZXRlcihwYXJhbWV0ZXJOYW1lKTtcbiAgICBfdGFnUGFyYW1ldGVyT3JQcm9wZXJ0eShNRVRBREFUQV9LRVkuVEFHR0VELCBhbm5vdGF0aW9uVGFyZ2V0LCBwYXJhbWV0ZXJJbmRleC50b1N0cmluZygpLCBtZXRhZGF0YSk7XG59XG5mdW5jdGlvbiB0YWdQcm9wZXJ0eShhbm5vdGF0aW9uVGFyZ2V0LCBwcm9wZXJ0eU5hbWUsIG1ldGFkYXRhKSB7XG4gICAgaWYgKHRhcmdldElzQ29uc3RydWN0b3JGdW5jdGlvbihhbm5vdGF0aW9uVGFyZ2V0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTVNHUy5JTlZBTElEX0RFQ09SQVRPUl9PUEVSQVRJT04pO1xuICAgIH1cbiAgICBfdGFnUGFyYW1ldGVyT3JQcm9wZXJ0eShNRVRBREFUQV9LRVkuVEFHR0VEX1BST1AsIGFubm90YXRpb25UYXJnZXQuY29uc3RydWN0b3IsIHByb3BlcnR5TmFtZSwgbWV0YWRhdGEpO1xufVxuZnVuY3Rpb24gX2Vuc3VyZU5vTWV0YWRhdGFLZXlEdXBsaWNhdGVzKG1ldGFkYXRhKSB7XG4gICAgdmFyIG1ldGFkYXRhcyA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG1ldGFkYXRhKSkge1xuICAgICAgICBtZXRhZGF0YXMgPSBtZXRhZGF0YTtcbiAgICAgICAgdmFyIGR1cGxpY2F0ZSA9IGdldEZpcnN0QXJyYXlEdXBsaWNhdGUobWV0YWRhdGFzLm1hcChmdW5jdGlvbiAobWQpIHsgcmV0dXJuIG1kLmtleTsgfSkpO1xuICAgICAgICBpZiAoZHVwbGljYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NU0dTLkRVUExJQ0FURURfTUVUQURBVEEgKyBcIiBcIiArIGR1cGxpY2F0ZS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWV0YWRhdGFzID0gW21ldGFkYXRhXTtcbiAgICB9XG4gICAgcmV0dXJuIG1ldGFkYXRhcztcbn1cbmZ1bmN0aW9uIF90YWdQYXJhbWV0ZXJPclByb3BlcnR5KG1ldGFkYXRhS2V5LCBhbm5vdGF0aW9uVGFyZ2V0LCBrZXksIG1ldGFkYXRhKSB7XG4gICAgdmFyIG1ldGFkYXRhcyA9IF9lbnN1cmVOb01ldGFkYXRhS2V5RHVwbGljYXRlcyhtZXRhZGF0YSk7XG4gICAgdmFyIHBhcmFtc09yUHJvcGVydGllc01ldGFkYXRhID0ge307XG4gICAgaWYgKFJlZmxlY3QuaGFzT3duTWV0YWRhdGEobWV0YWRhdGFLZXksIGFubm90YXRpb25UYXJnZXQpKSB7XG4gICAgICAgIHBhcmFtc09yUHJvcGVydGllc01ldGFkYXRhID0gUmVmbGVjdC5nZXRNZXRhZGF0YShtZXRhZGF0YUtleSwgYW5ub3RhdGlvblRhcmdldCk7XG4gICAgfVxuICAgIHZhciBwYXJhbU9yUHJvcGVydHlNZXRhZGF0YSA9IHBhcmFtc09yUHJvcGVydGllc01ldGFkYXRhW2tleV07XG4gICAgaWYgKHBhcmFtT3JQcm9wZXJ0eU1ldGFkYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcGFyYW1PclByb3BlcnR5TWV0YWRhdGEgPSBbXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YXMuc29tZShmdW5jdGlvbiAobWQpIHsgcmV0dXJuIG1kLmtleSA9PT0gbS5rZXk7IH0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01TR1MuRFVQTElDQVRFRF9NRVRBREFUQSArIFwiIFwiICsgbS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcGFyYW1PclByb3BlcnR5TWV0YWRhdGFfMSA9IHBhcmFtT3JQcm9wZXJ0eU1ldGFkYXRhOyBfaSA8IHBhcmFtT3JQcm9wZXJ0eU1ldGFkYXRhXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgbSA9IHBhcmFtT3JQcm9wZXJ0eU1ldGFkYXRhXzFbX2ldO1xuICAgICAgICAgICAgX2xvb3BfMShtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXJhbU9yUHJvcGVydHlNZXRhZGF0YS5wdXNoLmFwcGx5KHBhcmFtT3JQcm9wZXJ0eU1ldGFkYXRhLCBtZXRhZGF0YXMpO1xuICAgIHBhcmFtc09yUHJvcGVydGllc01ldGFkYXRhW2tleV0gPSBwYXJhbU9yUHJvcGVydHlNZXRhZGF0YTtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKG1ldGFkYXRhS2V5LCBwYXJhbXNPclByb3BlcnRpZXNNZXRhZGF0YSwgYW5ub3RhdGlvblRhcmdldCk7XG59XG5mdW5jdGlvbiBjcmVhdGVUYWdnZWREZWNvcmF0b3IobWV0YWRhdGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgdGFyZ2V0S2V5LCBpbmRleE9yUHJvcGVydHlEZXNjcmlwdG9yKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5kZXhPclByb3BlcnR5RGVzY3JpcHRvciA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdGFnUGFyYW1ldGVyKHRhcmdldCwgdGFyZ2V0S2V5LCBpbmRleE9yUHJvcGVydHlEZXNjcmlwdG9yLCBtZXRhZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YWdQcm9wZXJ0eSh0YXJnZXQsIHRhcmdldEtleSwgbWV0YWRhdGEpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIF9kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQpIHtcbiAgICBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCk7XG59XG5mdW5jdGlvbiBfcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9O1xufVxuZnVuY3Rpb24gZGVjb3JhdGUoZGVjb3JhdG9yLCB0YXJnZXQsIHBhcmFtZXRlckluZGV4T3JQcm9wZXJ0eSkge1xuICAgIGlmICh0eXBlb2YgcGFyYW1ldGVySW5kZXhPclByb3BlcnR5ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIF9kZWNvcmF0ZShbX3BhcmFtKHBhcmFtZXRlckluZGV4T3JQcm9wZXJ0eSwgZGVjb3JhdG9yKV0sIHRhcmdldCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBwYXJhbWV0ZXJJbmRleE9yUHJvcGVydHkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgUmVmbGVjdC5kZWNvcmF0ZShbZGVjb3JhdG9yXSwgdGFyZ2V0LCBwYXJhbWV0ZXJJbmRleE9yUHJvcGVydHkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgX2RlY29yYXRlKFtkZWNvcmF0b3JdLCB0YXJnZXQpO1xuICAgIH1cbn1cbmV4cG9ydCB7IGRlY29yYXRlLCB0YWdQYXJhbWV0ZXIsIHRhZ1Byb3BlcnR5LCBjcmVhdGVUYWdnZWREZWNvcmF0b3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlY29yYXRvcl91dGlscy5qcy5tYXAiLCJpbXBvcnQgKiBhcyBFUlJPUlNfTVNHUyBmcm9tIFwiLi4vY29uc3RhbnRzL2Vycm9yX21zZ3NcIjtcbmltcG9ydCAqIGFzIE1FVEFEQVRBX0tFWSBmcm9tIFwiLi4vY29uc3RhbnRzL21ldGFkYXRhX2tleXNcIjtcbmZ1bmN0aW9uIGluamVjdGFibGUoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgaWYgKFJlZmxlY3QuaGFzT3duTWV0YWRhdGEoTUVUQURBVEFfS0VZLlBBUkFNX1RZUEVTLCB0YXJnZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JTX01TR1MuRFVQTElDQVRFRF9JTkpFQ1RBQkxFX0RFQ09SQVRPUik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHR5cGVzID0gUmVmbGVjdC5nZXRNZXRhZGF0YShNRVRBREFUQV9LRVkuREVTSUdOX1BBUkFNX1RZUEVTLCB0YXJnZXQpIHx8IFtdO1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKE1FVEFEQVRBX0tFWS5QQVJBTV9UWVBFUywgdHlwZXMsIHRhcmdldCk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfTtcbn1cbmV4cG9ydCB7IGluamVjdGFibGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluamVjdGFibGUuanMubWFwIiwiaW1wb3J0IHsgVU5ERUZJTkVEX0lOSkVDVF9BTk5PVEFUSU9OIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9lcnJvcl9tc2dzXCI7XG5pbXBvcnQgeyBNZXRhZGF0YSB9IGZyb20gXCIuLi9wbGFubmluZy9tZXRhZGF0YVwiO1xuaW1wb3J0IHsgY3JlYXRlVGFnZ2VkRGVjb3JhdG9yIH0gZnJvbSBcIi4vZGVjb3JhdG9yX3V0aWxzXCI7XG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0QmFzZShtZXRhZGF0YUtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2VydmljZUlkZW50aWZpZXIpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHRhcmdldEtleSwgaW5kZXhPclByb3BlcnR5RGVzY3JpcHRvcikge1xuICAgICAgICAgICAgaWYgKHNlcnZpY2VJZGVudGlmaWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gdHlwZW9mIHRhcmdldCA9PT0gXCJmdW5jdGlvblwiID8gdGFyZ2V0Lm5hbWUgOiB0YXJnZXQuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoVU5ERUZJTkVEX0lOSkVDVF9BTk5PVEFUSU9OKGNsYXNzTmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVRhZ2dlZERlY29yYXRvcihuZXcgTWV0YWRhdGEobWV0YWRhdGFLZXksIHNlcnZpY2VJZGVudGlmaWVyKSkodGFyZ2V0LCB0YXJnZXRLZXksIGluZGV4T3JQcm9wZXJ0eURlc2NyaXB0b3IpO1xuICAgICAgICB9O1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmplY3RfYmFzZS5qcy5tYXAiLCJpbXBvcnQgKiBhcyBNRVRBREFUQV9LRVkgZnJvbSBcIi4uL2NvbnN0YW50cy9tZXRhZGF0YV9rZXlzXCI7XG5pbXBvcnQgeyBpbmplY3RCYXNlIH0gZnJvbSBcIi4vaW5qZWN0X2Jhc2VcIjtcbnZhciBpbmplY3QgPSBpbmplY3RCYXNlKE1FVEFEQVRBX0tFWS5JTkpFQ1RfVEFHKTtcbmV4cG9ydCB7IGluamVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5qZWN0LmpzLm1hcCIsImltcG9ydCB7IFBsdWdpbkNvbmZpZyB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjb25zdCBQTFVHSU5fU1lTVEVNX0FVVE9fVVBEQVRFID0gJ1BMVUdJTl9TWVNURU1fQVVUT19VUERBVEUnO1xyXG5leHBvcnQgY29uc3QgUExVR0lOX1NZU1RFTV9QTFVHSU4gPSAnUExVR0lOX1NZU1RFTV9QTFVHSU4nO1xyXG5leHBvcnQgY29uc3QgUExVR0lOX1NZU1RFTV9USElSRF9QQVJUWV9QTFVHSU4gPSAnUExVR0lOX1NZU1RFTV9USElSRF9QQVJUWV9QTFVHSU4nO1xyXG5leHBvcnQgY29uc3QgUExVR0lOX1NZU1RFTV9TQUZFX01PREVfRU5BQkxFRCA9ICdQTFVHSU5fU1lTVEVNX1NBRkVfTU9ERV9FTkFCTEVEJztcclxuZXhwb3J0IGNvbnN0IFBMVUdJTl9TVE9SRV9VUkwgPSAnUExVR0lOX1NUT1JFX1VSTCc7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdENvbmZpZzogUGx1Z2luQ29uZmlnID0ge1xyXG4gICAgW1BMVUdJTl9TWVNURU1fU0FGRV9NT0RFX0VOQUJMRURdOiB0cnVlLFxyXG4gICAgW1BMVUdJTl9TWVNURU1fQVVUT19VUERBVEVdOiB0cnVlLFxyXG4gICAgW1BMVUdJTl9TWVNURU1fUExVR0lOXTogW3sga2V5OiAnc2V0dGluZycsIGVuYWJsZWQ6IHRydWUgfV0sXHJcbiAgICBbUExVR0lOX1NZU1RFTV9USElSRF9QQVJUWV9QTFVHSU5dOiBbXSxcclxuICAgIFtQTFVHSU5fU1RPUkVfVVJMXTogJ2h0dHBzOi8vYml0YnVja2V0Lm9yZy9oaS13aW5kb20vc2lsbG90LXBsdWdpbnMvcmF3L21haW4vJyxcclxufTtcclxuIiwiZnVuY3Rpb24gbm9vcCgpIHsgfVxuY29uc3QgaWRlbnRpdHkgPSB4ID0+IHg7XG5mdW5jdGlvbiBhc3NpZ24odGFyLCBzcmMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZm9yIChjb25zdCBrIGluIHNyYylcbiAgICAgICAgdGFyW2tdID0gc3JjW2tdO1xuICAgIHJldHVybiB0YXI7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3RoZW4vaXMtcHJvbWlzZS9ibG9iL21hc3Rlci9pbmRleC5qc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgTUlUIExpY2Vuc2UgaHR0cHM6Ly9naXRodWIuY29tL3RoZW4vaXMtcHJvbWlzZS9ibG9iL21hc3Rlci9MSUNFTlNFXG5mdW5jdGlvbiBpc19wcm9taXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIGFkZF9sb2NhdGlvbihlbGVtZW50LCBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIpIHtcbiAgICBlbGVtZW50Ll9fc3ZlbHRlX21ldGEgPSB7XG4gICAgICAgIGxvYzogeyBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIgfVxuICAgIH07XG59XG5mdW5jdGlvbiBydW4oZm4pIHtcbiAgICByZXR1cm4gZm4oKTtcbn1cbmZ1bmN0aW9uIGJsYW5rX29iamVjdCgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cbmZ1bmN0aW9uIHJ1bl9hbGwoZm5zKSB7XG4gICAgZm5zLmZvckVhY2gocnVuKTtcbn1cbmZ1bmN0aW9uIGlzX2Z1bmN0aW9uKHRoaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIHNhZmVfbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYiB8fCAoKGEgJiYgdHlwZW9mIGEgPT09ICdvYmplY3QnKSB8fCB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5sZXQgc3JjX3VybF9lcXVhbF9hbmNob3I7XG5mdW5jdGlvbiBzcmNfdXJsX2VxdWFsKGVsZW1lbnRfc3JjLCB1cmwpIHtcbiAgICBpZiAoIXNyY191cmxfZXF1YWxfYW5jaG9yKSB7XG4gICAgICAgIHNyY191cmxfZXF1YWxfYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIH1cbiAgICBzcmNfdXJsX2VxdWFsX2FuY2hvci5ocmVmID0gdXJsO1xuICAgIHJldHVybiBlbGVtZW50X3NyYyA9PT0gc3JjX3VybF9lcXVhbF9hbmNob3IuaHJlZjtcbn1cbmZ1bmN0aW9uIG5vdF9lcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGI7XG59XG5mdW5jdGlvbiBpc19lbXB0eShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zdG9yZShzdG9yZSwgbmFtZSkge1xuICAgIGlmIChzdG9yZSAhPSBudWxsICYmIHR5cGVvZiBzdG9yZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtuYW1lfScgaXMgbm90IGEgc3RvcmUgd2l0aCBhICdzdWJzY3JpYmUnIG1ldGhvZGApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN1YnNjcmliZShzdG9yZSwgLi4uY2FsbGJhY2tzKSB7XG4gICAgaWYgKHN0b3JlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgfVxuICAgIGNvbnN0IHVuc3ViID0gc3RvcmUuc3Vic2NyaWJlKC4uLmNhbGxiYWNrcyk7XG4gICAgcmV0dXJuIHVuc3ViLnVuc3Vic2NyaWJlID8gKCkgPT4gdW5zdWIudW5zdWJzY3JpYmUoKSA6IHVuc3ViO1xufVxuZnVuY3Rpb24gZ2V0X3N0b3JlX3ZhbHVlKHN0b3JlKSB7XG4gICAgbGV0IHZhbHVlO1xuICAgIHN1YnNjcmliZShzdG9yZSwgXyA9PiB2YWx1ZSA9IF8pKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gY29tcG9uZW50X3N1YnNjcmliZShjb21wb25lbnQsIHN0b3JlLCBjYWxsYmFjaykge1xuICAgIGNvbXBvbmVudC4kJC5vbl9kZXN0cm95LnB1c2goc3Vic2NyaWJlKHN0b3JlLCBjYWxsYmFjaykpO1xufVxuZnVuY3Rpb24gY3JlYXRlX3Nsb3QoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNsb3RfY3R4ID0gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKTtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb25bMF0oc2xvdF9jdHgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NvbnRleHQoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIHJldHVybiBkZWZpbml0aW9uWzFdICYmIGZuXG4gICAgICAgID8gYXNzaWduKCQkc2NvcGUuY3R4LnNsaWNlKCksIGRlZmluaXRpb25bMV0oZm4oY3R4KSkpXG4gICAgICAgIDogJCRzY29wZS5jdHg7XG59XG5mdW5jdGlvbiBnZXRfc2xvdF9jaGFuZ2VzKGRlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uWzJdICYmIGZuKSB7XG4gICAgICAgIGNvbnN0IGxldHMgPSBkZWZpbml0aW9uWzJdKGZuKGRpcnR5KSk7XG4gICAgICAgIGlmICgkJHNjb3BlLmRpcnR5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBsZXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbGV0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IFtdO1xuICAgICAgICAgICAgY29uc3QgbGVuID0gTWF0aC5tYXgoJCRzY29wZS5kaXJ0eS5sZW5ndGgsIGxldHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRbaV0gPSAkJHNjb3BlLmRpcnR5W2ldIHwgbGV0c1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICQkc2NvcGUuZGlydHkgfCBsZXRzO1xuICAgIH1cbiAgICByZXR1cm4gJCRzY29wZS5kaXJ0eTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZV9zbG90X2Jhc2Uoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIHNsb3RfY2hhbmdlcywgZ2V0X3Nsb3RfY29udGV4dF9mbikge1xuICAgIGlmIChzbG90X2NoYW5nZXMpIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jb250ZXh0ID0gZ2V0X3Nsb3RfY29udGV4dChzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZ2V0X3Nsb3RfY29udGV4dF9mbik7XG4gICAgICAgIHNsb3QucChzbG90X2NvbnRleHQsIHNsb3RfY2hhbmdlcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3Qoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgY29uc3Qgc2xvdF9jaGFuZ2VzID0gZ2V0X3Nsb3RfY2hhbmdlcyhzbG90X2RlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuKTtcbiAgICB1cGRhdGVfc2xvdF9iYXNlKHNsb3QsIHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBzbG90X2NoYW5nZXMsIGdldF9zbG90X2NvbnRleHRfZm4pO1xufVxuZnVuY3Rpb24gZ2V0X2FsbF9kaXJ0eV9mcm9tX3Njb3BlKCQkc2NvcGUpIHtcbiAgICBpZiAoJCRzY29wZS5jdHgubGVuZ3RoID4gMzIpIHtcbiAgICAgICAgY29uc3QgZGlydHkgPSBbXTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gJCRzY29wZS5jdHgubGVuZ3RoIC8gMzI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRpcnR5W2ldID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcnR5O1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5mdW5jdGlvbiBleGNsdWRlX2ludGVybmFsX3Byb3BzKHByb3BzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIHByb3BzKVxuICAgICAgICBpZiAoa1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdWx0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVfcmVzdF9wcm9wcyhwcm9wcywga2V5cykge1xuICAgIGNvbnN0IHJlc3QgPSB7fTtcbiAgICBrZXlzID0gbmV3IFNldChrZXlzKTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmICgha2V5cy5oYXMoaykgJiYga1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdFtrXSA9IHByb3BzW2tdO1xuICAgIHJldHVybiByZXN0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9zbG90cyhzbG90cykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNsb3RzKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG9uY2UoZm4pIHtcbiAgICBsZXQgcmFuID0gZmFsc2U7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIGlmIChyYW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJhbiA9IHRydWU7XG4gICAgICAgIGZuLmNhbGwodGhpcywgLi4uYXJncyk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG51bGxfdG9fZW1wdHkodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG59XG5mdW5jdGlvbiBzZXRfc3RvcmVfdmFsdWUoc3RvcmUsIHJldCwgdmFsdWUpIHtcbiAgICBzdG9yZS5zZXQodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59XG5jb25zdCBoYXNfcHJvcCA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xuZnVuY3Rpb24gYWN0aW9uX2Rlc3Ryb3llcihhY3Rpb25fcmVzdWx0KSB7XG4gICAgcmV0dXJuIGFjdGlvbl9yZXN1bHQgJiYgaXNfZnVuY3Rpb24oYWN0aW9uX3Jlc3VsdC5kZXN0cm95KSA/IGFjdGlvbl9yZXN1bHQuZGVzdHJveSA6IG5vb3A7XG59XG5cbmNvbnN0IGlzX2NsaWVudCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xubGV0IG5vdyA9IGlzX2NsaWVudFxuICAgID8gKCkgPT4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpXG4gICAgOiAoKSA9PiBEYXRlLm5vdygpO1xubGV0IHJhZiA9IGlzX2NsaWVudCA/IGNiID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYikgOiBub29wO1xuLy8gdXNlZCBpbnRlcm5hbGx5IGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBzZXRfbm93KGZuKSB7XG4gICAgbm93ID0gZm47XG59XG5mdW5jdGlvbiBzZXRfcmFmKGZuKSB7XG4gICAgcmFmID0gZm47XG59XG5cbmNvbnN0IHRhc2tzID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gcnVuX3Rhc2tzKG5vdykge1xuICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGlmICghdGFzay5jKG5vdykpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgICAgIHRhc2suZigpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHRhc2tzLnNpemUgIT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xufVxuLyoqXG4gKiBGb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5IVxuICovXG5mdW5jdGlvbiBjbGVhcl9sb29wcygpIHtcbiAgICB0YXNrcy5jbGVhcigpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhc2sgdGhhdCBydW5zIG9uIGVhY2ggcmFmIGZyYW1lXG4gKiB1bnRpbCBpdCByZXR1cm5zIGEgZmFsc3kgdmFsdWUgb3IgaXMgYWJvcnRlZFxuICovXG5mdW5jdGlvbiBsb29wKGNhbGxiYWNrKSB7XG4gICAgbGV0IHRhc2s7XG4gICAgaWYgKHRhc2tzLnNpemUgPT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb21pc2U6IG5ldyBQcm9taXNlKGZ1bGZpbGwgPT4ge1xuICAgICAgICAgICAgdGFza3MuYWRkKHRhc2sgPSB7IGM6IGNhbGxiYWNrLCBmOiBmdWxmaWxsIH0pO1xuICAgICAgICB9KSxcbiAgICAgICAgYWJvcnQoKSB7XG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzayk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBUcmFjayB3aGljaCBub2RlcyBhcmUgY2xhaW1lZCBkdXJpbmcgaHlkcmF0aW9uLiBVbmNsYWltZWQgbm9kZXMgY2FuIHRoZW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cbi8vIGF0IHRoZSBlbmQgb2YgaHlkcmF0aW9uIHdpdGhvdXQgdG91Y2hpbmcgdGhlIHJlbWFpbmluZyBub2Rlcy5cbmxldCBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbmZ1bmN0aW9uIHN0YXJ0X2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSB0cnVlO1xufVxuZnVuY3Rpb24gZW5kX2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwcGVyX2JvdW5kKGxvdywgaGlnaCwga2V5LCB2YWx1ZSkge1xuICAgIC8vIFJldHVybiBmaXJzdCBpbmRleCBvZiB2YWx1ZSBsYXJnZXIgdGhhbiBpbnB1dCB2YWx1ZSBpbiB0aGUgcmFuZ2UgW2xvdywgaGlnaClcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICBjb25zdCBtaWQgPSBsb3cgKyAoKGhpZ2ggLSBsb3cpID4+IDEpO1xuICAgICAgICBpZiAoa2V5KG1pZCkgPD0gdmFsdWUpIHtcbiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb3c7XG59XG5mdW5jdGlvbiBpbml0X2h5ZHJhdGUodGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldC5oeWRyYXRlX2luaXQpXG4gICAgICAgIHJldHVybjtcbiAgICB0YXJnZXQuaHlkcmF0ZV9pbml0ID0gdHJ1ZTtcbiAgICAvLyBXZSBrbm93IHRoYXQgYWxsIGNoaWxkcmVuIGhhdmUgY2xhaW1fb3JkZXIgdmFsdWVzIHNpbmNlIHRoZSB1bmNsYWltZWQgaGF2ZSBiZWVuIGRldGFjaGVkIGlmIHRhcmdldCBpcyBub3QgPGhlYWQ+XG4gICAgbGV0IGNoaWxkcmVuID0gdGFyZ2V0LmNoaWxkTm9kZXM7XG4gICAgLy8gSWYgdGFyZ2V0IGlzIDxoZWFkPiwgdGhlcmUgbWF5IGJlIGNoaWxkcmVuIHdpdGhvdXQgY2xhaW1fb3JkZXJcbiAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09PSAnSEVBRCcpIHtcbiAgICAgICAgY29uc3QgbXlDaGlsZHJlbiA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAobm9kZS5jbGFpbV9vcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbXlDaGlsZHJlbi5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuID0gbXlDaGlsZHJlbjtcbiAgICB9XG4gICAgLypcbiAgICAqIFJlb3JkZXIgY2xhaW1lZCBjaGlsZHJlbiBvcHRpbWFsbHkuXG4gICAgKiBXZSBjYW4gcmVvcmRlciBjbGFpbWVkIGNoaWxkcmVuIG9wdGltYWxseSBieSBmaW5kaW5nIHRoZSBsb25nZXN0IHN1YnNlcXVlbmNlIG9mXG4gICAgKiBub2RlcyB0aGF0IGFyZSBhbHJlYWR5IGNsYWltZWQgaW4gb3JkZXIgYW5kIG9ubHkgbW92aW5nIHRoZSByZXN0LiBUaGUgbG9uZ2VzdFxuICAgICogc3Vic2VxdWVuY2Ugb2Ygbm9kZXMgdGhhdCBhcmUgY2xhaW1lZCBpbiBvcmRlciBjYW4gYmUgZm91bmQgYnlcbiAgICAqIGNvbXB1dGluZyB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIC5jbGFpbV9vcmRlciB2YWx1ZXMuXG4gICAgKlxuICAgICogVGhpcyBhbGdvcml0aG0gaXMgb3B0aW1hbCBpbiBnZW5lcmF0aW5nIHRoZSBsZWFzdCBhbW91bnQgb2YgcmVvcmRlciBvcGVyYXRpb25zXG4gICAgKiBwb3NzaWJsZS5cbiAgICAqXG4gICAgKiBQcm9vZjpcbiAgICAqIFdlIGtub3cgdGhhdCwgZ2l2ZW4gYSBzZXQgb2YgcmVvcmRlcmluZyBvcGVyYXRpb25zLCB0aGUgbm9kZXMgdGhhdCBkbyBub3QgbW92ZVxuICAgICogYWx3YXlzIGZvcm0gYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSwgc2luY2UgdGhleSBkbyBub3QgbW92ZSBhbW9uZyBlYWNoIG90aGVyXG4gICAgKiBtZWFuaW5nIHRoYXQgdGhleSBtdXN0IGJlIGFscmVhZHkgb3JkZXJlZCBhbW9uZyBlYWNoIG90aGVyLiBUaHVzLCB0aGUgbWF4aW1hbFxuICAgICogc2V0IG9mIG5vZGVzIHRoYXQgZG8gbm90IG1vdmUgZm9ybSBhIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZS5cbiAgICAqL1xuICAgIC8vIENvbXB1dGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlXG4gICAgLy8gbTogc3Vic2VxdWVuY2UgbGVuZ3RoIGogPT4gaW5kZXggayBvZiBzbWFsbGVzdCB2YWx1ZSB0aGF0IGVuZHMgYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBsZW5ndGggalxuICAgIGNvbnN0IG0gPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGggKyAxKTtcbiAgICAvLyBQcmVkZWNlc3NvciBpbmRpY2VzICsgMVxuICAgIGNvbnN0IHAgPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGgpO1xuICAgIG1bMF0gPSAtMTtcbiAgICBsZXQgbG9uZ2VzdCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gY2hpbGRyZW5baV0uY2xhaW1fb3JkZXI7XG4gICAgICAgIC8vIEZpbmQgdGhlIGxhcmdlc3Qgc3Vic2VxdWVuY2UgbGVuZ3RoIHN1Y2ggdGhhdCBpdCBlbmRzIGluIGEgdmFsdWUgbGVzcyB0aGFuIG91ciBjdXJyZW50IHZhbHVlXG4gICAgICAgIC8vIHVwcGVyX2JvdW5kIHJldHVybnMgZmlyc3QgZ3JlYXRlciB2YWx1ZSwgc28gd2Ugc3VidHJhY3Qgb25lXG4gICAgICAgIC8vIHdpdGggZmFzdCBwYXRoIGZvciB3aGVuIHdlIGFyZSBvbiB0aGUgY3VycmVudCBsb25nZXN0IHN1YnNlcXVlbmNlXG4gICAgICAgIGNvbnN0IHNlcUxlbiA9ICgobG9uZ2VzdCA+IDAgJiYgY2hpbGRyZW5bbVtsb25nZXN0XV0uY2xhaW1fb3JkZXIgPD0gY3VycmVudCkgPyBsb25nZXN0ICsgMSA6IHVwcGVyX2JvdW5kKDEsIGxvbmdlc3QsIGlkeCA9PiBjaGlsZHJlblttW2lkeF1dLmNsYWltX29yZGVyLCBjdXJyZW50KSkgLSAxO1xuICAgICAgICBwW2ldID0gbVtzZXFMZW5dICsgMTtcbiAgICAgICAgY29uc3QgbmV3TGVuID0gc2VxTGVuICsgMTtcbiAgICAgICAgLy8gV2UgY2FuIGd1YXJhbnRlZSB0aGF0IGN1cnJlbnQgaXMgdGhlIHNtYWxsZXN0IHZhbHVlLiBPdGhlcndpc2UsIHdlIHdvdWxkIGhhdmUgZ2VuZXJhdGVkIGEgbG9uZ2VyIHNlcXVlbmNlLlxuICAgICAgICBtW25ld0xlbl0gPSBpO1xuICAgICAgICBsb25nZXN0ID0gTWF0aC5tYXgobmV3TGVuLCBsb25nZXN0KTtcbiAgICB9XG4gICAgLy8gVGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBub2RlcyAoaW5pdGlhbGx5IHJldmVyc2VkKVxuICAgIGNvbnN0IGxpcyA9IFtdO1xuICAgIC8vIFRoZSByZXN0IG9mIHRoZSBub2Rlcywgbm9kZXMgdGhhdCB3aWxsIGJlIG1vdmVkXG4gICAgY29uc3QgdG9Nb3ZlID0gW107XG4gICAgbGV0IGxhc3QgPSBjaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgIGZvciAobGV0IGN1ciA9IG1bbG9uZ2VzdF0gKyAxOyBjdXIgIT0gMDsgY3VyID0gcFtjdXIgLSAxXSkge1xuICAgICAgICBsaXMucHVzaChjaGlsZHJlbltjdXIgLSAxXSk7XG4gICAgICAgIGZvciAoOyBsYXN0ID49IGN1cjsgbGFzdC0tKSB7XG4gICAgICAgICAgICB0b01vdmUucHVzaChjaGlsZHJlbltsYXN0XSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdC0tO1xuICAgIH1cbiAgICBmb3IgKDsgbGFzdCA+PSAwOyBsYXN0LS0pIHtcbiAgICAgICAgdG9Nb3ZlLnB1c2goY2hpbGRyZW5bbGFzdF0pO1xuICAgIH1cbiAgICBsaXMucmV2ZXJzZSgpO1xuICAgIC8vIFdlIHNvcnQgdGhlIG5vZGVzIGJlaW5nIG1vdmVkIHRvIGd1YXJhbnRlZSB0aGF0IHRoZWlyIGluc2VydGlvbiBvcmRlciBtYXRjaGVzIHRoZSBjbGFpbSBvcmRlclxuICAgIHRvTW92ZS5zb3J0KChhLCBiKSA9PiBhLmNsYWltX29yZGVyIC0gYi5jbGFpbV9vcmRlcik7XG4gICAgLy8gRmluYWxseSwgd2UgbW92ZSB0aGUgbm9kZXNcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IDA7IGkgPCB0b01vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgd2hpbGUgKGogPCBsaXMubGVuZ3RoICYmIHRvTW92ZVtpXS5jbGFpbV9vcmRlciA+PSBsaXNbal0uY2xhaW1fb3JkZXIpIHtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbmNob3IgPSBqIDwgbGlzLmxlbmd0aCA/IGxpc1tqXSA6IG51bGw7XG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUodG9Nb3ZlW2ldLCBhbmNob3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFwcGVuZCh0YXJnZXQsIG5vZGUpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfc3R5bGVzKHRhcmdldCwgc3R5bGVfc2hlZXRfaWQsIHN0eWxlcykge1xuICAgIGNvbnN0IGFwcGVuZF9zdHlsZXNfdG8gPSBnZXRfcm9vdF9mb3Jfc3R5bGUodGFyZ2V0KTtcbiAgICBpZiAoIWFwcGVuZF9zdHlsZXNfdG8uZ2V0RWxlbWVudEJ5SWQoc3R5bGVfc2hlZXRfaWQpKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGUuaWQgPSBzdHlsZV9zaGVldF9pZDtcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBzdHlsZXM7XG4gICAgICAgIGFwcGVuZF9zdHlsZXNoZWV0KGFwcGVuZF9zdHlsZXNfdG8sIHN0eWxlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSkge1xuICAgIGlmICghbm9kZSlcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIGNvbnN0IHJvb3QgPSBub2RlLmdldFJvb3ROb2RlID8gbm9kZS5nZXRSb290Tm9kZSgpIDogbm9kZS5vd25lckRvY3VtZW50O1xuICAgIGlmIChyb290ICYmIHJvb3QuaG9zdCkge1xuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGUub3duZXJEb2N1bWVudDtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0KG5vZGUpIHtcbiAgICBjb25zdCBzdHlsZV9lbGVtZW50ID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICBhcHBlbmRfc3R5bGVzaGVldChnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSksIHN0eWxlX2VsZW1lbnQpO1xuICAgIHJldHVybiBzdHlsZV9lbGVtZW50LnNoZWV0O1xufVxuZnVuY3Rpb24gYXBwZW5kX3N0eWxlc2hlZXQobm9kZSwgc3R5bGUpIHtcbiAgICBhcHBlbmQobm9kZS5oZWFkIHx8IG5vZGUsIHN0eWxlKTtcbiAgICByZXR1cm4gc3R5bGUuc2hlZXQ7XG59XG5mdW5jdGlvbiBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSkge1xuICAgIGlmIChpc19oeWRyYXRpbmcpIHtcbiAgICAgICAgaW5pdF9oeWRyYXRlKHRhcmdldCk7XG4gICAgICAgIGlmICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPT09IHVuZGVmaW5lZCkgfHwgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCAhPT0gbnVsbCkgJiYgKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLnBhcmVudE5vZGUgIT09IHRhcmdldCkpKSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IHRhcmdldC5maXJzdENoaWxkO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNraXAgbm9kZXMgb2YgdW5kZWZpbmVkIG9yZGVyaW5nXG4gICAgICAgIHdoaWxlICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgIT09IG51bGwpICYmICh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5jbGFpbV9vcmRlciA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZSAhPT0gdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQpIHtcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgaW5zZXJ0IGlmIHRoZSBvcmRlcmluZyBvZiB0aGlzIG5vZGUgc2hvdWxkIGJlIG1vZGlmaWVkIG9yIHRoZSBwYXJlbnQgbm9kZSBpcyBub3QgdGFyZ2V0XG4gICAgICAgICAgICBpZiAobm9kZS5jbGFpbV9vcmRlciAhPT0gdW5kZWZpbmVkIHx8IG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQgfHwgbm9kZS5uZXh0U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaW5zZXJ0KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCBhbmNob3IgfHwgbnVsbCk7XG59XG5mdW5jdGlvbiBpbnNlcnRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgaWYgKGlzX2h5ZHJhdGluZyAmJiAhYW5jaG9yKSB7XG4gICAgICAgIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQgfHwgbm9kZS5uZXh0U2libGluZyAhPSBhbmNob3IpIHtcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCBhbmNob3IgfHwgbnVsbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoKG5vZGUpIHtcbiAgICBpZiAobm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXN0cm95X2VhY2goaXRlcmF0aW9ucywgZGV0YWNoaW5nKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChpdGVyYXRpb25zW2ldKVxuICAgICAgICAgICAgaXRlcmF0aW9uc1tpXS5kKGRldGFjaGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG59XG5mdW5jdGlvbiBlbGVtZW50X2lzKG5hbWUsIGlzKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSwgeyBpcyB9KTtcbn1cbmZ1bmN0aW9uIG9iamVjdF93aXRob3V0X3Byb3BlcnRpZXMob2JqLCBleGNsdWRlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgICAgICBpZiAoaGFzX3Byb3Aob2JqLCBrKVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgJiYgZXhjbHVkZS5pbmRleE9mKGspID09PSAtMSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGFyZ2V0W2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBzdmdfZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBuYW1lKTtcbn1cbmZ1bmN0aW9uIHRleHQoZGF0YSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkYXRhKTtcbn1cbmZ1bmN0aW9uIHNwYWNlKCkge1xuICAgIHJldHVybiB0ZXh0KCcgJyk7XG59XG5mdW5jdGlvbiBlbXB0eSgpIHtcbiAgICByZXR1cm4gdGV4dCgnJyk7XG59XG5mdW5jdGlvbiBsaXN0ZW4obm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiAoKSA9PiBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcHJldmVudF9kZWZhdWx0KGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc3RvcF9wcm9wYWdhdGlvbihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBzZWxmKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMpXG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJ1c3RlZChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoZXZlbnQuaXNUcnVzdGVkKVxuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgIGVsc2UgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkgIT09IHZhbHVlKVxuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldF9hdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgZGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhub2RlLl9fcHJvdG9fXyk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBpZiAoYXR0cmlidXRlc1trZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICBub2RlLnN0eWxlLmNzc1RleHQgPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnX192YWx1ZScpIHtcbiAgICAgICAgICAgIG5vZGUudmFsdWUgPSBub2RlW2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVzY3JpcHRvcnNba2V5XSAmJiBkZXNjcmlwdG9yc1trZXldLnNldCkge1xuICAgICAgICAgICAgbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3ZnX2F0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X2N1c3RvbV9lbGVtZW50X2RhdGFfbWFwKG5vZGUsIGRhdGFfbWFwKSB7XG4gICAgT2JqZWN0LmtleXMoZGF0YV9tYXApLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YShub2RlLCBrZXksIGRhdGFfbWFwW2tleV0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gc2V0X2N1c3RvbV9lbGVtZW50X2RhdGEobm9kZSwgcHJvcCwgdmFsdWUpIHtcbiAgICBpZiAocHJvcCBpbiBub2RlKSB7XG4gICAgICAgIG5vZGVbcHJvcF0gPSB0eXBlb2Ygbm9kZVtwcm9wXSA9PT0gJ2Jvb2xlYW4nICYmIHZhbHVlID09PSAnJyA/IHRydWUgOiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGF0dHIobm9kZSwgcHJvcCwgdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHhsaW5rX2F0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIG5vZGUuc2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBhdHRyaWJ1dGUsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGdldF9iaW5kaW5nX2dyb3VwX3ZhbHVlKGdyb3VwLCBfX3ZhbHVlLCBjaGVja2VkKSB7XG4gICAgY29uc3QgdmFsdWUgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoZ3JvdXBbaV0uY2hlY2tlZClcbiAgICAgICAgICAgIHZhbHVlLmFkZChncm91cFtpXS5fX3ZhbHVlKTtcbiAgICB9XG4gICAgaWYgKCFjaGVja2VkKSB7XG4gICAgICAgIHZhbHVlLmRlbGV0ZShfX3ZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIEFycmF5LmZyb20odmFsdWUpO1xufVxuZnVuY3Rpb24gdG9fbnVtYmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAnJyA/IG51bGwgOiArdmFsdWU7XG59XG5mdW5jdGlvbiB0aW1lX3Jhbmdlc190b19hcnJheShyYW5nZXMpIHtcbiAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGFycmF5LnB1c2goeyBzdGFydDogcmFuZ2VzLnN0YXJ0KGkpLCBlbmQ6IHJhbmdlcy5lbmQoaSkgfSk7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbn1cbmZ1bmN0aW9uIGNoaWxkcmVuKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50LmNoaWxkTm9kZXMpO1xufVxuZnVuY3Rpb24gaW5pdF9jbGFpbV9pbmZvKG5vZGVzKSB7XG4gICAgaWYgKG5vZGVzLmNsYWltX2luZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBub2Rlcy5jbGFpbV9pbmZvID0geyBsYXN0X2luZGV4OiAwLCB0b3RhbF9jbGFpbWVkOiAwIH07XG4gICAgfVxufVxuZnVuY3Rpb24gY2xhaW1fbm9kZShub2RlcywgcHJlZGljYXRlLCBwcm9jZXNzTm9kZSwgY3JlYXRlTm9kZSwgZG9udFVwZGF0ZUxhc3RJbmRleCA9IGZhbHNlKSB7XG4gICAgLy8gVHJ5IHRvIGZpbmQgbm9kZXMgaW4gYW4gb3JkZXIgc3VjaCB0aGF0IHdlIGxlbmd0aGVuIHRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2VcbiAgICBpbml0X2NsYWltX2luZm8obm9kZXMpO1xuICAgIGNvbnN0IHJlc3VsdE5vZGUgPSAoKCkgPT4ge1xuICAgICAgICAvLyBXZSBmaXJzdCB0cnkgdG8gZmluZCBhbiBlbGVtZW50IGFmdGVyIHRoZSBwcmV2aW91cyBvbmVcbiAgICAgICAgZm9yIChsZXQgaSA9IG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBwcm9jZXNzTm9kZShub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1tpXSA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRVcGRhdGVMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0cnkgdG8gZmluZCBvbmUgYmVmb3JlXG4gICAgICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBzbyB0aGF0IHdlIGRvbid0IGdvIHRvbyBmYXIgYmFja1xuICAgICAgICBmb3IgKGxldCBpID0gbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4IC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHByb2Nlc3NOb2RlKG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzW2ldID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZG9udFVwZGF0ZUxhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHdlIHNwbGljZWQgYmVmb3JlIHRoZSBsYXN0X2luZGV4LCB3ZSBkZWNyZWFzZSBpdFxuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXgtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgZmluZCBhbnkgbWF0Y2hpbmcgbm9kZSwgd2UgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICByZXR1cm4gY3JlYXRlTm9kZSgpO1xuICAgIH0pKCk7XG4gICAgcmVzdWx0Tm9kZS5jbGFpbV9vcmRlciA9IG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZDtcbiAgICBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQgKz0gMTtcbiAgICByZXR1cm4gcmVzdWx0Tm9kZTtcbn1cbmZ1bmN0aW9uIGNsYWltX2VsZW1lbnRfYmFzZShub2RlcywgbmFtZSwgYXR0cmlidXRlcywgY3JlYXRlX2VsZW1lbnQpIHtcbiAgICByZXR1cm4gY2xhaW1fbm9kZShub2RlcywgKG5vZGUpID0+IG5vZGUubm9kZU5hbWUgPT09IG5hbWUsIChub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG5vZGUuYXR0cmlidXRlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlID0gbm9kZS5hdHRyaWJ1dGVzW2pdO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZS5wdXNoKGF0dHJpYnV0ZS5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZW1vdmUuZm9yRWFjaCh2ID0+IG5vZGUucmVtb3ZlQXR0cmlidXRlKHYpKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LCAoKSA9PiBjcmVhdGVfZWxlbWVudChuYW1lKSk7XG59XG5mdW5jdGlvbiBjbGFpbV9lbGVtZW50KG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIGNsYWltX2VsZW1lbnRfYmFzZShub2RlcywgbmFtZSwgYXR0cmlidXRlcywgZWxlbWVudCk7XG59XG5mdW5jdGlvbiBjbGFpbV9zdmdfZWxlbWVudChub2RlcywgbmFtZSwgYXR0cmlidXRlcykge1xuICAgIHJldHVybiBjbGFpbV9lbGVtZW50X2Jhc2Uobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIHN2Z19lbGVtZW50KTtcbn1cbmZ1bmN0aW9uIGNsYWltX3RleHQobm9kZXMsIGRhdGEpIHtcbiAgICByZXR1cm4gY2xhaW1fbm9kZShub2RlcywgKG5vZGUpID0+IG5vZGUubm9kZVR5cGUgPT09IDMsIChub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGFTdHIgPSAnJyArIGRhdGE7XG4gICAgICAgIGlmIChub2RlLmRhdGEuc3RhcnRzV2l0aChkYXRhU3RyKSkge1xuICAgICAgICAgICAgaWYgKG5vZGUuZGF0YS5sZW5ndGggIT09IGRhdGFTdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuc3BsaXRUZXh0KGRhdGFTdHIubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IGRhdGFTdHI7XG4gICAgICAgIH1cbiAgICB9LCAoKSA9PiB0ZXh0KGRhdGEpLCB0cnVlIC8vIFRleHQgbm9kZXMgc2hvdWxkIG5vdCB1cGRhdGUgbGFzdCBpbmRleCBzaW5jZSBpdCBpcyBsaWtlbHkgbm90IHdvcnRoIGl0IHRvIGVsaW1pbmF0ZSBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIGFjdHVhbCBlbGVtZW50c1xuICAgICk7XG59XG5mdW5jdGlvbiBjbGFpbV9zcGFjZShub2Rlcykge1xuICAgIHJldHVybiBjbGFpbV90ZXh0KG5vZGVzLCAnICcpO1xufVxuZnVuY3Rpb24gZmluZF9jb21tZW50KG5vZGVzLCB0ZXh0LCBzdGFydCkge1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IG5vZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDggLyogY29tbWVudCBub2RlICovICYmIG5vZGUudGV4dENvbnRlbnQudHJpbSgpID09PSB0ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZXMubGVuZ3RoO1xufVxuZnVuY3Rpb24gY2xhaW1faHRtbF90YWcobm9kZXMsIGlzX3N2Zykge1xuICAgIC8vIGZpbmQgaHRtbCBvcGVuaW5nIHRhZ1xuICAgIGNvbnN0IHN0YXJ0X2luZGV4ID0gZmluZF9jb21tZW50KG5vZGVzLCAnSFRNTF9UQUdfU1RBUlQnLCAwKTtcbiAgICBjb25zdCBlbmRfaW5kZXggPSBmaW5kX2NvbW1lbnQobm9kZXMsICdIVE1MX1RBR19FTkQnLCBzdGFydF9pbmRleCk7XG4gICAgaWYgKHN0YXJ0X2luZGV4ID09PSBlbmRfaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sVGFnSHlkcmF0aW9uKHVuZGVmaW5lZCwgaXNfc3ZnKTtcbiAgICB9XG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCBodG1sX3RhZ19ub2RlcyA9IG5vZGVzLnNwbGljZShzdGFydF9pbmRleCwgZW5kX2luZGV4IC0gc3RhcnRfaW5kZXggKyAxKTtcbiAgICBkZXRhY2goaHRtbF90YWdfbm9kZXNbMF0pO1xuICAgIGRldGFjaChodG1sX3RhZ19ub2Rlc1todG1sX3RhZ19ub2Rlcy5sZW5ndGggLSAxXSk7XG4gICAgY29uc3QgY2xhaW1lZF9ub2RlcyA9IGh0bWxfdGFnX25vZGVzLnNsaWNlKDEsIGh0bWxfdGFnX25vZGVzLmxlbmd0aCAtIDEpO1xuICAgIGZvciAoY29uc3QgbiBvZiBjbGFpbWVkX25vZGVzKSB7XG4gICAgICAgIG4uY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgICAgIG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZCArPSAxO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24oY2xhaW1lZF9ub2RlcywgaXNfc3ZnKTtcbn1cbmZ1bmN0aW9uIHNldF9kYXRhKHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0Lndob2xlVGV4dCAhPT0gZGF0YSlcbiAgICAgICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF92YWx1ZShpbnB1dCwgdmFsdWUpIHtcbiAgICBpbnB1dC52YWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xufVxuZnVuY3Rpb24gc2V0X2lucHV0X3R5cGUoaW5wdXQsIHR5cGUpIHtcbiAgICB0cnkge1xuICAgICAgICBpbnB1dC50eXBlID0gdHlwZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9zdHlsZShub2RlLCBrZXksIHZhbHVlLCBpbXBvcnRhbnQpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShrZXkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbm9kZS5zdHlsZS5zZXRQcm9wZXJ0eShrZXksIHZhbHVlLCBpbXBvcnRhbnQgPyAnaW1wb3J0YW50JyA6ICcnKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9uKHNlbGVjdCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdC5vcHRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5vcHRpb25zW2ldO1xuICAgICAgICBpZiAob3B0aW9uLl9fdmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdC5zZWxlY3RlZEluZGV4ID0gLTE7IC8vIG5vIG9wdGlvbiBzaG91bGQgYmUgc2VsZWN0ZWRcbn1cbmZ1bmN0aW9uIHNlbGVjdF9vcHRpb25zKHNlbGVjdCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdC5vcHRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5vcHRpb25zW2ldO1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB+dmFsdWUuaW5kZXhPZihvcHRpb24uX192YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2VsZWN0X3ZhbHVlKHNlbGVjdCkge1xuICAgIGNvbnN0IHNlbGVjdGVkX29wdGlvbiA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKCc6Y2hlY2tlZCcpIHx8IHNlbGVjdC5vcHRpb25zWzBdO1xuICAgIHJldHVybiBzZWxlY3RlZF9vcHRpb24gJiYgc2VsZWN0ZWRfb3B0aW9uLl9fdmFsdWU7XG59XG5mdW5jdGlvbiBzZWxlY3RfbXVsdGlwbGVfdmFsdWUoc2VsZWN0KSB7XG4gICAgcmV0dXJuIFtdLm1hcC5jYWxsKHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKCc6Y2hlY2tlZCcpLCBvcHRpb24gPT4gb3B0aW9uLl9fdmFsdWUpO1xufVxuLy8gdW5mb3J0dW5hdGVseSB0aGlzIGNhbid0IGJlIGEgY29uc3RhbnQgYXMgdGhhdCB3b3VsZG4ndCBiZSB0cmVlLXNoYWtlYWJsZVxuLy8gc28gd2UgY2FjaGUgdGhlIHJlc3VsdCBpbnN0ZWFkXG5sZXQgY3Jvc3NvcmlnaW47XG5mdW5jdGlvbiBpc19jcm9zc29yaWdpbigpIHtcbiAgICBpZiAoY3Jvc3NvcmlnaW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjcm9zc29yaWdpbiA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB2b2lkIHdpbmRvdy5wYXJlbnQuZG9jdW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjcm9zc29yaWdpbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNyb3Nzb3JpZ2luO1xufVxuZnVuY3Rpb24gYWRkX3Jlc2l6ZV9saXN0ZW5lcihub2RlLCBmbikge1xuICAgIGNvbnN0IGNvbXB1dGVkX3N0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICBpZiAoY29tcHV0ZWRfc3R5bGUucG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIH1cbiAgICBjb25zdCBpZnJhbWUgPSBlbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7ICcgK1xuICAgICAgICAnb3ZlcmZsb3c6IGhpZGRlbjsgYm9yZGVyOiAwOyBvcGFjaXR5OiAwOyBwb2ludGVyLWV2ZW50czogbm9uZTsgei1pbmRleDogLTE7Jyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIGlmcmFtZS50YWJJbmRleCA9IC0xO1xuICAgIGNvbnN0IGNyb3Nzb3JpZ2luID0gaXNfY3Jvc3NvcmlnaW4oKTtcbiAgICBsZXQgdW5zdWJzY3JpYmU7XG4gICAgaWYgKGNyb3Nzb3JpZ2luKSB7XG4gICAgICAgIGlmcmFtZS5zcmMgPSBcImRhdGE6dGV4dC9odG1sLDxzY3JpcHQ+b25yZXNpemU9ZnVuY3Rpb24oKXtwYXJlbnQucG9zdE1lc3NhZ2UoMCwnKicpfTwvc2NyaXB0PlwiO1xuICAgICAgICB1bnN1YnNjcmliZSA9IGxpc3Rlbih3aW5kb3csICdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBpZnJhbWUuY29udGVudFdpbmRvdylcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmcmFtZS5zcmMgPSAnYWJvdXQ6YmxhbmsnO1xuICAgICAgICBpZnJhbWUub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSBsaXN0ZW4oaWZyYW1lLmNvbnRlbnRXaW5kb3csICdyZXNpemUnLCBmbik7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGFwcGVuZChub2RlLCBpZnJhbWUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChjcm9zc29yaWdpbikge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1bnN1YnNjcmliZSAmJiBpZnJhbWUuY29udGVudFdpbmRvdykge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBkZXRhY2goaWZyYW1lKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdG9nZ2xlX2NsYXNzKGVsZW1lbnQsIG5hbWUsIHRvZ2dsZSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0W3RvZ2dsZSA/ICdhZGQnIDogJ3JlbW92ZSddKG5hbWUpO1xufVxuZnVuY3Rpb24gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCwgeyBidWJibGVzID0gZmFsc2UsIGNhbmNlbGFibGUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBjb25zdCBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgYnViYmxlcywgY2FuY2VsYWJsZSwgZGV0YWlsKTtcbiAgICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIHF1ZXJ5X3NlbGVjdG9yX2FsbChzZWxlY3RvciwgcGFyZW50ID0gZG9jdW1lbnQuYm9keSkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG59XG5mdW5jdGlvbiBoZWFkX3NlbGVjdG9yKG5vZGVJZCwgaGVhZCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGxldCBzdGFydGVkID0gMDtcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2YgaGVhZC5jaGlsZE5vZGVzKSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSA4IC8qIGNvbW1lbnQgbm9kZSAqLykge1xuICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IG5vZGUudGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGNvbW1lbnQgPT09IGBIRUFEXyR7bm9kZUlkfV9FTkRgKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRlZCAtPSAxO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29tbWVudCA9PT0gYEhFQURfJHtub2RlSWR9X1NUQVJUYCkge1xuICAgICAgICAgICAgICAgIHN0YXJ0ZWQgKz0gMTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGFydGVkID4gMCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNsYXNzIEh0bWxUYWcge1xuICAgIGNvbnN0cnVjdG9yKGlzX3N2ZyA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuaXNfc3ZnID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNfc3ZnID0gaXNfc3ZnO1xuICAgICAgICB0aGlzLmUgPSB0aGlzLm4gPSBudWxsO1xuICAgIH1cbiAgICBjKGh0bWwpIHtcbiAgICAgICAgdGhpcy5oKGh0bWwpO1xuICAgIH1cbiAgICBtKGh0bWwsIHRhcmdldCwgYW5jaG9yID0gbnVsbCkge1xuICAgICAgICBpZiAoIXRoaXMuZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNfc3ZnKVxuICAgICAgICAgICAgICAgIHRoaXMuZSA9IHN2Z19lbGVtZW50KHRhcmdldC5ub2RlTmFtZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5lID0gZWxlbWVudCh0YXJnZXQubm9kZU5hbWUpO1xuICAgICAgICAgICAgdGhpcy50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5jKGh0bWwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaShhbmNob3IpO1xuICAgIH1cbiAgICBoKGh0bWwpIHtcbiAgICAgICAgdGhpcy5lLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgIHRoaXMubiA9IEFycmF5LmZyb20odGhpcy5lLmNoaWxkTm9kZXMpO1xuICAgIH1cbiAgICBpKGFuY2hvcikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaW5zZXJ0KHRoaXMudCwgdGhpcy5uW2ldLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHAoaHRtbCkge1xuICAgICAgICB0aGlzLmQoKTtcbiAgICAgICAgdGhpcy5oKGh0bWwpO1xuICAgICAgICB0aGlzLmkodGhpcy5hKTtcbiAgICB9XG4gICAgZCgpIHtcbiAgICAgICAgdGhpcy5uLmZvckVhY2goZGV0YWNoKTtcbiAgICB9XG59XG5jbGFzcyBIdG1sVGFnSHlkcmF0aW9uIGV4dGVuZHMgSHRtbFRhZyB7XG4gICAgY29uc3RydWN0b3IoY2xhaW1lZF9ub2RlcywgaXNfc3ZnID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIoaXNfc3ZnKTtcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICAgICAgdGhpcy5sID0gY2xhaW1lZF9ub2RlcztcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIGlmICh0aGlzLmwpIHtcbiAgICAgICAgICAgIHRoaXMubiA9IHRoaXMubDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLmMoaHRtbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaShhbmNob3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGluc2VydF9oeWRyYXRpb24odGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBhdHRyaWJ1dGVfdG9fb2JqZWN0KGF0dHJpYnV0ZXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJlc3VsdFthdHRyaWJ1dGUubmFtZV0gPSBhdHRyaWJ1dGUudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBnZXRfY3VzdG9tX2VsZW1lbnRzX3Nsb3RzKGVsZW1lbnQpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBlbGVtZW50LmNoaWxkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICByZXN1bHRbbm9kZS5zbG90IHx8ICdkZWZhdWx0J10gPSB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjb25zdHJ1Y3Rfc3ZlbHRlX2NvbXBvbmVudChjb21wb25lbnQsIHByb3BzKSB7XG4gICAgcmV0dXJuIG5ldyBjb21wb25lbnQocHJvcHMpO1xufVxuXG4vLyB3ZSBuZWVkIHRvIHN0b3JlIHRoZSBpbmZvcm1hdGlvbiBmb3IgbXVsdGlwbGUgZG9jdW1lbnRzIGJlY2F1c2UgYSBTdmVsdGUgYXBwbGljYXRpb24gY291bGQgYWxzbyBjb250YWluIGlmcmFtZXNcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zdmVsdGVqcy9zdmVsdGUvaXNzdWVzLzM2MjRcbmNvbnN0IG1hbmFnZWRfc3R5bGVzID0gbmV3IE1hcCgpO1xubGV0IGFjdGl2ZSA9IDA7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZGFya3NreWFwcC9zdHJpbmctaGFzaC9ibG9iL21hc3Rlci9pbmRleC5qc1xuZnVuY3Rpb24gaGFzaChzdHIpIHtcbiAgICBsZXQgaGFzaCA9IDUzODE7XG4gICAgbGV0IGkgPSBzdHIubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pXG4gICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSBeIHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIHJldHVybiBoYXNoID4+PiAwO1xufVxuZnVuY3Rpb24gY3JlYXRlX3N0eWxlX2luZm9ybWF0aW9uKGRvYywgbm9kZSkge1xuICAgIGNvbnN0IGluZm8gPSB7IHN0eWxlc2hlZXQ6IGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0KG5vZGUpLCBydWxlczoge30gfTtcbiAgICBtYW5hZ2VkX3N0eWxlcy5zZXQoZG9jLCBpbmZvKTtcbiAgICByZXR1cm4gaW5mbztcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9ydWxlKG5vZGUsIGEsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzZSwgZm4sIHVpZCA9IDApIHtcbiAgICBjb25zdCBzdGVwID0gMTYuNjY2IC8gZHVyYXRpb247XG4gICAgbGV0IGtleWZyYW1lcyA9ICd7XFxuJztcbiAgICBmb3IgKGxldCBwID0gMDsgcCA8PSAxOyBwICs9IHN0ZXApIHtcbiAgICAgICAgY29uc3QgdCA9IGEgKyAoYiAtIGEpICogZWFzZShwKTtcbiAgICAgICAga2V5ZnJhbWVzICs9IHAgKiAxMDAgKyBgJXske2ZuKHQsIDEgLSB0KX19XFxuYDtcbiAgICB9XG4gICAgY29uc3QgcnVsZSA9IGtleWZyYW1lcyArIGAxMDAlIHske2ZuKGIsIDEgLSBiKX19XFxufWA7XG4gICAgY29uc3QgbmFtZSA9IGBfX3N2ZWx0ZV8ke2hhc2gocnVsZSl9XyR7dWlkfWA7XG4gICAgY29uc3QgZG9jID0gZ2V0X3Jvb3RfZm9yX3N0eWxlKG5vZGUpO1xuICAgIGNvbnN0IHsgc3R5bGVzaGVldCwgcnVsZXMgfSA9IG1hbmFnZWRfc3R5bGVzLmdldChkb2MpIHx8IGNyZWF0ZV9zdHlsZV9pbmZvcm1hdGlvbihkb2MsIG5vZGUpO1xuICAgIGlmICghcnVsZXNbbmFtZV0pIHtcbiAgICAgICAgcnVsZXNbbmFtZV0gPSB0cnVlO1xuICAgICAgICBzdHlsZXNoZWV0Lmluc2VydFJ1bGUoYEBrZXlmcmFtZXMgJHtuYW1lfSAke3J1bGV9YCwgc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbiAgICBjb25zdCBhbmltYXRpb24gPSBub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJztcbiAgICBub2RlLnN0eWxlLmFuaW1hdGlvbiA9IGAke2FuaW1hdGlvbiA/IGAke2FuaW1hdGlvbn0sIGAgOiAnJ30ke25hbWV9ICR7ZHVyYXRpb259bXMgbGluZWFyICR7ZGVsYXl9bXMgMSBib3RoYDtcbiAgICBhY3RpdmUgKz0gMTtcbiAgICByZXR1cm4gbmFtZTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZV9ydWxlKG5vZGUsIG5hbWUpIHtcbiAgICBjb25zdCBwcmV2aW91cyA9IChub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJykuc3BsaXQoJywgJyk7XG4gICAgY29uc3QgbmV4dCA9IHByZXZpb3VzLmZpbHRlcihuYW1lXG4gICAgICAgID8gYW5pbSA9PiBhbmltLmluZGV4T2YobmFtZSkgPCAwIC8vIHJlbW92ZSBzcGVjaWZpYyBhbmltYXRpb25cbiAgICAgICAgOiBhbmltID0+IGFuaW0uaW5kZXhPZignX19zdmVsdGUnKSA9PT0gLTEgLy8gcmVtb3ZlIGFsbCBTdmVsdGUgYW5pbWF0aW9uc1xuICAgICk7XG4gICAgY29uc3QgZGVsZXRlZCA9IHByZXZpb3VzLmxlbmd0aCAtIG5leHQubGVuZ3RoO1xuICAgIGlmIChkZWxldGVkKSB7XG4gICAgICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gbmV4dC5qb2luKCcsICcpO1xuICAgICAgICBhY3RpdmUgLT0gZGVsZXRlZDtcbiAgICAgICAgaWYgKCFhY3RpdmUpXG4gICAgICAgICAgICBjbGVhcl9ydWxlcygpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsZWFyX3J1bGVzKCkge1xuICAgIHJhZigoKSA9PiB7XG4gICAgICAgIGlmIChhY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG1hbmFnZWRfc3R5bGVzLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IG93bmVyTm9kZSB9ID0gaW5mby5zdHlsZXNoZWV0O1xuICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gb3duZXJOb2RlIGlmIGl0IHJ1bnMgb24ganNkb20uXG4gICAgICAgICAgICBpZiAob3duZXJOb2RlKVxuICAgICAgICAgICAgICAgIGRldGFjaChvd25lck5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgbWFuYWdlZF9zdHlsZXMuY2xlYXIoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlX2FuaW1hdGlvbihub2RlLCBmcm9tLCBmbiwgcGFyYW1zKSB7XG4gICAgaWYgKCFmcm9tKVxuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICBjb25zdCB0byA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKGZyb20ubGVmdCA9PT0gdG8ubGVmdCAmJiBmcm9tLnJpZ2h0ID09PSB0by5yaWdodCAmJiBmcm9tLnRvcCA9PT0gdG8udG9wICYmIGZyb20uYm90dG9tID09PSB0by5ib3R0b20pXG4gICAgICAgIHJldHVybiBub29wO1xuICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIFxuICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogc2hvdWxkIHRoaXMgYmUgc2VwYXJhdGVkIGZyb20gZGVzdHJ1Y3R1cmluZz8gT3Igc3RhcnQvZW5kIGFkZGVkIHRvIHB1YmxpYyBhcGkgYW5kIGRvY3VtZW50YXRpb24/XG4gICAgc3RhcnQ6IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86XG4gICAgZW5kID0gc3RhcnRfdGltZSArIGR1cmF0aW9uLCB0aWNrID0gbm9vcCwgY3NzIH0gPSBmbihub2RlLCB7IGZyb20sIHRvIH0sIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgbGV0IG5hbWU7XG4gICAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgIG5hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlbGF5KSB7XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgbmFtZSk7XG4gICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgbG9vcChub3cgPT4ge1xuICAgICAgICBpZiAoIXN0YXJ0ZWQgJiYgbm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydGVkICYmIG5vdyA+PSBlbmQpIHtcbiAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICBzdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFydW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBub3cgLSBzdGFydF90aW1lO1xuICAgICAgICAgICAgY29uc3QgdCA9IDAgKyAxICogZWFzaW5nKHAgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICBzdGFydCgpO1xuICAgIHRpY2soMCwgMSk7XG4gICAgcmV0dXJuIHN0b3A7XG59XG5mdW5jdGlvbiBmaXhfcG9zaXRpb24obm9kZSkge1xuICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICBpZiAoc3R5bGUucG9zaXRpb24gIT09ICdhYnNvbHV0ZScgJiYgc3R5bGUucG9zaXRpb24gIT09ICdmaXhlZCcpIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBzdHlsZTtcbiAgICAgICAgY29uc3QgYSA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBhZGRfdHJhbnNmb3JtKG5vZGUsIGEpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZF90cmFuc2Zvcm0obm9kZSwgYSkge1xuICAgIGNvbnN0IGIgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChhLmxlZnQgIT09IGIubGVmdCB8fCBhLnRvcCAhPT0gYi50b3ApIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBzdHlsZS50cmFuc2Zvcm0gPT09ICdub25lJyA/ICcnIDogc3R5bGUudHJhbnNmb3JtO1xuICAgICAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IGAke3RyYW5zZm9ybX0gdHJhbnNsYXRlKCR7YS5sZWZ0IC0gYi5sZWZ0fXB4LCAke2EudG9wIC0gYi50b3B9cHgpYDtcbiAgICB9XG59XG5cbmxldCBjdXJyZW50X2NvbXBvbmVudDtcbmZ1bmN0aW9uIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICBjdXJyZW50X2NvbXBvbmVudCA9IGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGdldF9jdXJyZW50X2NvbXBvbmVudCgpIHtcbiAgICBpZiAoIWN1cnJlbnRfY29tcG9uZW50KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Z1bmN0aW9uIGNhbGxlZCBvdXRzaWRlIGNvbXBvbmVudCBpbml0aWFsaXphdGlvbicpO1xuICAgIHJldHVybiBjdXJyZW50X2NvbXBvbmVudDtcbn1cbi8qKlxuICogU2NoZWR1bGVzIGEgY2FsbGJhY2sgdG8gcnVuIGltbWVkaWF0ZWx5IGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHVwZGF0ZWQgYWZ0ZXIgYW55IHN0YXRlIGNoYW5nZS5cbiAqXG4gKiBUaGUgZmlyc3QgdGltZSB0aGUgY2FsbGJhY2sgcnVucyB3aWxsIGJlIGJlZm9yZSB0aGUgaW5pdGlhbCBgb25Nb3VudGBcbiAqXG4gKiBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcyNydW4tdGltZS1zdmVsdGUtYmVmb3JldXBkYXRlXG4gKi9cbmZ1bmN0aW9uIGJlZm9yZVVwZGF0ZShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmJlZm9yZV91cGRhdGUucHVzaChmbik7XG59XG4vKipcbiAqIFRoZSBgb25Nb3VudGAgZnVuY3Rpb24gc2NoZWR1bGVzIGEgY2FsbGJhY2sgdG8gcnVuIGFzIHNvb24gYXMgdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBtb3VudGVkIHRvIHRoZSBET00uXG4gKiBJdCBtdXN0IGJlIGNhbGxlZCBkdXJpbmcgdGhlIGNvbXBvbmVudCdzIGluaXRpYWxpc2F0aW9uIChidXQgZG9lc24ndCBuZWVkIHRvIGxpdmUgKmluc2lkZSogdGhlIGNvbXBvbmVudDtcbiAqIGl0IGNhbiBiZSBjYWxsZWQgZnJvbSBhbiBleHRlcm5hbCBtb2R1bGUpLlxuICpcbiAqIGBvbk1vdW50YCBkb2VzIG5vdCBydW4gaW5zaWRlIGEgW3NlcnZlci1zaWRlIGNvbXBvbmVudF0oL2RvY3MjcnVuLXRpbWUtc2VydmVyLXNpZGUtY29tcG9uZW50LWFwaSkuXG4gKlxuICogaHR0cHM6Ly9zdmVsdGUuZGV2L2RvY3MjcnVuLXRpbWUtc3ZlbHRlLW9ubW91bnRcbiAqL1xuZnVuY3Rpb24gb25Nb3VudChmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX21vdW50LnB1c2goZm4pO1xufVxuLyoqXG4gKiBTY2hlZHVsZXMgYSBjYWxsYmFjayB0byBydW4gaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGNvbXBvbmVudCBoYXMgYmVlbiB1cGRhdGVkLlxuICpcbiAqIFRoZSBmaXJzdCB0aW1lIHRoZSBjYWxsYmFjayBydW5zIHdpbGwgYmUgYWZ0ZXIgdGhlIGluaXRpYWwgYG9uTW91bnRgXG4gKi9cbmZ1bmN0aW9uIGFmdGVyVXBkYXRlKGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuYWZ0ZXJfdXBkYXRlLnB1c2goZm4pO1xufVxuLyoqXG4gKiBTY2hlZHVsZXMgYSBjYWxsYmFjayB0byBydW4gaW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgdW5tb3VudGVkLlxuICpcbiAqIE91dCBvZiBgb25Nb3VudGAsIGBiZWZvcmVVcGRhdGVgLCBgYWZ0ZXJVcGRhdGVgIGFuZCBgb25EZXN0cm95YCwgdGhpcyBpcyB0aGVcbiAqIG9ubHkgb25lIHRoYXQgcnVucyBpbnNpZGUgYSBzZXJ2ZXItc2lkZSBjb21wb25lbnQuXG4gKlxuICogaHR0cHM6Ly9zdmVsdGUuZGV2L2RvY3MjcnVuLXRpbWUtc3ZlbHRlLW9uZGVzdHJveVxuICovXG5mdW5jdGlvbiBvbkRlc3Ryb3koZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5vbl9kZXN0cm95LnB1c2goZm4pO1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIGV2ZW50IGRpc3BhdGNoZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBkaXNwYXRjaCBbY29tcG9uZW50IGV2ZW50c10oL2RvY3MjdGVtcGxhdGUtc3ludGF4LWNvbXBvbmVudC1kaXJlY3RpdmVzLW9uLWV2ZW50bmFtZSkuXG4gKiBFdmVudCBkaXNwYXRjaGVycyBhcmUgZnVuY3Rpb25zIHRoYXQgY2FuIHRha2UgdHdvIGFyZ3VtZW50czogYG5hbWVgIGFuZCBgZGV0YWlsYC5cbiAqXG4gKiBDb21wb25lbnQgZXZlbnRzIGNyZWF0ZWQgd2l0aCBgY3JlYXRlRXZlbnREaXNwYXRjaGVyYCBjcmVhdGUgYVxuICogW0N1c3RvbUV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3VzdG9tRXZlbnQpLlxuICogVGhlc2UgZXZlbnRzIGRvIG5vdCBbYnViYmxlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0xlYXJuL0phdmFTY3JpcHQvQnVpbGRpbmdfYmxvY2tzL0V2ZW50cyNFdmVudF9idWJibGluZ19hbmRfY2FwdHVyZSkuXG4gKiBUaGUgYGRldGFpbGAgYXJndW1lbnQgY29ycmVzcG9uZHMgdG8gdGhlIFtDdXN0b21FdmVudC5kZXRhaWxdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC9kZXRhaWwpXG4gKiBwcm9wZXJ0eSBhbmQgY2FuIGNvbnRhaW4gYW55IHR5cGUgb2YgZGF0YS5cbiAqXG4gKiBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcyNydW4tdGltZS1zdmVsdGUtY3JlYXRlZXZlbnRkaXNwYXRjaGVyXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpIHtcbiAgICBjb25zdCBjb21wb25lbnQgPSBnZXRfY3VycmVudF9jb21wb25lbnQoKTtcbiAgICByZXR1cm4gKHR5cGUsIGRldGFpbCwgeyBjYW5jZWxhYmxlID0gZmFsc2UgfSA9IHt9KSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbXBvbmVudC4kJC5jYWxsYmFja3NbdHlwZV07XG4gICAgICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gYXJlIHRoZXJlIHNpdHVhdGlvbnMgd2hlcmUgZXZlbnRzIGNvdWxkIGJlIGRpc3BhdGNoZWRcbiAgICAgICAgICAgIC8vIGluIGEgc2VydmVyIChub24tRE9NKSBlbnZpcm9ubWVudD9cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCwgeyBjYW5jZWxhYmxlIH0pO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnNsaWNlKCkuZm9yRWFjaChmbiA9PiB7XG4gICAgICAgICAgICAgICAgZm4uY2FsbChjb21wb25lbnQsIGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG4vKipcbiAqIEFzc29jaWF0ZXMgYW4gYXJiaXRyYXJ5IGBjb250ZXh0YCBvYmplY3Qgd2l0aCB0aGUgY3VycmVudCBjb21wb25lbnQgYW5kIHRoZSBzcGVjaWZpZWQgYGtleWBcbiAqIGFuZCByZXR1cm5zIHRoYXQgb2JqZWN0LiBUaGUgY29udGV4dCBpcyB0aGVuIGF2YWlsYWJsZSB0byBjaGlsZHJlbiBvZiB0aGUgY29tcG9uZW50XG4gKiAoaW5jbHVkaW5nIHNsb3R0ZWQgY29udGVudCkgd2l0aCBgZ2V0Q29udGV4dGAuXG4gKlxuICogTGlrZSBsaWZlY3ljbGUgZnVuY3Rpb25zLCB0aGlzIG11c3QgYmUgY2FsbGVkIGR1cmluZyBjb21wb25lbnQgaW5pdGlhbGlzYXRpb24uXG4gKlxuICogaHR0cHM6Ly9zdmVsdGUuZGV2L2RvY3MjcnVuLXRpbWUtc3ZlbHRlLXNldGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gc2V0Q29udGV4dChrZXksIGNvbnRleHQpIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LnNldChrZXksIGNvbnRleHQpO1xuICAgIHJldHVybiBjb250ZXh0O1xufVxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGNvbnRleHQgdGhhdCBiZWxvbmdzIHRvIHRoZSBjbG9zZXN0IHBhcmVudCBjb21wb25lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGBrZXlgLlxuICogTXVzdCBiZSBjYWxsZWQgZHVyaW5nIGNvbXBvbmVudCBpbml0aWFsaXNhdGlvbi5cbiAqXG4gKiBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcyNydW4tdGltZS1zdmVsdGUtZ2V0Y29udGV4dFxuICovXG5mdW5jdGlvbiBnZXRDb250ZXh0KGtleSkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LmdldChrZXkpO1xufVxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIHdob2xlIGNvbnRleHQgbWFwIHRoYXQgYmVsb25ncyB0byB0aGUgY2xvc2VzdCBwYXJlbnQgY29tcG9uZW50LlxuICogTXVzdCBiZSBjYWxsZWQgZHVyaW5nIGNvbXBvbmVudCBpbml0aWFsaXNhdGlvbi4gVXNlZnVsLCBmb3IgZXhhbXBsZSwgaWYgeW91XG4gKiBwcm9ncmFtbWF0aWNhbGx5IGNyZWF0ZSBhIGNvbXBvbmVudCBhbmQgd2FudCB0byBwYXNzIHRoZSBleGlzdGluZyBjb250ZXh0IHRvIGl0LlxuICpcbiAqIGh0dHBzOi8vc3ZlbHRlLmRldi9kb2NzI3J1bi10aW1lLXN2ZWx0ZS1nZXRhbGxjb250ZXh0c1xuICovXG5mdW5jdGlvbiBnZXRBbGxDb250ZXh0cygpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dDtcbn1cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYSBnaXZlbiBga2V5YCBoYXMgYmVlbiBzZXQgaW4gdGhlIGNvbnRleHQgb2YgYSBwYXJlbnQgY29tcG9uZW50LlxuICogTXVzdCBiZSBjYWxsZWQgZHVyaW5nIGNvbXBvbmVudCBpbml0aWFsaXNhdGlvbi5cbiAqXG4gKiBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcyNydW4tdGltZS1zdmVsdGUtaGFzY29udGV4dFxuICovXG5mdW5jdGlvbiBoYXNDb250ZXh0KGtleSkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LmhhcyhrZXkpO1xufVxuLy8gVE9ETyBmaWd1cmUgb3V0IGlmIHdlIHN0aWxsIHdhbnQgdG8gc3VwcG9ydFxuLy8gc2hvcnRoYW5kIGV2ZW50cywgb3IgaWYgd2Ugd2FudCB0byBpbXBsZW1lbnRcbi8vIGEgcmVhbCBidWJibGluZyBtZWNoYW5pc21cbmZ1bmN0aW9uIGJ1YmJsZShjb21wb25lbnQsIGV2ZW50KSB7XG4gICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1tldmVudC50eXBlXTtcbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY2FsbGJhY2tzLnNsaWNlKCkuZm9yRWFjaChmbiA9PiBmbi5jYWxsKHRoaXMsIGV2ZW50KSk7XG4gICAgfVxufVxuXG5jb25zdCBkaXJ0eV9jb21wb25lbnRzID0gW107XG5jb25zdCBpbnRyb3MgPSB7IGVuYWJsZWQ6IGZhbHNlIH07XG5jb25zdCBiaW5kaW5nX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgcmVuZGVyX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgZmx1c2hfY2FsbGJhY2tzID0gW107XG5jb25zdCByZXNvbHZlZF9wcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5sZXQgdXBkYXRlX3NjaGVkdWxlZCA9IGZhbHNlO1xuZnVuY3Rpb24gc2NoZWR1bGVfdXBkYXRlKCkge1xuICAgIGlmICghdXBkYXRlX3NjaGVkdWxlZCkge1xuICAgICAgICB1cGRhdGVfc2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgcmVzb2x2ZWRfcHJvbWlzZS50aGVuKGZsdXNoKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0aWNrKCkge1xuICAgIHNjaGVkdWxlX3VwZGF0ZSgpO1xuICAgIHJldHVybiByZXNvbHZlZF9wcm9taXNlO1xufVxuZnVuY3Rpb24gYWRkX3JlbmRlcl9jYWxsYmFjayhmbikge1xuICAgIHJlbmRlcl9jYWxsYmFja3MucHVzaChmbik7XG59XG5mdW5jdGlvbiBhZGRfZmx1c2hfY2FsbGJhY2soZm4pIHtcbiAgICBmbHVzaF9jYWxsYmFja3MucHVzaChmbik7XG59XG4vLyBmbHVzaCgpIGNhbGxzIGNhbGxiYWNrcyBpbiB0aGlzIG9yZGVyOlxuLy8gMS4gQWxsIGJlZm9yZVVwZGF0ZSBjYWxsYmFja3MsIGluIG9yZGVyOiBwYXJlbnRzIGJlZm9yZSBjaGlsZHJlblxuLy8gMi4gQWxsIGJpbmQ6dGhpcyBjYWxsYmFja3MsIGluIHJldmVyc2Ugb3JkZXI6IGNoaWxkcmVuIGJlZm9yZSBwYXJlbnRzLlxuLy8gMy4gQWxsIGFmdGVyVXBkYXRlIGNhbGxiYWNrcywgaW4gb3JkZXI6IHBhcmVudHMgYmVmb3JlIGNoaWxkcmVuLiBFWENFUFRcbi8vICAgIGZvciBhZnRlclVwZGF0ZXMgY2FsbGVkIGR1cmluZyB0aGUgaW5pdGlhbCBvbk1vdW50LCB3aGljaCBhcmUgY2FsbGVkIGluXG4vLyAgICByZXZlcnNlIG9yZGVyOiBjaGlsZHJlbiBiZWZvcmUgcGFyZW50cy5cbi8vIFNpbmNlIGNhbGxiYWNrcyBtaWdodCB1cGRhdGUgY29tcG9uZW50IHZhbHVlcywgd2hpY2ggY291bGQgdHJpZ2dlciBhbm90aGVyXG4vLyBjYWxsIHRvIGZsdXNoKCksIHRoZSBmb2xsb3dpbmcgc3RlcHMgZ3VhcmQgYWdhaW5zdCB0aGlzOlxuLy8gMS4gRHVyaW5nIGJlZm9yZVVwZGF0ZSwgYW55IHVwZGF0ZWQgY29tcG9uZW50cyB3aWxsIGJlIGFkZGVkIHRvIHRoZVxuLy8gICAgZGlydHlfY29tcG9uZW50cyBhcnJheSBhbmQgd2lsbCBjYXVzZSBhIHJlZW50cmFudCBjYWxsIHRvIGZsdXNoKCkuIEJlY2F1c2Vcbi8vICAgIHRoZSBmbHVzaCBpbmRleCBpcyBrZXB0IG91dHNpZGUgdGhlIGZ1bmN0aW9uLCB0aGUgcmVlbnRyYW50IGNhbGwgd2lsbCBwaWNrXG4vLyAgICB1cCB3aGVyZSB0aGUgZWFybGllciBjYWxsIGxlZnQgb2ZmIGFuZCBnbyB0aHJvdWdoIGFsbCBkaXJ0eSBjb21wb25lbnRzLiBUaGVcbi8vICAgIGN1cnJlbnRfY29tcG9uZW50IHZhbHVlIGlzIHNhdmVkIGFuZCByZXN0b3JlZCBzbyB0aGF0IHRoZSByZWVudHJhbnQgY2FsbCB3aWxsXG4vLyAgICBub3QgaW50ZXJmZXJlIHdpdGggdGhlIFwicGFyZW50XCIgZmx1c2goKSBjYWxsLlxuLy8gMi4gYmluZDp0aGlzIGNhbGxiYWNrcyBjYW5ub3QgdHJpZ2dlciBuZXcgZmx1c2goKSBjYWxscy5cbi8vIDMuIER1cmluZyBhZnRlclVwZGF0ZSwgYW55IHVwZGF0ZWQgY29tcG9uZW50cyB3aWxsIE5PVCBoYXZlIHRoZWlyIGFmdGVyVXBkYXRlXG4vLyAgICBjYWxsYmFjayBjYWxsZWQgYSBzZWNvbmQgdGltZTsgdGhlIHNlZW5fY2FsbGJhY2tzIHNldCwgb3V0c2lkZSB0aGUgZmx1c2goKVxuLy8gICAgZnVuY3Rpb24sIGd1YXJhbnRlZXMgdGhpcyBiZWhhdmlvci5cbmNvbnN0IHNlZW5fY2FsbGJhY2tzID0gbmV3IFNldCgpO1xubGV0IGZsdXNoaWR4ID0gMDsgLy8gRG8gKm5vdCogbW92ZSB0aGlzIGluc2lkZSB0aGUgZmx1c2goKSBmdW5jdGlvblxuZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgLy8gRG8gbm90IHJlZW50ZXIgZmx1c2ggd2hpbGUgZGlydHkgY29tcG9uZW50cyBhcmUgdXBkYXRlZCwgYXMgdGhpcyBjYW5cbiAgICAvLyByZXN1bHQgaW4gYW4gaW5maW5pdGUgbG9vcC4gSW5zdGVhZCwgbGV0IHRoZSBpbm5lciBmbHVzaCBoYW5kbGUgaXQuXG4gICAgLy8gUmVlbnRyYW5jeSBpcyBvayBhZnRlcndhcmRzIGZvciBiaW5kaW5ncyBldGMuXG4gICAgaWYgKGZsdXNoaWR4ICE9PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2F2ZWRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgZG8ge1xuICAgICAgICAvLyBmaXJzdCwgY2FsbCBiZWZvcmVVcGRhdGUgZnVuY3Rpb25zXG4gICAgICAgIC8vIGFuZCB1cGRhdGUgY29tcG9uZW50c1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKGZsdXNoaWR4IDwgZGlydHlfY29tcG9uZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBkaXJ0eV9jb21wb25lbnRzW2ZsdXNoaWR4XTtcbiAgICAgICAgICAgICAgICBmbHVzaGlkeCsrO1xuICAgICAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZShjb21wb25lbnQuJCQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyByZXNldCBkaXJ0eSBzdGF0ZSB0byBub3QgZW5kIHVwIGluIGEgZGVhZGxvY2tlZCBzdGF0ZSBhbmQgdGhlbiByZXRocm93XG4gICAgICAgICAgICBkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICBmbHVzaGlkeCA9IDA7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5sZW5ndGggPSAwO1xuICAgICAgICBmbHVzaGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChiaW5kaW5nX2NhbGxiYWNrcy5sZW5ndGgpXG4gICAgICAgICAgICBiaW5kaW5nX2NhbGxiYWNrcy5wb3AoKSgpO1xuICAgICAgICAvLyB0aGVuLCBvbmNlIGNvbXBvbmVudHMgYXJlIHVwZGF0ZWQsIGNhbGxcbiAgICAgICAgLy8gYWZ0ZXJVcGRhdGUgZnVuY3Rpb25zLiBUaGlzIG1heSBjYXVzZVxuICAgICAgICAvLyBzdWJzZXF1ZW50IHVwZGF0ZXMuLi5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IHJlbmRlcl9jYWxsYmFja3NbaV07XG4gICAgICAgICAgICBpZiAoIXNlZW5fY2FsbGJhY2tzLmhhcyhjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICAvLyAuLi5zbyBndWFyZCBhZ2FpbnN0IGluZmluaXRlIGxvb3BzXG4gICAgICAgICAgICAgICAgc2Vlbl9jYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICB9IHdoaWxlIChkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCk7XG4gICAgd2hpbGUgKGZsdXNoX2NhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgZmx1c2hfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgfVxuICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbiAgICBzZWVuX2NhbGxiYWNrcy5jbGVhcigpO1xuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChzYXZlZF9jb21wb25lbnQpO1xufVxuZnVuY3Rpb24gdXBkYXRlKCQkKSB7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICQkLnVwZGF0ZSgpO1xuICAgICAgICBydW5fYWxsKCQkLmJlZm9yZV91cGRhdGUpO1xuICAgICAgICBjb25zdCBkaXJ0eSA9ICQkLmRpcnR5O1xuICAgICAgICAkJC5kaXJ0eSA9IFstMV07XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LnAoJCQuY3R4LCBkaXJ0eSk7XG4gICAgICAgICQkLmFmdGVyX3VwZGF0ZS5mb3JFYWNoKGFkZF9yZW5kZXJfY2FsbGJhY2spO1xuICAgIH1cbn1cblxubGV0IHByb21pc2U7XG5mdW5jdGlvbiB3YWl0KCkge1xuICAgIGlmICghcHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gZGlzcGF0Y2gobm9kZSwgZGlyZWN0aW9uLCBraW5kKSB7XG4gICAgbm9kZS5kaXNwYXRjaEV2ZW50KGN1c3RvbV9ldmVudChgJHtkaXJlY3Rpb24gPyAnaW50cm8nIDogJ291dHJvJ30ke2tpbmR9YCkpO1xufVxuY29uc3Qgb3V0cm9pbmcgPSBuZXcgU2V0KCk7XG5sZXQgb3V0cm9zO1xuZnVuY3Rpb24gZ3JvdXBfb3V0cm9zKCkge1xuICAgIG91dHJvcyA9IHtcbiAgICAgICAgcjogMCxcbiAgICAgICAgYzogW10sXG4gICAgICAgIHA6IG91dHJvcyAvLyBwYXJlbnQgZ3JvdXBcbiAgICB9O1xufVxuZnVuY3Rpb24gY2hlY2tfb3V0cm9zKCkge1xuICAgIGlmICghb3V0cm9zLnIpIHtcbiAgICAgICAgcnVuX2FsbChvdXRyb3MuYyk7XG4gICAgfVxuICAgIG91dHJvcyA9IG91dHJvcy5wO1xufVxuZnVuY3Rpb24gdHJhbnNpdGlvbl9pbihibG9jaywgbG9jYWwpIHtcbiAgICBpZiAoYmxvY2sgJiYgYmxvY2suaSkge1xuICAgICAgICBvdXRyb2luZy5kZWxldGUoYmxvY2spO1xuICAgICAgICBibG9jay5pKGxvY2FsKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uX291dChibG9jaywgbG9jYWwsIGRldGFjaCwgY2FsbGJhY2spIHtcbiAgICBpZiAoYmxvY2sgJiYgYmxvY2subykge1xuICAgICAgICBpZiAob3V0cm9pbmcuaGFzKGJsb2NrKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgb3V0cm9pbmcuYWRkKGJsb2NrKTtcbiAgICAgICAgb3V0cm9zLmMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICBvdXRyb2luZy5kZWxldGUoYmxvY2spO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRldGFjaClcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suZCgxKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYmxvY2subyhsb2NhbCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxufVxuY29uc3QgbnVsbF90cmFuc2l0aW9uID0geyBkdXJhdGlvbjogMCB9O1xuZnVuY3Rpb24gY3JlYXRlX2luX3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcykge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7IGRpcmVjdGlvbjogJ2luJyB9O1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMsIG9wdGlvbnMpO1xuICAgIGxldCBydW5uaW5nID0gZmFsc2U7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lO1xuICAgIGxldCB0YXNrO1xuICAgIGxldCB1aWQgPSAwO1xuICAgIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDAsIDEsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MsIHVpZCsrKTtcbiAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBpZiAodGFzaylcbiAgICAgICAgICAgIHRhc2suYWJvcnQoKTtcbiAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgdHJ1ZSwgJ3N0YXJ0JykpO1xuICAgICAgICB0YXNrID0gbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHRydWUsICdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGVhc2luZygobm93IC0gc3RhcnRfdGltZSkgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5uaW5nO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydCgpIHtcbiAgICAgICAgICAgIGlmIChzdGFydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSk7XG4gICAgICAgICAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB3YWl0KCkudGhlbihnbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbnZhbGlkYXRlKCkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX291dF90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMpIHtcbiAgICBjb25zdCBvcHRpb25zID0geyBkaXJlY3Rpb246ICdvdXQnIH07XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcywgb3B0aW9ucyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBjb25zdCBncm91cCA9IG91dHJvcztcbiAgICBncm91cC5yICs9IDE7XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDEsIDAsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgZmFsc2UsICdzdGFydCcpKTtcbiAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghLS1ncm91cC5yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgcmVzdWx0IGluIGBlbmQoKWAgYmVpbmcgY2FsbGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gd2UgZG9uJ3QgbmVlZCB0byBjbGVhbiB1cCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKGdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEgLSB0LCB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgICAgIGdvKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ28oKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5kKHJlc2V0KSB7XG4gICAgICAgICAgICBpZiAocmVzZXQgJiYgY29uZmlnLnRpY2spIHtcbiAgICAgICAgICAgICAgICBjb25maWcudGljaygxLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9iaWRpcmVjdGlvbmFsX3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcywgaW50cm8pIHtcbiAgICBjb25zdCBvcHRpb25zID0geyBkaXJlY3Rpb246ICdib3RoJyB9O1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMsIG9wdGlvbnMpO1xuICAgIGxldCB0ID0gaW50cm8gPyAwIDogMTtcbiAgICBsZXQgcnVubmluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWUgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGNsZWFyX2FuaW1hdGlvbigpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KHByb2dyYW0sIGR1cmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGQgPSAocHJvZ3JhbS5iIC0gdCk7XG4gICAgICAgIGR1cmF0aW9uICo9IE1hdGguYWJzKGQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYTogdCxcbiAgICAgICAgICAgIGI6IHByb2dyYW0uYixcbiAgICAgICAgICAgIGQsXG4gICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgIHN0YXJ0OiBwcm9ncmFtLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBwcm9ncmFtLnN0YXJ0ICsgZHVyYXRpb24sXG4gICAgICAgICAgICBncm91cDogcHJvZ3JhbS5ncm91cFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnbyhiKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSB7XG4gICAgICAgICAgICBzdGFydDogbm93KCkgKyBkZWxheSxcbiAgICAgICAgICAgIGJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFiKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgcHJvZ3JhbS5ncm91cCA9IG91dHJvcztcbiAgICAgICAgICAgIG91dHJvcy5yICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGFuIGludHJvLCBhbmQgdGhlcmUncyBhIGRlbGF5LCB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAvLyBhbiBpbml0aWFsIHRpY2sgYW5kL29yIGFwcGx5IENTUyBhbmltYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIpXG4gICAgICAgICAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocHJvZ3JhbSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCBiLCAnc3RhcnQnKSk7XG4gICAgICAgICAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdfcHJvZ3JhbSAmJiBub3cgPiBwZW5kaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gaW5pdChwZW5kaW5nX3Byb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgcnVubmluZ19wcm9ncmFtLmIsICdzdGFydCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgdCwgcnVubmluZ19wcm9ncmFtLmIsIHJ1bm5pbmdfcHJvZ3JhbS5kdXJhdGlvbiwgMCwgZWFzaW5nLCBjb25maWcuY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3cgPj0gcnVubmluZ19wcm9ncmFtLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0ID0gcnVubmluZ19wcm9ncmFtLmIsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBlbmRpbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtLmIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50cm8g4oCUIHdlIGNhbiB0aWR5IHVwIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3V0cm8g4oCUIG5lZWRzIHRvIGJlIGNvb3JkaW5hdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghLS1ydW5uaW5nX3Byb2dyYW0uZ3JvdXAucilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hbGwocnVubmluZ19wcm9ncmFtLmdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHJ1bm5pbmdfcHJvZ3JhbS5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBydW5uaW5nX3Byb2dyYW0uYSArIHJ1bm5pbmdfcHJvZ3JhbS5kICogZWFzaW5nKHAgLyBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcnVuKGIpIHtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgZ28oYik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBwZW5kaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlX3Byb21pc2UocHJvbWlzZSwgaW5mbykge1xuICAgIGNvbnN0IHRva2VuID0gaW5mby50b2tlbiA9IHt9O1xuICAgIGZ1bmN0aW9uIHVwZGF0ZSh0eXBlLCBpbmRleCwga2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAoaW5mby50b2tlbiAhPT0gdG9rZW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGluZm8ucmVzb2x2ZWQgPSB2YWx1ZTtcbiAgICAgICAgbGV0IGNoaWxkX2N0eCA9IGluZm8uY3R4O1xuICAgICAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNoaWxkX2N0eCA9IGNoaWxkX2N0eC5zbGljZSgpO1xuICAgICAgICAgICAgY2hpbGRfY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBibG9jayA9IHR5cGUgJiYgKGluZm8uY3VycmVudCA9IHR5cGUpKGNoaWxkX2N0eCk7XG4gICAgICAgIGxldCBuZWVkc19mbHVzaCA9IGZhbHNlO1xuICAgICAgICBpZiAoaW5mby5ibG9jaykge1xuICAgICAgICAgICAgaWYgKGluZm8uYmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9ja3MuZm9yRWFjaCgoYmxvY2ssIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGluZGV4ICYmIGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cF9vdXRyb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25fb3V0KGJsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uYmxvY2tzW2ldID09PSBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrc1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja19vdXRyb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9jay5kKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxvY2suYygpO1xuICAgICAgICAgICAgdHJhbnNpdGlvbl9pbihibG9jaywgMSk7XG4gICAgICAgICAgICBibG9jay5tKGluZm8ubW91bnQoKSwgaW5mby5hbmNob3IpO1xuICAgICAgICAgICAgbmVlZHNfZmx1c2ggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGluZm8uYmxvY2sgPSBibG9jaztcbiAgICAgICAgaWYgKGluZm8uYmxvY2tzKVxuICAgICAgICAgICAgaW5mby5ibG9ja3NbaW5kZXhdID0gYmxvY2s7XG4gICAgICAgIGlmIChuZWVkc19mbHVzaCkge1xuICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNfcHJvbWlzZShwcm9taXNlKSkge1xuICAgICAgICBjb25zdCBjdXJyZW50X2NvbXBvbmVudCA9IGdldF9jdXJyZW50X2NvbXBvbmVudCgpO1xuICAgICAgICBwcm9taXNlLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGN1cnJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnRoZW4sIDEsIGluZm8udmFsdWUsIHZhbHVlKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGN1cnJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLmNhdGNoLCAyLCBpbmZvLmVycm9yLCBlcnJvcik7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgICAgICBpZiAoIWluZm8uaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGlmIHdlIHByZXZpb3VzbHkgaGFkIGEgdGhlbi9jYXRjaCBibG9jaywgZGVzdHJveSBpdFxuICAgICAgICBpZiAoaW5mby5jdXJyZW50ICE9PSBpbmZvLnBlbmRpbmcpIHtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnBlbmRpbmcsIDApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8udGhlbikge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLnJlc29sdmVkID0gcHJvbWlzZTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVfYXdhaXRfYmxvY2tfYnJhbmNoKGluZm8sIGN0eCwgZGlydHkpIHtcbiAgICBjb25zdCBjaGlsZF9jdHggPSBjdHguc2xpY2UoKTtcbiAgICBjb25zdCB7IHJlc29sdmVkIH0gPSBpbmZvO1xuICAgIGlmIChpbmZvLmN1cnJlbnQgPT09IGluZm8udGhlbikge1xuICAgICAgICBjaGlsZF9jdHhbaW5mby52YWx1ZV0gPSByZXNvbHZlZDtcbiAgICB9XG4gICAgaWYgKGluZm8uY3VycmVudCA9PT0gaW5mby5jYXRjaCkge1xuICAgICAgICBjaGlsZF9jdHhbaW5mby5lcnJvcl0gPSByZXNvbHZlZDtcbiAgICB9XG4gICAgaW5mby5ibG9jay5wKGNoaWxkX2N0eCwgZGlydHkpO1xufVxuXG5jb25zdCBnbG9iYWxzID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgPyB3aW5kb3dcbiAgICA6IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGdsb2JhbFRoaXNcbiAgICAgICAgOiBnbG9iYWwpO1xuXG5mdW5jdGlvbiBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5kKDEpO1xuICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbn1cbmZ1bmN0aW9uIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICB0cmFuc2l0aW9uX291dChibG9jaywgMSwgMSwgKCkgPT4ge1xuICAgICAgICBsb29rdXAuZGVsZXRlKGJsb2NrLmtleSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmYoKTtcbiAgICBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gdXBkYXRlX2tleWVkX2VhY2gob2xkX2Jsb2NrcywgZGlydHksIGdldF9rZXksIGR5bmFtaWMsIGN0eCwgbGlzdCwgbG9va3VwLCBub2RlLCBkZXN0cm95LCBjcmVhdGVfZWFjaF9ibG9jaywgbmV4dCwgZ2V0X2NvbnRleHQpIHtcbiAgICBsZXQgbyA9IG9sZF9ibG9ja3MubGVuZ3RoO1xuICAgIGxldCBuID0gbGlzdC5sZW5ndGg7XG4gICAgbGV0IGkgPSBvO1xuICAgIGNvbnN0IG9sZF9pbmRleGVzID0ge307XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgb2xkX2luZGV4ZXNbb2xkX2Jsb2Nrc1tpXS5rZXldID0gaTtcbiAgICBjb25zdCBuZXdfYmxvY2tzID0gW107XG4gICAgY29uc3QgbmV3X2xvb2t1cCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBkZWx0YXMgPSBuZXcgTWFwKCk7XG4gICAgaSA9IG47XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBjaGlsZF9jdHggPSBnZXRfY29udGV4dChjdHgsIGxpc3QsIGkpO1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGNoaWxkX2N0eCk7XG4gICAgICAgIGxldCBibG9jayA9IGxvb2t1cC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFibG9jaykge1xuICAgICAgICAgICAgYmxvY2sgPSBjcmVhdGVfZWFjaF9ibG9jayhrZXksIGNoaWxkX2N0eCk7XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZHluYW1pYykge1xuICAgICAgICAgICAgYmxvY2sucChjaGlsZF9jdHgsIGRpcnR5KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdfbG9va3VwLnNldChrZXksIG5ld19ibG9ja3NbaV0gPSBibG9jayk7XG4gICAgICAgIGlmIChrZXkgaW4gb2xkX2luZGV4ZXMpXG4gICAgICAgICAgICBkZWx0YXMuc2V0KGtleSwgTWF0aC5hYnMoaSAtIG9sZF9pbmRleGVzW2tleV0pKTtcbiAgICB9XG4gICAgY29uc3Qgd2lsbF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IGRpZF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGZ1bmN0aW9uIGluc2VydChibG9jaykge1xuICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgYmxvY2subShub2RlLCBuZXh0KTtcbiAgICAgICAgbG9va3VwLnNldChibG9jay5rZXksIGJsb2NrKTtcbiAgICAgICAgbmV4dCA9IGJsb2NrLmZpcnN0O1xuICAgICAgICBuLS07XG4gICAgfVxuICAgIHdoaWxlIChvICYmIG4pIHtcbiAgICAgICAgY29uc3QgbmV3X2Jsb2NrID0gbmV3X2Jsb2Nrc1tuIC0gMV07XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3NbbyAtIDFdO1xuICAgICAgICBjb25zdCBuZXdfa2V5ID0gbmV3X2Jsb2NrLmtleTtcbiAgICAgICAgY29uc3Qgb2xkX2tleSA9IG9sZF9ibG9jay5rZXk7XG4gICAgICAgIGlmIChuZXdfYmxvY2sgPT09IG9sZF9ibG9jaykge1xuICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgbmV4dCA9IG5ld19ibG9jay5maXJzdDtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgICAgIG4tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2tleSkpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYmxvY2tcbiAgICAgICAgICAgIGRlc3Ryb3kob2xkX2Jsb2NrLCBsb29rdXApO1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFsb29rdXAuaGFzKG5ld19rZXkpIHx8IHdpbGxfbW92ZS5oYXMobmV3X2tleSkpIHtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpZF9tb3ZlLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlbHRhcy5nZXQobmV3X2tleSkgPiBkZWx0YXMuZ2V0KG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBkaWRfbW92ZS5hZGQobmV3X2tleSk7XG4gICAgICAgICAgICBpbnNlcnQobmV3X2Jsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdpbGxfbW92ZS5hZGQob2xkX2tleSk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2hpbGUgKG8tLSkge1xuICAgICAgICBjb25zdCBvbGRfYmxvY2sgPSBvbGRfYmxvY2tzW29dO1xuICAgICAgICBpZiAoIW5ld19sb29rdXAuaGFzKG9sZF9ibG9jay5rZXkpKVxuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgfVxuICAgIHdoaWxlIChuKVxuICAgICAgICBpbnNlcnQobmV3X2Jsb2Nrc1tuIC0gMV0pO1xuICAgIHJldHVybiBuZXdfYmxvY2tzO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfZWFjaF9rZXlzKGN0eCwgbGlzdCwgZ2V0X2NvbnRleHQsIGdldF9rZXkpIHtcbiAgICBjb25zdCBrZXlzID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSkpO1xuICAgICAgICBpZiAoa2V5cy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaGF2ZSBkdXBsaWNhdGUga2V5cyBpbiBhIGtleWVkIGVhY2gnKTtcbiAgICAgICAgfVxuICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0X3NwcmVhZF91cGRhdGUobGV2ZWxzLCB1cGRhdGVzKSB7XG4gICAgY29uc3QgdXBkYXRlID0ge307XG4gICAgY29uc3QgdG9fbnVsbF9vdXQgPSB7fTtcbiAgICBjb25zdCBhY2NvdW50ZWRfZm9yID0geyAkJHNjb3BlOiAxIH07XG4gICAgbGV0IGkgPSBsZXZlbHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY29uc3QgbyA9IGxldmVsc1tpXTtcbiAgICAgICAgY29uc3QgbiA9IHVwZGF0ZXNbaV07XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG4pKVxuICAgICAgICAgICAgICAgICAgICB0b19udWxsX291dFtrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFjY291bnRlZF9mb3Jba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVba2V5XSA9IG5ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXZlbHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbykge1xuICAgICAgICAgICAgICAgIGFjY291bnRlZF9mb3Jba2V5XSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdG9fbnVsbF9vdXQpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIHVwZGF0ZSkpXG4gICAgICAgICAgICB1cGRhdGVba2V5XSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZTtcbn1cbmZ1bmN0aW9uIGdldF9zcHJlYWRfb2JqZWN0KHNwcmVhZF9wcm9wcykge1xuICAgIHJldHVybiB0eXBlb2Ygc3ByZWFkX3Byb3BzID09PSAnb2JqZWN0JyAmJiBzcHJlYWRfcHJvcHMgIT09IG51bGwgPyBzcHJlYWRfcHJvcHMgOiB7fTtcbn1cblxuLy8gc291cmNlOiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmRpY2VzLmh0bWxcbmNvbnN0IGJvb2xlYW5fYXR0cmlidXRlcyA9IG5ldyBTZXQoW1xuICAgICdhbGxvd2Z1bGxzY3JlZW4nLFxuICAgICdhbGxvd3BheW1lbnRyZXF1ZXN0JyxcbiAgICAnYXN5bmMnLFxuICAgICdhdXRvZm9jdXMnLFxuICAgICdhdXRvcGxheScsXG4gICAgJ2NoZWNrZWQnLFxuICAgICdjb250cm9scycsXG4gICAgJ2RlZmF1bHQnLFxuICAgICdkZWZlcicsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnZm9ybW5vdmFsaWRhdGUnLFxuICAgICdoaWRkZW4nLFxuICAgICdpbmVydCcsXG4gICAgJ2lzbWFwJyxcbiAgICAnaXRlbXNjb3BlJyxcbiAgICAnbG9vcCcsXG4gICAgJ211bHRpcGxlJyxcbiAgICAnbXV0ZWQnLFxuICAgICdub21vZHVsZScsXG4gICAgJ25vdmFsaWRhdGUnLFxuICAgICdvcGVuJyxcbiAgICAncGxheXNpbmxpbmUnLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlcXVpcmVkJyxcbiAgICAncmV2ZXJzZWQnLFxuICAgICdzZWxlY3RlZCdcbl0pO1xuXG4vKiogcmVnZXggb2YgYWxsIGh0bWwgdm9pZCBlbGVtZW50IG5hbWVzICovXG5jb25zdCB2b2lkX2VsZW1lbnRfbmFtZXMgPSAvXig/OmFyZWF8YmFzZXxicnxjb2x8Y29tbWFuZHxlbWJlZHxocnxpbWd8aW5wdXR8a2V5Z2VufGxpbmt8bWV0YXxwYXJhbXxzb3VyY2V8dHJhY2t8d2JyKSQvO1xuZnVuY3Rpb24gaXNfdm9pZChuYW1lKSB7XG4gICAgcmV0dXJuIHZvaWRfZWxlbWVudF9uYW1lcy50ZXN0KG5hbWUpIHx8IG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJyFkb2N0eXBlJztcbn1cblxuY29uc3QgaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIgPSAvW1xccydcIj4vPVxcdXtGREQwfS1cXHV7RkRFRn1cXHV7RkZGRX1cXHV7RkZGRn1cXHV7MUZGRkV9XFx1ezFGRkZGfVxcdXsyRkZGRX1cXHV7MkZGRkZ9XFx1ezNGRkZFfVxcdXszRkZGRn1cXHV7NEZGRkV9XFx1ezRGRkZGfVxcdXs1RkZGRX1cXHV7NUZGRkZ9XFx1ezZGRkZFfVxcdXs2RkZGRn1cXHV7N0ZGRkV9XFx1ezdGRkZGfVxcdXs4RkZGRX1cXHV7OEZGRkZ9XFx1ezlGRkZFfVxcdXs5RkZGRn1cXHV7QUZGRkV9XFx1e0FGRkZGfVxcdXtCRkZGRX1cXHV7QkZGRkZ9XFx1e0NGRkZFfVxcdXtDRkZGRn1cXHV7REZGRkV9XFx1e0RGRkZGfVxcdXtFRkZGRX1cXHV7RUZGRkZ9XFx1e0ZGRkZFfVxcdXtGRkZGRn1cXHV7MTBGRkZFfVxcdXsxMEZGRkZ9XS91O1xuLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjYXR0cmlidXRlcy0yXG4vLyBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jbm9uY2hhcmFjdGVyXG5mdW5jdGlvbiBzcHJlYWQoYXJncywgYXR0cnNfdG9fYWRkKSB7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IE9iamVjdC5hc3NpZ24oe30sIC4uLmFyZ3MpO1xuICAgIGlmIChhdHRyc190b19hZGQpIHtcbiAgICAgICAgY29uc3QgY2xhc3Nlc190b19hZGQgPSBhdHRyc190b19hZGQuY2xhc3NlcztcbiAgICAgICAgY29uc3Qgc3R5bGVzX3RvX2FkZCA9IGF0dHJzX3RvX2FkZC5zdHlsZXM7XG4gICAgICAgIGlmIChjbGFzc2VzX3RvX2FkZCkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuY2xhc3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgPSBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgKz0gJyAnICsgY2xhc3Nlc190b19hZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0eWxlc190b19hZGQpIHtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzLnN0eWxlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLnN0eWxlID0gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZXNfdG9fYWRkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuc3R5bGUgPSBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKG1lcmdlX3Nzcl9zdHlsZXMoYXR0cmlidXRlcy5zdHlsZSwgc3R5bGVzX3RvX2FkZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBzdHIgPSAnJztcbiAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICBpZiAoaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIudGVzdChuYW1lKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhdHRyaWJ1dGVzW25hbWVdO1xuICAgICAgICBpZiAodmFsdWUgPT09IHRydWUpXG4gICAgICAgICAgICBzdHIgKz0gJyAnICsgbmFtZTtcbiAgICAgICAgZWxzZSBpZiAoYm9vbGVhbl9hdHRyaWJ1dGVzLmhhcyhuYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICAgICAgc3RyICs9ICcgJyArIG5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc3RyICs9IGAgJHtuYW1lfT1cIiR7dmFsdWV9XCJgO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbn1cbmZ1bmN0aW9uIG1lcmdlX3Nzcl9zdHlsZXMoc3R5bGVfYXR0cmlidXRlLCBzdHlsZV9kaXJlY3RpdmUpIHtcbiAgICBjb25zdCBzdHlsZV9vYmplY3QgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGluZGl2aWR1YWxfc3R5bGUgb2Ygc3R5bGVfYXR0cmlidXRlLnNwbGl0KCc7JykpIHtcbiAgICAgICAgY29uc3QgY29sb25faW5kZXggPSBpbmRpdmlkdWFsX3N0eWxlLmluZGV4T2YoJzonKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGluZGl2aWR1YWxfc3R5bGUuc2xpY2UoMCwgY29sb25faW5kZXgpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpbmRpdmlkdWFsX3N0eWxlLnNsaWNlKGNvbG9uX2luZGV4ICsgMSkudHJpbSgpO1xuICAgICAgICBpZiAoIW5hbWUpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgc3R5bGVfb2JqZWN0W25hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIGZvciAoY29uc3QgbmFtZSBpbiBzdHlsZV9kaXJlY3RpdmUpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBzdHlsZV9kaXJlY3RpdmVbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgc3R5bGVfb2JqZWN0W25hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgc3R5bGVfb2JqZWN0W25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHlsZV9vYmplY3Q7XG59XG5jb25zdCBBVFRSX1JFR0VYID0gL1smXCJdL2c7XG5jb25zdCBDT05URU5UX1JFR0VYID0gL1smPF0vZztcbi8qKlxuICogTm90ZTogdGhpcyBtZXRob2QgaXMgcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlIGFuZCBoYXMgYmVlbiBvcHRpbWl6ZWRcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zdmVsdGVqcy9zdmVsdGUvcHVsbC81NzAxXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZSh2YWx1ZSwgaXNfYXR0ciA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc3RyID0gU3RyaW5nKHZhbHVlKTtcbiAgICBjb25zdCBwYXR0ZXJuID0gaXNfYXR0ciA/IEFUVFJfUkVHRVggOiBDT05URU5UX1JFR0VYO1xuICAgIHBhdHRlcm4ubGFzdEluZGV4ID0gMDtcbiAgICBsZXQgZXNjYXBlZCA9ICcnO1xuICAgIGxldCBsYXN0ID0gMDtcbiAgICB3aGlsZSAocGF0dGVybi50ZXN0KHN0cikpIHtcbiAgICAgICAgY29uc3QgaSA9IHBhdHRlcm4ubGFzdEluZGV4IC0gMTtcbiAgICAgICAgY29uc3QgY2ggPSBzdHJbaV07XG4gICAgICAgIGVzY2FwZWQgKz0gc3RyLnN1YnN0cmluZyhsYXN0LCBpKSArIChjaCA9PT0gJyYnID8gJyZhbXA7JyA6IChjaCA9PT0gJ1wiJyA/ICcmcXVvdDsnIDogJyZsdDsnKSk7XG4gICAgICAgIGxhc3QgPSBpICsgMTtcbiAgICB9XG4gICAgcmV0dXJuIGVzY2FwZWQgKyBzdHIuc3Vic3RyaW5nKGxhc3QpO1xufVxuZnVuY3Rpb24gZXNjYXBlX2F0dHJpYnV0ZV92YWx1ZSh2YWx1ZSkge1xuICAgIC8vIGtlZXAgYm9vbGVhbnMsIG51bGwsIGFuZCB1bmRlZmluZWQgZm9yIHRoZSBzYWtlIG9mIGBzcHJlYWRgXG4gICAgY29uc3Qgc2hvdWxkX2VzY2FwZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpO1xuICAgIHJldHVybiBzaG91bGRfZXNjYXBlID8gZXNjYXBlKHZhbHVlLCB0cnVlKSA6IHZhbHVlO1xufVxuZnVuY3Rpb24gZXNjYXBlX29iamVjdChvYmopIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlKG9ialtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGVhY2goaXRlbXMsIGZuKSB7XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgc3RyICs9IGZuKGl0ZW1zW2ldLCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cbmNvbnN0IG1pc3NpbmdfY29tcG9uZW50ID0ge1xuICAgICQkcmVuZGVyOiAoKSA9PiAnJ1xufTtcbmZ1bmN0aW9uIHZhbGlkYXRlX2NvbXBvbmVudChjb21wb25lbnQsIG5hbWUpIHtcbiAgICBpZiAoIWNvbXBvbmVudCB8fCAhY29tcG9uZW50LiQkcmVuZGVyKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnc3ZlbHRlOmNvbXBvbmVudCcpXG4gICAgICAgICAgICBuYW1lICs9ICcgdGhpcz17Li4ufSc7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgPCR7bmFtZX0+IGlzIG5vdCBhIHZhbGlkIFNTUiBjb21wb25lbnQuIFlvdSBtYXkgbmVlZCB0byByZXZpZXcgeW91ciBidWlsZCBjb25maWcgdG8gZW5zdXJlIHRoYXQgZGVwZW5kZW5jaWVzIGFyZSBjb21waWxlZCwgcmF0aGVyIHRoYW4gaW1wb3J0ZWQgYXMgcHJlLWNvbXBpbGVkIG1vZHVsZXMuIE90aGVyd2lzZSB5b3UgbWF5IG5lZWQgdG8gZml4IGEgPCR7bmFtZX0+LmApO1xuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZGVidWcoZmlsZSwgbGluZSwgY29sdW1uLCB2YWx1ZXMpIHtcbiAgICBjb25zb2xlLmxvZyhge0BkZWJ1Z30gJHtmaWxlID8gZmlsZSArICcgJyA6ICcnfSgke2xpbmV9OiR7Y29sdW1ufSlgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2codmFsdWVzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgcmV0dXJuICcnO1xufVxubGV0IG9uX2Rlc3Ryb3k7XG5mdW5jdGlvbiBjcmVhdGVfc3NyX2NvbXBvbmVudChmbikge1xuICAgIGZ1bmN0aW9uICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cywgY29udGV4dCkge1xuICAgICAgICBjb25zdCBwYXJlbnRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgICAgIGNvbnN0ICQkID0ge1xuICAgICAgICAgICAgb25fZGVzdHJveSxcbiAgICAgICAgICAgIGNvbnRleHQ6IG5ldyBNYXAoY29udGV4dCB8fCAocGFyZW50X2NvbXBvbmVudCA/IHBhcmVudF9jb21wb25lbnQuJCQuY29udGV4dCA6IFtdKSksXG4gICAgICAgICAgICAvLyB0aGVzZSB3aWxsIGJlIGltbWVkaWF0ZWx5IGRpc2NhcmRlZFxuICAgICAgICAgICAgb25fbW91bnQ6IFtdLFxuICAgICAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBhZnRlcl91cGRhdGU6IFtdLFxuICAgICAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKVxuICAgICAgICB9O1xuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoeyAkJCB9KTtcbiAgICAgICAgY29uc3QgaHRtbCA9IGZuKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cyk7XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcjogKHByb3BzID0ge30sIHsgJCRzbG90cyA9IHt9LCBjb250ZXh0ID0gbmV3IE1hcCgpIH0gPSB7fSkgPT4ge1xuICAgICAgICAgICAgb25fZGVzdHJveSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0aXRsZTogJycsIGhlYWQ6ICcnLCBjc3M6IG5ldyBTZXQoKSB9O1xuICAgICAgICAgICAgY29uc3QgaHRtbCA9ICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIHt9LCAkJHNsb3RzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIHJ1bl9hbGwob25fZGVzdHJveSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGh0bWwsXG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IEFycmF5LmZyb20ocmVzdWx0LmNzcykubWFwKGNzcyA9PiBjc3MuY29kZSkuam9pbignXFxuJyksXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbnVsbCAvLyBUT0RPXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoZWFkOiByZXN1bHQudGl0bGUgKyByZXN1bHQuaGVhZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgJCRyZW5kZXJcbiAgICB9O1xufVxuZnVuY3Rpb24gYWRkX2F0dHJpYnV0ZShuYW1lLCB2YWx1ZSwgYm9vbGVhbikge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IChib29sZWFuICYmICF2YWx1ZSkpXG4gICAgICAgIHJldHVybiAnJztcbiAgICBjb25zdCBhc3NpZ25tZW50ID0gKGJvb2xlYW4gJiYgdmFsdWUgPT09IHRydWUpID8gJycgOiBgPVwiJHtlc2NhcGUodmFsdWUsIHRydWUpfVwiYDtcbiAgICByZXR1cm4gYCAke25hbWV9JHthc3NpZ25tZW50fWA7XG59XG5mdW5jdGlvbiBhZGRfY2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgcmV0dXJuIGNsYXNzZXMgPyBgIGNsYXNzPVwiJHtjbGFzc2VzfVwiYCA6ICcnO1xufVxuZnVuY3Rpb24gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc3R5bGVfb2JqZWN0KVxuICAgICAgICAuZmlsdGVyKGtleSA9PiBzdHlsZV9vYmplY3Rba2V5XSlcbiAgICAgICAgLm1hcChrZXkgPT4gYCR7a2V5fTogJHtlc2NhcGVfYXR0cmlidXRlX3ZhbHVlKHN0eWxlX29iamVjdFtrZXldKX07YClcbiAgICAgICAgLmpvaW4oJyAnKTtcbn1cbmZ1bmN0aW9uIGFkZF9zdHlsZXMoc3R5bGVfb2JqZWN0KSB7XG4gICAgY29uc3Qgc3R5bGVzID0gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpO1xuICAgIHJldHVybiBzdHlsZXMgPyBgIHN0eWxlPVwiJHtzdHlsZXN9XCJgIDogJyc7XG59XG5cbmZ1bmN0aW9uIGJpbmQoY29tcG9uZW50LCBuYW1lLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGluZGV4ID0gY29tcG9uZW50LiQkLnByb3BzW25hbWVdO1xuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbXBvbmVudC4kJC5ib3VuZFtpbmRleF0gPSBjYWxsYmFjaztcbiAgICAgICAgY2FsbGJhY2soY29tcG9uZW50LiQkLmN0eFtpbmRleF0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZV9jb21wb25lbnQoYmxvY2spIHtcbiAgICBibG9jayAmJiBibG9jay5jKCk7XG59XG5mdW5jdGlvbiBjbGFpbV9jb21wb25lbnQoYmxvY2ssIHBhcmVudF9ub2Rlcykge1xuICAgIGJsb2NrICYmIGJsb2NrLmwocGFyZW50X25vZGVzKTtcbn1cbmZ1bmN0aW9uIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIHRhcmdldCwgYW5jaG9yLCBjdXN0b21FbGVtZW50KSB7XG4gICAgY29uc3QgeyBmcmFnbWVudCwgYWZ0ZXJfdXBkYXRlIH0gPSBjb21wb25lbnQuJCQ7XG4gICAgZnJhZ21lbnQgJiYgZnJhZ21lbnQubSh0YXJnZXQsIGFuY2hvcik7XG4gICAgaWYgKCFjdXN0b21FbGVtZW50KSB7XG4gICAgICAgIC8vIG9uTW91bnQgaGFwcGVucyBiZWZvcmUgdGhlIGluaXRpYWwgYWZ0ZXJVcGRhdGVcbiAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdfb25fZGVzdHJveSA9IGNvbXBvbmVudC4kJC5vbl9tb3VudC5tYXAocnVuKS5maWx0ZXIoaXNfZnVuY3Rpb24pO1xuICAgICAgICAgICAgLy8gaWYgdGhlIGNvbXBvbmVudCB3YXMgZGVzdHJveWVkIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAvLyBpdCB3aWxsIHVwZGF0ZSB0aGUgYCQkLm9uX2Rlc3Ryb3lgIHJlZmVyZW5jZSB0byBgbnVsbGAuXG4gICAgICAgICAgICAvLyB0aGUgZGVzdHJ1Y3R1cmVkIG9uX2Rlc3Ryb3kgbWF5IHN0aWxsIHJlZmVyZW5jZSB0byB0aGUgb2xkIGFycmF5XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50LiQkLm9uX2Rlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuJCQub25fZGVzdHJveS5wdXNoKC4uLm5ld19vbl9kZXN0cm95KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEVkZ2UgY2FzZSAtIGNvbXBvbmVudCB3YXMgZGVzdHJveWVkIGltbWVkaWF0ZWx5LFxuICAgICAgICAgICAgICAgIC8vIG1vc3QgbGlrZWx5IGFzIGEgcmVzdWx0IG9mIGEgYmluZGluZyBpbml0aWFsaXNpbmdcbiAgICAgICAgICAgICAgICBydW5fYWxsKG5ld19vbl9kZXN0cm95KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvbmVudC4kJC5vbl9tb3VudCA9IFtdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWZ0ZXJfdXBkYXRlLmZvckVhY2goYWRkX3JlbmRlcl9jYWxsYmFjayk7XG59XG5mdW5jdGlvbiBkZXN0cm95X2NvbXBvbmVudChjb21wb25lbnQsIGRldGFjaGluZykge1xuICAgIGNvbnN0ICQkID0gY29tcG9uZW50LiQkO1xuICAgIGlmICgkJC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgICAgICBydW5fYWxsKCQkLm9uX2Rlc3Ryb3kpO1xuICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5kKGRldGFjaGluZyk7XG4gICAgICAgIC8vIFRPRE8gbnVsbCBvdXQgb3RoZXIgcmVmcywgaW5jbHVkaW5nIGNvbXBvbmVudC4kJCAoYnV0IG5lZWQgdG9cbiAgICAgICAgLy8gcHJlc2VydmUgZmluYWwgc3RhdGU/KVxuICAgICAgICAkJC5vbl9kZXN0cm95ID0gJCQuZnJhZ21lbnQgPSBudWxsO1xuICAgICAgICAkJC5jdHggPSBbXTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYWtlX2RpcnR5KGNvbXBvbmVudCwgaSkge1xuICAgIGlmIChjb21wb25lbnQuJCQuZGlydHlbMF0gPT09IC0xKSB7XG4gICAgICAgIGRpcnR5X2NvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xuICAgICAgICBzY2hlZHVsZV91cGRhdGUoKTtcbiAgICAgICAgY29tcG9uZW50LiQkLmRpcnR5LmZpbGwoMCk7XG4gICAgfVxuICAgIGNvbXBvbmVudC4kJC5kaXJ0eVsoaSAvIDMxKSB8IDBdIHw9ICgxIDw8IChpICUgMzEpKTtcbn1cbmZ1bmN0aW9uIGluaXQoY29tcG9uZW50LCBvcHRpb25zLCBpbnN0YW5jZSwgY3JlYXRlX2ZyYWdtZW50LCBub3RfZXF1YWwsIHByb3BzLCBhcHBlbmRfc3R5bGVzLCBkaXJ0eSA9IFstMV0pIHtcbiAgICBjb25zdCBwYXJlbnRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQgPSB7XG4gICAgICAgIGZyYWdtZW50OiBudWxsLFxuICAgICAgICBjdHg6IFtdLFxuICAgICAgICAvLyBzdGF0ZVxuICAgICAgICBwcm9wcyxcbiAgICAgICAgdXBkYXRlOiBub29wLFxuICAgICAgICBub3RfZXF1YWwsXG4gICAgICAgIGJvdW5kOiBibGFua19vYmplY3QoKSxcbiAgICAgICAgLy8gbGlmZWN5Y2xlXG4gICAgICAgIG9uX21vdW50OiBbXSxcbiAgICAgICAgb25fZGVzdHJveTogW10sXG4gICAgICAgIG9uX2Rpc2Nvbm5lY3Q6IFtdLFxuICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgYWZ0ZXJfdXBkYXRlOiBbXSxcbiAgICAgICAgY29udGV4dDogbmV3IE1hcChvcHRpb25zLmNvbnRleHQgfHwgKHBhcmVudF9jb21wb25lbnQgPyBwYXJlbnRfY29tcG9uZW50LiQkLmNvbnRleHQgOiBbXSkpLFxuICAgICAgICAvLyBldmVyeXRoaW5nIGVsc2VcbiAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKSxcbiAgICAgICAgZGlydHksXG4gICAgICAgIHNraXBfYm91bmQ6IGZhbHNlLFxuICAgICAgICByb290OiBvcHRpb25zLnRhcmdldCB8fCBwYXJlbnRfY29tcG9uZW50LiQkLnJvb3RcbiAgICB9O1xuICAgIGFwcGVuZF9zdHlsZXMgJiYgYXBwZW5kX3N0eWxlcygkJC5yb290KTtcbiAgICBsZXQgcmVhZHkgPSBmYWxzZTtcbiAgICAkJC5jdHggPSBpbnN0YW5jZVxuICAgICAgICA/IGluc3RhbmNlKGNvbXBvbmVudCwgb3B0aW9ucy5wcm9wcyB8fCB7fSwgKGksIHJldCwgLi4ucmVzdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByZXN0Lmxlbmd0aCA/IHJlc3RbMF0gOiByZXQ7XG4gICAgICAgICAgICBpZiAoJCQuY3R4ICYmIG5vdF9lcXVhbCgkJC5jdHhbaV0sICQkLmN0eFtpXSA9IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmICghJCQuc2tpcF9ib3VuZCAmJiAkJC5ib3VuZFtpXSlcbiAgICAgICAgICAgICAgICAgICAgJCQuYm91bmRbaV0odmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChyZWFkeSlcbiAgICAgICAgICAgICAgICAgICAgbWFrZV9kaXJ0eShjb21wb25lbnQsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSlcbiAgICAgICAgOiBbXTtcbiAgICAkJC51cGRhdGUoKTtcbiAgICByZWFkeSA9IHRydWU7XG4gICAgcnVuX2FsbCgkJC5iZWZvcmVfdXBkYXRlKTtcbiAgICAvLyBgZmFsc2VgIGFzIGEgc3BlY2lhbCBjYXNlIG9mIG5vIERPTSBjb21wb25lbnRcbiAgICAkJC5mcmFnbWVudCA9IGNyZWF0ZV9mcmFnbWVudCA/IGNyZWF0ZV9mcmFnbWVudCgkJC5jdHgpIDogZmFsc2U7XG4gICAgaWYgKG9wdGlvbnMudGFyZ2V0KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmh5ZHJhdGUpIHtcbiAgICAgICAgICAgIHN0YXJ0X2h5ZHJhdGluZygpO1xuICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSBjaGlsZHJlbihvcHRpb25zLnRhcmdldCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQubChub2Rlcyk7XG4gICAgICAgICAgICBub2Rlcy5mb3JFYWNoKGRldGFjaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQuYygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmludHJvKVxuICAgICAgICAgICAgdHJhbnNpdGlvbl9pbihjb21wb25lbnQuJCQuZnJhZ21lbnQpO1xuICAgICAgICBtb3VudF9jb21wb25lbnQoY29tcG9uZW50LCBvcHRpb25zLnRhcmdldCwgb3B0aW9ucy5hbmNob3IsIG9wdGlvbnMuY3VzdG9tRWxlbWVudCk7XG4gICAgICAgIGVuZF9oeWRyYXRpbmcoKTtcbiAgICAgICAgZmx1c2goKTtcbiAgICB9XG4gICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHBhcmVudF9jb21wb25lbnQpO1xufVxubGV0IFN2ZWx0ZUVsZW1lbnQ7XG5pZiAodHlwZW9mIEhUTUxFbGVtZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgU3ZlbHRlRWxlbWVudCA9IGNsYXNzIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25fbW91bnQgfSA9IHRoaXMuJCQ7XG4gICAgICAgICAgICB0aGlzLiQkLm9uX2Rpc2Nvbm5lY3QgPSBvbl9tb3VudC5tYXAocnVuKS5maWx0ZXIoaXNfZnVuY3Rpb24pO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuJCQuc2xvdHRlZCkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLiQkLnNsb3R0ZWRba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHIsIF9vbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXNbYXR0cl0gPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHJ1bl9hbGwodGhpcy4kJC5vbl9kaXNjb25uZWN0KTtcbiAgICAgICAgfVxuICAgICAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgICAgIGRlc3Ryb3lfY29tcG9uZW50KHRoaXMsIDEpO1xuICAgICAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgJG9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHNob3VsZCB0aGlzIGRlbGVnYXRlIHRvIGFkZEV2ZW50TGlzdGVuZXI/XG4gICAgICAgICAgICBpZiAoIWlzX2Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub29wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFN2ZWx0ZSBjb21wb25lbnRzLiBVc2VkIHdoZW4gZGV2PWZhbHNlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnQge1xuICAgICRkZXN0cm95KCkge1xuICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgfVxuICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIWlzX2Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSlcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgJHNldCgkJHByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuJCRzZXQoJCRwcm9wcyk7XG4gICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hfZGV2KHR5cGUsIGRldGFpbCkge1xuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tX2V2ZW50KHR5cGUsIE9iamVjdC5hc3NpZ24oeyB2ZXJzaW9uOiAnMy41NS4xJyB9LCBkZXRhaWwpLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xufVxuZnVuY3Rpb24gYXBwZW5kX2Rldih0YXJnZXQsIG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlIH0pO1xuICAgIGFwcGVuZCh0YXJnZXQsIG5vZGUpO1xufVxuZnVuY3Rpb24gYXBwZW5kX2h5ZHJhdGlvbl9kZXYodGFyZ2V0LCBub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSB9KTtcbiAgICBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSk7XG59XG5mdW5jdGlvbiBpbnNlcnRfZGV2KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSwgYW5jaG9yIH0pO1xuICAgIGluc2VydCh0YXJnZXQsIG5vZGUsIGFuY2hvcik7XG59XG5mdW5jdGlvbiBpbnNlcnRfaHlkcmF0aW9uX2Rldih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUsIGFuY2hvciB9KTtcbiAgICBpbnNlcnRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSwgYW5jaG9yKTtcbn1cbmZ1bmN0aW9uIGRldGFjaF9kZXYobm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NUmVtb3ZlJywgeyBub2RlIH0pO1xuICAgIGRldGFjaChub2RlKTtcbn1cbmZ1bmN0aW9uIGRldGFjaF9iZXR3ZWVuX2RldihiZWZvcmUsIGFmdGVyKSB7XG4gICAgd2hpbGUgKGJlZm9yZS5uZXh0U2libGluZyAmJiBiZWZvcmUubmV4dFNpYmxpbmcgIT09IGFmdGVyKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYmVmb3JlLm5leHRTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2hfYmVmb3JlX2RldihhZnRlcikge1xuICAgIHdoaWxlIChhZnRlci5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgZGV0YWNoX2RldihhZnRlci5wcmV2aW91c1NpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaF9hZnRlcl9kZXYoYmVmb3JlKSB7XG4gICAgd2hpbGUgKGJlZm9yZS5uZXh0U2libGluZykge1xuICAgICAgICBkZXRhY2hfZGV2KGJlZm9yZS5uZXh0U2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gbGlzdGVuX2Rldihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucywgaGFzX3ByZXZlbnRfZGVmYXVsdCwgaGFzX3N0b3BfcHJvcGFnYXRpb24pIHtcbiAgICBjb25zdCBtb2RpZmllcnMgPSBvcHRpb25zID09PSB0cnVlID8gWydjYXB0dXJlJ10gOiBvcHRpb25zID8gQXJyYXkuZnJvbShPYmplY3Qua2V5cyhvcHRpb25zKSkgOiBbXTtcbiAgICBpZiAoaGFzX3ByZXZlbnRfZGVmYXVsdClcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3ByZXZlbnREZWZhdWx0Jyk7XG4gICAgaWYgKGhhc19zdG9wX3Byb3BhZ2F0aW9uKVxuICAgICAgICBtb2RpZmllcnMucHVzaCgnc3RvcFByb3BhZ2F0aW9uJyk7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01BZGRFdmVudExpc3RlbmVyJywgeyBub2RlLCBldmVudCwgaGFuZGxlciwgbW9kaWZpZXJzIH0pO1xuICAgIGNvbnN0IGRpc3Bvc2UgPSBsaXN0ZW4obm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NUmVtb3ZlRXZlbnRMaXN0ZW5lcicsIHsgbm9kZSwgZXZlbnQsIGhhbmRsZXIsIG1vZGlmaWVycyB9KTtcbiAgICAgICAgZGlzcG9zZSgpO1xuICAgIH07XG59XG5mdW5jdGlvbiBhdHRyX2Rldihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmVBdHRyaWJ1dGUnLCB7IG5vZGUsIGF0dHJpYnV0ZSB9KTtcbiAgICBlbHNlXG4gICAgICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0QXR0cmlidXRlJywgeyBub2RlLCBhdHRyaWJ1dGUsIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gcHJvcF9kZXYobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgbm9kZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldFByb3BlcnR5JywgeyBub2RlLCBwcm9wZXJ0eSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBkYXRhc2V0X2Rldihub2RlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBub2RlLmRhdGFzZXRbcHJvcGVydHldID0gdmFsdWU7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXREYXRhc2V0JywgeyBub2RlLCBwcm9wZXJ0eSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YV9kZXYodGV4dCwgZGF0YSkge1xuICAgIGRhdGEgPSAnJyArIGRhdGE7XG4gICAgaWYgKHRleHQud2hvbGVUZXh0ID09PSBkYXRhKVxuICAgICAgICByZXR1cm47XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXREYXRhJywgeyBub2RlOiB0ZXh0LCBkYXRhIH0pO1xuICAgIHRleHQuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9lYWNoX2FyZ3VtZW50KGFyZykge1xuICAgIGlmICh0eXBlb2YgYXJnICE9PSAnc3RyaW5nJyAmJiAhKGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiAnbGVuZ3RoJyBpbiBhcmcpKSB7XG4gICAgICAgIGxldCBtc2cgPSAneyNlYWNofSBvbmx5IGl0ZXJhdGVzIG92ZXIgYXJyYXktbGlrZSBvYmplY3RzLic7XG4gICAgICAgIGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIGFyZyAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gYXJnKSB7XG4gICAgICAgICAgICBtc2cgKz0gJyBZb3UgY2FuIHVzZSBhIHNwcmVhZCB0byBjb252ZXJ0IHRoaXMgaXRlcmFibGUgaW50byBhbiBhcnJheS4nO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3Nsb3RzKG5hbWUsIHNsb3QsIGtleXMpIHtcbiAgICBmb3IgKGNvbnN0IHNsb3Rfa2V5IG9mIE9iamVjdC5rZXlzKHNsb3QpKSB7XG4gICAgICAgIGlmICghfmtleXMuaW5kZXhPZihzbG90X2tleSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgPCR7bmFtZX0+IHJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgc2xvdCBcIiR7c2xvdF9rZXl9XCIuYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9keW5hbWljX2VsZW1lbnQodGFnKSB7XG4gICAgY29uc3QgaXNfc3RyaW5nID0gdHlwZW9mIHRhZyA9PT0gJ3N0cmluZyc7XG4gICAgaWYgKHRhZyAmJiAhaXNfc3RyaW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignPHN2ZWx0ZTplbGVtZW50PiBleHBlY3RzIFwidGhpc1wiIGF0dHJpYnV0ZSB0byBiZSBhIHN0cmluZy4nKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV92b2lkX2R5bmFtaWNfZWxlbWVudCh0YWcpIHtcbiAgICBpZiAodGFnICYmIGlzX3ZvaWQodGFnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYDxzdmVsdGU6ZWxlbWVudCB0aGlzPVwiJHt0YWd9XCI+IGlzIHNlbGYtY2xvc2luZyBhbmQgY2Fubm90IGhhdmUgY29udGVudC5gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb25zdHJ1Y3Rfc3ZlbHRlX2NvbXBvbmVudF9kZXYoY29tcG9uZW50LCBwcm9wcykge1xuICAgIGNvbnN0IGVycm9yX21lc3NhZ2UgPSAndGhpcz17Li4ufSBvZiA8c3ZlbHRlOmNvbXBvbmVudD4gc2hvdWxkIHNwZWNpZnkgYSBTdmVsdGUgY29tcG9uZW50Lic7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgY29tcG9uZW50KHByb3BzKTtcbiAgICAgICAgaWYgKCFpbnN0YW5jZS4kJCB8fCAhaW5zdGFuY2UuJHNldCB8fCAhaW5zdGFuY2UuJG9uIHx8ICFpbnN0YW5jZS4kZGVzdHJveSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yX21lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IGVycjtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJyAmJiBtZXNzYWdlLmluZGV4T2YoJ2lzIG5vdCBhIGNvbnN0cnVjdG9yJykgIT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JfbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFN2ZWx0ZSBjb21wb25lbnRzIHdpdGggc29tZSBtaW5vciBkZXYtZW5oYW5jZW1lbnRzLiBVc2VkIHdoZW4gZGV2PXRydWUuXG4gKi9cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudERldiBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgKCFvcHRpb25zLnRhcmdldCAmJiAhb3B0aW9ucy4kJGlubGluZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIid0YXJnZXQnIGlzIGEgcmVxdWlyZWQgb3B0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgICRkZXN0cm95KCkge1xuICAgICAgICBzdXBlci4kZGVzdHJveSgpO1xuICAgICAgICB0aGlzLiRkZXN0cm95ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdDb21wb25lbnQgd2FzIGFscmVhZHkgZGVzdHJveWVkJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICB9O1xuICAgIH1cbiAgICAkY2FwdHVyZV9zdGF0ZSgpIHsgfVxuICAgICRpbmplY3Rfc3RhdGUoKSB7IH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyB0byBjcmVhdGUgc3Ryb25nbHkgdHlwZWQgU3ZlbHRlIGNvbXBvbmVudHMuXG4gKiBUaGlzIG9ubHkgZXhpc3RzIGZvciB0eXBpbmcgcHVycG9zZXMgYW5kIHNob3VsZCBiZSB1c2VkIGluIGAuZC50c2AgZmlsZXMuXG4gKlxuICogIyMjIEV4YW1wbGU6XG4gKlxuICogWW91IGhhdmUgY29tcG9uZW50IGxpYnJhcnkgb24gbnBtIGNhbGxlZCBgY29tcG9uZW50LWxpYnJhcnlgLCBmcm9tIHdoaWNoXG4gKiB5b3UgZXhwb3J0IGEgY29tcG9uZW50IGNhbGxlZCBgTXlDb21wb25lbnRgLiBGb3IgU3ZlbHRlK1R5cGVTY3JpcHQgdXNlcnMsXG4gKiB5b3Ugd2FudCB0byBwcm92aWRlIHR5cGluZ3MuIFRoZXJlZm9yZSB5b3UgY3JlYXRlIGEgYGluZGV4LmQudHNgOlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFN2ZWx0ZUNvbXBvbmVudFR5cGVkIH0gZnJvbSBcInN2ZWx0ZVwiO1xuICogZXhwb3J0IGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50VHlwZWQ8e2Zvbzogc3RyaW5nfT4ge31cbiAqIGBgYFxuICogVHlwaW5nIHRoaXMgbWFrZXMgaXQgcG9zc2libGUgZm9yIElERXMgbGlrZSBWUyBDb2RlIHdpdGggdGhlIFN2ZWx0ZSBleHRlbnNpb25cbiAqIHRvIHByb3ZpZGUgaW50ZWxsaXNlbnNlIGFuZCB0byB1c2UgdGhlIGNvbXBvbmVudCBsaWtlIHRoaXMgaW4gYSBTdmVsdGUgZmlsZVxuICogd2l0aCBUeXBlU2NyaXB0OlxuICogYGBgc3ZlbHRlXG4gKiA8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICogXHRpbXBvcnQgeyBNeUNvbXBvbmVudCB9IGZyb20gXCJjb21wb25lbnQtbGlicmFyeVwiO1xuICogPC9zY3JpcHQ+XG4gKiA8TXlDb21wb25lbnQgZm9vPXsnYmFyJ30gLz5cbiAqIGBgYFxuICpcbiAqICMjIyMgV2h5IG5vdCBtYWtlIHRoaXMgcGFydCBvZiBgU3ZlbHRlQ29tcG9uZW50KERldilgP1xuICogQmVjYXVzZVxuICogYGBgdHNcbiAqIGNsYXNzIEFTdWJjbGFzc09mU3ZlbHRlQ29tcG9uZW50IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50PHtmb286IHN0cmluZ30+IHt9XG4gKiBjb25zdCBjb21wb25lbnQ6IHR5cGVvZiBTdmVsdGVDb21wb25lbnQgPSBBU3ViY2xhc3NPZlN2ZWx0ZUNvbXBvbmVudDtcbiAqIGBgYFxuICogd2lsbCB0aHJvdyBhIHR5cGUgZXJyb3IsIHNvIHdlIG5lZWQgdG8gc2VwYXJhdGUgdGhlIG1vcmUgc3RyaWN0bHkgdHlwZWQgY2xhc3MuXG4gKi9cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudFR5cGVkIGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50RGV2IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxvb3BfZ3VhcmQodGltZW91dCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHN0YXJ0ID4gdGltZW91dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmZpbml0ZSBsb29wIGRldGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgeyBIdG1sVGFnLCBIdG1sVGFnSHlkcmF0aW9uLCBTdmVsdGVDb21wb25lbnQsIFN2ZWx0ZUNvbXBvbmVudERldiwgU3ZlbHRlQ29tcG9uZW50VHlwZWQsIFN2ZWx0ZUVsZW1lbnQsIGFjdGlvbl9kZXN0cm95ZXIsIGFkZF9hdHRyaWJ1dGUsIGFkZF9jbGFzc2VzLCBhZGRfZmx1c2hfY2FsbGJhY2ssIGFkZF9sb2NhdGlvbiwgYWRkX3JlbmRlcl9jYWxsYmFjaywgYWRkX3Jlc2l6ZV9saXN0ZW5lciwgYWRkX3N0eWxlcywgYWRkX3RyYW5zZm9ybSwgYWZ0ZXJVcGRhdGUsIGFwcGVuZCwgYXBwZW5kX2RldiwgYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQsIGFwcGVuZF9oeWRyYXRpb24sIGFwcGVuZF9oeWRyYXRpb25fZGV2LCBhcHBlbmRfc3R5bGVzLCBhc3NpZ24sIGF0dHIsIGF0dHJfZGV2LCBhdHRyaWJ1dGVfdG9fb2JqZWN0LCBiZWZvcmVVcGRhdGUsIGJpbmQsIGJpbmRpbmdfY2FsbGJhY2tzLCBibGFua19vYmplY3QsIGJ1YmJsZSwgY2hlY2tfb3V0cm9zLCBjaGlsZHJlbiwgY2xhaW1fY29tcG9uZW50LCBjbGFpbV9lbGVtZW50LCBjbGFpbV9odG1sX3RhZywgY2xhaW1fc3BhY2UsIGNsYWltX3N2Z19lbGVtZW50LCBjbGFpbV90ZXh0LCBjbGVhcl9sb29wcywgY29tcG9uZW50X3N1YnNjcmliZSwgY29tcHV0ZV9yZXN0X3Byb3BzLCBjb21wdXRlX3Nsb3RzLCBjb25zdHJ1Y3Rfc3ZlbHRlX2NvbXBvbmVudCwgY29uc3RydWN0X3N2ZWx0ZV9jb21wb25lbnRfZGV2LCBjcmVhdGVFdmVudERpc3BhdGNoZXIsIGNyZWF0ZV9hbmltYXRpb24sIGNyZWF0ZV9iaWRpcmVjdGlvbmFsX3RyYW5zaXRpb24sIGNyZWF0ZV9jb21wb25lbnQsIGNyZWF0ZV9pbl90cmFuc2l0aW9uLCBjcmVhdGVfb3V0X3RyYW5zaXRpb24sIGNyZWF0ZV9zbG90LCBjcmVhdGVfc3NyX2NvbXBvbmVudCwgY3VycmVudF9jb21wb25lbnQsIGN1c3RvbV9ldmVudCwgZGF0YXNldF9kZXYsIGRlYnVnLCBkZXN0cm95X2Jsb2NrLCBkZXN0cm95X2NvbXBvbmVudCwgZGVzdHJveV9lYWNoLCBkZXRhY2gsIGRldGFjaF9hZnRlcl9kZXYsIGRldGFjaF9iZWZvcmVfZGV2LCBkZXRhY2hfYmV0d2Vlbl9kZXYsIGRldGFjaF9kZXYsIGRpcnR5X2NvbXBvbmVudHMsIGRpc3BhdGNoX2RldiwgZWFjaCwgZWxlbWVudCwgZWxlbWVudF9pcywgZW1wdHksIGVuZF9oeWRyYXRpbmcsIGVzY2FwZSwgZXNjYXBlX2F0dHJpYnV0ZV92YWx1ZSwgZXNjYXBlX29iamVjdCwgZXhjbHVkZV9pbnRlcm5hbF9wcm9wcywgZml4X2FuZF9kZXN0cm95X2Jsb2NrLCBmaXhfYW5kX291dHJvX2FuZF9kZXN0cm95X2Jsb2NrLCBmaXhfcG9zaXRpb24sIGZsdXNoLCBnZXRBbGxDb250ZXh0cywgZ2V0Q29udGV4dCwgZ2V0X2FsbF9kaXJ0eV9mcm9tX3Njb3BlLCBnZXRfYmluZGluZ19ncm91cF92YWx1ZSwgZ2V0X2N1cnJlbnRfY29tcG9uZW50LCBnZXRfY3VzdG9tX2VsZW1lbnRzX3Nsb3RzLCBnZXRfcm9vdF9mb3Jfc3R5bGUsIGdldF9zbG90X2NoYW5nZXMsIGdldF9zcHJlYWRfb2JqZWN0LCBnZXRfc3ByZWFkX3VwZGF0ZSwgZ2V0X3N0b3JlX3ZhbHVlLCBnbG9iYWxzLCBncm91cF9vdXRyb3MsIGhhbmRsZV9wcm9taXNlLCBoYXNDb250ZXh0LCBoYXNfcHJvcCwgaGVhZF9zZWxlY3RvciwgaWRlbnRpdHksIGluaXQsIGluc2VydCwgaW5zZXJ0X2RldiwgaW5zZXJ0X2h5ZHJhdGlvbiwgaW5zZXJ0X2h5ZHJhdGlvbl9kZXYsIGludHJvcywgaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIsIGlzX2NsaWVudCwgaXNfY3Jvc3NvcmlnaW4sIGlzX2VtcHR5LCBpc19mdW5jdGlvbiwgaXNfcHJvbWlzZSwgaXNfdm9pZCwgbGlzdGVuLCBsaXN0ZW5fZGV2LCBsb29wLCBsb29wX2d1YXJkLCBtZXJnZV9zc3Jfc3R5bGVzLCBtaXNzaW5nX2NvbXBvbmVudCwgbW91bnRfY29tcG9uZW50LCBub29wLCBub3RfZXF1YWwsIG5vdywgbnVsbF90b19lbXB0eSwgb2JqZWN0X3dpdGhvdXRfcHJvcGVydGllcywgb25EZXN0cm95LCBvbk1vdW50LCBvbmNlLCBvdXRyb19hbmRfZGVzdHJveV9ibG9jaywgcHJldmVudF9kZWZhdWx0LCBwcm9wX2RldiwgcXVlcnlfc2VsZWN0b3JfYWxsLCByYWYsIHJ1biwgcnVuX2FsbCwgc2FmZV9ub3RfZXF1YWwsIHNjaGVkdWxlX3VwZGF0ZSwgc2VsZWN0X211bHRpcGxlX3ZhbHVlLCBzZWxlY3Rfb3B0aW9uLCBzZWxlY3Rfb3B0aW9ucywgc2VsZWN0X3ZhbHVlLCBzZWxmLCBzZXRDb250ZXh0LCBzZXRfYXR0cmlidXRlcywgc2V0X2N1cnJlbnRfY29tcG9uZW50LCBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YSwgc2V0X2N1c3RvbV9lbGVtZW50X2RhdGFfbWFwLCBzZXRfZGF0YSwgc2V0X2RhdGFfZGV2LCBzZXRfaW5wdXRfdHlwZSwgc2V0X2lucHV0X3ZhbHVlLCBzZXRfbm93LCBzZXRfcmFmLCBzZXRfc3RvcmVfdmFsdWUsIHNldF9zdHlsZSwgc2V0X3N2Z19hdHRyaWJ1dGVzLCBzcGFjZSwgc3ByZWFkLCBzcmNfdXJsX2VxdWFsLCBzdGFydF9oeWRyYXRpbmcsIHN0b3BfcHJvcGFnYXRpb24sIHN1YnNjcmliZSwgc3ZnX2VsZW1lbnQsIHRleHQsIHRpY2ssIHRpbWVfcmFuZ2VzX3RvX2FycmF5LCB0b19udW1iZXIsIHRvZ2dsZV9jbGFzcywgdHJhbnNpdGlvbl9pbiwgdHJhbnNpdGlvbl9vdXQsIHRydXN0ZWQsIHVwZGF0ZV9hd2FpdF9ibG9ja19icmFuY2gsIHVwZGF0ZV9rZXllZF9lYWNoLCB1cGRhdGVfc2xvdCwgdXBkYXRlX3Nsb3RfYmFzZSwgdmFsaWRhdGVfY29tcG9uZW50LCB2YWxpZGF0ZV9keW5hbWljX2VsZW1lbnQsIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQsIHZhbGlkYXRlX2VhY2hfa2V5cywgdmFsaWRhdGVfc2xvdHMsIHZhbGlkYXRlX3N0b3JlLCB2YWxpZGF0ZV92b2lkX2R5bmFtaWNfZWxlbWVudCwgeGxpbmtfYXR0ciB9O1xuIiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IElDb21tYW5kTWFuYWdlciwgQ29tbWFuZCB9IGZyb20gJ0AvdHlwZXMnO1xyXG4gICAgaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSAnLi4vLi4vY2xhc3Nlcy9kaWFsb2cnO1xyXG4gICAgaW1wb3J0IHsgb25Nb3VudCB9IGZyb20gJ3N2ZWx0ZSc7XHJcbiAgICBpbXBvcnQgeyBjb250YWluZXIgfSBmcm9tICcuLi8uLi8uLi9jb250YWluZXInO1xyXG4gICAgaW1wb3J0IHsgXyB9IGZyb20gJ0AvdXRpbCc7XHJcbiAgICBjb25zdCBjb21tYW5kTWFuYWdlciA9IGNvbnRhaW5lci5nZXQ8SUNvbW1hbmRNYW5hZ2VyPignQ29tbWFuZE1hbmFnZXInKTtcclxuXHJcbiAgICBsZXQgY29tbWFuZHM6IENvbW1hbmRbXSA9IFtdO1xyXG5cclxuICAgIGxldCBjb21tYW5kID0gJyc7XHJcblxyXG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XHJcblxyXG4gICAgbGV0IHJlc3VsdDogQ29tbWFuZFtdID0gW107XHJcblxyXG4gICAgY29uc3Qgb25rZXlwcmVzcyA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgICAgICAgICAgb25FbnRlcigpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBtb3ZlVXBcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAzOCkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50SW5kZXgtLTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBtb3ZlRG93blxyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxlbiA9IHJlc3VsdC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA+PSBsZW4gLSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VycmVudEluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBvbkVudGVyID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbSA9IHJlc3VsdFtjdXJyZW50SW5kZXhdO1xyXG4gICAgICAgIERpYWxvZy5kZXN0cm95QWxsKCk7XHJcbiAgICAgICAgY29tLmNhbGxiYWNrKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9uQ2xpY2sgPSAoaTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgY3VycmVudEluZGV4ID0gaTtcclxuICAgICAgICBvbkVudGVyKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhhc0NvbnRlbnQgPSAodjogc3RyaW5nIHwgdW5kZWZpbmVkLCBjOiBzdHJpbmcpID0+IHYgJiYgdi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoYy50b0xvd2VyQ2FzZSgpKSA+PSAwO1xyXG5cclxuICAgICQ6IHtcclxuICAgICAgICBjdXJyZW50SW5kZXggPSAwO1xyXG4gICAgICAgIGlmICghY29tbWFuZCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBjb21tYW5kcztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBjb21tYW5kcy5maWx0ZXIoKGMpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzQ29udGVudChjLnBsdWdpbiwgY29tbWFuZCkgfHxcclxuICAgICAgICAgICAgICAgICAgICBoYXNDb250ZW50KGMucGx1Z2luTmFtZSwgY29tbWFuZCkgfHxcclxuICAgICAgICAgICAgICAgICAgICBoYXNDb250ZW50KGMuY29tbWFuZCwgY29tbWFuZCkgfHxcclxuICAgICAgICAgICAgICAgICAgICBoYXNDb250ZW50KGMuZGVzY3JpcHRpb24sIGNvbW1hbmQpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VudCgoKSA9PiB7XHJcbiAgICAgICAgY29tbWFuZHMgPSBjb21tYW5kTWFuYWdlci5nZXRDb21tYW5kcygpO1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1hbmRQYW5lbElucHV0Jyk7XHJcbiAgICAgICAgZWwuZm9jdXMoKTtcclxuICAgIH0pO1xyXG48L3NjcmlwdD5cclxuXHJcbjxkaXYgY2xhc3M9XCJmbl9fZmxleC1jb2x1bW5cIiBzdHlsZT1cImJvcmRlci1yYWRpdXM6IDRweDtvdmVyZmxvdzogaGlkZGVuO3Bvc2l0aW9uOiByZWxhdGl2ZTsgd2lkdGg6IG1heCg4MHZ3LCAxMDAwcHgpXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiYjMtZm9ybV9faWNvbiBzZWFyY2hfX2hlYWRlclwiPlxyXG4gICAgICAgIDxzdmdcclxuICAgICAgICAgICAgc3R5bGU9XCJsZWZ0OiAxNHB4O1wiXHJcbiAgICAgICAgICAgIGNsYXNzPVwiYjMtZm9ybV9faWNvbi1pY29uXCJcclxuICAgICAgICAgICAgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIlxyXG4gICAgICAgICAgICB2ZXJzaW9uPVwiMS4xXCJcclxuICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXHJcbiAgICAgICAgICAgIHdpZHRoPVwiMjAwXCJcclxuICAgICAgICAgICAgaGVpZ2h0PVwiMjAwXCJcclxuICAgICAgICAgICAgPjxwYXRoXHJcbiAgICAgICAgICAgICAgICBkPVwiTTY0IDExMnY4MDBoODk2VjExMkg2NHogbTg0NiA3NTBIMTE0VjE2Mmg3OTZ2NzAwek0yMzQuNiA2ODguOEw0MTEuMyA1MTIgMjM0LjYgMzM1LjJsMzUuNC0zNS40TDQ4Mi4xIDUxMiAyNjkuOSA3MjQuMWwtMzUuMy0zNS4zeiBtNTU0LjgtMTAuMmgtMzAwdi01MGgzMDB2NTB6XCJcclxuICAgICAgICAgICAgLz48L3N2Z1xyXG4gICAgICAgID5cclxuICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgaWQ9XCJjb21tYW5kUGFuZWxJbnB1dFwiXHJcbiAgICAgICAgICAgIGNsYXNzPVwiYjMtdGV4dC1maWVsZCBiMy10ZXh0LWZpZWxkLS10ZXh0IGZuX19ibG9jayBiMy1mb3JtX19pY29uLWlucHV0XCJcclxuICAgICAgICAgICAgYmluZDp2YWx1ZT17Y29tbWFuZH1cclxuICAgICAgICAgICAgb246a2V5ZG93bj17b25rZXlwcmVzc31cclxuICAgICAgICAvPlxyXG4gICAgPC9kaXY+XHJcbiAgICB7I2lmIHJlc3VsdH1cclxuICAgICAgICB7I2VhY2ggcmVzdWx0IGFzIGNvbSwgaX1cclxuICAgICAgICAgICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktY2xpY2stZXZlbnRzLWhhdmUta2V5LWV2ZW50cyAtLT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz17aSA9PT0gY3VycmVudEluZGV4ID8gJ2NvbW1hbmQtc2VsZWN0ZWQgY29tbWFuZCcgOiAnY29tbWFuZCd9IG9uOmNsaWNrPXsoKSA9PiBvbkNsaWNrKGkpfT5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29tbWFuZC1wbHVnaW5cIj57Y29tLnBsdWdpbk5hbWV9IHsnOid9IDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29tbWFuZC1kZXNjcmlwdGlvblwiPntjb20uY29tbWFuZH0ge2NvbS5kZXNjcmlwdGlvbiB8fCAnJ308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICB7I2lmIGNvbS5zaG9ydGN1dH1cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29tbWFuZC1zaG9ydGN1dFwiPntfKCdzaG9ydGN1dCcpfToge2NvbS5zaG9ydGN1dH08L2Rpdj5cclxuICAgICAgICAgICAgICAgIHsvaWZ9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIHsvZWFjaH1cclxuICAgIHsvaWZ9XHJcbjwvZGl2PlxyXG5cclxuPHN0eWxlPlxyXG4gICAgLmNvbW1hbmQge1xyXG4gICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xyXG4gICAgfVxyXG4gICAgLmNvbW1hbmQ6aG92ZXIge1xyXG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbiAgICAgICAgY29sb3I6IHZhcigtLWIzLXRoZW1lLXByaW1hcnkpO1xyXG4gICAgfVxyXG4gICAgLmNvbW1hbmQtc2VsZWN0ZWQge1xyXG4gICAgICAgIGNvbG9yOiB2YXIoLS1iMy10aGVtZS1wcmltYXJ5KTtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbiAgICB9XHJcbiAgICAuY29tbWFuZC1wbHVnaW4ge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgIH1cclxuICAgIC5jb21tYW5kLXNob3J0Y3V0IHtcclxuICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXRleHQtMyk7XHJcbiAgICB9XHJcbjwvc3R5bGU+XHJcbiIsImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ0AvYXBpL3BsdWdpbic7XHJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gJ0AvaW50ZXJuYWwvY2xhc3Nlcyc7XHJcbmltcG9ydCB7IFNob3J0Y3V0IH0gZnJvbSAnQC9jb3JlL3Nob3J0Y3V0JztcclxuaW1wb3J0IENvbW1hbmRQYW5lbF9fU3ZlbHRlQ29tcG9uZW50XyBmcm9tICcuL2NvbW1hbmQtcGFuZWwuc3ZlbHRlJztcclxuaW1wb3J0IHsgXyB9IGZyb20gJ0AvdXRpbCc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tbWFuZFBhbmVsUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIHNob3J0Y3V0OiBTaG9ydGN1dDtcclxuXHJcbiAgICBvbmxvYWQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoe1xyXG4gICAgICAgICAgICBjb21tYW5kOiAnU2hvdyBjb21tYW5kIHBhbmVsJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF8oJ3Nob3dfY29tbWFuZF9wYW5lbCcpLFxyXG4gICAgICAgICAgICBzaG9ydGN1dDogJ2N0cmwrc2hpZnQrbyxjb21tYW5kK3NoaWZ0K28nLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UGFuZWwoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93UGFuZWwoKSB7XHJcbiAgICAgICAgRGlhbG9nLmRlc3Ryb3lBbGwoKTtcclxuICAgICAgICBuZXcgRGlhbG9nKHsgY29udGVudDogJzxkaXYgaWQ9XCJjb21tYW5kLXBhbmVsXCI+PC9kaXY+JyB9KTtcclxuICAgICAgICBzZXRJbW1lZGlhdGUoKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgQ29tbWFuZFBhbmVsX19TdmVsdGVDb21wb25lbnRfKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1hbmQtcGFuZWwnKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IG9uTW91bnQgfSBmcm9tICdzdmVsdGUnO1xyXG4gICAgaW1wb3J0IHsgZGVmYXVsdENvbmZpZywgUExVR0lOX1NUT1JFX1VSTCwgUExVR0lOX1NZU1RFTV9BVVRPX1VQREFURSwgUExVR0lOX1NZU1RFTV9TQUZFX01PREVfRU5BQkxFRCB9IGZyb20gJ0AvY29yZS9wbHVnaW4tY29uZmlnJztcclxuICAgIGltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gJ0AvY29udGFpbmVyJztcclxuICAgIGltcG9ydCB7IFRZUEVTIH0gZnJvbSAnQC9jb25maWcnO1xyXG4gICAgaW1wb3J0IHsgSVBsdWdpblN5c3RlbSwgSVN0b3JhZ2VNYW5hZ2VyIH0gZnJvbSAnQC90eXBlcyc7XHJcbiAgICBpbXBvcnQgeyBfIH0gZnJvbSAnQC91dGlsJztcclxuXHJcbiAgICBjb25zdCBzdG9yYWdlTWFuYWdlciA9IGNvbnRhaW5lci5nZXQ8SVN0b3JhZ2VNYW5hZ2VyPihUWVBFUy5TdG9yYWdlTWFuYWdlcik7XHJcbiAgICBjb25zdCBwbHVnaW5TeXN0ZW0gPSBjb250YWluZXIuZ2V0PElQbHVnaW5TeXN0ZW0+KFRZUEVTLlBsdWdpblN5c3RlbSk7XHJcblxyXG4gICAgbGV0IGNvbmZpZ3MgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsYWJlbDogXygnc2FmZW1vZGUnKSxcclxuICAgICAgICAgICAgdGlwOiBfKCdzYWZlbW9kZXRpcCcpLFxyXG4gICAgICAgICAgICBjaGVja2VkOiB0cnVlLFxyXG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxyXG4gICAgICAgICAgICBvbkNoYW5nZTogKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZXZlbnQudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpblN5c3RlbS50dXJuT25TYWZlTW9kZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5TeXN0ZW0udHVybk9mZlNhZmVNb2RlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIGxhYmVsOiBfKCdhdXRvdXBncmFkZScpLFxyXG4gICAgICAgIC8vICAgICB0aXA6IF8oJ2F1dG91cGdyYWRldGlwJyksXHJcbiAgICAgICAgLy8gICAgIGNoZWNrZWQ6IHRydWUsXHJcbiAgICAgICAgLy8gICAgIHR5cGU6ICdjaGVja2JveCcsXHJcbiAgICAgICAgLy8gICAgIG9uQ2hhbmdlOiAoZXZlbnQpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIHN0b3JhZ2VNYW5hZ2VyLnNldChQTFVHSU5fU1lTVEVNX0FVVE9fVVBEQVRFLCBldmVudC50YXJnZXQuY2hlY2tlZCk7XHJcbiAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxhYmVsOiBfKCdzdG9yZV91cmwnKSxcclxuICAgICAgICAgICAgdGlwOiBgJHtfKCdzdG9yZV91cmxfdGlwJyl9ICR7ZGVmYXVsdENvbmZpZy5QTFVHSU5fU1RPUkVfVVJMfWAsXHJcbiAgICAgICAgICAgIHR5cGU6ICdpbnB1dCcsXHJcbiAgICAgICAgICAgIHZhbHVlOiBzdG9yYWdlTWFuYWdlci5nZXQoUExVR0lOX1NUT1JFX1VSTCksXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlOiAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHN0b3JhZ2VNYW5hZ2VyLnNldChQTFVHSU5fU1RPUkVfVVJMLCBldmVudC50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICBdO1xyXG5cclxuICAgIG9uTW91bnQoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNlY3VyaXR5TW9kZSA9IHN0b3JhZ2VNYW5hZ2VyLmdldChQTFVHSU5fU1lTVEVNX1NBRkVfTU9ERV9FTkFCTEVEKTtcclxuICAgICAgICBjb25maWdzWzBdLmNoZWNrZWQgPSBzZWN1cml0eU1vZGU7XHJcbiAgICAgICAgY29uc3QgYXV0b1VwZGF0ZSA9IHN0b3JhZ2VNYW5hZ2VyLmdldChQTFVHSU5fU1lTVEVNX0FVVE9fVVBEQVRFKTtcclxuICAgICAgICBjb25maWdzWzFdLmNoZWNrZWQgPSBhdXRvVXBkYXRlO1xyXG4gICAgfSk7XHJcbjwvc2NyaXB0PlxyXG5cclxueyNlYWNoIGNvbmZpZ3MgYXMgY29uZmlnfVxyXG4gICAgPGxhYmVsIGNsYXNzPVwiZm5fX2ZsZXggYjMtbGFiZWwgY29uZmlnX19pdGVtXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZuX19mbGV4LTFcIj5cclxuICAgICAgICAgICAge2NvbmZpZy5sYWJlbH1cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImIzLWxhYmVsX190ZXh0XCI+e2NvbmZpZy50aXB9PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmbl9fc3BhY2VcIiAvPlxyXG4gICAgICAgIHsjaWYgY29uZmlnLnR5cGUgPT09ICdjaGVja2JveCd9XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImIzLXN3aXRjaCBmbl9fZmxleC1jZW50ZXJcIiB0eXBlPVwiY2hlY2tib3hcIiBiaW5kOmNoZWNrZWQ9e2NvbmZpZy5jaGVja2VkfSBvbjpjaGFuZ2U9e2NvbmZpZy5vbkNoYW5nZX0gLz5cclxuICAgICAgICB7OmVsc2UgaWYgY29uZmlnLnR5cGUgPT09ICdpbnB1dCd9XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImIzLXRleHQtZmllbGQgZm5fX2ZsZXgtY2VudGVyIGZuX19zaXplMjAwXCIgdHlwZT1cImlucHV0XCIgYmluZDp2YWx1ZT17Y29uZmlnLnZhbHVlfSBvbjpjaGFuZ2U9e2NvbmZpZy5vbkNoYW5nZX0gLz5cclxuICAgICAgICB7L2lmfVxyXG4gICAgPC9sYWJlbD5cclxuey9lYWNofVxyXG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0IHsgY3JlYXRlRXZlbnREaXNwYXRjaGVyLCBvbk1vdW50IH0gZnJvbSAnc3ZlbHRlJztcclxuICAgIGltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gJ0AvY29udGFpbmVyJztcclxuICAgIGltcG9ydCB7IFRZUEVTIH0gZnJvbSAnQC9jb25maWcnO1xyXG4gICAgaW1wb3J0IHsgSVBsdWdpblN5c3RlbSwgSVN0b3JhZ2VNYW5hZ2VyLCBQbHVnaW5NYW5pZmVzdCB9IGZyb20gJ0AvdHlwZXMnO1xyXG4gICAgaW1wb3J0IHsgUExVR0lOX1NZU1RFTV9TQUZFX01PREVfRU5BQkxFRCB9IGZyb20gJ0AvY29yZS9wbHVnaW4tY29uZmlnJztcclxuICAgIGltcG9ydCB7IF8gfSBmcm9tICdAL3V0aWwnO1xyXG5cclxuICAgIGNvbnN0IHN0b3JhZ2VNYW5hZ2VyID0gY29udGFpbmVyLmdldDxJU3RvcmFnZU1hbmFnZXI+KFRZUEVTLlN0b3JhZ2VNYW5hZ2VyKTtcclxuICAgIGNvbnN0IHBsdWdpblN5c3RlbSA9IGNvbnRhaW5lci5nZXQ8SVBsdWdpblN5c3RlbT4oVFlQRVMuUGx1Z2luU3lzdGVtKTtcclxuXHJcbiAgICBsZXQgcGx1Z2luczogUGx1Z2luTWFuaWZlc3RbXSA9IFtdO1xyXG5cclxuICAgICQ6IG91dHNpZGVQbHVnaW5zID0gcGx1Z2lucy5maWx0ZXIoKHApID0+IHAuc2NyaXB0KTtcclxuXHJcbiAgICBjb25zdCBsb2FkUGx1Z2lucyA9ICgpID0+IHtcclxuICAgICAgICBwbHVnaW5zID0gc3RvcmFnZU1hbmFnZXIuZ2V0UGx1Z2lucygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBkaXNwYXRjaGVyID0gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCk7XHJcblxyXG4gICAgY29uc3Qgb25QbHVnaW5FbmFibGVkQ2hhbmdlID0gKGtleTogc3RyaW5nKSA9PiBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBzYWZlTW9kZSA9IHN0b3JhZ2VNYW5hZ2VyLmdldChQTFVHSU5fU1lTVEVNX1NBRkVfTU9ERV9FTkFCTEVEKTtcclxuICAgICAgICBjb25zdCBjaGVja2VkID0gZXZlbnQudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICAgICAgYXdhaXQgc3RvcmFnZU1hbmFnZXIuc2V0UGx1Z2luRW5hYmxlZChrZXksIGNoZWNrZWQpO1xyXG4gICAgICAgIGlmIChzYWZlTW9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHBsdWdpblN5c3RlbS5sb2FkUGx1Z2luKGtleSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGx1Z2luU3lzdGVtLnVubG9hZFBsdWdpbihrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkaXNwYXRjaGVyKCd1cGRhdGUnKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdW5pbnN0YWxsID0gYXN5bmMgKGtleTogc3RyaW5nLCBldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgYXdhaXQgcGx1Z2luU3lzdGVtLnVubG9hZFBsdWdpbihrZXkpO1xyXG4gICAgICAgIGF3YWl0IHN0b3JhZ2VNYW5hZ2VyLnVuaW5zdGFsbFBsdWdpbihrZXkpO1xyXG4gICAgICAgIGF3YWl0IHN0b3JhZ2VNYW5hZ2VyLmluaXRTdG9yYWdlKCk7XHJcbiAgICAgICAgbG9hZFBsdWdpbnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgb25Nb3VudChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgc3RvcmFnZU1hbmFnZXIuaW5pdFN0b3JhZ2UoKTtcclxuICAgICAgICBsb2FkUGx1Z2lucygpO1xyXG4gICAgfSk7XHJcbjwvc2NyaXB0PlxyXG5cclxuPGxhYmVsIGNsYXNzPVwiYjMtbGFiZWwgZm5fX2ZsZXhcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJmbl9fZmxleC0xXCI+XHJcbiAgICAgICAgeyNlYWNoIG91dHNpZGVQbHVnaW5zIGFzIHBsdWdpbn1cclxuICAgICAgICAgICAgeyNpZiAhcGx1Z2luLmhpZGRlbn1cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZuX19mbGV4IGIzLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBsdWdpbiBmbl9fZmxleC0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtwbHVnaW4ubmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAge3BsdWdpbi52ZXJzaW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1jbGljay1ldmVudHMtaGF2ZS1rZXktZXZlbnRzIC0tPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlbW92ZVwiIG9uOmNsaWNrPXsoZXZlbnQpID0+IHVuaW5zdGFsbChwbHVnaW4ua2V5LCBldmVudCl9PntfKCd1bmluc3RhbGwnKX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiMy1sYWJlbF9fdGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3BsdWdpbi5kZXNjcmlwdGlvbiB8fCBfKCdub2Rlc2NyaXB0aW9uJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm5fX3NwYWNlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJiMy1zd2l0Y2ggZm5fX2ZsZXgtY2VudGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJmdWxsV2lkdGhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kOmNoZWNrZWQ9e3BsdWdpbi5lbmFibGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbjpjaGFuZ2U9e29uUGx1Z2luRW5hYmxlZENoYW5nZShwbHVnaW4ua2V5KX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgey9pZn1cclxuICAgICAgICB7L2VhY2h9XHJcbiAgICA8L2Rpdj5cclxuPC9sYWJlbD5cclxuXHJcbjxzdHlsZT5cclxuICAgIC5wbHVnaW4gc3Bhbi5yZW1vdmUge1xyXG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgICAgY29sb3I6IHZhcigtLWIzLXRoZW1lLWVycm9yKTtcclxuICAgICAgICBtYXJnaW4tbGVmdDogNHB4O1xyXG4gICAgfVxyXG4gICAgLnBsdWdpbjpob3ZlciBzcGFuLnJlbW92ZSB7XHJcbiAgICAgICAgZGlzcGxheTogaW5saW5lO1xyXG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIH1cclxuICAgIC5wbHVnaW46aG92ZXIgc3Bhbi5yZW1vdmU6aG92ZXIge1xyXG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG4gICAgfVxyXG48L3N0eWxlPlxyXG4iLCJpbXBvcnQgeyBUWVBFUyB9IGZyb20gJ0AvY29uZmlnJztcclxuaW1wb3J0IHsgUExVR0lOX1NUT1JFX1VSTCB9IGZyb20gJ0AvY29yZS9wbHVnaW4tY29uZmlnJztcclxuaW1wb3J0IHsgSVN0b3JhZ2VNYW5hZ2VyLCBJU3RvcmUsIFN0b3JlUGx1Z2luTWFuaWZlc3QsIFN0b3JlUGx1Z2luU3RhdHVzIH0gZnJvbSAnQC90eXBlcyc7XHJcbmltcG9ydCB7IEF4aW9zUmVzcG9uc2UgfSBmcm9tICdheGlvcyc7XHJcbmltcG9ydCB7IGluamVjdCwgaW5qZWN0YWJsZSB9IGZyb20gJ2ludmVyc2lmeSc7XHJcbmltcG9ydCB7IFNlbVZlciB9IGZyb20gJ3NlbXZlcic7XHJcbmltcG9ydCB7IHJlcXVlc3QsIHNsZWVwIH0gZnJvbSAnQC91dGlsJztcclxuaW1wb3J0IHsgRmlsZUNsaWVudCB9IGZyb20gJ0AvYXBpL2ZpbGUtYXBpJztcclxuXHJcbkBpbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFN0b3JlIGltcGxlbWVudHMgSVN0b3JlIHtcclxuICAgIHByaXZhdGUgcGx1Z2luczogU3RvcmVQbHVnaW5NYW5pZmVzdFtdO1xyXG4gICAgcHJpdmF0ZSBwbHVnaW5TdGF0dXM6IFN0b3JlUGx1Z2luU3RhdHVzW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoQGluamVjdDxJU3RvcmFnZU1hbmFnZXI+KFRZUEVTLlN0b3JhZ2VNYW5hZ2VyKSBwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBJU3RvcmFnZU1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLnBsdWdpbnMgPSBbXTtcclxuICAgICAgICB0aGlzLnBsdWdpblN0YXR1cyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBpbml0KCkge1xyXG4gICAgICAgIHRoaXMucGx1Z2lucyA9IFtdO1xyXG4gICAgICAgIHRoaXMucGx1Z2luU3RhdHVzID0gW107XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMubG9hZFBsdWdpbnNGcm9tVXJsKCksIHRoaXMuc3RvcmFnZU1hbmFnZXIuaW5pdFN0b3JhZ2UoKV0pO1xyXG4gICAgICAgIGNvbnN0IHBsdWdpbnMgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldFBsdWdpbnMoKTtcclxuICAgICAgICBjb25zdCBzdG9yZVBsdWdpbnM6IFN0b3JlUGx1Z2luU3RhdHVzW10gPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgcDogU3RvcmVQbHVnaW5TdGF0dXMgPSB7IC4uLnBsdWdpbiwgaXNFeGlzdDogZmFsc2UsIG5lZWRVcGdyYWRlOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICBjb25zdCBvbGRQbHVnaW4gPSBwbHVnaW5zLmZpbmQoKHApID0+IHAua2V5ID09PSBwbHVnaW4ua2V5KTtcclxuICAgICAgICAgICAgLy8gaWYgKG9sZFBsdWdpbikge1xyXG4gICAgICAgICAgICAvLyAgICAgcC5pc0V4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IHBWID0gbmV3IFNlbVZlcihwLnZlcnNpb24pO1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3Qgb2xkUGx1Z2luViA9IG5ldyBTZW1WZXIob2xkUGx1Z2luLnZlcnNpb24pO1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKHBWLmNvbXBhcmUob2xkUGx1Z2luVikgPT09IDEpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBwLm5lZWRVcGdyYWRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICBzdG9yZVBsdWdpbnMucHVzaChwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wbHVnaW5TdGF0dXMgPSBzdG9yZVBsdWdpbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFN0b3JlVXJsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldChQTFVHSU5fU1RPUkVfVVJMKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGx1Z2lucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbHVnaW5zO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkUGx1Z2lucygpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmluaXQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRQbHVnaW5zV2l0aFN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQbHVnaW5zV2l0aFN0YXR1cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbHVnaW5TdGF0dXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRQbHVnaW5zRnJvbVVybCgpIHtcclxuICAgICAgICBjb25zdCBzdG9yZVVybCA9IHRoaXMuZ2V0U3RvcmVVcmwoKTtcclxuICAgICAgICBpZiAoIXN0b3JlVXJsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlczogQXhpb3NSZXNwb25zZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXMgPSBhd2FpdCByZXF1ZXN0LmdldChzdG9yZVVybCArICcvcGx1Z2lucy5qc29uJywge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZXEgPSBbXTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXMuZGF0YT8ucGx1Z2lucykpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBwbHVnaW5LZXkgb2YgcmVzLmRhdGE/LnBsdWdpbnMgfHwge30pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBsdWdpbiA9IHRoaXMuZ2V0UGx1Z2luTWFuaWZlc3QoYCR7c3RvcmVVcmx9LyR7cGx1Z2luS2V5fWApO1xyXG4gICAgICAgICAgICAgICAgcmVxLnB1c2gocGx1Z2luKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBsdWdpbnMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRQbHVnaW5CeVVybCh1cmw6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRQbHVnaW5NYW5pZmVzdCh1cmwpLCB0aGlzLmdldFBsdWdpbk1haW5Kcyh1cmwpXSkudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1hbmlmZXN0OiB2YWx1ZVswXSxcclxuICAgICAgICAgICAgICAgIG1haW5KczogdmFsdWVbMV0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFBsdWdpbk1hbmlmZXN0KHVybDogc3RyaW5nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgbWFuaWZlc3QgPSBhd2FpdCByZXF1ZXN0LmdldChgJHt1cmx9L21hbmlmZXN0Lmpzb25gLCB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZScsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG1hbmlmZXN0LmRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFBsdWdpbk1haW5Kcyh1cmw6IHN0cmluZykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuZ2V0KGAke3VybH0vbWFpbi5qc2AsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFBsdWdpblJlYWRtZShrZXk6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuZ2V0U3RvcmVVcmwoKX0vJHtrZXl9YDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0LmdldChgJHt1cmx9L1JFQURNRS5tZGAsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGEgYXMgc3RyaW5nO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkb3dubG9hZFBsdWdpbihrZXk6IHN0cmluZykge1xyXG4gICAgICAgIGF3YWl0IHNsZWVwKDUwMCk7XHJcbiAgICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCB0aGlzLmdldFBsdWdpbkJ5VXJsKGAke3RoaXMuZ2V0U3RvcmVVcmwoKX0vJHtrZXl9YCk7XHJcbiAgICAgICAgY29uc3QgbWFuaWZlc3RKc29uID0gZmlsZXMubWFuaWZlc3Q7XHJcbiAgICAgICAgY29uc3QgbWFpbkpzID0gZmlsZXMubWFpbkpzO1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIEZpbGVDbGllbnQuZ2V0SW5zdGFuY2VBcGkoKS5maWxlQXBpLnB1dEZpbGUoYC9kYXRhL3BsdWdpbnMvJHtrZXl9YCwgbnVsbCwgdHJ1ZSksXHJcbiAgICAgICAgICAgIEZpbGVDbGllbnQuZ2V0SW5zdGFuY2VBcGkoKS5maWxlQXBpLnB1dEZpbGUoYC9kYXRhL3BsdWdpbnMvJHtrZXl9L21hbmlmZXN0Lmpzb25gLCBKU09OLnN0cmluZ2lmeShtYW5pZmVzdEpzb24pLCBmYWxzZSksXHJcbiAgICAgICAgICAgIEZpbGVDbGllbnQuZ2V0SW5zdGFuY2VBcGkoKS5maWxlQXBpLnB1dEZpbGUoYC9kYXRhL3BsdWdpbnMvJHtrZXl9L21haW4uanNgLCBtYWluSnMsIGZhbHNlKSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxufVxyXG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgZXhwb3J0IGxldCBvbkNsaWNrOiAoKSA9PiB2b2lkID0gbnVsbDtcclxuICAgIGV4cG9ydCBsZXQgZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuPC9zY3JpcHQ+XHJcblxyXG48YnV0dG9uIG9uOmNsaWNrPXtvbkNsaWNrfSB7ZGlzYWJsZWR9IGNsYXNzPVwiYjMtYnV0dG9uXCI+PHNsb3QgLz48L2J1dHRvbj5cclxuIiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gJ0AvY29udGFpbmVyJztcclxuICAgIGltcG9ydCB7IElTdG9yZSwgUGx1Z2luTWFuaWZlc3QgfSBmcm9tICdAL3R5cGVzJztcclxuICAgIGltcG9ydCB7IF8gfSBmcm9tICdAL3V0aWwnO1xyXG4gICAgaW1wb3J0IHsgb25Nb3VudCB9IGZyb20gJ3N2ZWx0ZSc7XHJcbiAgICBpbXBvcnQgeyBjcmVhdGVFdmVudERpc3BhdGNoZXIgfSBmcm9tICdzdmVsdGUnO1xyXG5cclxuICAgIGNvbnN0IGRpc3BhdGNoID0gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCk7XHJcblxyXG4gICAgbGV0IGxvYWRpbmcgPSB0cnVlO1xyXG5cclxuICAgIGV4cG9ydCBsZXQgcGx1Z2luOiBQbHVnaW5NYW5pZmVzdDtcclxuXHJcbiAgICBjb25zdCBnZXRQbHVnaW5SZWFkbWUgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgcmVhZG1lID0gYXdhaXQgY29udGFpbmVyLmdldDxJU3RvcmU+KCdTdG9yZScpLmdldFBsdWdpblJlYWRtZShwbHVnaW4ua2V5KTtcclxuICAgICAgICBsb2FkaW5nID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCByZWFkbWU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdCBMdXRlTWRDb252ZXJ0ZXIgPSB3aW5kb3cuTHV0ZS5OZXcoKTtcclxuXHJcbiAgICAkOiBwcmV2aWV3SFRNTCA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVhZG1lID8gTHV0ZU1kQ29udmVydGVyLk1kMkhUTUwocmVhZG1lKSA6ICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICBvbk1vdW50KCgpID0+IHtcclxuICAgICAgICBnZXRQbHVnaW5SZWFkbWUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGdvQmFjayA9ICgpID0+IHtcclxuICAgICAgICBkaXNwYXRjaCgnZ29iYWNrJyk7XHJcbiAgICB9O1xyXG48L3NjcmlwdD5cclxuXHJcbjxkaXYgY2xhc3M9XCJwbHVnaW4tZGV0YWlsXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwicGx1Z2luLWJhc2ljXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInBsdWdpbi1pbmZvXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwbHVnaW4tbmFtZVwiPntwbHVnaW4ubmFtZX08L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBsdWdpbi1rZXlcIj4oe3BsdWdpbi5rZXl9KTwvZGl2PlxyXG4gICAgICAgICAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1jbGljay1ldmVudHMtaGF2ZS1rZXktZXZlbnRzIC0tPlxyXG4gICAgICAgICAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1taXNzaW5nLWF0dHJpYnV0ZSAtLT5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImdvLWJhY2sgYjMtYnV0dG9uXCIgb246Y2xpY2s9eygpID0+IGdvQmFjaygpfT48c3ZnIGNsYXNzPVwiZ28tYmFjay1pY29uXCI+PHVzZSB4bGluazpocmVmPVwiI2ljb25CYWNrXCIgLz48L3N2Zz57XygnZ29CYWNrJyl9PC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwicGx1Z2luLW1hbmlmZXN0XCI+XHJcbiAgICAgICAgICAgIHsjaWYgcGx1Z2luLnVybH08ZGl2IGNsYXNzPVwicGx1Z2luLWl0ZW1cIj57XygndXJsJyl9OiA8YSBocmVmPXtwbHVnaW4udXJsfSB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub3JlZmVycmVyXCI+e3BsdWdpbi51cmx9PC9hPjwvZGl2PiB7L2lmfVxyXG4gICAgICAgICAgICB7I2lmIHBsdWdpbi5hdXRob3J9PGRpdiBjbGFzcz1cInBsdWdpbi1pdGVtXCI+e18oJ2F1dGhvcicpfToge3BsdWdpbi5hdXRob3J9PC9kaXY+IHsvaWZ9XHJcbiAgICAgICAgICAgIHsjaWYgcGx1Z2luLnZlcnNpb259PGRpdiBjbGFzcz1cInBsdWdpbi1pdGVtXCI+e18oJ3ZlcnNpb24nKX06IHtwbHVnaW4udmVyc2lvbn08L2Rpdj4gey9pZn1cclxuICAgICAgICAgICAgeyNpZiBwbHVnaW4uZGVzY3JpcHRpb259PGRpdiBjbGFzcz1cInBsdWdpbi1pdGVtXCI+e18oJ2Rlc2NyaXB0aW9uJyl9OiB7cGx1Z2luLmRlc2NyaXB0aW9ufTwvZGl2PiB7L2lmfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8aHIvPlxyXG4gICAgPGRpdiBjbGFzcz1cInBsdWdpbi1yZWFkbWUgYjMtdHlwb2dyYXBoeVwiPlxyXG4gICAgICAgIHsjaWYgbG9hZGluZ31cclxuICAgICAgICAgICAgPHNwYW4+e18oJ3JlYWRtZScpfTwvc3Bhbj5cclxuICAgICAgICB7OmVsc2V9XHJcbiAgICAgICAgICAgIHtAaHRtbCBwcmV2aWV3SFRNTCgpfVxyXG4gICAgICAgIHsvaWZ9XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcblxyXG48c3R5bGU+XHJcbiAgICAucGx1Z2luLWluZm8ge1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIH1cclxuICAgIC5wbHVnaW4tZGV0YWlsIHtcclxuICAgICAgICBtYXJnaW4tdG9wOiAxMnB4O1xyXG4gICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgfVxyXG4gICAgLnBsdWdpbi1uYW1lIHtcclxuICAgICAgICBkaXNwbGF5OiBpbmxpbmU7XHJcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA2cHg7XHJcbiAgICAgICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgfVxyXG4gICAgLnBsdWdpbi1rZXkge1xyXG4gICAgICAgIGRpc3BsYXk6IGlubGluZTtcclxuICAgICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICB9XHJcbiAgICAucGx1Z2luLW1hbmlmZXN0IHtcclxuICAgICAgICBtYXJnaW4tdG9wOiAxMnB4O1xyXG4gICAgfVxyXG4gICAgLnBsdWdpbi1yZWFkbWUge1xyXG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgICB9XHJcbiAgICAuZ28tYmFjayB7XHJcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDEycHg7XHJcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgICAgIGhlaWdodDogMjRweDtcclxuICAgIH1cclxuICAgIC5nby1iYWNrLWljb24ge1xyXG4gICAgICAgIGhlaWdodDogMTJweDtcclxuICAgICAgICB3aWR0aDogMTJweDtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDtcclxuICAgIH1cclxuPC9zdHlsZT5cclxuIiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IFRZUEVTIH0gZnJvbSAnQC9jb25maWcnO1xyXG4gICAgaW1wb3J0IHsgY29udGFpbmVyIH0gZnJvbSAnQC9jb250YWluZXInO1xyXG4gICAgaW1wb3J0IHsgU3RvcmUgfSBmcm9tICdAL2NvcmUvc3RvcmUnO1xyXG4gICAgaW1wb3J0IEJ1dHRvbiBmcm9tICdAL2ludGVybmFsL2NvbXBvbmVudHMvQnV0dG9uLnN2ZWx0ZSc7XHJcbiAgICBpbXBvcnQgeyBTdG9yZVBsdWdpblN0YXR1cyB9IGZyb20gJ0AvdHlwZXMnO1xyXG4gICAgaW1wb3J0IHsgU3RvcmVQbHVnaW5NYW5pZmVzdCB9IGZyb20gJ0AvdHlwZXMnO1xyXG4gICAgaW1wb3J0IHsgXyB9IGZyb20gJ0AvdXRpbCc7XHJcbiAgICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSAnc3ZlbHRlJztcclxuICAgIGltcG9ydCBTZXR0aW5nUHJldmlldyBmcm9tICcuL3NldHRpbmctcHJldmlldy5zdmVsdGUnO1xyXG5cclxuICAgIGNvbnN0IHN0b3JlID0gY29udGFpbmVyLmdldDxTdG9yZT4oVFlQRVMuU3RvcmUpO1xyXG4gICAgbGV0IHBsdWdpbnM6IFN0b3JlUGx1Z2luU3RhdHVzW10gPSBbXTtcclxuICAgIGxldCBsb2FkaW5nID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCBsb2FkaW5nTWFwID0ge307XHJcblxyXG4gICAgb25Nb3VudChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgcGx1Z2lucyA9IGF3YWl0IHN0b3JlLmxvYWRQbHVnaW5zKCk7XHJcbiAgICAgICAgbG9hZGluZyA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZG93bmxvYWRQbHVnaW4gPSBhc3luYyAoa2V5OiBzdHJpbmcpID0+IHtcclxuICAgICAgICBpZiAobG9hZGluZ01hcFtrZXldKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbG9hZGluZ01hcFtrZXldID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXdhaXQgc3RvcmUuZG93bmxvYWRQbHVnaW4oa2V5KTtcclxuICAgICAgICAgICAgY29uc3QgcCA9IHBsdWdpbnMuZmluZCgoaykgPT4gay5rZXkgPT09IGtleSk7XHJcbiAgICAgICAgICAgIGlmIChwKSB7XHJcbiAgICAgICAgICAgICAgICBwLmlzRXhpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcC5uZWVkVXBncmFkZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgbG9hZGluZ01hcFtrZXldID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRQbHVnaW46IFN0b3JlUGx1Z2luTWFuaWZlc3QgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0IHByZXZpZXdQbHVnaW4gPSAoZXZlbnQ6IE1vdXNlRXZlbnQsIHBsdWdpbjogU3RvcmVQbHVnaW5NYW5pZmVzdCkgPT4ge1xyXG4gICAgICAgIHNlbGVjdGVkUGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9O1xyXG48L3NjcmlwdD5cclxuXHJcbjxkaXYgY2xhc3M9XCJiMy1sYWJlbCBmbl9fZmxleFwiPlxyXG4gICAgeyNpZiBsb2FkaW5nfVxyXG4gICAgICAgIDxkaXY+e18oJ2xvYWRpbmcnKX08L2Rpdj5cclxuICAgIHs6ZWxzZSBpZiAhc2VsZWN0ZWRQbHVnaW59XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZuX19mbGV4LTFcIj5cclxuICAgICAgICAgICAgeyNlYWNoIHBsdWdpbnMgYXMgcGx1Z2lufVxyXG4gICAgICAgICAgICAgICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktbGFiZWwtaGFzLWFzc29jaWF0ZWQtY29udHJvbCAtLT5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZuX19mbGV4IGIzLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZuX19mbGV4LTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktY2xpY2stZXZlbnRzLWhhdmUta2V5LWV2ZW50cyAtLT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktaW52YWxpZC1hdHRyaWJ1dGUgLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBjbGFzcz1cIlwiIG9uOmNsaWNrPXsoZXZlbnQpID0+IHByZXZpZXdQbHVnaW4oZXZlbnQsIHBsdWdpbil9PntwbHVnaW4ubmFtZX08L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtwbHVnaW4udmVyc2lvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImIzLWxhYmVsX190ZXh0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGx1Z2luLmRlc2NyaXB0aW9uIHx8ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZuX19zcGFjZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgeyNpZiBsb2FkaW5nTWFwW3BsdWdpbi5rZXldfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIGRpc2FibGVkPXt0cnVlfT57XygnZG93bmxvYWRpbmcnKX08L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICB7OmVsc2UgaWYgcGx1Z2luLmlzRXhpc3R9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgcGx1Z2luLm5lZWRVcGdyYWRlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBkb3dubG9hZFBsdWdpbihwbHVnaW4ua2V5KX0+e18oJ3VwZ3JhZGUnKX08L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgezplbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBkaXNhYmxlZD17dHJ1ZX0+e18oJ2Rvd25sb2FkZWQnKX08L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cclxuICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17KCkgPT4gZG93bmxvYWRQbHVnaW4ocGx1Z2luLmtleSl9PntfKCdkb3dubG9hZCcpfTwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIHsvaWZ9XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICB7L2VhY2h9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICB7OmVsc2V9XHJcbiAgICAgICAgPFNldHRpbmdQcmV2aWV3IG9uOmdvYmFjaz17KCkgPT4gc2VsZWN0ZWRQbHVnaW4gPSBudWxsIH0gcGx1Z2luPXtzZWxlY3RlZFBsdWdpbn0+PC9TZXR0aW5nUHJldmlldz5cclxuICAgIHsvaWZ9XHJcbjwvZGl2PlxyXG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0IHsgU2V0dGluZ1JlbmRlciB9IGZyb20gJ0AvdHlwZXMnO1xyXG4gICAgaW1wb3J0IHsgb25Nb3VudCB9IGZyb20gJ3N2ZWx0ZSc7XHJcblxyXG4gICAgbGV0IHJvb3Q6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIGV4cG9ydCBsZXQgcmVuZGVyOiBTZXR0aW5nUmVuZGVyO1xyXG5cclxuICAgICQ6IHtcclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXR0aW5nLWN1c3RvbS1yZW5kZXInKTtcclxuICAgICAgICBpZiAoZWwpIHtcclxuICAgICAgICAgICAgaWYgKHJvb3QpIHtcclxuICAgICAgICAgICAgICAgIHJvb3QucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0dGluZy1jdXN0b20tcmVuZGVyJykuYXBwZW5kQ2hpbGQocm9vdCk7XHJcbiAgICAgICAgICAgIHJlbmRlcihyb290KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VudCgoKSA9PiB7XHJcbiAgICAgICAgcm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXR0aW5nLWN1c3RvbS1yZW5kZXInKS5hcHBlbmRDaGlsZChyb290KTtcclxuICAgICAgICByZW5kZXIocm9vdCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG5cclxuPC9zY3JpcHQ+XHJcblxyXG5cclxuPGRpdiBpZD1cInNldHRpbmctY3VzdG9tLXJlbmRlclwiPjwvZGl2PiIsIjxzY3JpcHQgbGFuZz1cInRzXCI+XHJcbiAgICBpbXBvcnQgeyBfIH0gZnJvbSAnQC91dGlsJztcclxuICAgIGltcG9ydCBTZXR0aW5nQ29tbW9uIGZyb20gJy4vc2V0dGluZy1jb21tb24uc3ZlbHRlJztcclxuICAgIGltcG9ydCBTZXR0aW5nTGlzdCBmcm9tICcuL3NldHRpbmctbGlzdC5zdmVsdGUnO1xyXG4gICAgaW1wb3J0IFNldHRpbmdTdG9yZSBmcm9tICcuL3NldHRpbmctc3RvcmUuc3ZlbHRlJztcclxuICAgIGltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gJ0AvY29udGFpbmVyJztcclxuICAgIGltcG9ydCB7IFRZUEVTIH0gZnJvbSAnQC9jb25maWcnO1xyXG4gICAgaW1wb3J0IHsgSVNldHRpbmdNYW5hZ2VyLCBJU3RvcmFnZU1hbmFnZXIsIFNldHRpbmdSZW5kZXIgfSBmcm9tICdAL3R5cGVzJztcclxuICAgIGltcG9ydCBTZXR0aW5nQ3VzdG9tIGZyb20gJy4vc2V0dGluZy1jdXN0b20uc3ZlbHRlJztcclxuXHJcbiAgICB0eXBlIE1lbnUgPSB7IGtleTogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHR5cGU6ICdpbnRlcm5hbCcgfCAnY3VzdG9tJzsgY29tcG9uZW50PzogYW55OyByZW5kZXI/OiBTZXR0aW5nUmVuZGVyOyB9O1xyXG5cclxuICAgIGNvbnN0IG1lbnVzOiBNZW51W10gPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBrZXk6ICdjb21tb24nLFxyXG4gICAgICAgICAgICBuYW1lOiBfKCdtZW51X2NvbW1vbicpLFxyXG4gICAgICAgICAgICB0eXBlOiAnaW50ZXJuYWwnLFxyXG4gICAgICAgICAgICBjb21wb25lbnQ6IFNldHRpbmdDb21tb24sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGtleTogJ2xpc3QnLFxyXG4gICAgICAgICAgICBuYW1lOiBfKCdtZW51X2xpc3QnKSxcclxuICAgICAgICAgICAgdHlwZTogJ2ludGVybmFsJyxcclxuICAgICAgICAgICAgY29tcG9uZW50OiBTZXR0aW5nTGlzdCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAga2V5OiAnc3RvcmUnLFxyXG4gICAgICAgICAgICBuYW1lOiBfKCdtZW51X3N0b3JlJyksXHJcbiAgICAgICAgICAgIHR5cGU6ICdpbnRlcm5hbCcsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudDogU2V0dGluZ1N0b3JlLFxyXG4gICAgICAgIH0sXHJcbiAgICBdO1xyXG5cclxuICAgIGNvbnN0IHNtID0gY29udGFpbmVyLmdldDxJU2V0dGluZ01hbmFnZXI+KFRZUEVTLlNldHRpbmdNYW5hZ2VyKTtcclxuICAgIGNvbnN0IHNtMSA9IGNvbnRhaW5lci5nZXQ8SVN0b3JhZ2VNYW5hZ2VyPihUWVBFUy5TdG9yYWdlTWFuYWdlcik7XHJcbiAgICBjb25zdCBwbHVnaW5zID0gc20xLmdldFRoaXJkUGFydHlQbHVnaW5zKCk7XHJcbiAgICBsZXQgc2V0dGluZ1JlbmRlcnMgPSBzbS5nZXRTZXR0aW5nUmVuZGVycygpO1xyXG4gICAgY29uc3QgZ2V0TmFtZSA9IChrZXk6IHN0cmluZykgPT4gcGx1Z2lucy5maW5kKChwKSA9PiBwLmtleSA9PT0ga2V5KT8ubmFtZTtcclxuICAgIFxyXG4gICAgJDogdGhpcmRNZW51cyA9IHNldHRpbmdSZW5kZXJzLm1hcCgocykgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGtleTogcy5rZXksXHJcbiAgICAgICAgICAgIG5hbWU6IGdldE5hbWUocy5rZXkpLFxyXG4gICAgICAgICAgICBjb21wb25lbnQ6IFNldHRpbmdDb21tb24sXHJcbiAgICAgICAgICAgIHR5cGU6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICByZW5kZXI6IHMudmFsdWUsXHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHNldEN1cnJlbnRTZWxlY3Rpb24gPSAobWVudSkgPT4gKGN1cnJlbnRTZWxlY3Rpb24gPSBtZW51KTtcclxuICAgIGNvbnN0IHVwZGF0ZU1lbnVzID0gKCkgPT4ge1xyXG4gICAgICAgIHNldHRpbmdSZW5kZXJzID0gWy4uLnNtLmdldFNldHRpbmdSZW5kZXJzKCldO1xyXG4gICAgfTtcclxuICAgIGxldCBjdXJyZW50U2VsZWN0aW9uID0gbWVudXNbMF07XHJcbjwvc2NyaXB0PlxyXG5cclxuPGRpdiBjbGFzcz1cImZuX19mbGV4LWNvbHVtblwiIHN0eWxlPVwiYm9yZGVyLXJhZGl1czogNHB4O292ZXJmbG93OiBhdXRvO3Bvc2l0aW9uOiByZWxhdGl2ZTsgaGVpZ2h0OiA4MHZoXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiZm5fX2ZsZXgtMSBmbl9fZmxleCBjb25maWdfX3BhbmVsXCI+XHJcbiAgICAgICAgPHVsIGNsYXNzPVwiYjMtdGFiLWJhciBiMy1saXN0IGIzLWxpc3QtLWJhY2tncm91bmRcIiBzdHlsZT1cImhlaWdodDogdW5zZXQgIWltcG9ydGFudDtcIj5cclxuICAgICAgICAgICAgeyNlYWNoIG1lbnVzIGFzIG1lbnV9XHJcbiAgICAgICAgICAgICAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1jbGljay1ldmVudHMtaGF2ZS1rZXktZXZlbnRzIC0tPlxyXG4gICAgICAgICAgICAgICAgPGxpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS1uYW1lPXttZW51LmtleX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz17Y3VycmVudFNlbGVjdGlvbi5rZXkgPT09IG1lbnUua2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2IzLWxpc3QtaXRlbS0tZm9jdXMgYjMtbGlzdC1pdGVtIGIzLWxpc3QtaXRlbS0tYmlnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdiMy1saXN0LWl0ZW0gYjMtbGlzdC1pdGVtLS1iaWcnfSBcclxuICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gc2V0Q3VycmVudFNlbGVjdGlvbihtZW51KX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImIzLWxpc3QtaXRlbV9fdGV4dFwiPnttZW51Lm5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgey9lYWNofVxyXG4gICAgICAgICAgICB7I2lmIHRoaXJkTWVudXMubGVuZ3RoID4gMH1cclxuICAgICAgICAgICAgICAgIDxociBzdHlsZT1cIm1hcmdpbjogMTJweDtcIj5cclxuICAgICAgICAgICAgey9pZn1cclxuICAgICAgICAgICAgeyNlYWNoIHRoaXJkTWVudXMgYXMgbWVudX1cclxuICAgICAgICAgICAgICAgIDwhLS0gc3ZlbHRlLWlnbm9yZSBhMTF5LWNsaWNrLWV2ZW50cy1oYXZlLWtleS1ldmVudHMgLS0+XHJcbiAgICAgICAgICAgICAgICA8bGlcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLW5hbWU9e21lbnUua2V5fVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPXtjdXJyZW50U2VsZWN0aW9uLmtleSA9PT0gbWVudS5rZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnYjMtbGlzdC1pdGVtLS1mb2N1cyBiMy1saXN0LWl0ZW0gYjMtbGlzdC1pdGVtLS1iaWcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2IzLWxpc3QtaXRlbSBiMy1saXN0LWl0ZW0tLWJpZyd9IFxyXG4gICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiBzZXRDdXJyZW50U2VsZWN0aW9uKG1lbnUpfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYjMtbGlzdC1pdGVtX190ZXh0XCI+e21lbnUubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICB7L2VhY2h9XHJcbiAgICAgICAgPC91bD5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29uZmlnX190YWItY29udGFpbmVyXCIgc3R5bGU9XCJoZWlnaHQ6IHVuc2V0ICFpbXBvcnRhbnQ7XCIgZGF0YS1uYW1lPXtjdXJyZW50U2VsZWN0aW9uLmtleX0+XHJcbiAgICAgICAgICAgIHsjaWYgY3VycmVudFNlbGVjdGlvbi50eXBlID09PSAnaW50ZXJuYWwnfVxyXG4gICAgICAgICAgICAgICAgPHN2ZWx0ZTpjb21wb25lbnQgdGhpcz17Y3VycmVudFNlbGVjdGlvbi5jb21wb25lbnR9IG9uOnVwZGF0ZT17KCkgPT4gdXBkYXRlTWVudXMoKX0gLz5cclxuICAgICAgICAgICAgezplbHNlfVxyXG4gICAgICAgICAgICAgICAgPFNldHRpbmdDdXN0b20gcmVuZGVyPXtjdXJyZW50U2VsZWN0aW9uLnJlbmRlcn0gLz5cclxuICAgICAgICAgICAgey9pZn1cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuIiwiaW1wb3J0IHsgTWVudSwgTWVudUl0ZW0sIERpYWxvZyB9IGZyb20gJ0AvaW50ZXJuYWwnO1xyXG5pbXBvcnQgKiBhcyBjbGllbnRBcGkgZnJvbSAnQC9hcGkvY2xpZW50LWFwaSc7XHJcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ0AvYXBpL3BsdWdpbic7XHJcbmltcG9ydCBTZXR0aW5ncyBmcm9tICcuL3NldHRpbmcuc3ZlbHRlJztcclxuaW1wb3J0IHsgXyB9IGZyb20gJ0AvdXRpbCc7XHJcblxyXG5leHBvcnQgY2xhc3MgSW50ZXJuYWxTZXR0aW5nUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcbiAgICBzdmcgPVxyXG4gICAgICAgICc8c3ZnIHQ9XCIxNjc5NzAzMDI3MjI3XCIgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHAtaWQ9XCIyNDcxNVwiIHdpZHRoPVwiMjAwXCIgaGVpZ2h0PVwiMjAwXCI+PHBhdGggZD1cIk01MTIgMTAyMy45OTk4NGE3NS41MTk5ODggNzUuNTE5OTg4IDAgMCAxLTUzLjY3OTk5Mi0yMi4yMDc5OTdMMjIuMzY4MDc3IDU2NS40NTU5MTJjLTI5LjQ4Nzk5NS0yOS42Nzk5OTUtMjkuNDg3OTk1LTc3LjkxOTk4OC0wLjA2NC0xMDcuNTE5OTg0bDE1OS43MTE5NzUtMTU5LjgzOTk3NWEzMS45NTE5OTUgMzEuOTUxOTk1IDAgMCAxIDU0LjA0Nzk5MSAyOC4yMDc5OTYgMTMxLjEwMzk4IDEzMS4xMDM5OCAwIDAgMC0yLjM2OCAyMy4xMzU5OTZjMCA2OS45NTE5ODkgNTYuODk1OTkxIDEyOC4xMTE5OCAxMjYuODQ3OTgxIDEyOC4xMTE5OCA2OS45OTk5ODkgMCAxMjEuMTE5OTgxLTU4LjE1OTk5MSAxMjEuMTE5OTgxLTEyOC4xMTE5OCAwLTcwLjA3OTk4OS01MS4xMTk5OTItMTI3LjA3MTk4LTEyMS4xMTk5ODEtMTI3LjA3MTk4YTEzMC44Nzk5OCAxMzAuODc5OTggMCAwIDAtMjMuMDA3OTk3IDIuMzg0IDMxLjc1OTk5NSAzMS43NTk5OTUgMCAwIDEtMzMuOTE5OTk0LTE2LjY3MTk5OCAzMS45OTk5OTUgMzEuOTk5OTk1IDAgMCAxIDUuNzQzOTk5LTM3LjQyMzk5NGwxNDguODk1OTc2LTE0OS4xMDM5NzZjMjguODQ3OTk1LTI4LjcxOTk5NiA3OC43MTk5ODgtMjguNjU1OTk2IDEwNy40MjM5ODQtMC4wNjRsMTA5LjAyMzk4MyAxMDkuMTgzOTgzQzY5Ny40Mzk5NzEgNTkuODg3OTkxIDc2My44NzE5NjEgOC40Nzk5OTkgODQyLjAxNTk0OCA4LjQ3OTk5OWM5Ni45MTE5ODUgMCAxNzUuNzQzOTczIDc4Ljk1OTk4OCAxNzUuNzQzOTczIDE3NS45Njc5NzIgMCA3OC4yMzk5ODgtNTEuMjk1OTkyIDE0NC43MTk5NzctMTIyLjA2Mzk4MSAxNjcuNDcxOTc0bDEwNS44ODc5ODQgMTA1Ljk1MTk4M2E3Ni4zNTE5ODggNzYuMzUxOTg4IDAgMCAxIDAuMDMxOTk5IDEwNy41NTE5ODRMNTY1Ljc0Mzk5MiAxMDAxLjc3NTg0M0E3NS43NTk5ODggNzUuNzU5OTg4IDAgMCAxIDUxMiAxMDIzLjk5OTg0elwiIGZpbGw9XCJcIiBwLWlkPVwiMjQ3MTZcIj48L3BhdGg+PC9zdmc+JztcclxuICAgIG9ubG9hZCgpIHtcclxuICAgICAgICBjb25zdCBpbnRlcm5hbFNldHRpbmdCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBpbnRlcm5hbFNldHRpbmdCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgXygncGx1Z2luX3N5c3RlbScpKTtcclxuICAgICAgICBpbnRlcm5hbFNldHRpbmdCdXR0b24uY2xhc3NMaXN0LmFkZCgndG9vbGJhcl9faXRlbScsICdiMy10b29sdGlwcycsICdiMy10b29sdGlwc19fc3cnKTtcclxuICAgICAgICBpbnRlcm5hbFNldHRpbmdCdXR0b24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB0aGlzLnN2Zyk7XHJcbiAgICAgICAgaW50ZXJuYWxTZXR0aW5nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBNZW51KCdpbnRlcm5hbFNldHRpbmdCdXR0b24nKVxyXG4gICAgICAgICAgICAgICAgLmFkZEl0ZW0oXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE1lbnVJdGVtKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF8oJ3BsdWdpbl9zeXN0ZW1fc2V0dGluZycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaWNvbkVkaXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gc2hvd1NldHRpbmdEaWFsb2coKSxcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLmFkZFNlcGFyYXRvcigpXHJcbiAgICAgICAgICAgICAgICAuYWRkSXRlbShcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTWVudUl0ZW0oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXygncmVsb2FkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdpY29uUmVmcmVzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2xpZW50QXBpLmFkZFRvb2xiYXJSaWdodChpbnRlcm5hbFNldHRpbmdCdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGNvbW1hbmQ6ICdTaG93IHBsdWdpbiBzeXN0ZW0gY29uaWZnJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF8oJ3Nob3dfcGx1Z2luX3N5c3RlbV9jb25maWcnKSxcclxuICAgICAgICAgICAgc2hvcnRjdXQ6ICdjb21tYW5kK29wdGlvbitwJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHNob3dTZXR0aW5nRGlhbG9nKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoe1xyXG4gICAgICAgICAgICBjb21tYW5kOiAnUmVsb2FkIFdpbmRvdycsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfKCdyZWxvYWRfd2luZG93JyksXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dTZXR0aW5nRGlhbG9nKCkge1xyXG4gICAgbmV3IERpYWxvZyh7XHJcbiAgICAgICAgdGl0bGU6IF8oJ3BsdWdpbl9zeXN0ZW1fc2V0dGluZycpLFxyXG4gICAgICAgIGNvbnRlbnQ6ICc8ZGl2IGlkPVwicGx1Z2luLXNldHRpbmdzXCI+PC9kaXY+JyxcclxuICAgICAgICB3aWR0aDogJzkwdncnLFxyXG4gICAgICAgIGhlaWdodDogJzgwdmgnLFxyXG4gICAgfSk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBuZXcgU2V0dGluZ3Moe1xyXG4gICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbHVnaW4tc2V0dGluZ3MnKSxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vY2xhc3Nlcyc7XHJcbmltcG9ydCB7IFBsdWdpbk1hbmlmZXN0IH0gZnJvbSAnQC90eXBlcyc7XHJcbmltcG9ydCB7IENvbW1hbmRQYW5lbFBsdWdpbiB9IGZyb20gJy4vcGx1Z2lucy9jb21tYW5kLXBhbmVsJztcclxuaW1wb3J0IHsgSW50ZXJuYWxTZXR0aW5nUGx1Z2luIH0gZnJvbSAnLi9wbHVnaW5zL3NldHRpbmcnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGludGVybmFsUGx1Z2luczogUGx1Z2luTWFuaWZlc3RbXSA9IFtcclxuICAgIHsga2V5OiAnc2V0dGluZycsIG5hbWU6ICdzZXR0aW5nJywgcGx1Z2luOiBJbnRlcm5hbFNldHRpbmdQbHVnaW4sIGVuYWJsZWQ6IHRydWUsIGhpZGRlbjogdHJ1ZSwgdmVyc2lvbjogJzEuMC4wJyB9LFxyXG4gICAgeyBrZXk6ICdjb21tYW5kUGFuZWwnLCBuYW1lOiAnY29tbWFuZFBhbmVsJywgcGx1Z2luOiBDb21tYW5kUGFuZWxQbHVnaW4sIGVuYWJsZWQ6IHRydWUsIGhpZGRlbjogdHJ1ZSwgdmVyc2lvbjogJzEuMC4wJyB9LFxyXG5dO1xyXG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGlzSGlnaFN1cnJvZ2F0ZShjb2RlUG9pbnQpIHtcbiAgcmV0dXJuIGNvZGVQb2ludCA+PSAweGQ4MDAgJiYgY29kZVBvaW50IDw9IDB4ZGJmZjtcbn1cblxuZnVuY3Rpb24gaXNMb3dTdXJyb2dhdGUoY29kZVBvaW50KSB7XG4gIHJldHVybiBjb2RlUG9pbnQgPj0gMHhkYzAwICYmIGNvZGVQb2ludCA8PSAweGRmZmY7XG59XG5cbi8vIFRydW5jYXRlIHN0cmluZyBieSBzaXplIGluIGJ5dGVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRydW5jYXRlKGdldExlbmd0aCwgc3RyaW5nLCBieXRlTGVuZ3RoKSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW5wdXQgbXVzdCBiZSBzdHJpbmdcIik7XG4gIH1cblxuICB2YXIgY2hhckxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4gIHZhciBjdXJCeXRlTGVuZ3RoID0gMDtcbiAgdmFyIGNvZGVQb2ludDtcbiAgdmFyIHNlZ21lbnQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFyTGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICBzZWdtZW50ID0gc3RyaW5nW2ldO1xuXG4gICAgaWYgKGlzSGlnaFN1cnJvZ2F0ZShjb2RlUG9pbnQpICYmIGlzTG93U3Vycm9nYXRlKHN0cmluZy5jaGFyQ29kZUF0KGkgKyAxKSkpIHtcbiAgICAgIGkgKz0gMTtcbiAgICAgIHNlZ21lbnQgKz0gc3RyaW5nW2ldO1xuICAgIH1cblxuICAgIGN1ckJ5dGVMZW5ndGggKz0gZ2V0TGVuZ3RoKHNlZ21lbnQpO1xuXG4gICAgaWYgKGN1ckJ5dGVMZW5ndGggPT09IGJ5dGVMZW5ndGgpIHtcbiAgICAgIHJldHVybiBzdHJpbmcuc2xpY2UoMCwgaSArIDEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjdXJCeXRlTGVuZ3RoID4gYnl0ZUxlbmd0aCkge1xuICAgICAgcmV0dXJuIHN0cmluZy5zbGljZSgwLCBpIC0gc2VnbWVudC5sZW5ndGggKyAxKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RyaW5nO1xufTtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBpc0hpZ2hTdXJyb2dhdGUoY29kZVBvaW50KSB7XG4gIHJldHVybiBjb2RlUG9pbnQgPj0gMHhkODAwICYmIGNvZGVQb2ludCA8PSAweGRiZmY7XG59XG5cbmZ1bmN0aW9uIGlzTG93U3Vycm9nYXRlKGNvZGVQb2ludCkge1xuICByZXR1cm4gY29kZVBvaW50ID49IDB4ZGMwMCAmJiBjb2RlUG9pbnQgPD0gMHhkZmZmO1xufVxuXG4vLyBUcnVuY2F0ZSBzdHJpbmcgYnkgc2l6ZSBpbiBieXRlc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRCeXRlTGVuZ3RoKHN0cmluZykge1xuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIklucHV0IG11c3QgYmUgc3RyaW5nXCIpO1xuICB9XG5cbiAgdmFyIGNoYXJMZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICB2YXIgYnl0ZUxlbmd0aCA9IDA7XG4gIHZhciBjb2RlUG9pbnQgPSBudWxsO1xuICB2YXIgcHJldkNvZGVQb2ludCA9IG51bGw7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxlbmd0aDsgaSsrKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgLy8gaGFuZGxlIDQtYnl0ZSBub24tQk1QIGNoYXJzXG4gICAgLy8gbG93IHN1cnJvZ2F0ZVxuICAgIGlmIChpc0xvd1N1cnJvZ2F0ZShjb2RlUG9pbnQpKSB7XG4gICAgICAvLyB3aGVuIHBhcnNpbmcgcHJldmlvdXMgaGktc3Vycm9nYXRlLCAzIGlzIGFkZGVkIHRvIGJ5dGVMZW5ndGhcbiAgICAgIGlmIChwcmV2Q29kZVBvaW50ICE9IG51bGwgJiYgaXNIaWdoU3Vycm9nYXRlKHByZXZDb2RlUG9pbnQpKSB7XG4gICAgICAgIGJ5dGVMZW5ndGggKz0gMTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBieXRlTGVuZ3RoICs9IDM7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVQb2ludCA8PSAweDdmICkge1xuICAgICAgYnl0ZUxlbmd0aCArPSAxO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlUG9pbnQgPj0gMHg4MCAmJiBjb2RlUG9pbnQgPD0gMHg3ZmYpIHtcbiAgICAgIGJ5dGVMZW5ndGggKz0gMjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZVBvaW50ID49IDB4ODAwICYmIGNvZGVQb2ludCA8PSAweGZmZmYpIHtcbiAgICAgIGJ5dGVMZW5ndGggKz0gMztcbiAgICB9XG4gICAgcHJldkNvZGVQb2ludCA9IGNvZGVQb2ludDtcbiAgfVxuXG4gIHJldHVybiBieXRlTGVuZ3RoO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHRydW5jYXRlID0gcmVxdWlyZShcIi4vbGliL3RydW5jYXRlXCIpO1xudmFyIGdldExlbmd0aCA9IHJlcXVpcmUoXCJ1dGY4LWJ5dGUtbGVuZ3RoL2Jyb3dzZXJcIik7XG5tb2R1bGUuZXhwb3J0cyA9IHRydW5jYXRlLmJpbmQobnVsbCwgZ2V0TGVuZ3RoKTtcbiIsIi8qanNoaW50IG5vZGU6dHJ1ZSovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogUmVwbGFjZXMgY2hhcmFjdGVycyBpbiBzdHJpbmdzIHRoYXQgYXJlIGlsbGVnYWwvdW5zYWZlIGZvciBmaWxlbmFtZXMuXG4gKiBVbnNhZmUgY2hhcmFjdGVycyBhcmUgZWl0aGVyIHJlbW92ZWQgb3IgcmVwbGFjZWQgYnkgYSBzdWJzdGl0dXRlIHNldFxuICogaW4gdGhlIG9wdGlvbmFsIGBvcHRpb25zYCBvYmplY3QuXG4gKlxuICogSWxsZWdhbCBDaGFyYWN0ZXJzIG9uIFZhcmlvdXMgT3BlcmF0aW5nIFN5c3RlbXNcbiAqIC8gPyA8ID4gXFwgOiAqIHwgXCJcbiAqIGh0dHBzOi8va2IuYWNyb25pcy5jb20vY29udGVudC8zOTc5MFxuICpcbiAqIFVuaWNvZGUgQ29udHJvbCBjb2Rlc1xuICogQzAgMHgwMC0weDFmICYgQzEgKDB4ODAtMHg5ZilcbiAqIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQzBfYW5kX0MxX2NvbnRyb2xfY29kZXNcbiAqXG4gKiBSZXNlcnZlZCBmaWxlbmFtZXMgb24gVW5peC1iYXNlZCBzeXN0ZW1zIChcIi5cIiwgXCIuLlwiKVxuICogUmVzZXJ2ZWQgZmlsZW5hbWVzIGluIFdpbmRvd3MgKFwiQ09OXCIsIFwiUFJOXCIsIFwiQVVYXCIsIFwiTlVMXCIsIFwiQ09NMVwiLFxuICogXCJDT00yXCIsIFwiQ09NM1wiLCBcIkNPTTRcIiwgXCJDT001XCIsIFwiQ09NNlwiLCBcIkNPTTdcIiwgXCJDT004XCIsIFwiQ09NOVwiLFxuICogXCJMUFQxXCIsIFwiTFBUMlwiLCBcIkxQVDNcIiwgXCJMUFQ0XCIsIFwiTFBUNVwiLCBcIkxQVDZcIiwgXCJMUFQ3XCIsIFwiTFBUOFwiLCBhbmRcbiAqIFwiTFBUOVwiKSBjYXNlLWluc2VzaXRpdmVseSBhbmQgd2l0aCBvciB3aXRob3V0IGZpbGVuYW1lIGV4dGVuc2lvbnMuXG4gKlxuICogQ2FwcGVkIGF0IDI1NSBjaGFyYWN0ZXJzIGluIGxlbmd0aC5cbiAqIGh0dHA6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy8zMjc5NS93aGF0LWlzLXRoZS1tYXhpbXVtLWFsbG93ZWQtZmlsZW5hbWUtYW5kLWZvbGRlci1zaXplLXdpdGgtZWNyeXB0ZnNcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGlucHV0ICAgT3JpZ2luYWwgZmlsZW5hbWVcbiAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9ucyB7cmVwbGFjZW1lbnQ6IFN0cmluZyB8IEZ1bmN0aW9uIH1cbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICBTYW5pdGl6ZWQgZmlsZW5hbWVcbiAqL1xuXG52YXIgdHJ1bmNhdGUgPSByZXF1aXJlKFwidHJ1bmNhdGUtdXRmOC1ieXRlc1wiKTtcblxudmFyIGlsbGVnYWxSZSA9IC9bXFwvXFw/PD5cXFxcOlxcKlxcfFwiXS9nO1xudmFyIGNvbnRyb2xSZSA9IC9bXFx4MDAtXFx4MWZcXHg4MC1cXHg5Zl0vZztcbnZhciByZXNlcnZlZFJlID0gL15cXC4rJC87XG52YXIgd2luZG93c1Jlc2VydmVkUmUgPSAvXihjb258cHJufGF1eHxudWx8Y29tWzAtOV18bHB0WzAtOV0pKFxcLi4qKT8kL2k7XG52YXIgd2luZG93c1RyYWlsaW5nUmUgPSAvW1xcLiBdKyQvO1xuXG5mdW5jdGlvbiBzYW5pdGl6ZShpbnB1dCwgcmVwbGFjZW1lbnQpIHtcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IG11c3QgYmUgc3RyaW5nJyk7XG4gIH1cbiAgdmFyIHNhbml0aXplZCA9IGlucHV0XG4gICAgLnJlcGxhY2UoaWxsZWdhbFJlLCByZXBsYWNlbWVudClcbiAgICAucmVwbGFjZShjb250cm9sUmUsIHJlcGxhY2VtZW50KVxuICAgIC5yZXBsYWNlKHJlc2VydmVkUmUsIHJlcGxhY2VtZW50KVxuICAgIC5yZXBsYWNlKHdpbmRvd3NSZXNlcnZlZFJlLCByZXBsYWNlbWVudClcbiAgICAucmVwbGFjZSh3aW5kb3dzVHJhaWxpbmdSZSwgcmVwbGFjZW1lbnQpO1xuICByZXR1cm4gdHJ1bmNhdGUoc2FuaXRpemVkLCAyNTUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpbnB1dCwgb3B0aW9ucykge1xuICB2YXIgcmVwbGFjZW1lbnQgPSAob3B0aW9ucyAmJiBvcHRpb25zLnJlcGxhY2VtZW50KSB8fCAnJztcbiAgdmFyIG91dHB1dCA9IHNhbml0aXplKGlucHV0LCByZXBsYWNlbWVudCk7XG4gIGlmIChyZXBsYWNlbWVudCA9PT0gJycpIHtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIHJldHVybiBzYW5pdGl6ZShvdXRwdXQsICcnKTtcbn07XG4iLCJpbXBvcnQgeyBpbmplY3QsIGluamVjdGFibGUgfSBmcm9tICdpbnZlcnNpZnknO1xyXG5pbXBvcnQgeyBnZXRMb2NhbFN0b3JhZ2UsIHNldFN0b3JhZ2VWYWwgfSBmcm9tICcuLi9hcGkvc2VydmVyLWFwaSc7XHJcbmltcG9ydCB7IGRlZmF1bHRDb25maWcsIFBMVUdJTl9TWVNURU1fUExVR0lOLCBQTFVHSU5fU1lTVEVNX1NBRkVfTU9ERV9FTkFCTEVELCBQTFVHSU5fU1lTVEVNX1RISVJEX1BBUlRZX1BMVUdJTiB9IGZyb20gJy4vcGx1Z2luLWNvbmZpZyc7XHJcbmltcG9ydCB7IGludGVybmFsUGx1Z2lucyB9IGZyb20gJy4uL2ludGVybmFsJztcclxuaW1wb3J0IHsgVFlQRVMgfSBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQgeyBJUGx1Z2luRmlsZU1hbmFnZXIsIElTdG9yYWdlTWFuYWdlciwgUGx1Z2luQ29uZmlnLCBQbHVnaW5FbmFibGVDb25maWcsIFBsdWdpbk1hbmlmZXN0IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBzaG93RXJyb3JNZXNzYWdlIH0gZnJvbSAnQC91dGlsJztcclxuaW1wb3J0IHNhbml0aXplIGZyb20gJ3Nhbml0aXplLWZpbGVuYW1lJztcclxuaW1wb3J0IHsgRmlsZUNsaWVudCB9IGZyb20gJ0AvYXBpL2ZpbGUtYXBpJztcclxuXHJcbkBpbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFN0b3JhZ2VNYW5hZ2VyIGltcGxlbWVudHMgSVN0b3JhZ2VNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgcGx1Z2luRmlsZU1hbmFnZXI6IElQbHVnaW5GaWxlTWFuYWdlcjtcclxuXHJcbiAgICBwcml2YXRlIGNvbmZpZzogUGx1Z2luQ29uZmlnO1xyXG5cclxuICAgIHByaXZhdGUgaW50ZXJuYWxQbHVnaW5zOiBQbHVnaW5NYW5pZmVzdFtdO1xyXG5cclxuICAgIHByaXZhdGUgdGhpcmRQYXJ0eVBsdWdpbnM6IFBsdWdpbk1hbmlmZXN0W107XHJcblxyXG4gICAgY29uc3RydWN0b3IoQGluamVjdChUWVBFUy5QbHVnaW5GaWxlTWFuYWdlcikgcGx1Z2luRmlsZU1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRDb25maWcpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luRmlsZU1hbmFnZXIgPSBwbHVnaW5GaWxlTWFuYWdlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0KGtleToga2V5b2YgUGx1Z2luQ29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnW2tleV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNldChrZXk6IHN0cmluZywgdmFsOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ1trZXldID0gdmFsO1xyXG4gICAgICAgIHJldHVybiBzZXRTdG9yYWdlVmFsKGtleSwgdmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBpbml0U3RvcmFnZSgpIHtcclxuICAgICAgICBjb25zdCBhbGwgPSBhd2FpdCBnZXRMb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICBjb25zdCBjb25maWdLZXlzID0gT2JqZWN0LmtleXMoZGVmYXVsdENvbmZpZyk7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgY29uZmlnS2V5cykge1xyXG4gICAgICAgICAgICBpZiAoYWxsW2tleV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWdba2V5XSA9IGFsbFtrZXldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2V0U3RvcmFnZVZhbChrZXksIGRlZmF1bHRDb25maWdba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gbG9hZCBhbGwgcGx1Z2luc1xyXG4gICAgICAgIHRoaXMudGhpcmRQYXJ0eVBsdWdpbnMgPSBhd2FpdCB0aGlzLnBsdWdpbkZpbGVNYW5hZ2VyLmdldEFsbFBsdWdpbnMoKTtcclxuICAgICAgICB0aGlzLmludGVybmFsUGx1Z2lucyA9IFsuLi5pbnRlcm5hbFBsdWdpbnNdO1xyXG4gICAgICAgIHRoaXMuaW5pdDNyZFBhcnR5RW5hYmxlZCgpO1xyXG4gICAgICAgIHRoaXMuaW5pdEludGVybmFsRW5hYmxlZCgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVBsdWdpbnNFbmFibGVkKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdDNyZFBhcnR5RW5hYmxlZCgpIHtcclxuICAgICAgICBjb25zdCBlbmFibGVkUGx1Z2lucyA9IHRoaXMuZ2V0KFBMVUdJTl9TWVNURU1fVEhJUkRfUEFSVFlfUExVR0lOKSBhcyBQbHVnaW5FbmFibGVDb25maWdbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGVwIG9mIGVuYWJsZWRQbHVnaW5zKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiB0aGlzLnRoaXJkUGFydHlQbHVnaW5zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocC5rZXkgPT09IGVwLmtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHAuZW5hYmxlZCA9IGVwLmVuYWJsZWQgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0SW50ZXJuYWxFbmFibGVkKCkge1xyXG4gICAgICAgIGNvbnN0IGVuYWJsZWRQbHVnaW5zID0gdGhpcy5nZXQoUExVR0lOX1NZU1RFTV9QTFVHSU4pIGFzIFBsdWdpbkVuYWJsZUNvbmZpZ1tdO1xyXG4gICAgICAgIGZvciAoY29uc3QgZXAgb2YgZW5hYmxlZFBsdWdpbnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBwIG9mIHRoaXMuaW50ZXJuYWxQbHVnaW5zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocC5rZXkgPT09IGVwLmtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHAuZW5hYmxlZCA9IGVwLmVuYWJsZWQgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBsdWdpbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmludGVybmFsUGx1Z2lucywgLi4udGhpcy50aGlyZFBhcnR5UGx1Z2luc107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEludGVybmFsUGx1Z2lucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFBsdWdpbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRoaXJkUGFydHlQbHVnaW5zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRoaXJkUGFydHlQbHVnaW5zO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQbHVnaW5CeUtleShrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRQbHVnaW5zKCkuZmluZCgocCkgPT4gcC5rZXkgPT09IGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNldFBsdWdpbkVuYWJsZWQoa2V5OiBzdHJpbmcsIGVuYWJsZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHAgb2YgWy4uLnRoaXMuaW50ZXJuYWxQbHVnaW5zLCAuLi50aGlzLnRoaXJkUGFydHlQbHVnaW5zXSkge1xyXG4gICAgICAgICAgICBpZiAocC5rZXkgPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgcC5lbmFibGVkID0gZW5hYmxlZDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVBsdWdpbnNFbmFibGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNldFNhZmVNb2RlRW5hYmxlZChlbmFibGVkOiBib29sZWFuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0KFBMVUdJTl9TWVNURU1fU0FGRV9NT0RFX0VOQUJMRUQsIGVuYWJsZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlUGx1Z2luc0VuYWJsZWQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXQoXHJcbiAgICAgICAgICAgIFBMVUdJTl9TWVNURU1fUExVR0lOLFxyXG4gICAgICAgICAgICB0aGlzLmludGVybmFsUGx1Z2lucy5tYXAoKHApID0+ICh7IGtleTogcC5rZXksIGVuYWJsZWQ6IHAuZW5hYmxlZCB9KSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldChcclxuICAgICAgICAgICAgUExVR0lOX1NZU1RFTV9USElSRF9QQVJUWV9QTFVHSU4sXHJcbiAgICAgICAgICAgIHRoaXMudGhpcmRQYXJ0eVBsdWdpbnMubWFwKChwKSA9PiAoeyBrZXk6IHAua2V5LCBlbmFibGVkOiBwLmVuYWJsZWQgfSkpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgc2V0UGx1Z2luU3RvcmFnZShwbHVnaW5LZXk6IHN0cmluZywgZmlsZW5hbWU6IHN0cmluZywgY29udGVudDogYW55KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNGaWxlTmFtZUlsbGVnYWwoZmlsZW5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlKGDmj5Lku7Yke3BsdWdpbktleX3lrZjlgqjmlofku7blkI3kuI3lkIjms5VgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFBsdWdpblN0b3JhZ2VGb2xkZXJJZk5vdEV4aXN0KHBsdWdpbktleSk7XHJcbiAgICAgICAgICAgIGF3YWl0IEZpbGVDbGllbnQuZ2V0SW5zdGFuY2VBcGkoKS5maWxlQXBpLnB1dEZpbGUoYC9kYXRhL3BsdWdpbnMvLnN0b3JhZ2UvJHtwbHVnaW5LZXl9LyR7ZmlsZW5hbWV9YCwgY29udGVudCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlKGDmj5Lku7Yke3BsdWdpbktleX3lrZjlgqjkv53lrZjlpLHotKVgLCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFBsdWdpblN0b3JhZ2UocGx1Z2luS2V5OiBzdHJpbmcsIGZpbGVuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IEZpbGVDbGllbnQuZ2V0SW5zdGFuY2VBcGkoKS5maWxlQXBpLmdldEZpbGUoYC9kYXRhL3BsdWdpbnMvLnN0b3JhZ2UvJHtwbHVnaW5LZXl9LyR7ZmlsZW5hbWV9YCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlKGDmj5Lku7Yke3BsdWdpbktleX3lrZjlgqjkv53lrZjlpLHotKVgLCAyMDAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyB1bmluc3RhbGxQbHVnaW4ocGx1Z2luS2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCBGaWxlQ2xpZW50LmdldEluc3RhbmNlQXBpKCkuZmlsZUFwaS5yZW1vdmVGaWxlKGAvZGF0YS9wbHVnaW5zLyR7cGx1Z2luS2V5fWApO1xyXG4gICAgICAgIGF3YWl0IEZpbGVDbGllbnQuZ2V0SW5zdGFuY2VBcGkoKS5maWxlQXBpLnJlbW92ZUZpbGUoYC9kYXRhL3BsdWdpbnMvLy5zdG9yYWdlLyR7cGx1Z2luS2V5fWApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkUGx1Z2luU3RvcmFnZUZvbGRlcklmTm90RXhpc3QocGx1Z2luS2V5OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBmb2xkZXIgPSBgL2RhdGEvcGx1Z2lucy8uc3RvcmFnZS8ke3BsdWdpbktleX1gO1xyXG4gICAgICAgIGF3YWl0IEZpbGVDbGllbnQuZ2V0SW5zdGFuY2VBcGkoKS5maWxlQXBpLnB1dEZpbGUoZm9sZGVyLCBudWxsLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzRmlsZU5hbWVJbGxlZ2FsKGZpbGVuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gZmlsZW5hbWUgIT09IHNhbml0aXplKGZpbGVuYW1lKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgJ3JlZmxlY3QtbWV0YWRhdGEnO1xyXG5pbXBvcnQgeyBpbmplY3QsIGluamVjdGFibGUgfSBmcm9tICdpbnZlcnNpZnknO1xyXG5pbXBvcnQgeyBUWVBFUywgVkVSU0lPTiB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IElQbHVnaW5TeXN0ZW0sIElTdG9yYWdlTWFuYWdlciB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgUExVR0lOX1NZU1RFTV9TQUZFX01PREVfRU5BQkxFRCB9IGZyb20gJy4vcGx1Z2luLWNvbmZpZyc7XHJcbmltcG9ydCB7IGxvZyB9IGZyb20gJy4uL3V0aWwnO1xyXG5cclxuQGluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgUGx1Z2luU3lzdGVtIGltcGxlbWVudHMgSVBsdWdpblN5c3RlbSB7XHJcbiAgICBwdWJsaWMgdmVyc2lvbiA9IFZFUlNJT047XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgQGluamVjdChUWVBFUy5QbHVnaW5Mb2FkZXIpIHByaXZhdGUgcGx1Z2luTG9hZGVyLFxyXG4gICAgICAgIEBpbmplY3QoVFlQRVMuU3lzdGVtTWFuYWdlcikgcHJpdmF0ZSBwc2xtLFxyXG4gICAgICAgIEBpbmplY3QoVFlQRVMuU3RvcmFnZU1hbmFnZXIpIHByaXZhdGUgc3RvcmFnZU1hbmFnZXI6IElTdG9yYWdlTWFuYWdlcixcclxuICAgICAgICBAaW5qZWN0KFRZUEVTLkNvbW1hbmRNYW5hZ2VyKSBwcml2YXRlIGNvbW1hbmRNYW5hZ2VyLFxyXG4gICAgICAgIEBpbmplY3QoVFlQRVMuU3RvcmUpIHByaXZhdGUgc3RvcmVcclxuICAgICkge31cclxuXHJcbiAgICBhc3luYyBpbml0KCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc3RvcmFnZU1hbmFnZXIuaW5pdFN0b3JhZ2UoKTtcclxuICAgICAgICBjb25zdCBpbnRlcm5hbFBsdWdpbnMgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldEludGVybmFsUGx1Z2lucygpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luTG9hZGVyLmxvYWRFbmFibGVkUGx1Z2lucyhpbnRlcm5hbFBsdWdpbnMpO1xyXG4gICAgICAgIGxvZyhgTG9hZGluZyBpbnRlcm5hbCBlbmFibGVkIHBsdWdpbnM6ICR7aW50ZXJuYWxQbHVnaW5zLm1hcCgocCkgPT4gcC5rZXkpLmpvaW4oJywnKX1gKTtcclxuICAgICAgICBjb25zdCBzZWN1cml0eU1vZGVFbmFibGVkID0gdGhpcy5zdG9yYWdlTWFuYWdlci5nZXQoUExVR0lOX1NZU1RFTV9TQUZFX01PREVfRU5BQkxFRCk7XHJcbiAgICAgICAgaWYgKCFzZWN1cml0eU1vZGVFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsdWdpbnMgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldFRoaXJkUGFydHlQbHVnaW5zKCk7XHJcbiAgICAgICAgICAgIGxvZyhgTG9hZGluZyAzcmQgcGFydHkgZW5hYmxlZCBwbHVnaW5zOiAke3BsdWdpbnMubWFwKChwKSA9PiBwLmtleSkuam9pbignLCcpfWApO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbkxvYWRlci5sb2FkRW5hYmxlZFBsdWdpbnMocGx1Z2lucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucHNsbS5sb2NhbENhY2hlSW5pdCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRQbHVnaW4oa2V5OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNldFBsdWdpbkVuYWJsZWQoa2V5LCB0cnVlKTtcclxuICAgICAgICBjb25zdCBwbHVnaW4gPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldFBsdWdpbkJ5S2V5KGtleSk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW5Mb2FkZXIubG9hZFBsdWdpbihwbHVnaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVubG9hZFBsdWdpbihrZXk6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIuc2V0UGx1Z2luRW5hYmxlZChrZXksIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnBsdWdpbkxvYWRlci51bmxvYWRQbHVnaW4oa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB0dXJuT2ZmU2FmZU1vZGUoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlTWFuYWdlci5zZXRTYWZlTW9kZUVuYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IHBsdWdpbnMgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldFRoaXJkUGFydHlQbHVnaW5zKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGx1Z2luTG9hZGVyLmxvYWRFbmFibGVkUGx1Z2lucyhwbHVnaW5zKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB0dXJuT25TYWZlTW9kZSgpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNldFNhZmVNb2RlRW5hYmxlZCh0cnVlKTtcclxuICAgICAgICBjb25zdCBwbHVnaW5zID0gdGhpcy5zdG9yYWdlTWFuYWdlci5nZXRUaGlyZFBhcnR5UGx1Z2lucygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsdWdpbkxvYWRlci51bmxvYWRUaGlyZFBhcnR5UGx1Z2lucyhwbHVnaW5zKTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBOb3RlOiB0aGlzIGlzIHRoZSBzZW12ZXIub3JnIHZlcnNpb24gb2YgdGhlIHNwZWMgdGhhdCBpdCBpbXBsZW1lbnRzXG4vLyBOb3QgbmVjZXNzYXJpbHkgdGhlIHBhY2thZ2UgdmVyc2lvbiBvZiB0aGlzIGNvZGUuXG5jb25zdCBTRU1WRVJfU1BFQ19WRVJTSU9OID0gJzIuMC4wJ1xuXG5jb25zdCBNQVhfTEVOR1RIID0gMjU2XG5jb25zdCBNQVhfU0FGRV9JTlRFR0VSID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgfHxcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIDkwMDcxOTkyNTQ3NDA5OTFcblxuLy8gTWF4IHNhZmUgc2VnbWVudCBsZW5ndGggZm9yIGNvZXJjaW9uLlxuY29uc3QgTUFYX1NBRkVfQ09NUE9ORU5UX0xFTkdUSCA9IDE2XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBTRU1WRVJfU1BFQ19WRVJTSU9OLFxuICBNQVhfTEVOR1RILFxuICBNQVhfU0FGRV9JTlRFR0VSLFxuICBNQVhfU0FGRV9DT01QT05FTlRfTEVOR1RILFxufVxuIiwiY29uc3QgZGVidWcgPSAoXG4gIHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JyAmJlxuICBwcm9jZXNzLmVudiAmJlxuICBwcm9jZXNzLmVudi5OT0RFX0RFQlVHICYmXG4gIC9cXGJzZW12ZXJcXGIvaS50ZXN0KHByb2Nlc3MuZW52Lk5PREVfREVCVUcpXG4pID8gKC4uLmFyZ3MpID0+IGNvbnNvbGUuZXJyb3IoJ1NFTVZFUicsIC4uLmFyZ3MpXG4gIDogKCkgPT4ge31cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJ1Z1xuIiwiY29uc3QgeyBNQVhfU0FGRV9DT01QT05FTlRfTEVOR1RIIH0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJy4vZGVidWcnKVxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0ge31cblxuLy8gVGhlIGFjdHVhbCByZWdleHBzIGdvIG9uIGV4cG9ydHMucmVcbmNvbnN0IHJlID0gZXhwb3J0cy5yZSA9IFtdXG5jb25zdCBzcmMgPSBleHBvcnRzLnNyYyA9IFtdXG5jb25zdCB0ID0gZXhwb3J0cy50ID0ge31cbmxldCBSID0gMFxuXG5jb25zdCBjcmVhdGVUb2tlbiA9IChuYW1lLCB2YWx1ZSwgaXNHbG9iYWwpID0+IHtcbiAgY29uc3QgaW5kZXggPSBSKytcbiAgZGVidWcobmFtZSwgaW5kZXgsIHZhbHVlKVxuICB0W25hbWVdID0gaW5kZXhcbiAgc3JjW2luZGV4XSA9IHZhbHVlXG4gIHJlW2luZGV4XSA9IG5ldyBSZWdFeHAodmFsdWUsIGlzR2xvYmFsID8gJ2cnIDogdW5kZWZpbmVkKVxufVxuXG4vLyBUaGUgZm9sbG93aW5nIFJlZ3VsYXIgRXhwcmVzc2lvbnMgY2FuIGJlIHVzZWQgZm9yIHRva2VuaXppbmcsXG4vLyB2YWxpZGF0aW5nLCBhbmQgcGFyc2luZyBTZW1WZXIgdmVyc2lvbiBzdHJpbmdzLlxuXG4vLyAjIyBOdW1lcmljIElkZW50aWZpZXJcbi8vIEEgc2luZ2xlIGAwYCwgb3IgYSBub24temVybyBkaWdpdCBmb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgZGlnaXRzLlxuXG5jcmVhdGVUb2tlbignTlVNRVJJQ0lERU5USUZJRVInLCAnMHxbMS05XVxcXFxkKicpXG5jcmVhdGVUb2tlbignTlVNRVJJQ0lERU5USUZJRVJMT09TRScsICdbMC05XSsnKVxuXG4vLyAjIyBOb24tbnVtZXJpYyBJZGVudGlmaWVyXG4vLyBaZXJvIG9yIG1vcmUgZGlnaXRzLCBmb2xsb3dlZCBieSBhIGxldHRlciBvciBoeXBoZW4sIGFuZCB0aGVuIHplcm8gb3Jcbi8vIG1vcmUgbGV0dGVycywgZGlnaXRzLCBvciBoeXBoZW5zLlxuXG5jcmVhdGVUb2tlbignTk9OTlVNRVJJQ0lERU5USUZJRVInLCAnXFxcXGQqW2EtekEtWi1dW2EtekEtWjAtOS1dKicpXG5cbi8vICMjIE1haW4gVmVyc2lvblxuLy8gVGhyZWUgZG90LXNlcGFyYXRlZCBudW1lcmljIGlkZW50aWZpZXJzLlxuXG5jcmVhdGVUb2tlbignTUFJTlZFUlNJT04nLCBgKCR7c3JjW3QuTlVNRVJJQ0lERU5USUZJRVJdfSlcXFxcLmAgK1xuICAgICAgICAgICAgICAgICAgIGAoJHtzcmNbdC5OVU1FUklDSURFTlRJRklFUl19KVxcXFwuYCArXG4gICAgICAgICAgICAgICAgICAgYCgke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSXX0pYClcblxuY3JlYXRlVG9rZW4oJ01BSU5WRVJTSU9OTE9PU0UnLCBgKCR7c3JjW3QuTlVNRVJJQ0lERU5USUZJRVJMT09TRV19KVxcXFwuYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgKCR7c3JjW3QuTlVNRVJJQ0lERU5USUZJRVJMT09TRV19KVxcXFwuYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgKCR7c3JjW3QuTlVNRVJJQ0lERU5USUZJRVJMT09TRV19KWApXG5cbi8vICMjIFByZS1yZWxlYXNlIFZlcnNpb24gSWRlbnRpZmllclxuLy8gQSBudW1lcmljIGlkZW50aWZpZXIsIG9yIGEgbm9uLW51bWVyaWMgaWRlbnRpZmllci5cblxuY3JlYXRlVG9rZW4oJ1BSRVJFTEVBU0VJREVOVElGSUVSJywgYCg/OiR7c3JjW3QuTlVNRVJJQ0lERU5USUZJRVJdXG59fCR7c3JjW3QuTk9OTlVNRVJJQ0lERU5USUZJRVJdfSlgKVxuXG5jcmVhdGVUb2tlbignUFJFUkVMRUFTRUlERU5USUZJRVJMT09TRScsIGAoPzoke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSTE9PU0VdXG59fCR7c3JjW3QuTk9OTlVNRVJJQ0lERU5USUZJRVJdfSlgKVxuXG4vLyAjIyBQcmUtcmVsZWFzZSBWZXJzaW9uXG4vLyBIeXBoZW4sIGZvbGxvd2VkIGJ5IG9uZSBvciBtb3JlIGRvdC1zZXBhcmF0ZWQgcHJlLXJlbGVhc2UgdmVyc2lvblxuLy8gaWRlbnRpZmllcnMuXG5cbmNyZWF0ZVRva2VuKCdQUkVSRUxFQVNFJywgYCg/Oi0oJHtzcmNbdC5QUkVSRUxFQVNFSURFTlRJRklFUl1cbn0oPzpcXFxcLiR7c3JjW3QuUFJFUkVMRUFTRUlERU5USUZJRVJdfSkqKSlgKVxuXG5jcmVhdGVUb2tlbignUFJFUkVMRUFTRUxPT1NFJywgYCg/Oi0/KCR7c3JjW3QuUFJFUkVMRUFTRUlERU5USUZJRVJMT09TRV1cbn0oPzpcXFxcLiR7c3JjW3QuUFJFUkVMRUFTRUlERU5USUZJRVJMT09TRV19KSopKWApXG5cbi8vICMjIEJ1aWxkIE1ldGFkYXRhIElkZW50aWZpZXJcbi8vIEFueSBjb21iaW5hdGlvbiBvZiBkaWdpdHMsIGxldHRlcnMsIG9yIGh5cGhlbnMuXG5cbmNyZWF0ZVRva2VuKCdCVUlMRElERU5USUZJRVInLCAnWzAtOUEtWmEtei1dKycpXG5cbi8vICMjIEJ1aWxkIE1ldGFkYXRhXG4vLyBQbHVzIHNpZ24sIGZvbGxvd2VkIGJ5IG9uZSBvciBtb3JlIHBlcmlvZC1zZXBhcmF0ZWQgYnVpbGQgbWV0YWRhdGFcbi8vIGlkZW50aWZpZXJzLlxuXG5jcmVhdGVUb2tlbignQlVJTEQnLCBgKD86XFxcXCsoJHtzcmNbdC5CVUlMRElERU5USUZJRVJdXG59KD86XFxcXC4ke3NyY1t0LkJVSUxESURFTlRJRklFUl19KSopKWApXG5cbi8vICMjIEZ1bGwgVmVyc2lvbiBTdHJpbmdcbi8vIEEgbWFpbiB2ZXJzaW9uLCBmb2xsb3dlZCBvcHRpb25hbGx5IGJ5IGEgcHJlLXJlbGVhc2UgdmVyc2lvbiBhbmRcbi8vIGJ1aWxkIG1ldGFkYXRhLlxuXG4vLyBOb3RlIHRoYXQgdGhlIG9ubHkgbWFqb3IsIG1pbm9yLCBwYXRjaCwgYW5kIHByZS1yZWxlYXNlIHNlY3Rpb25zIG9mXG4vLyB0aGUgdmVyc2lvbiBzdHJpbmcgYXJlIGNhcHR1cmluZyBncm91cHMuICBUaGUgYnVpbGQgbWV0YWRhdGEgaXMgbm90IGFcbi8vIGNhcHR1cmluZyBncm91cCwgYmVjYXVzZSBpdCBzaG91bGQgbm90IGV2ZXIgYmUgdXNlZCBpbiB2ZXJzaW9uXG4vLyBjb21wYXJpc29uLlxuXG5jcmVhdGVUb2tlbignRlVMTFBMQUlOJywgYHY/JHtzcmNbdC5NQUlOVkVSU0lPTl1cbn0ke3NyY1t0LlBSRVJFTEVBU0VdfT8ke1xuICBzcmNbdC5CVUlMRF19P2ApXG5cbmNyZWF0ZVRva2VuKCdGVUxMJywgYF4ke3NyY1t0LkZVTExQTEFJTl19JGApXG5cbi8vIGxpa2UgZnVsbCwgYnV0IGFsbG93cyB2MS4yLjMgYW5kID0xLjIuMywgd2hpY2ggcGVvcGxlIGRvIHNvbWV0aW1lcy5cbi8vIGFsc28sIDEuMC4wYWxwaGExIChwcmVyZWxlYXNlIHdpdGhvdXQgdGhlIGh5cGhlbikgd2hpY2ggaXMgcHJldHR5XG4vLyBjb21tb24gaW4gdGhlIG5wbSByZWdpc3RyeS5cbmNyZWF0ZVRva2VuKCdMT09TRVBMQUlOJywgYFt2PVxcXFxzXSoke3NyY1t0Lk1BSU5WRVJTSU9OTE9PU0VdXG59JHtzcmNbdC5QUkVSRUxFQVNFTE9PU0VdfT8ke1xuICBzcmNbdC5CVUlMRF19P2ApXG5cbmNyZWF0ZVRva2VuKCdMT09TRScsIGBeJHtzcmNbdC5MT09TRVBMQUlOXX0kYClcblxuY3JlYXRlVG9rZW4oJ0dUTFQnLCAnKCg/Ojx8Pik/PT8pJylcblxuLy8gU29tZXRoaW5nIGxpa2UgXCIyLipcIiBvciBcIjEuMi54XCIuXG4vLyBOb3RlIHRoYXQgXCJ4LnhcIiBpcyBhIHZhbGlkIHhSYW5nZSBpZGVudGlmZXIsIG1lYW5pbmcgXCJhbnkgdmVyc2lvblwiXG4vLyBPbmx5IHRoZSBmaXJzdCBpdGVtIGlzIHN0cmljdGx5IHJlcXVpcmVkLlxuY3JlYXRlVG9rZW4oJ1hSQU5HRUlERU5USUZJRVJMT09TRScsIGAke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSTE9PU0VdfXx4fFh8XFxcXCpgKVxuY3JlYXRlVG9rZW4oJ1hSQU5HRUlERU5USUZJRVInLCBgJHtzcmNbdC5OVU1FUklDSURFTlRJRklFUl19fHh8WHxcXFxcKmApXG5cbmNyZWF0ZVRva2VuKCdYUkFOR0VQTEFJTicsIGBbdj1cXFxcc10qKCR7c3JjW3QuWFJBTkdFSURFTlRJRklFUl19KWAgK1xuICAgICAgICAgICAgICAgICAgIGAoPzpcXFxcLigke3NyY1t0LlhSQU5HRUlERU5USUZJRVJdfSlgICtcbiAgICAgICAgICAgICAgICAgICBgKD86XFxcXC4oJHtzcmNbdC5YUkFOR0VJREVOVElGSUVSXX0pYCArXG4gICAgICAgICAgICAgICAgICAgYCg/OiR7c3JjW3QuUFJFUkVMRUFTRV19KT8ke1xuICAgICAgICAgICAgICAgICAgICAgc3JjW3QuQlVJTERdfT9gICtcbiAgICAgICAgICAgICAgICAgICBgKT8pP2ApXG5cbmNyZWF0ZVRva2VuKCdYUkFOR0VQTEFJTkxPT1NFJywgYFt2PVxcXFxzXSooJHtzcmNbdC5YUkFOR0VJREVOVElGSUVSTE9PU0VdfSlgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGAoPzpcXFxcLigke3NyY1t0LlhSQU5HRUlERU5USUZJRVJMT09TRV19KWAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCg/OlxcXFwuKCR7c3JjW3QuWFJBTkdFSURFTlRJRklFUkxPT1NFXX0pYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgKD86JHtzcmNbdC5QUkVSRUxFQVNFTE9PU0VdfSk/JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjW3QuQlVJTERdfT9gICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGApPyk/YClcblxuY3JlYXRlVG9rZW4oJ1hSQU5HRScsIGBeJHtzcmNbdC5HVExUXX1cXFxccyoke3NyY1t0LlhSQU5HRVBMQUlOXX0kYClcbmNyZWF0ZVRva2VuKCdYUkFOR0VMT09TRScsIGBeJHtzcmNbdC5HVExUXX1cXFxccyoke3NyY1t0LlhSQU5HRVBMQUlOTE9PU0VdfSRgKVxuXG4vLyBDb2VyY2lvbi5cbi8vIEV4dHJhY3QgYW55dGhpbmcgdGhhdCBjb3VsZCBjb25jZWl2YWJseSBiZSBhIHBhcnQgb2YgYSB2YWxpZCBzZW12ZXJcbmNyZWF0ZVRva2VuKCdDT0VSQ0UnLCBgJHsnKF58W15cXFxcZF0pJyArXG4gICAgICAgICAgICAgICcoXFxcXGR7MSwnfSR7TUFYX1NBRkVfQ09NUE9ORU5UX0xFTkdUSH19KWAgK1xuICAgICAgICAgICAgICBgKD86XFxcXC4oXFxcXGR7MSwke01BWF9TQUZFX0NPTVBPTkVOVF9MRU5HVEh9fSkpP2AgK1xuICAgICAgICAgICAgICBgKD86XFxcXC4oXFxcXGR7MSwke01BWF9TQUZFX0NPTVBPTkVOVF9MRU5HVEh9fSkpP2AgK1xuICAgICAgICAgICAgICBgKD86JHxbXlxcXFxkXSlgKVxuY3JlYXRlVG9rZW4oJ0NPRVJDRVJUTCcsIHNyY1t0LkNPRVJDRV0sIHRydWUpXG5cbi8vIFRpbGRlIHJhbmdlcy5cbi8vIE1lYW5pbmcgaXMgXCJyZWFzb25hYmx5IGF0IG9yIGdyZWF0ZXIgdGhhblwiXG5jcmVhdGVUb2tlbignTE9ORVRJTERFJywgJyg/On4+PyknKVxuXG5jcmVhdGVUb2tlbignVElMREVUUklNJywgYChcXFxccyopJHtzcmNbdC5MT05FVElMREVdfVxcXFxzK2AsIHRydWUpXG5leHBvcnRzLnRpbGRlVHJpbVJlcGxhY2UgPSAnJDF+J1xuXG5jcmVhdGVUb2tlbignVElMREUnLCBgXiR7c3JjW3QuTE9ORVRJTERFXX0ke3NyY1t0LlhSQU5HRVBMQUlOXX0kYClcbmNyZWF0ZVRva2VuKCdUSUxERUxPT1NFJywgYF4ke3NyY1t0LkxPTkVUSUxERV19JHtzcmNbdC5YUkFOR0VQTEFJTkxPT1NFXX0kYClcblxuLy8gQ2FyZXQgcmFuZ2VzLlxuLy8gTWVhbmluZyBpcyBcImF0IGxlYXN0IGFuZCBiYWNrd2FyZHMgY29tcGF0aWJsZSB3aXRoXCJcbmNyZWF0ZVRva2VuKCdMT05FQ0FSRVQnLCAnKD86XFxcXF4pJylcblxuY3JlYXRlVG9rZW4oJ0NBUkVUVFJJTScsIGAoXFxcXHMqKSR7c3JjW3QuTE9ORUNBUkVUXX1cXFxccytgLCB0cnVlKVxuZXhwb3J0cy5jYXJldFRyaW1SZXBsYWNlID0gJyQxXidcblxuY3JlYXRlVG9rZW4oJ0NBUkVUJywgYF4ke3NyY1t0LkxPTkVDQVJFVF19JHtzcmNbdC5YUkFOR0VQTEFJTl19JGApXG5jcmVhdGVUb2tlbignQ0FSRVRMT09TRScsIGBeJHtzcmNbdC5MT05FQ0FSRVRdfSR7c3JjW3QuWFJBTkdFUExBSU5MT09TRV19JGApXG5cbi8vIEEgc2ltcGxlIGd0L2x0L2VxIHRoaW5nLCBvciBqdXN0IFwiXCIgdG8gaW5kaWNhdGUgXCJhbnkgdmVyc2lvblwiXG5jcmVhdGVUb2tlbignQ09NUEFSQVRPUkxPT1NFJywgYF4ke3NyY1t0LkdUTFRdfVxcXFxzKigke3NyY1t0LkxPT1NFUExBSU5dfSkkfF4kYClcbmNyZWF0ZVRva2VuKCdDT01QQVJBVE9SJywgYF4ke3NyY1t0LkdUTFRdfVxcXFxzKigke3NyY1t0LkZVTExQTEFJTl19KSR8XiRgKVxuXG4vLyBBbiBleHByZXNzaW9uIHRvIHN0cmlwIGFueSB3aGl0ZXNwYWNlIGJldHdlZW4gdGhlIGd0bHQgYW5kIHRoZSB0aGluZ1xuLy8gaXQgbW9kaWZpZXMsIHNvIHRoYXQgYD4gMS4yLjNgID09PiBgPjEuMi4zYFxuY3JlYXRlVG9rZW4oJ0NPTVBBUkFUT1JUUklNJywgYChcXFxccyopJHtzcmNbdC5HVExUXVxufVxcXFxzKigke3NyY1t0LkxPT1NFUExBSU5dfXwke3NyY1t0LlhSQU5HRVBMQUlOXX0pYCwgdHJ1ZSlcbmV4cG9ydHMuY29tcGFyYXRvclRyaW1SZXBsYWNlID0gJyQxJDIkMydcblxuLy8gU29tZXRoaW5nIGxpa2UgYDEuMi4zIC0gMS4yLjRgXG4vLyBOb3RlIHRoYXQgdGhlc2UgYWxsIHVzZSB0aGUgbG9vc2UgZm9ybSwgYmVjYXVzZSB0aGV5J2xsIGJlXG4vLyBjaGVja2VkIGFnYWluc3QgZWl0aGVyIHRoZSBzdHJpY3Qgb3IgbG9vc2UgY29tcGFyYXRvciBmb3JtXG4vLyBsYXRlci5cbmNyZWF0ZVRva2VuKCdIWVBIRU5SQU5HRScsIGBeXFxcXHMqKCR7c3JjW3QuWFJBTkdFUExBSU5dfSlgICtcbiAgICAgICAgICAgICAgICAgICBgXFxcXHMrLVxcXFxzK2AgK1xuICAgICAgICAgICAgICAgICAgIGAoJHtzcmNbdC5YUkFOR0VQTEFJTl19KWAgK1xuICAgICAgICAgICAgICAgICAgIGBcXFxccyokYClcblxuY3JlYXRlVG9rZW4oJ0hZUEhFTlJBTkdFTE9PU0UnLCBgXlxcXFxzKigke3NyY1t0LlhSQU5HRVBMQUlOTE9PU0VdfSlgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcXFxccystXFxcXHMrYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgKCR7c3JjW3QuWFJBTkdFUExBSU5MT09TRV19KWAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYFxcXFxzKiRgKVxuXG4vLyBTdGFyIHJhbmdlcyBiYXNpY2FsbHkganVzdCBhbGxvdyBhbnl0aGluZyBhdCBhbGwuXG5jcmVhdGVUb2tlbignU1RBUicsICcoPHw+KT89P1xcXFxzKlxcXFwqJylcbi8vID49MC4wLjAgaXMgbGlrZSBhIHN0YXJcbmNyZWF0ZVRva2VuKCdHVEUwJywgJ15cXFxccyo+PVxcXFxzKjBcXFxcLjBcXFxcLjBcXFxccyokJylcbmNyZWF0ZVRva2VuKCdHVEUwUFJFJywgJ15cXFxccyo+PVxcXFxzKjBcXFxcLjBcXFxcLjAtMFxcXFxzKiQnKVxuIiwiLy8gcGFyc2Ugb3V0IGp1c3QgdGhlIG9wdGlvbnMgd2UgY2FyZSBhYm91dCBzbyB3ZSBhbHdheXMgZ2V0IGEgY29uc2lzdGVudFxuLy8gb2JqIHdpdGgga2V5cyBpbiBhIGNvbnNpc3RlbnQgb3JkZXIuXG5jb25zdCBvcHRzID0gWydpbmNsdWRlUHJlcmVsZWFzZScsICdsb29zZScsICdydGwnXVxuY29uc3QgcGFyc2VPcHRpb25zID0gb3B0aW9ucyA9PlxuICAhb3B0aW9ucyA/IHt9XG4gIDogdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnID8geyBsb29zZTogdHJ1ZSB9XG4gIDogb3B0cy5maWx0ZXIoayA9PiBvcHRpb25zW2tdKS5yZWR1Y2UoKG8sIGspID0+IHtcbiAgICBvW2tdID0gdHJ1ZVxuICAgIHJldHVybiBvXG4gIH0sIHt9KVxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZU9wdGlvbnNcbiIsImNvbnN0IG51bWVyaWMgPSAvXlswLTldKyQvXG5jb25zdCBjb21wYXJlSWRlbnRpZmllcnMgPSAoYSwgYikgPT4ge1xuICBjb25zdCBhbnVtID0gbnVtZXJpYy50ZXN0KGEpXG4gIGNvbnN0IGJudW0gPSBudW1lcmljLnRlc3QoYilcblxuICBpZiAoYW51bSAmJiBibnVtKSB7XG4gICAgYSA9ICthXG4gICAgYiA9ICtiXG4gIH1cblxuICByZXR1cm4gYSA9PT0gYiA/IDBcbiAgICA6IChhbnVtICYmICFibnVtKSA/IC0xXG4gICAgOiAoYm51bSAmJiAhYW51bSkgPyAxXG4gICAgOiBhIDwgYiA/IC0xXG4gICAgOiAxXG59XG5cbmNvbnN0IHJjb21wYXJlSWRlbnRpZmllcnMgPSAoYSwgYikgPT4gY29tcGFyZUlkZW50aWZpZXJzKGIsIGEpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb21wYXJlSWRlbnRpZmllcnMsXG4gIHJjb21wYXJlSWRlbnRpZmllcnMsXG59XG4iLCJjb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2RlYnVnJylcbmNvbnN0IHsgTUFYX0xFTkdUSCwgTUFYX1NBRkVfSU5URUdFUiB9ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvY29uc3RhbnRzJylcbmNvbnN0IHsgcmUsIHQgfSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3JlJylcblxuY29uc3QgcGFyc2VPcHRpb25zID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcGFyc2Utb3B0aW9ucycpXG5jb25zdCB7IGNvbXBhcmVJZGVudGlmaWVycyB9ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaWRlbnRpZmllcnMnKVxuY2xhc3MgU2VtVmVyIHtcbiAgY29uc3RydWN0b3IgKHZlcnNpb24sIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gcGFyc2VPcHRpb25zKG9wdGlvbnMpXG5cbiAgICBpZiAodmVyc2lvbiBpbnN0YW5jZW9mIFNlbVZlcikge1xuICAgICAgaWYgKHZlcnNpb24ubG9vc2UgPT09ICEhb3B0aW9ucy5sb29zZSAmJlxuICAgICAgICAgIHZlcnNpb24uaW5jbHVkZVByZXJlbGVhc2UgPT09ICEhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSkge1xuICAgICAgICByZXR1cm4gdmVyc2lvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmVyc2lvbiA9IHZlcnNpb24udmVyc2lvblxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZlcnNpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIFZlcnNpb246ICR7dmVyc2lvbn1gKVxuICAgIH1cblxuICAgIGlmICh2ZXJzaW9uLmxlbmd0aCA+IE1BWF9MRU5HVEgpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgIGB2ZXJzaW9uIGlzIGxvbmdlciB0aGFuICR7TUFYX0xFTkdUSH0gY2hhcmFjdGVyc2BcbiAgICAgIClcbiAgICB9XG5cbiAgICBkZWJ1ZygnU2VtVmVyJywgdmVyc2lvbiwgb3B0aW9ucylcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgdGhpcy5sb29zZSA9ICEhb3B0aW9ucy5sb29zZVxuICAgIC8vIHRoaXMgaXNuJ3QgYWN0dWFsbHkgcmVsZXZhbnQgZm9yIHZlcnNpb25zLCBidXQga2VlcCBpdCBzbyB0aGF0IHdlXG4gICAgLy8gZG9uJ3QgcnVuIGludG8gdHJvdWJsZSBwYXNzaW5nIHRoaXMub3B0aW9ucyBhcm91bmQuXG4gICAgdGhpcy5pbmNsdWRlUHJlcmVsZWFzZSA9ICEhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZVxuXG4gICAgY29uc3QgbSA9IHZlcnNpb24udHJpbSgpLm1hdGNoKG9wdGlvbnMubG9vc2UgPyByZVt0LkxPT1NFXSA6IHJlW3QuRlVMTF0pXG5cbiAgICBpZiAoIW0pIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgVmVyc2lvbjogJHt2ZXJzaW9ufWApXG4gICAgfVxuXG4gICAgdGhpcy5yYXcgPSB2ZXJzaW9uXG5cbiAgICAvLyB0aGVzZSBhcmUgYWN0dWFsbHkgbnVtYmVyc1xuICAgIHRoaXMubWFqb3IgPSArbVsxXVxuICAgIHRoaXMubWlub3IgPSArbVsyXVxuICAgIHRoaXMucGF0Y2ggPSArbVszXVxuXG4gICAgaWYgKHRoaXMubWFqb3IgPiBNQVhfU0FGRV9JTlRFR0VSIHx8IHRoaXMubWFqb3IgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG1ham9yIHZlcnNpb24nKVxuICAgIH1cblxuICAgIGlmICh0aGlzLm1pbm9yID4gTUFYX1NBRkVfSU5URUdFUiB8fCB0aGlzLm1pbm9yIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBtaW5vciB2ZXJzaW9uJylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXRjaCA+IE1BWF9TQUZFX0lOVEVHRVIgfHwgdGhpcy5wYXRjaCA8IDApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgcGF0Y2ggdmVyc2lvbicpXG4gICAgfVxuXG4gICAgLy8gbnVtYmVyaWZ5IGFueSBwcmVyZWxlYXNlIG51bWVyaWMgaWRzXG4gICAgaWYgKCFtWzRdKSB7XG4gICAgICB0aGlzLnByZXJlbGVhc2UgPSBbXVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByZXJlbGVhc2UgPSBtWzRdLnNwbGl0KCcuJykubWFwKChpZCkgPT4ge1xuICAgICAgICBpZiAoL15bMC05XSskLy50ZXN0KGlkKSkge1xuICAgICAgICAgIGNvbnN0IG51bSA9ICtpZFxuICAgICAgICAgIGlmIChudW0gPj0gMCAmJiBudW0gPCBNQVhfU0FGRV9JTlRFR0VSKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVtXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpZFxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLmJ1aWxkID0gbVs1XSA/IG1bNV0uc3BsaXQoJy4nKSA6IFtdXG4gICAgdGhpcy5mb3JtYXQoKVxuICB9XG5cbiAgZm9ybWF0ICgpIHtcbiAgICB0aGlzLnZlcnNpb24gPSBgJHt0aGlzLm1ham9yfS4ke3RoaXMubWlub3J9LiR7dGhpcy5wYXRjaH1gXG4gICAgaWYgKHRoaXMucHJlcmVsZWFzZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMudmVyc2lvbiArPSBgLSR7dGhpcy5wcmVyZWxlYXNlLmpvaW4oJy4nKX1gXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnZlcnNpb25cbiAgfVxuXG4gIHRvU3RyaW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy52ZXJzaW9uXG4gIH1cblxuICBjb21wYXJlIChvdGhlcikge1xuICAgIGRlYnVnKCdTZW1WZXIuY29tcGFyZScsIHRoaXMudmVyc2lvbiwgdGhpcy5vcHRpb25zLCBvdGhlcilcbiAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFNlbVZlcikpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3RoZXIgPT09ICdzdHJpbmcnICYmIG90aGVyID09PSB0aGlzLnZlcnNpb24pIHtcbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH1cbiAgICAgIG90aGVyID0gbmV3IFNlbVZlcihvdGhlciwgdGhpcy5vcHRpb25zKVxuICAgIH1cblxuICAgIGlmIChvdGhlci52ZXJzaW9uID09PSB0aGlzLnZlcnNpb24pIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29tcGFyZU1haW4ob3RoZXIpIHx8IHRoaXMuY29tcGFyZVByZShvdGhlcilcbiAgfVxuXG4gIGNvbXBhcmVNYWluIChvdGhlcikge1xuICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgU2VtVmVyKSkge1xuICAgICAgb3RoZXIgPSBuZXcgU2VtVmVyKG90aGVyLCB0aGlzLm9wdGlvbnMpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIGNvbXBhcmVJZGVudGlmaWVycyh0aGlzLm1ham9yLCBvdGhlci5tYWpvcikgfHxcbiAgICAgIGNvbXBhcmVJZGVudGlmaWVycyh0aGlzLm1pbm9yLCBvdGhlci5taW5vcikgfHxcbiAgICAgIGNvbXBhcmVJZGVudGlmaWVycyh0aGlzLnBhdGNoLCBvdGhlci5wYXRjaClcbiAgICApXG4gIH1cblxuICBjb21wYXJlUHJlIChvdGhlcikge1xuICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgU2VtVmVyKSkge1xuICAgICAgb3RoZXIgPSBuZXcgU2VtVmVyKG90aGVyLCB0aGlzLm9wdGlvbnMpXG4gICAgfVxuXG4gICAgLy8gTk9UIGhhdmluZyBhIHByZXJlbGVhc2UgaXMgPiBoYXZpbmcgb25lXG4gICAgaWYgKHRoaXMucHJlcmVsZWFzZS5sZW5ndGggJiYgIW90aGVyLnByZXJlbGVhc2UubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnByZXJlbGVhc2UubGVuZ3RoICYmIG90aGVyLnByZXJlbGVhc2UubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMVxuICAgIH0gZWxzZSBpZiAoIXRoaXMucHJlcmVsZWFzZS5sZW5ndGggJiYgIW90aGVyLnByZXJlbGVhc2UubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cblxuICAgIGxldCBpID0gMFxuICAgIGRvIHtcbiAgICAgIGNvbnN0IGEgPSB0aGlzLnByZXJlbGVhc2VbaV1cbiAgICAgIGNvbnN0IGIgPSBvdGhlci5wcmVyZWxlYXNlW2ldXG4gICAgICBkZWJ1ZygncHJlcmVsZWFzZSBjb21wYXJlJywgaSwgYSwgYilcbiAgICAgIGlmIChhID09PSB1bmRlZmluZWQgJiYgYiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9IGVsc2UgaWYgKGIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMVxuICAgICAgfSBlbHNlIGlmIChhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9IGVsc2UgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb21wYXJlSWRlbnRpZmllcnMoYSwgYilcbiAgICAgIH1cbiAgICB9IHdoaWxlICgrK2kpXG4gIH1cblxuICBjb21wYXJlQnVpbGQgKG90aGVyKSB7XG4gICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBTZW1WZXIpKSB7XG4gICAgICBvdGhlciA9IG5ldyBTZW1WZXIob3RoZXIsIHRoaXMub3B0aW9ucylcbiAgICB9XG5cbiAgICBsZXQgaSA9IDBcbiAgICBkbyB7XG4gICAgICBjb25zdCBhID0gdGhpcy5idWlsZFtpXVxuICAgICAgY29uc3QgYiA9IG90aGVyLmJ1aWxkW2ldXG4gICAgICBkZWJ1ZygncHJlcmVsZWFzZSBjb21wYXJlJywgaSwgYSwgYilcbiAgICAgIGlmIChhID09PSB1bmRlZmluZWQgJiYgYiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9IGVsc2UgaWYgKGIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMVxuICAgICAgfSBlbHNlIGlmIChhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9IGVsc2UgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb21wYXJlSWRlbnRpZmllcnMoYSwgYilcbiAgICAgIH1cbiAgICB9IHdoaWxlICgrK2kpXG4gIH1cblxuICAvLyBwcmVtaW5vciB3aWxsIGJ1bXAgdGhlIHZlcnNpb24gdXAgdG8gdGhlIG5leHQgbWlub3IgcmVsZWFzZSwgYW5kIGltbWVkaWF0ZWx5XG4gIC8vIGRvd24gdG8gcHJlLXJlbGVhc2UuIHByZW1ham9yIGFuZCBwcmVwYXRjaCB3b3JrIHRoZSBzYW1lIHdheS5cbiAgaW5jIChyZWxlYXNlLCBpZGVudGlmaWVyKSB7XG4gICAgc3dpdGNoIChyZWxlYXNlKSB7XG4gICAgICBjYXNlICdwcmVtYWpvcic6XG4gICAgICAgIHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPSAwXG4gICAgICAgIHRoaXMucGF0Y2ggPSAwXG4gICAgICAgIHRoaXMubWlub3IgPSAwXG4gICAgICAgIHRoaXMubWFqb3IrK1xuICAgICAgICB0aGlzLmluYygncHJlJywgaWRlbnRpZmllcilcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3ByZW1pbm9yJzpcbiAgICAgICAgdGhpcy5wcmVyZWxlYXNlLmxlbmd0aCA9IDBcbiAgICAgICAgdGhpcy5wYXRjaCA9IDBcbiAgICAgICAgdGhpcy5taW5vcisrXG4gICAgICAgIHRoaXMuaW5jKCdwcmUnLCBpZGVudGlmaWVyKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncHJlcGF0Y2gnOlxuICAgICAgICAvLyBJZiB0aGlzIGlzIGFscmVhZHkgYSBwcmVyZWxlYXNlLCBpdCB3aWxsIGJ1bXAgdG8gdGhlIG5leHQgdmVyc2lvblxuICAgICAgICAvLyBkcm9wIGFueSBwcmVyZWxlYXNlcyB0aGF0IG1pZ2h0IGFscmVhZHkgZXhpc3QsIHNpbmNlIHRoZXkgYXJlIG5vdFxuICAgICAgICAvLyByZWxldmFudCBhdCB0aGlzIHBvaW50LlxuICAgICAgICB0aGlzLnByZXJlbGVhc2UubGVuZ3RoID0gMFxuICAgICAgICB0aGlzLmluYygncGF0Y2gnLCBpZGVudGlmaWVyKVxuICAgICAgICB0aGlzLmluYygncHJlJywgaWRlbnRpZmllcilcbiAgICAgICAgYnJlYWtcbiAgICAgIC8vIElmIHRoZSBpbnB1dCBpcyBhIG5vbi1wcmVyZWxlYXNlIHZlcnNpb24sIHRoaXMgYWN0cyB0aGUgc2FtZSBhc1xuICAgICAgLy8gcHJlcGF0Y2guXG4gICAgICBjYXNlICdwcmVyZWxlYXNlJzpcbiAgICAgICAgaWYgKHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmluYygncGF0Y2gnLCBpZGVudGlmaWVyKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5jKCdwcmUnLCBpZGVudGlmaWVyKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdtYWpvcic6XG4gICAgICAgIC8vIElmIHRoaXMgaXMgYSBwcmUtbWFqb3IgdmVyc2lvbiwgYnVtcCB1cCB0byB0aGUgc2FtZSBtYWpvciB2ZXJzaW9uLlxuICAgICAgICAvLyBPdGhlcndpc2UgaW5jcmVtZW50IG1ham9yLlxuICAgICAgICAvLyAxLjAuMC01IGJ1bXBzIHRvIDEuMC4wXG4gICAgICAgIC8vIDEuMS4wIGJ1bXBzIHRvIDIuMC4wXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLm1pbm9yICE9PSAwIHx8XG4gICAgICAgICAgdGhpcy5wYXRjaCAhPT0gMCB8fFxuICAgICAgICAgIHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPT09IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5tYWpvcisrXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5taW5vciA9IDBcbiAgICAgICAgdGhpcy5wYXRjaCA9IDBcbiAgICAgICAgdGhpcy5wcmVyZWxlYXNlID0gW11cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21pbm9yJzpcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHByZS1taW5vciB2ZXJzaW9uLCBidW1wIHVwIHRvIHRoZSBzYW1lIG1pbm9yIHZlcnNpb24uXG4gICAgICAgIC8vIE90aGVyd2lzZSBpbmNyZW1lbnQgbWlub3IuXG4gICAgICAgIC8vIDEuMi4wLTUgYnVtcHMgdG8gMS4yLjBcbiAgICAgICAgLy8gMS4yLjEgYnVtcHMgdG8gMS4zLjBcbiAgICAgICAgaWYgKHRoaXMucGF0Y2ggIT09IDAgfHwgdGhpcy5wcmVyZWxlYXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMubWlub3IrK1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGF0Y2ggPSAwXG4gICAgICAgIHRoaXMucHJlcmVsZWFzZSA9IFtdXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdwYXRjaCc6XG4gICAgICAgIC8vIElmIHRoaXMgaXMgbm90IGEgcHJlLXJlbGVhc2UgdmVyc2lvbiwgaXQgd2lsbCBpbmNyZW1lbnQgdGhlIHBhdGNoLlxuICAgICAgICAvLyBJZiBpdCBpcyBhIHByZS1yZWxlYXNlIGl0IHdpbGwgYnVtcCB1cCB0byB0aGUgc2FtZSBwYXRjaCB2ZXJzaW9uLlxuICAgICAgICAvLyAxLjIuMC01IHBhdGNoZXMgdG8gMS4yLjBcbiAgICAgICAgLy8gMS4yLjAgcGF0Y2hlcyB0byAxLjIuMVxuICAgICAgICBpZiAodGhpcy5wcmVyZWxlYXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMucGF0Y2grK1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJlcmVsZWFzZSA9IFtdXG4gICAgICAgIGJyZWFrXG4gICAgICAvLyBUaGlzIHByb2JhYmx5IHNob3VsZG4ndCBiZSB1c2VkIHB1YmxpY2x5LlxuICAgICAgLy8gMS4wLjAgJ3ByZScgd291bGQgYmVjb21lIDEuMC4wLTAgd2hpY2ggaXMgdGhlIHdyb25nIGRpcmVjdGlvbi5cbiAgICAgIGNhc2UgJ3ByZSc6XG4gICAgICAgIGlmICh0aGlzLnByZXJlbGVhc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5wcmVyZWxlYXNlID0gWzBdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IGkgPSB0aGlzLnByZXJlbGVhc2UubGVuZ3RoXG4gICAgICAgICAgd2hpbGUgKC0taSA+PSAwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJlcmVsZWFzZVtpXSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgdGhpcy5wcmVyZWxlYXNlW2ldKytcbiAgICAgICAgICAgICAgaSA9IC0yXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpID09PSAtMSkge1xuICAgICAgICAgICAgLy8gZGlkbid0IGluY3JlbWVudCBhbnl0aGluZ1xuICAgICAgICAgICAgdGhpcy5wcmVyZWxlYXNlLnB1c2goMClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkZW50aWZpZXIpIHtcbiAgICAgICAgICAvLyAxLjIuMC1iZXRhLjEgYnVtcHMgdG8gMS4yLjAtYmV0YS4yLFxuICAgICAgICAgIC8vIDEuMi4wLWJldGEuZm9vYmx6IG9yIDEuMi4wLWJldGEgYnVtcHMgdG8gMS4yLjAtYmV0YS4wXG4gICAgICAgICAgaWYgKGNvbXBhcmVJZGVudGlmaWVycyh0aGlzLnByZXJlbGVhc2VbMF0sIGlkZW50aWZpZXIpID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4odGhpcy5wcmVyZWxlYXNlWzFdKSkge1xuICAgICAgICAgICAgICB0aGlzLnByZXJlbGVhc2UgPSBbaWRlbnRpZmllciwgMF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcmVyZWxlYXNlID0gW2lkZW50aWZpZXIsIDBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBpbmNyZW1lbnQgYXJndW1lbnQ6ICR7cmVsZWFzZX1gKVxuICAgIH1cbiAgICB0aGlzLmZvcm1hdCgpXG4gICAgdGhpcy5yYXcgPSB0aGlzLnZlcnNpb25cbiAgICByZXR1cm4gdGhpc1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2VtVmVyXG4iLCJjb25zdCB7IE1BWF9MRU5HVEggfSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NvbnN0YW50cycpXG5jb25zdCB7IHJlLCB0IH0gPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9yZScpXG5jb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3NlbXZlcicpXG5cbmNvbnN0IHBhcnNlT3B0aW9ucyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3BhcnNlLW9wdGlvbnMnKVxuY29uc3QgcGFyc2UgPSAodmVyc2lvbiwgb3B0aW9ucykgPT4ge1xuICBvcHRpb25zID0gcGFyc2VPcHRpb25zKG9wdGlvbnMpXG5cbiAgaWYgKHZlcnNpb24gaW5zdGFuY2VvZiBTZW1WZXIpIHtcbiAgICByZXR1cm4gdmVyc2lvblxuICB9XG5cbiAgaWYgKHR5cGVvZiB2ZXJzaW9uICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBpZiAodmVyc2lvbi5sZW5ndGggPiBNQVhfTEVOR1RIKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IHIgPSBvcHRpb25zLmxvb3NlID8gcmVbdC5MT09TRV0gOiByZVt0LkZVTExdXG4gIGlmICghci50ZXN0KHZlcnNpb24pKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBTZW1WZXIodmVyc2lvbiwgb3B0aW9ucylcbiAgfSBjYXRjaCAoZXIpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2VcbiIsImNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZScpXG5jb25zdCB2YWxpZCA9ICh2ZXJzaW9uLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHYgPSBwYXJzZSh2ZXJzaW9uLCBvcHRpb25zKVxuICByZXR1cm4gdiA/IHYudmVyc2lvbiA6IG51bGxcbn1cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRcbiIsImNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZScpXG5jb25zdCBjbGVhbiA9ICh2ZXJzaW9uLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHMgPSBwYXJzZSh2ZXJzaW9uLnRyaW0oKS5yZXBsYWNlKC9eWz12XSsvLCAnJyksIG9wdGlvbnMpXG4gIHJldHVybiBzID8gcy52ZXJzaW9uIDogbnVsbFxufVxubW9kdWxlLmV4cG9ydHMgPSBjbGVhblxuIiwiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuXG5jb25zdCBpbmMgPSAodmVyc2lvbiwgcmVsZWFzZSwgb3B0aW9ucywgaWRlbnRpZmllcikgPT4ge1xuICBpZiAodHlwZW9mIChvcHRpb25zKSA9PT0gJ3N0cmluZycpIHtcbiAgICBpZGVudGlmaWVyID0gb3B0aW9uc1xuICAgIG9wdGlvbnMgPSB1bmRlZmluZWRcbiAgfVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBTZW1WZXIoXG4gICAgICB2ZXJzaW9uIGluc3RhbmNlb2YgU2VtVmVyID8gdmVyc2lvbi52ZXJzaW9uIDogdmVyc2lvbixcbiAgICAgIG9wdGlvbnNcbiAgICApLmluYyhyZWxlYXNlLCBpZGVudGlmaWVyKS52ZXJzaW9uXG4gIH0gY2F0Y2ggKGVyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBpbmNcbiIsImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IGNvbXBhcmUgPSAoYSwgYiwgbG9vc2UpID0+XG4gIG5ldyBTZW1WZXIoYSwgbG9vc2UpLmNvbXBhcmUobmV3IFNlbVZlcihiLCBsb29zZSkpXG5cbm1vZHVsZS5leHBvcnRzID0gY29tcGFyZVxuIiwiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCBlcSA9IChhLCBiLCBsb29zZSkgPT4gY29tcGFyZShhLCBiLCBsb29zZSkgPT09IDBcbm1vZHVsZS5leHBvcnRzID0gZXFcbiIsImNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZScpXG5jb25zdCBlcSA9IHJlcXVpcmUoJy4vZXEnKVxuXG5jb25zdCBkaWZmID0gKHZlcnNpb24xLCB2ZXJzaW9uMikgPT4ge1xuICBpZiAoZXEodmVyc2lvbjEsIHZlcnNpb24yKSkge1xuICAgIHJldHVybiBudWxsXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdjEgPSBwYXJzZSh2ZXJzaW9uMSlcbiAgICBjb25zdCB2MiA9IHBhcnNlKHZlcnNpb24yKVxuICAgIGNvbnN0IGhhc1ByZSA9IHYxLnByZXJlbGVhc2UubGVuZ3RoIHx8IHYyLnByZXJlbGVhc2UubGVuZ3RoXG4gICAgY29uc3QgcHJlZml4ID0gaGFzUHJlID8gJ3ByZScgOiAnJ1xuICAgIGNvbnN0IGRlZmF1bHRSZXN1bHQgPSBoYXNQcmUgPyAncHJlcmVsZWFzZScgOiAnJ1xuICAgIGZvciAoY29uc3Qga2V5IGluIHYxKSB7XG4gICAgICBpZiAoa2V5ID09PSAnbWFqb3InIHx8IGtleSA9PT0gJ21pbm9yJyB8fCBrZXkgPT09ICdwYXRjaCcpIHtcbiAgICAgICAgaWYgKHYxW2tleV0gIT09IHYyW2tleV0pIHtcbiAgICAgICAgICByZXR1cm4gcHJlZml4ICsga2V5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRSZXN1bHQgLy8gbWF5IGJlIHVuZGVmaW5lZFxuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGRpZmZcbiIsImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IG1ham9yID0gKGEsIGxvb3NlKSA9PiBuZXcgU2VtVmVyKGEsIGxvb3NlKS5tYWpvclxubW9kdWxlLmV4cG9ydHMgPSBtYWpvclxuIiwiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgbWlub3IgPSAoYSwgbG9vc2UpID0+IG5ldyBTZW1WZXIoYSwgbG9vc2UpLm1pbm9yXG5tb2R1bGUuZXhwb3J0cyA9IG1pbm9yXG4iLCJjb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3NlbXZlcicpXG5jb25zdCBwYXRjaCA9IChhLCBsb29zZSkgPT4gbmV3IFNlbVZlcihhLCBsb29zZSkucGF0Y2hcbm1vZHVsZS5leHBvcnRzID0gcGF0Y2hcbiIsImNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZScpXG5jb25zdCBwcmVyZWxlYXNlID0gKHZlcnNpb24sIG9wdGlvbnMpID0+IHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2UodmVyc2lvbiwgb3B0aW9ucylcbiAgcmV0dXJuIChwYXJzZWQgJiYgcGFyc2VkLnByZXJlbGVhc2UubGVuZ3RoKSA/IHBhcnNlZC5wcmVyZWxlYXNlIDogbnVsbFxufVxubW9kdWxlLmV4cG9ydHMgPSBwcmVyZWxlYXNlXG4iLCJjb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi9jb21wYXJlJylcbmNvbnN0IHJjb21wYXJlID0gKGEsIGIsIGxvb3NlKSA9PiBjb21wYXJlKGIsIGEsIGxvb3NlKVxubW9kdWxlLmV4cG9ydHMgPSByY29tcGFyZVxuIiwiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCBjb21wYXJlTG9vc2UgPSAoYSwgYikgPT4gY29tcGFyZShhLCBiLCB0cnVlKVxubW9kdWxlLmV4cG9ydHMgPSBjb21wYXJlTG9vc2VcbiIsImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IGNvbXBhcmVCdWlsZCA9IChhLCBiLCBsb29zZSkgPT4ge1xuICBjb25zdCB2ZXJzaW9uQSA9IG5ldyBTZW1WZXIoYSwgbG9vc2UpXG4gIGNvbnN0IHZlcnNpb25CID0gbmV3IFNlbVZlcihiLCBsb29zZSlcbiAgcmV0dXJuIHZlcnNpb25BLmNvbXBhcmUodmVyc2lvbkIpIHx8IHZlcnNpb25BLmNvbXBhcmVCdWlsZCh2ZXJzaW9uQilcbn1cbm1vZHVsZS5leHBvcnRzID0gY29tcGFyZUJ1aWxkXG4iLCJjb25zdCBjb21wYXJlQnVpbGQgPSByZXF1aXJlKCcuL2NvbXBhcmUtYnVpbGQnKVxuY29uc3Qgc29ydCA9IChsaXN0LCBsb29zZSkgPT4gbGlzdC5zb3J0KChhLCBiKSA9PiBjb21wYXJlQnVpbGQoYSwgYiwgbG9vc2UpKVxubW9kdWxlLmV4cG9ydHMgPSBzb3J0XG4iLCJjb25zdCBjb21wYXJlQnVpbGQgPSByZXF1aXJlKCcuL2NvbXBhcmUtYnVpbGQnKVxuY29uc3QgcnNvcnQgPSAobGlzdCwgbG9vc2UpID0+IGxpc3Quc29ydCgoYSwgYikgPT4gY29tcGFyZUJ1aWxkKGIsIGEsIGxvb3NlKSlcbm1vZHVsZS5leHBvcnRzID0gcnNvcnRcbiIsImNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuL2NvbXBhcmUnKVxuY29uc3QgZ3QgPSAoYSwgYiwgbG9vc2UpID0+IGNvbXBhcmUoYSwgYiwgbG9vc2UpID4gMFxubW9kdWxlLmV4cG9ydHMgPSBndFxuIiwiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCBsdCA9IChhLCBiLCBsb29zZSkgPT4gY29tcGFyZShhLCBiLCBsb29zZSkgPCAwXG5tb2R1bGUuZXhwb3J0cyA9IGx0XG4iLCJjb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi9jb21wYXJlJylcbmNvbnN0IG5lcSA9IChhLCBiLCBsb29zZSkgPT4gY29tcGFyZShhLCBiLCBsb29zZSkgIT09IDBcbm1vZHVsZS5leHBvcnRzID0gbmVxXG4iLCJjb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi9jb21wYXJlJylcbmNvbnN0IGd0ZSA9IChhLCBiLCBsb29zZSkgPT4gY29tcGFyZShhLCBiLCBsb29zZSkgPj0gMFxubW9kdWxlLmV4cG9ydHMgPSBndGVcbiIsImNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuL2NvbXBhcmUnKVxuY29uc3QgbHRlID0gKGEsIGIsIGxvb3NlKSA9PiBjb21wYXJlKGEsIGIsIGxvb3NlKSA8PSAwXG5tb2R1bGUuZXhwb3J0cyA9IGx0ZVxuIiwiY29uc3QgZXEgPSByZXF1aXJlKCcuL2VxJylcbmNvbnN0IG5lcSA9IHJlcXVpcmUoJy4vbmVxJylcbmNvbnN0IGd0ID0gcmVxdWlyZSgnLi9ndCcpXG5jb25zdCBndGUgPSByZXF1aXJlKCcuL2d0ZScpXG5jb25zdCBsdCA9IHJlcXVpcmUoJy4vbHQnKVxuY29uc3QgbHRlID0gcmVxdWlyZSgnLi9sdGUnKVxuXG5jb25zdCBjbXAgPSAoYSwgb3AsIGIsIGxvb3NlKSA9PiB7XG4gIHN3aXRjaCAob3ApIHtcbiAgICBjYXNlICc9PT0nOlxuICAgICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhID0gYS52ZXJzaW9uXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGIgPSBiLnZlcnNpb25cbiAgICAgIH1cbiAgICAgIHJldHVybiBhID09PSBiXG5cbiAgICBjYXNlICchPT0nOlxuICAgICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhID0gYS52ZXJzaW9uXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGIgPSBiLnZlcnNpb25cbiAgICAgIH1cbiAgICAgIHJldHVybiBhICE9PSBiXG5cbiAgICBjYXNlICcnOlxuICAgIGNhc2UgJz0nOlxuICAgIGNhc2UgJz09JzpcbiAgICAgIHJldHVybiBlcShhLCBiLCBsb29zZSlcblxuICAgIGNhc2UgJyE9JzpcbiAgICAgIHJldHVybiBuZXEoYSwgYiwgbG9vc2UpXG5cbiAgICBjYXNlICc+JzpcbiAgICAgIHJldHVybiBndChhLCBiLCBsb29zZSlcblxuICAgIGNhc2UgJz49JzpcbiAgICAgIHJldHVybiBndGUoYSwgYiwgbG9vc2UpXG5cbiAgICBjYXNlICc8JzpcbiAgICAgIHJldHVybiBsdChhLCBiLCBsb29zZSlcblxuICAgIGNhc2UgJzw9JzpcbiAgICAgIHJldHVybiBsdGUoYSwgYiwgbG9vc2UpXG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBvcGVyYXRvcjogJHtvcH1gKVxuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNtcFxuIiwiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgcGFyc2UgPSByZXF1aXJlKCcuL3BhcnNlJylcbmNvbnN0IHsgcmUsIHQgfSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3JlJylcblxuY29uc3QgY29lcmNlID0gKHZlcnNpb24sIG9wdGlvbnMpID0+IHtcbiAgaWYgKHZlcnNpb24gaW5zdGFuY2VvZiBTZW1WZXIpIHtcbiAgICByZXR1cm4gdmVyc2lvblxuICB9XG5cbiAgaWYgKHR5cGVvZiB2ZXJzaW9uID09PSAnbnVtYmVyJykge1xuICAgIHZlcnNpb24gPSBTdHJpbmcodmVyc2lvbilcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmVyc2lvbiAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICBsZXQgbWF0Y2ggPSBudWxsXG4gIGlmICghb3B0aW9ucy5ydGwpIHtcbiAgICBtYXRjaCA9IHZlcnNpb24ubWF0Y2gocmVbdC5DT0VSQ0VdKVxuICB9IGVsc2Uge1xuICAgIC8vIEZpbmQgdGhlIHJpZ2h0LW1vc3QgY29lcmNpYmxlIHN0cmluZyB0aGF0IGRvZXMgbm90IHNoYXJlXG4gICAgLy8gYSB0ZXJtaW51cyB3aXRoIGEgbW9yZSBsZWZ0LXdhcmQgY29lcmNpYmxlIHN0cmluZy5cbiAgICAvLyBFZywgJzEuMi4zLjQnIHdhbnRzIHRvIGNvZXJjZSAnMi4zLjQnLCBub3QgJzMuNCcgb3IgJzQnXG4gICAgLy9cbiAgICAvLyBXYWxrIHRocm91Z2ggdGhlIHN0cmluZyBjaGVja2luZyB3aXRoIGEgL2cgcmVnZXhwXG4gICAgLy8gTWFudWFsbHkgc2V0IHRoZSBpbmRleCBzbyBhcyB0byBwaWNrIHVwIG92ZXJsYXBwaW5nIG1hdGNoZXMuXG4gICAgLy8gU3RvcCB3aGVuIHdlIGdldCBhIG1hdGNoIHRoYXQgZW5kcyBhdCB0aGUgc3RyaW5nIGVuZCwgc2luY2Ugbm9cbiAgICAvLyBjb2VyY2libGUgc3RyaW5nIGNhbiBiZSBtb3JlIHJpZ2h0LXdhcmQgd2l0aG91dCB0aGUgc2FtZSB0ZXJtaW51cy5cbiAgICBsZXQgbmV4dFxuICAgIHdoaWxlICgobmV4dCA9IHJlW3QuQ09FUkNFUlRMXS5leGVjKHZlcnNpb24pKSAmJlxuICAgICAgICAoIW1hdGNoIHx8IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoICE9PSB2ZXJzaW9uLmxlbmd0aClcbiAgICApIHtcbiAgICAgIGlmICghbWF0Y2ggfHxcbiAgICAgICAgICAgIG5leHQuaW5kZXggKyBuZXh0WzBdLmxlbmd0aCAhPT0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpIHtcbiAgICAgICAgbWF0Y2ggPSBuZXh0XG4gICAgICB9XG4gICAgICByZVt0LkNPRVJDRVJUTF0ubGFzdEluZGV4ID0gbmV4dC5pbmRleCArIG5leHRbMV0ubGVuZ3RoICsgbmV4dFsyXS5sZW5ndGhcbiAgICB9XG4gICAgLy8gbGVhdmUgaXQgaW4gYSBjbGVhbiBzdGF0ZVxuICAgIHJlW3QuQ09FUkNFUlRMXS5sYXN0SW5kZXggPSAtMVxuICB9XG5cbiAgaWYgKG1hdGNoID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiBwYXJzZShgJHttYXRjaFsyXX0uJHttYXRjaFszXSB8fCAnMCd9LiR7bWF0Y2hbNF0gfHwgJzAnfWAsIG9wdGlvbnMpXG59XG5tb2R1bGUuZXhwb3J0cyA9IGNvZXJjZVxuIiwiJ3VzZSBzdHJpY3QnXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChZYWxsaXN0KSB7XG4gIFlhbGxpc3QucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiogKCkge1xuICAgIGZvciAobGV0IHdhbGtlciA9IHRoaXMuaGVhZDsgd2Fsa2VyOyB3YWxrZXIgPSB3YWxrZXIubmV4dCkge1xuICAgICAgeWllbGQgd2Fsa2VyLnZhbHVlXG4gICAgfVxuICB9XG59XG4iLCIndXNlIHN0cmljdCdcbm1vZHVsZS5leHBvcnRzID0gWWFsbGlzdFxuXG5ZYWxsaXN0Lk5vZGUgPSBOb2RlXG5ZYWxsaXN0LmNyZWF0ZSA9IFlhbGxpc3RcblxuZnVuY3Rpb24gWWFsbGlzdCAobGlzdCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKCEoc2VsZiBpbnN0YW5jZW9mIFlhbGxpc3QpKSB7XG4gICAgc2VsZiA9IG5ldyBZYWxsaXN0KClcbiAgfVxuXG4gIHNlbGYudGFpbCA9IG51bGxcbiAgc2VsZi5oZWFkID0gbnVsbFxuICBzZWxmLmxlbmd0aCA9IDBcblxuICBpZiAobGlzdCAmJiB0eXBlb2YgbGlzdC5mb3JFYWNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICBzZWxmLnB1c2goaXRlbSlcbiAgICB9KVxuICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBzZWxmLnB1c2goYXJndW1lbnRzW2ldKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzZWxmXG59XG5cbllhbGxpc3QucHJvdG90eXBlLnJlbW92ZU5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICBpZiAobm9kZS5saXN0ICE9PSB0aGlzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdyZW1vdmluZyBub2RlIHdoaWNoIGRvZXMgbm90IGJlbG9uZyB0byB0aGlzIGxpc3QnKVxuICB9XG5cbiAgdmFyIG5leHQgPSBub2RlLm5leHRcbiAgdmFyIHByZXYgPSBub2RlLnByZXZcblxuICBpZiAobmV4dCkge1xuICAgIG5leHQucHJldiA9IHByZXZcbiAgfVxuXG4gIGlmIChwcmV2KSB7XG4gICAgcHJldi5uZXh0ID0gbmV4dFxuICB9XG5cbiAgaWYgKG5vZGUgPT09IHRoaXMuaGVhZCkge1xuICAgIHRoaXMuaGVhZCA9IG5leHRcbiAgfVxuICBpZiAobm9kZSA9PT0gdGhpcy50YWlsKSB7XG4gICAgdGhpcy50YWlsID0gcHJldlxuICB9XG5cbiAgbm9kZS5saXN0Lmxlbmd0aC0tXG4gIG5vZGUubmV4dCA9IG51bGxcbiAgbm9kZS5wcmV2ID0gbnVsbFxuICBub2RlLmxpc3QgPSBudWxsXG5cbiAgcmV0dXJuIG5leHRcbn1cblxuWWFsbGlzdC5wcm90b3R5cGUudW5zaGlmdE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICBpZiAobm9kZSA9PT0gdGhpcy5oZWFkKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAobm9kZS5saXN0KSB7XG4gICAgbm9kZS5saXN0LnJlbW92ZU5vZGUobm9kZSlcbiAgfVxuXG4gIHZhciBoZWFkID0gdGhpcy5oZWFkXG4gIG5vZGUubGlzdCA9IHRoaXNcbiAgbm9kZS5uZXh0ID0gaGVhZFxuICBpZiAoaGVhZCkge1xuICAgIGhlYWQucHJldiA9IG5vZGVcbiAgfVxuXG4gIHRoaXMuaGVhZCA9IG5vZGVcbiAgaWYgKCF0aGlzLnRhaWwpIHtcbiAgICB0aGlzLnRhaWwgPSBub2RlXG4gIH1cbiAgdGhpcy5sZW5ndGgrK1xufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS5wdXNoTm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gIGlmIChub2RlID09PSB0aGlzLnRhaWwpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGlmIChub2RlLmxpc3QpIHtcbiAgICBub2RlLmxpc3QucmVtb3ZlTm9kZShub2RlKVxuICB9XG5cbiAgdmFyIHRhaWwgPSB0aGlzLnRhaWxcbiAgbm9kZS5saXN0ID0gdGhpc1xuICBub2RlLnByZXYgPSB0YWlsXG4gIGlmICh0YWlsKSB7XG4gICAgdGFpbC5uZXh0ID0gbm9kZVxuICB9XG5cbiAgdGhpcy50YWlsID0gbm9kZVxuICBpZiAoIXRoaXMuaGVhZCkge1xuICAgIHRoaXMuaGVhZCA9IG5vZGVcbiAgfVxuICB0aGlzLmxlbmd0aCsrXG59XG5cbllhbGxpc3QucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHB1c2godGhpcywgYXJndW1lbnRzW2ldKVxuICB9XG4gIHJldHVybiB0aGlzLmxlbmd0aFxufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB1bnNoaWZ0KHRoaXMsIGFyZ3VtZW50c1tpXSlcbiAgfVxuICByZXR1cm4gdGhpcy5sZW5ndGhcbn1cblxuWWFsbGlzdC5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMudGFpbCkge1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHZhciByZXMgPSB0aGlzLnRhaWwudmFsdWVcbiAgdGhpcy50YWlsID0gdGhpcy50YWlsLnByZXZcbiAgaWYgKHRoaXMudGFpbCkge1xuICAgIHRoaXMudGFpbC5uZXh0ID0gbnVsbFxuICB9IGVsc2Uge1xuICAgIHRoaXMuaGVhZCA9IG51bGxcbiAgfVxuICB0aGlzLmxlbmd0aC0tXG4gIHJldHVybiByZXNcbn1cblxuWWFsbGlzdC5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5oZWFkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgdmFyIHJlcyA9IHRoaXMuaGVhZC52YWx1ZVxuICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV4dFxuICBpZiAodGhpcy5oZWFkKSB7XG4gICAgdGhpcy5oZWFkLnByZXYgPSBudWxsXG4gIH0gZWxzZSB7XG4gICAgdGhpcy50YWlsID0gbnVsbFxuICB9XG4gIHRoaXMubGVuZ3RoLS1cbiAgcmV0dXJuIHJlc1xufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGZuLCB0aGlzcCkge1xuICB0aGlzcCA9IHRoaXNwIHx8IHRoaXNcbiAgZm9yICh2YXIgd2Fsa2VyID0gdGhpcy5oZWFkLCBpID0gMDsgd2Fsa2VyICE9PSBudWxsOyBpKyspIHtcbiAgICBmbi5jYWxsKHRoaXNwLCB3YWxrZXIudmFsdWUsIGksIHRoaXMpXG4gICAgd2Fsa2VyID0gd2Fsa2VyLm5leHRcbiAgfVxufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS5mb3JFYWNoUmV2ZXJzZSA9IGZ1bmN0aW9uIChmbiwgdGhpc3ApIHtcbiAgdGhpc3AgPSB0aGlzcCB8fCB0aGlzXG4gIGZvciAodmFyIHdhbGtlciA9IHRoaXMudGFpbCwgaSA9IHRoaXMubGVuZ3RoIC0gMTsgd2Fsa2VyICE9PSBudWxsOyBpLS0pIHtcbiAgICBmbi5jYWxsKHRoaXNwLCB3YWxrZXIudmFsdWUsIGksIHRoaXMpXG4gICAgd2Fsa2VyID0gd2Fsa2VyLnByZXZcbiAgfVxufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAobikge1xuICBmb3IgKHZhciBpID0gMCwgd2Fsa2VyID0gdGhpcy5oZWFkOyB3YWxrZXIgIT09IG51bGwgJiYgaSA8IG47IGkrKykge1xuICAgIC8vIGFib3J0IG91dCBvZiB0aGUgbGlzdCBlYXJseSBpZiB3ZSBoaXQgYSBjeWNsZVxuICAgIHdhbGtlciA9IHdhbGtlci5uZXh0XG4gIH1cbiAgaWYgKGkgPT09IG4gJiYgd2Fsa2VyICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIHdhbGtlci52YWx1ZVxuICB9XG59XG5cbllhbGxpc3QucHJvdG90eXBlLmdldFJldmVyc2UgPSBmdW5jdGlvbiAobikge1xuICBmb3IgKHZhciBpID0gMCwgd2Fsa2VyID0gdGhpcy50YWlsOyB3YWxrZXIgIT09IG51bGwgJiYgaSA8IG47IGkrKykge1xuICAgIC8vIGFib3J0IG91dCBvZiB0aGUgbGlzdCBlYXJseSBpZiB3ZSBoaXQgYSBjeWNsZVxuICAgIHdhbGtlciA9IHdhbGtlci5wcmV2XG4gIH1cbiAgaWYgKGkgPT09IG4gJiYgd2Fsa2VyICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIHdhbGtlci52YWx1ZVxuICB9XG59XG5cbllhbGxpc3QucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIChmbiwgdGhpc3ApIHtcbiAgdGhpc3AgPSB0aGlzcCB8fCB0aGlzXG4gIHZhciByZXMgPSBuZXcgWWFsbGlzdCgpXG4gIGZvciAodmFyIHdhbGtlciA9IHRoaXMuaGVhZDsgd2Fsa2VyICE9PSBudWxsOykge1xuICAgIHJlcy5wdXNoKGZuLmNhbGwodGhpc3AsIHdhbGtlci52YWx1ZSwgdGhpcykpXG4gICAgd2Fsa2VyID0gd2Fsa2VyLm5leHRcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbllhbGxpc3QucHJvdG90eXBlLm1hcFJldmVyc2UgPSBmdW5jdGlvbiAoZm4sIHRoaXNwKSB7XG4gIHRoaXNwID0gdGhpc3AgfHwgdGhpc1xuICB2YXIgcmVzID0gbmV3IFlhbGxpc3QoKVxuICBmb3IgKHZhciB3YWxrZXIgPSB0aGlzLnRhaWw7IHdhbGtlciAhPT0gbnVsbDspIHtcbiAgICByZXMucHVzaChmbi5jYWxsKHRoaXNwLCB3YWxrZXIudmFsdWUsIHRoaXMpKVxuICAgIHdhbGtlciA9IHdhbGtlci5wcmV2XG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS5yZWR1Y2UgPSBmdW5jdGlvbiAoZm4sIGluaXRpYWwpIHtcbiAgdmFyIGFjY1xuICB2YXIgd2Fsa2VyID0gdGhpcy5oZWFkXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgIGFjYyA9IGluaXRpYWxcbiAgfSBlbHNlIGlmICh0aGlzLmhlYWQpIHtcbiAgICB3YWxrZXIgPSB0aGlzLmhlYWQubmV4dFxuICAgIGFjYyA9IHRoaXMuaGVhZC52YWx1ZVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZHVjZSBvZiBlbXB0eSBsaXN0IHdpdGggbm8gaW5pdGlhbCB2YWx1ZScpXG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgd2Fsa2VyICE9PSBudWxsOyBpKyspIHtcbiAgICBhY2MgPSBmbihhY2MsIHdhbGtlci52YWx1ZSwgaSlcbiAgICB3YWxrZXIgPSB3YWxrZXIubmV4dFxuICB9XG5cbiAgcmV0dXJuIGFjY1xufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS5yZWR1Y2VSZXZlcnNlID0gZnVuY3Rpb24gKGZuLCBpbml0aWFsKSB7XG4gIHZhciBhY2NcbiAgdmFyIHdhbGtlciA9IHRoaXMudGFpbFxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICBhY2MgPSBpbml0aWFsXG4gIH0gZWxzZSBpZiAodGhpcy50YWlsKSB7XG4gICAgd2Fsa2VyID0gdGhpcy50YWlsLnByZXZcbiAgICBhY2MgPSB0aGlzLnRhaWwudmFsdWVcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdSZWR1Y2Ugb2YgZW1wdHkgbGlzdCB3aXRoIG5vIGluaXRpYWwgdmFsdWUnKVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IHRoaXMubGVuZ3RoIC0gMTsgd2Fsa2VyICE9PSBudWxsOyBpLS0pIHtcbiAgICBhY2MgPSBmbihhY2MsIHdhbGtlci52YWx1ZSwgaSlcbiAgICB3YWxrZXIgPSB3YWxrZXIucHJldlxuICB9XG5cbiAgcmV0dXJuIGFjY1xufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYXJyID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMCwgd2Fsa2VyID0gdGhpcy5oZWFkOyB3YWxrZXIgIT09IG51bGw7IGkrKykge1xuICAgIGFycltpXSA9IHdhbGtlci52YWx1ZVxuICAgIHdhbGtlciA9IHdhbGtlci5uZXh0XG4gIH1cbiAgcmV0dXJuIGFyclxufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS50b0FycmF5UmV2ZXJzZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFyciA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDAsIHdhbGtlciA9IHRoaXMudGFpbDsgd2Fsa2VyICE9PSBudWxsOyBpKyspIHtcbiAgICBhcnJbaV0gPSB3YWxrZXIudmFsdWVcbiAgICB3YWxrZXIgPSB3YWxrZXIucHJldlxuICB9XG4gIHJldHVybiBhcnJcbn1cblxuWWFsbGlzdC5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiAoZnJvbSwgdG8pIHtcbiAgdG8gPSB0byB8fCB0aGlzLmxlbmd0aFxuICBpZiAodG8gPCAwKSB7XG4gICAgdG8gKz0gdGhpcy5sZW5ndGhcbiAgfVxuICBmcm9tID0gZnJvbSB8fCAwXG4gIGlmIChmcm9tIDwgMCkge1xuICAgIGZyb20gKz0gdGhpcy5sZW5ndGhcbiAgfVxuICB2YXIgcmV0ID0gbmV3IFlhbGxpc3QoKVxuICBpZiAodG8gPCBmcm9tIHx8IHRvIDwgMCkge1xuICAgIHJldHVybiByZXRcbiAgfVxuICBpZiAoZnJvbSA8IDApIHtcbiAgICBmcm9tID0gMFxuICB9XG4gIGlmICh0byA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdG8gPSB0aGlzLmxlbmd0aFxuICB9XG4gIGZvciAodmFyIGkgPSAwLCB3YWxrZXIgPSB0aGlzLmhlYWQ7IHdhbGtlciAhPT0gbnVsbCAmJiBpIDwgZnJvbTsgaSsrKSB7XG4gICAgd2Fsa2VyID0gd2Fsa2VyLm5leHRcbiAgfVxuICBmb3IgKDsgd2Fsa2VyICE9PSBudWxsICYmIGkgPCB0bzsgaSsrLCB3YWxrZXIgPSB3YWxrZXIubmV4dCkge1xuICAgIHJldC5wdXNoKHdhbGtlci52YWx1ZSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbllhbGxpc3QucHJvdG90eXBlLnNsaWNlUmV2ZXJzZSA9IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICB0byA9IHRvIHx8IHRoaXMubGVuZ3RoXG4gIGlmICh0byA8IDApIHtcbiAgICB0byArPSB0aGlzLmxlbmd0aFxuICB9XG4gIGZyb20gPSBmcm9tIHx8IDBcbiAgaWYgKGZyb20gPCAwKSB7XG4gICAgZnJvbSArPSB0aGlzLmxlbmd0aFxuICB9XG4gIHZhciByZXQgPSBuZXcgWWFsbGlzdCgpXG4gIGlmICh0byA8IGZyb20gfHwgdG8gPCAwKSB7XG4gICAgcmV0dXJuIHJldFxuICB9XG4gIGlmIChmcm9tIDwgMCkge1xuICAgIGZyb20gPSAwXG4gIH1cbiAgaWYgKHRvID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0byA9IHRoaXMubGVuZ3RoXG4gIH1cbiAgZm9yICh2YXIgaSA9IHRoaXMubGVuZ3RoLCB3YWxrZXIgPSB0aGlzLnRhaWw7IHdhbGtlciAhPT0gbnVsbCAmJiBpID4gdG87IGktLSkge1xuICAgIHdhbGtlciA9IHdhbGtlci5wcmV2XG4gIH1cbiAgZm9yICg7IHdhbGtlciAhPT0gbnVsbCAmJiBpID4gZnJvbTsgaS0tLCB3YWxrZXIgPSB3YWxrZXIucHJldikge1xuICAgIHJldC5wdXNoKHdhbGtlci52YWx1ZSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbllhbGxpc3QucHJvdG90eXBlLnNwbGljZSA9IGZ1bmN0aW9uIChzdGFydCwgZGVsZXRlQ291bnQsIC4uLm5vZGVzKSB7XG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgc3RhcnQgPSB0aGlzLmxlbmd0aCAtIDFcbiAgfVxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgPSB0aGlzLmxlbmd0aCArIHN0YXJ0O1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIHdhbGtlciA9IHRoaXMuaGVhZDsgd2Fsa2VyICE9PSBudWxsICYmIGkgPCBzdGFydDsgaSsrKSB7XG4gICAgd2Fsa2VyID0gd2Fsa2VyLm5leHRcbiAgfVxuXG4gIHZhciByZXQgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgd2Fsa2VyICYmIGkgPCBkZWxldGVDb3VudDsgaSsrKSB7XG4gICAgcmV0LnB1c2god2Fsa2VyLnZhbHVlKVxuICAgIHdhbGtlciA9IHRoaXMucmVtb3ZlTm9kZSh3YWxrZXIpXG4gIH1cbiAgaWYgKHdhbGtlciA9PT0gbnVsbCkge1xuICAgIHdhbGtlciA9IHRoaXMudGFpbFxuICB9XG5cbiAgaWYgKHdhbGtlciAhPT0gdGhpcy5oZWFkICYmIHdhbGtlciAhPT0gdGhpcy50YWlsKSB7XG4gICAgd2Fsa2VyID0gd2Fsa2VyLnByZXZcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICB3YWxrZXIgPSBpbnNlcnQodGhpcywgd2Fsa2VyLCBub2Rlc1tpXSlcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5ZYWxsaXN0LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaGVhZCA9IHRoaXMuaGVhZFxuICB2YXIgdGFpbCA9IHRoaXMudGFpbFxuICBmb3IgKHZhciB3YWxrZXIgPSBoZWFkOyB3YWxrZXIgIT09IG51bGw7IHdhbGtlciA9IHdhbGtlci5wcmV2KSB7XG4gICAgdmFyIHAgPSB3YWxrZXIucHJldlxuICAgIHdhbGtlci5wcmV2ID0gd2Fsa2VyLm5leHRcbiAgICB3YWxrZXIubmV4dCA9IHBcbiAgfVxuICB0aGlzLmhlYWQgPSB0YWlsXG4gIHRoaXMudGFpbCA9IGhlYWRcbiAgcmV0dXJuIHRoaXNcbn1cblxuZnVuY3Rpb24gaW5zZXJ0IChzZWxmLCBub2RlLCB2YWx1ZSkge1xuICB2YXIgaW5zZXJ0ZWQgPSBub2RlID09PSBzZWxmLmhlYWQgP1xuICAgIG5ldyBOb2RlKHZhbHVlLCBudWxsLCBub2RlLCBzZWxmKSA6XG4gICAgbmV3IE5vZGUodmFsdWUsIG5vZGUsIG5vZGUubmV4dCwgc2VsZilcblxuICBpZiAoaW5zZXJ0ZWQubmV4dCA9PT0gbnVsbCkge1xuICAgIHNlbGYudGFpbCA9IGluc2VydGVkXG4gIH1cbiAgaWYgKGluc2VydGVkLnByZXYgPT09IG51bGwpIHtcbiAgICBzZWxmLmhlYWQgPSBpbnNlcnRlZFxuICB9XG5cbiAgc2VsZi5sZW5ndGgrK1xuXG4gIHJldHVybiBpbnNlcnRlZFxufVxuXG5mdW5jdGlvbiBwdXNoIChzZWxmLCBpdGVtKSB7XG4gIHNlbGYudGFpbCA9IG5ldyBOb2RlKGl0ZW0sIHNlbGYudGFpbCwgbnVsbCwgc2VsZilcbiAgaWYgKCFzZWxmLmhlYWQpIHtcbiAgICBzZWxmLmhlYWQgPSBzZWxmLnRhaWxcbiAgfVxuICBzZWxmLmxlbmd0aCsrXG59XG5cbmZ1bmN0aW9uIHVuc2hpZnQgKHNlbGYsIGl0ZW0pIHtcbiAgc2VsZi5oZWFkID0gbmV3IE5vZGUoaXRlbSwgbnVsbCwgc2VsZi5oZWFkLCBzZWxmKVxuICBpZiAoIXNlbGYudGFpbCkge1xuICAgIHNlbGYudGFpbCA9IHNlbGYuaGVhZFxuICB9XG4gIHNlbGYubGVuZ3RoKytcbn1cblxuZnVuY3Rpb24gTm9kZSAodmFsdWUsIHByZXYsIG5leHQsIGxpc3QpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIE5vZGUpKSB7XG4gICAgcmV0dXJuIG5ldyBOb2RlKHZhbHVlLCBwcmV2LCBuZXh0LCBsaXN0KVxuICB9XG5cbiAgdGhpcy5saXN0ID0gbGlzdFxuICB0aGlzLnZhbHVlID0gdmFsdWVcblxuICBpZiAocHJldikge1xuICAgIHByZXYubmV4dCA9IHRoaXNcbiAgICB0aGlzLnByZXYgPSBwcmV2XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wcmV2ID0gbnVsbFxuICB9XG5cbiAgaWYgKG5leHQpIHtcbiAgICBuZXh0LnByZXYgPSB0aGlzXG4gICAgdGhpcy5uZXh0ID0gbmV4dFxuICB9IGVsc2Uge1xuICAgIHRoaXMubmV4dCA9IG51bGxcbiAgfVxufVxuXG50cnkge1xuICAvLyBhZGQgaWYgc3VwcG9ydCBmb3IgU3ltYm9sLml0ZXJhdG9yIGlzIHByZXNlbnRcbiAgcmVxdWlyZSgnLi9pdGVyYXRvci5qcycpKFlhbGxpc3QpXG59IGNhdGNoIChlcikge31cbiIsIid1c2Ugc3RyaWN0J1xuXG4vLyBBIGxpbmtlZCBsaXN0IHRvIGtlZXAgdHJhY2sgb2YgcmVjZW50bHktdXNlZC1uZXNzXG5jb25zdCBZYWxsaXN0ID0gcmVxdWlyZSgneWFsbGlzdCcpXG5cbmNvbnN0IE1BWCA9IFN5bWJvbCgnbWF4JylcbmNvbnN0IExFTkdUSCA9IFN5bWJvbCgnbGVuZ3RoJylcbmNvbnN0IExFTkdUSF9DQUxDVUxBVE9SID0gU3ltYm9sKCdsZW5ndGhDYWxjdWxhdG9yJylcbmNvbnN0IEFMTE9XX1NUQUxFID0gU3ltYm9sKCdhbGxvd1N0YWxlJylcbmNvbnN0IE1BWF9BR0UgPSBTeW1ib2woJ21heEFnZScpXG5jb25zdCBESVNQT1NFID0gU3ltYm9sKCdkaXNwb3NlJylcbmNvbnN0IE5PX0RJU1BPU0VfT05fU0VUID0gU3ltYm9sKCdub0Rpc3Bvc2VPblNldCcpXG5jb25zdCBMUlVfTElTVCA9IFN5bWJvbCgnbHJ1TGlzdCcpXG5jb25zdCBDQUNIRSA9IFN5bWJvbCgnY2FjaGUnKVxuY29uc3QgVVBEQVRFX0FHRV9PTl9HRVQgPSBTeW1ib2woJ3VwZGF0ZUFnZU9uR2V0JylcblxuY29uc3QgbmFpdmVMZW5ndGggPSAoKSA9PiAxXG5cbi8vIGxydUxpc3QgaXMgYSB5YWxsaXN0IHdoZXJlIHRoZSBoZWFkIGlzIHRoZSB5b3VuZ2VzdFxuLy8gaXRlbSwgYW5kIHRoZSB0YWlsIGlzIHRoZSBvbGRlc3QuICB0aGUgbGlzdCBjb250YWlucyB0aGUgSGl0XG4vLyBvYmplY3RzIGFzIHRoZSBlbnRyaWVzLlxuLy8gRWFjaCBIaXQgb2JqZWN0IGhhcyBhIHJlZmVyZW5jZSB0byBpdHMgWWFsbGlzdC5Ob2RlLiAgVGhpc1xuLy8gbmV2ZXIgY2hhbmdlcy5cbi8vXG4vLyBjYWNoZSBpcyBhIE1hcCAob3IgUHNldWRvTWFwKSB0aGF0IG1hdGNoZXMgdGhlIGtleXMgdG9cbi8vIHRoZSBZYWxsaXN0Lk5vZGUgb2JqZWN0LlxuY2xhc3MgTFJVQ2FjaGUge1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ251bWJlcicpXG4gICAgICBvcHRpb25zID0geyBtYXg6IG9wdGlvbnMgfVxuXG4gICAgaWYgKCFvcHRpb25zKVxuICAgICAgb3B0aW9ucyA9IHt9XG5cbiAgICBpZiAob3B0aW9ucy5tYXggJiYgKHR5cGVvZiBvcHRpb25zLm1heCAhPT0gJ251bWJlcicgfHwgb3B0aW9ucy5tYXggPCAwKSlcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21heCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlcicpXG4gICAgLy8gS2luZCBvZiB3ZWlyZCB0byBoYXZlIGEgZGVmYXVsdCBtYXggb2YgSW5maW5pdHksIGJ1dCBvaCB3ZWxsLlxuICAgIGNvbnN0IG1heCA9IHRoaXNbTUFYXSA9IG9wdGlvbnMubWF4IHx8IEluZmluaXR5XG5cbiAgICBjb25zdCBsYyA9IG9wdGlvbnMubGVuZ3RoIHx8IG5haXZlTGVuZ3RoXG4gICAgdGhpc1tMRU5HVEhfQ0FMQ1VMQVRPUl0gPSAodHlwZW9mIGxjICE9PSAnZnVuY3Rpb24nKSA/IG5haXZlTGVuZ3RoIDogbGNcbiAgICB0aGlzW0FMTE9XX1NUQUxFXSA9IG9wdGlvbnMuc3RhbGUgfHwgZmFsc2VcbiAgICBpZiAob3B0aW9ucy5tYXhBZ2UgJiYgdHlwZW9mIG9wdGlvbnMubWF4QWdlICE9PSAnbnVtYmVyJylcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21heEFnZSBtdXN0IGJlIGEgbnVtYmVyJylcbiAgICB0aGlzW01BWF9BR0VdID0gb3B0aW9ucy5tYXhBZ2UgfHwgMFxuICAgIHRoaXNbRElTUE9TRV0gPSBvcHRpb25zLmRpc3Bvc2VcbiAgICB0aGlzW05PX0RJU1BPU0VfT05fU0VUXSA9IG9wdGlvbnMubm9EaXNwb3NlT25TZXQgfHwgZmFsc2VcbiAgICB0aGlzW1VQREFURV9BR0VfT05fR0VUXSA9IG9wdGlvbnMudXBkYXRlQWdlT25HZXQgfHwgZmFsc2VcbiAgICB0aGlzLnJlc2V0KClcbiAgfVxuXG4gIC8vIHJlc2l6ZSB0aGUgY2FjaGUgd2hlbiB0aGUgbWF4IGNoYW5nZXMuXG4gIHNldCBtYXggKG1MKSB7XG4gICAgaWYgKHR5cGVvZiBtTCAhPT0gJ251bWJlcicgfHwgbUwgPCAwKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbWF4IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyJylcblxuICAgIHRoaXNbTUFYXSA9IG1MIHx8IEluZmluaXR5XG4gICAgdHJpbSh0aGlzKVxuICB9XG4gIGdldCBtYXggKCkge1xuICAgIHJldHVybiB0aGlzW01BWF1cbiAgfVxuXG4gIHNldCBhbGxvd1N0YWxlIChhbGxvd1N0YWxlKSB7XG4gICAgdGhpc1tBTExPV19TVEFMRV0gPSAhIWFsbG93U3RhbGVcbiAgfVxuICBnZXQgYWxsb3dTdGFsZSAoKSB7XG4gICAgcmV0dXJuIHRoaXNbQUxMT1dfU1RBTEVdXG4gIH1cblxuICBzZXQgbWF4QWdlIChtQSkge1xuICAgIGlmICh0eXBlb2YgbUEgIT09ICdudW1iZXInKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbWF4QWdlIG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyJylcblxuICAgIHRoaXNbTUFYX0FHRV0gPSBtQVxuICAgIHRyaW0odGhpcylcbiAgfVxuICBnZXQgbWF4QWdlICgpIHtcbiAgICByZXR1cm4gdGhpc1tNQVhfQUdFXVxuICB9XG5cbiAgLy8gcmVzaXplIHRoZSBjYWNoZSB3aGVuIHRoZSBsZW5ndGhDYWxjdWxhdG9yIGNoYW5nZXMuXG4gIHNldCBsZW5ndGhDYWxjdWxhdG9yIChsQykge1xuICAgIGlmICh0eXBlb2YgbEMgIT09ICdmdW5jdGlvbicpXG4gICAgICBsQyA9IG5haXZlTGVuZ3RoXG5cbiAgICBpZiAobEMgIT09IHRoaXNbTEVOR1RIX0NBTENVTEFUT1JdKSB7XG4gICAgICB0aGlzW0xFTkdUSF9DQUxDVUxBVE9SXSA9IGxDXG4gICAgICB0aGlzW0xFTkdUSF0gPSAwXG4gICAgICB0aGlzW0xSVV9MSVNUXS5mb3JFYWNoKGhpdCA9PiB7XG4gICAgICAgIGhpdC5sZW5ndGggPSB0aGlzW0xFTkdUSF9DQUxDVUxBVE9SXShoaXQudmFsdWUsIGhpdC5rZXkpXG4gICAgICAgIHRoaXNbTEVOR1RIXSArPSBoaXQubGVuZ3RoXG4gICAgICB9KVxuICAgIH1cbiAgICB0cmltKHRoaXMpXG4gIH1cbiAgZ2V0IGxlbmd0aENhbGN1bGF0b3IgKCkgeyByZXR1cm4gdGhpc1tMRU5HVEhfQ0FMQ1VMQVRPUl0gfVxuXG4gIGdldCBsZW5ndGggKCkgeyByZXR1cm4gdGhpc1tMRU5HVEhdIH1cbiAgZ2V0IGl0ZW1Db3VudCAoKSB7IHJldHVybiB0aGlzW0xSVV9MSVNUXS5sZW5ndGggfVxuXG4gIHJmb3JFYWNoIChmbiwgdGhpc3ApIHtcbiAgICB0aGlzcCA9IHRoaXNwIHx8IHRoaXNcbiAgICBmb3IgKGxldCB3YWxrZXIgPSB0aGlzW0xSVV9MSVNUXS50YWlsOyB3YWxrZXIgIT09IG51bGw7KSB7XG4gICAgICBjb25zdCBwcmV2ID0gd2Fsa2VyLnByZXZcbiAgICAgIGZvckVhY2hTdGVwKHRoaXMsIGZuLCB3YWxrZXIsIHRoaXNwKVxuICAgICAgd2Fsa2VyID0gcHJldlxuICAgIH1cbiAgfVxuXG4gIGZvckVhY2ggKGZuLCB0aGlzcCkge1xuICAgIHRoaXNwID0gdGhpc3AgfHwgdGhpc1xuICAgIGZvciAobGV0IHdhbGtlciA9IHRoaXNbTFJVX0xJU1RdLmhlYWQ7IHdhbGtlciAhPT0gbnVsbDspIHtcbiAgICAgIGNvbnN0IG5leHQgPSB3YWxrZXIubmV4dFxuICAgICAgZm9yRWFjaFN0ZXAodGhpcywgZm4sIHdhbGtlciwgdGhpc3ApXG4gICAgICB3YWxrZXIgPSBuZXh0XG4gICAgfVxuICB9XG5cbiAga2V5cyAoKSB7XG4gICAgcmV0dXJuIHRoaXNbTFJVX0xJU1RdLnRvQXJyYXkoKS5tYXAoayA9PiBrLmtleSlcbiAgfVxuXG4gIHZhbHVlcyAoKSB7XG4gICAgcmV0dXJuIHRoaXNbTFJVX0xJU1RdLnRvQXJyYXkoKS5tYXAoayA9PiBrLnZhbHVlKVxuICB9XG5cbiAgcmVzZXQgKCkge1xuICAgIGlmICh0aGlzW0RJU1BPU0VdICYmXG4gICAgICAgIHRoaXNbTFJVX0xJU1RdICYmXG4gICAgICAgIHRoaXNbTFJVX0xJU1RdLmxlbmd0aCkge1xuICAgICAgdGhpc1tMUlVfTElTVF0uZm9yRWFjaChoaXQgPT4gdGhpc1tESVNQT1NFXShoaXQua2V5LCBoaXQudmFsdWUpKVxuICAgIH1cblxuICAgIHRoaXNbQ0FDSEVdID0gbmV3IE1hcCgpIC8vIGhhc2ggb2YgaXRlbXMgYnkga2V5XG4gICAgdGhpc1tMUlVfTElTVF0gPSBuZXcgWWFsbGlzdCgpIC8vIGxpc3Qgb2YgaXRlbXMgaW4gb3JkZXIgb2YgdXNlIHJlY2VuY3lcbiAgICB0aGlzW0xFTkdUSF0gPSAwIC8vIGxlbmd0aCBvZiBpdGVtcyBpbiB0aGUgbGlzdFxuICB9XG5cbiAgZHVtcCAoKSB7XG4gICAgcmV0dXJuIHRoaXNbTFJVX0xJU1RdLm1hcChoaXQgPT5cbiAgICAgIGlzU3RhbGUodGhpcywgaGl0KSA/IGZhbHNlIDoge1xuICAgICAgICBrOiBoaXQua2V5LFxuICAgICAgICB2OiBoaXQudmFsdWUsXG4gICAgICAgIGU6IGhpdC5ub3cgKyAoaGl0Lm1heEFnZSB8fCAwKVxuICAgICAgfSkudG9BcnJheSgpLmZpbHRlcihoID0+IGgpXG4gIH1cblxuICBkdW1wTHJ1ICgpIHtcbiAgICByZXR1cm4gdGhpc1tMUlVfTElTVF1cbiAgfVxuXG4gIHNldCAoa2V5LCB2YWx1ZSwgbWF4QWdlKSB7XG4gICAgbWF4QWdlID0gbWF4QWdlIHx8IHRoaXNbTUFYX0FHRV1cblxuICAgIGlmIChtYXhBZ2UgJiYgdHlwZW9mIG1heEFnZSAhPT0gJ251bWJlcicpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtYXhBZ2UgbXVzdCBiZSBhIG51bWJlcicpXG5cbiAgICBjb25zdCBub3cgPSBtYXhBZ2UgPyBEYXRlLm5vdygpIDogMFxuICAgIGNvbnN0IGxlbiA9IHRoaXNbTEVOR1RIX0NBTENVTEFUT1JdKHZhbHVlLCBrZXkpXG5cbiAgICBpZiAodGhpc1tDQUNIRV0uaGFzKGtleSkpIHtcbiAgICAgIGlmIChsZW4gPiB0aGlzW01BWF0pIHtcbiAgICAgICAgZGVsKHRoaXMsIHRoaXNbQ0FDSEVdLmdldChrZXkpKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9kZSA9IHRoaXNbQ0FDSEVdLmdldChrZXkpXG4gICAgICBjb25zdCBpdGVtID0gbm9kZS52YWx1ZVxuXG4gICAgICAvLyBkaXNwb3NlIG9mIHRoZSBvbGQgb25lIGJlZm9yZSBvdmVyd3JpdGluZ1xuICAgICAgLy8gc3BsaXQgb3V0IGludG8gMiBpZnMgZm9yIGJldHRlciBjb3ZlcmFnZSB0cmFja2luZ1xuICAgICAgaWYgKHRoaXNbRElTUE9TRV0pIHtcbiAgICAgICAgaWYgKCF0aGlzW05PX0RJU1BPU0VfT05fU0VUXSlcbiAgICAgICAgICB0aGlzW0RJU1BPU0VdKGtleSwgaXRlbS52YWx1ZSlcbiAgICAgIH1cblxuICAgICAgaXRlbS5ub3cgPSBub3dcbiAgICAgIGl0ZW0ubWF4QWdlID0gbWF4QWdlXG4gICAgICBpdGVtLnZhbHVlID0gdmFsdWVcbiAgICAgIHRoaXNbTEVOR1RIXSArPSBsZW4gLSBpdGVtLmxlbmd0aFxuICAgICAgaXRlbS5sZW5ndGggPSBsZW5cbiAgICAgIHRoaXMuZ2V0KGtleSlcbiAgICAgIHRyaW0odGhpcylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgaGl0ID0gbmV3IEVudHJ5KGtleSwgdmFsdWUsIGxlbiwgbm93LCBtYXhBZ2UpXG5cbiAgICAvLyBvdmVyc2l6ZWQgb2JqZWN0cyBmYWxsIG91dCBvZiBjYWNoZSBhdXRvbWF0aWNhbGx5LlxuICAgIGlmIChoaXQubGVuZ3RoID4gdGhpc1tNQVhdKSB7XG4gICAgICBpZiAodGhpc1tESVNQT1NFXSlcbiAgICAgICAgdGhpc1tESVNQT1NFXShrZXksIHZhbHVlKVxuXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB0aGlzW0xFTkdUSF0gKz0gaGl0Lmxlbmd0aFxuICAgIHRoaXNbTFJVX0xJU1RdLnVuc2hpZnQoaGl0KVxuICAgIHRoaXNbQ0FDSEVdLnNldChrZXksIHRoaXNbTFJVX0xJU1RdLmhlYWQpXG4gICAgdHJpbSh0aGlzKVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBoYXMgKGtleSkge1xuICAgIGlmICghdGhpc1tDQUNIRV0uaGFzKGtleSkpIHJldHVybiBmYWxzZVxuICAgIGNvbnN0IGhpdCA9IHRoaXNbQ0FDSEVdLmdldChrZXkpLnZhbHVlXG4gICAgcmV0dXJuICFpc1N0YWxlKHRoaXMsIGhpdClcbiAgfVxuXG4gIGdldCAoa2V5KSB7XG4gICAgcmV0dXJuIGdldCh0aGlzLCBrZXksIHRydWUpXG4gIH1cblxuICBwZWVrIChrZXkpIHtcbiAgICByZXR1cm4gZ2V0KHRoaXMsIGtleSwgZmFsc2UpXG4gIH1cblxuICBwb3AgKCkge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzW0xSVV9MSVNUXS50YWlsXG4gICAgaWYgKCFub2RlKVxuICAgICAgcmV0dXJuIG51bGxcblxuICAgIGRlbCh0aGlzLCBub2RlKVxuICAgIHJldHVybiBub2RlLnZhbHVlXG4gIH1cblxuICBkZWwgKGtleSkge1xuICAgIGRlbCh0aGlzLCB0aGlzW0NBQ0hFXS5nZXQoa2V5KSlcbiAgfVxuXG4gIGxvYWQgKGFycikge1xuICAgIC8vIHJlc2V0IHRoZSBjYWNoZVxuICAgIHRoaXMucmVzZXQoKVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgIC8vIEEgcHJldmlvdXMgc2VyaWFsaXplZCBjYWNoZSBoYXMgdGhlIG1vc3QgcmVjZW50IGl0ZW1zIGZpcnN0XG4gICAgZm9yIChsZXQgbCA9IGFyci5sZW5ndGggLSAxOyBsID49IDA7IGwtLSkge1xuICAgICAgY29uc3QgaGl0ID0gYXJyW2xdXG4gICAgICBjb25zdCBleHBpcmVzQXQgPSBoaXQuZSB8fCAwXG4gICAgICBpZiAoZXhwaXJlc0F0ID09PSAwKVxuICAgICAgICAvLyB0aGUgaXRlbSB3YXMgY3JlYXRlZCB3aXRob3V0IGV4cGlyYXRpb24gaW4gYSBub24gYWdlZCBjYWNoZVxuICAgICAgICB0aGlzLnNldChoaXQuaywgaGl0LnYpXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbWF4QWdlID0gZXhwaXJlc0F0IC0gbm93XG4gICAgICAgIC8vIGRvbnQgYWRkIGFscmVhZHkgZXhwaXJlZCBpdGVtc1xuICAgICAgICBpZiAobWF4QWdlID4gMCkge1xuICAgICAgICAgIHRoaXMuc2V0KGhpdC5rLCBoaXQudiwgbWF4QWdlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJ1bmUgKCkge1xuICAgIHRoaXNbQ0FDSEVdLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IGdldCh0aGlzLCBrZXksIGZhbHNlKSlcbiAgfVxufVxuXG5jb25zdCBnZXQgPSAoc2VsZiwga2V5LCBkb1VzZSkgPT4ge1xuICBjb25zdCBub2RlID0gc2VsZltDQUNIRV0uZ2V0KGtleSlcbiAgaWYgKG5vZGUpIHtcbiAgICBjb25zdCBoaXQgPSBub2RlLnZhbHVlXG4gICAgaWYgKGlzU3RhbGUoc2VsZiwgaGl0KSkge1xuICAgICAgZGVsKHNlbGYsIG5vZGUpXG4gICAgICBpZiAoIXNlbGZbQUxMT1dfU1RBTEVdKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkb1VzZSkge1xuICAgICAgICBpZiAoc2VsZltVUERBVEVfQUdFX09OX0dFVF0pXG4gICAgICAgICAgbm9kZS52YWx1ZS5ub3cgPSBEYXRlLm5vdygpXG4gICAgICAgIHNlbGZbTFJVX0xJU1RdLnVuc2hpZnROb2RlKG5vZGUpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoaXQudmFsdWVcbiAgfVxufVxuXG5jb25zdCBpc1N0YWxlID0gKHNlbGYsIGhpdCkgPT4ge1xuICBpZiAoIWhpdCB8fCAoIWhpdC5tYXhBZ2UgJiYgIXNlbGZbTUFYX0FHRV0pKVxuICAgIHJldHVybiBmYWxzZVxuXG4gIGNvbnN0IGRpZmYgPSBEYXRlLm5vdygpIC0gaGl0Lm5vd1xuICByZXR1cm4gaGl0Lm1heEFnZSA/IGRpZmYgPiBoaXQubWF4QWdlXG4gICAgOiBzZWxmW01BWF9BR0VdICYmIChkaWZmID4gc2VsZltNQVhfQUdFXSlcbn1cblxuY29uc3QgdHJpbSA9IHNlbGYgPT4ge1xuICBpZiAoc2VsZltMRU5HVEhdID4gc2VsZltNQVhdKSB7XG4gICAgZm9yIChsZXQgd2Fsa2VyID0gc2VsZltMUlVfTElTVF0udGFpbDtcbiAgICAgIHNlbGZbTEVOR1RIXSA+IHNlbGZbTUFYXSAmJiB3YWxrZXIgIT09IG51bGw7KSB7XG4gICAgICAvLyBXZSBrbm93IHRoYXQgd2UncmUgYWJvdXQgdG8gZGVsZXRlIHRoaXMgb25lLCBhbmQgYWxzb1xuICAgICAgLy8gd2hhdCB0aGUgbmV4dCBsZWFzdCByZWNlbnRseSB1c2VkIGtleSB3aWxsIGJlLCBzbyBqdXN0XG4gICAgICAvLyBnbyBhaGVhZCBhbmQgc2V0IGl0IG5vdy5cbiAgICAgIGNvbnN0IHByZXYgPSB3YWxrZXIucHJldlxuICAgICAgZGVsKHNlbGYsIHdhbGtlcilcbiAgICAgIHdhbGtlciA9IHByZXZcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgZGVsID0gKHNlbGYsIG5vZGUpID0+IHtcbiAgaWYgKG5vZGUpIHtcbiAgICBjb25zdCBoaXQgPSBub2RlLnZhbHVlXG4gICAgaWYgKHNlbGZbRElTUE9TRV0pXG4gICAgICBzZWxmW0RJU1BPU0VdKGhpdC5rZXksIGhpdC52YWx1ZSlcblxuICAgIHNlbGZbTEVOR1RIXSAtPSBoaXQubGVuZ3RoXG4gICAgc2VsZltDQUNIRV0uZGVsZXRlKGhpdC5rZXkpXG4gICAgc2VsZltMUlVfTElTVF0ucmVtb3ZlTm9kZShub2RlKVxuICB9XG59XG5cbmNsYXNzIEVudHJ5IHtcbiAgY29uc3RydWN0b3IgKGtleSwgdmFsdWUsIGxlbmd0aCwgbm93LCBtYXhBZ2UpIHtcbiAgICB0aGlzLmtleSA9IGtleVxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZVxuICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoXG4gICAgdGhpcy5ub3cgPSBub3dcbiAgICB0aGlzLm1heEFnZSA9IG1heEFnZSB8fCAwXG4gIH1cbn1cblxuY29uc3QgZm9yRWFjaFN0ZXAgPSAoc2VsZiwgZm4sIG5vZGUsIHRoaXNwKSA9PiB7XG4gIGxldCBoaXQgPSBub2RlLnZhbHVlXG4gIGlmIChpc1N0YWxlKHNlbGYsIGhpdCkpIHtcbiAgICBkZWwoc2VsZiwgbm9kZSlcbiAgICBpZiAoIXNlbGZbQUxMT1dfU1RBTEVdKVxuICAgICAgaGl0ID0gdW5kZWZpbmVkXG4gIH1cbiAgaWYgKGhpdClcbiAgICBmbi5jYWxsKHRoaXNwLCBoaXQudmFsdWUsIGhpdC5rZXksIHNlbGYpXG59XG5cbm1vZHVsZS5leHBvcnRzID0gTFJVQ2FjaGVcbiIsIi8vIGhvaXN0ZWQgY2xhc3MgZm9yIGN5Y2xpYyBkZXBlbmRlbmN5XG5jbGFzcyBSYW5nZSB7XG4gIGNvbnN0cnVjdG9yIChyYW5nZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBwYXJzZU9wdGlvbnMob3B0aW9ucylcblxuICAgIGlmIChyYW5nZSBpbnN0YW5jZW9mIFJhbmdlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHJhbmdlLmxvb3NlID09PSAhIW9wdGlvbnMubG9vc2UgJiZcbiAgICAgICAgcmFuZ2UuaW5jbHVkZVByZXJlbGVhc2UgPT09ICEhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiByYW5nZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZShyYW5nZS5yYXcsIG9wdGlvbnMpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhbmdlIGluc3RhbmNlb2YgQ29tcGFyYXRvcikge1xuICAgICAgLy8ganVzdCBwdXQgaXQgaW4gdGhlIHNldCBhbmQgcmV0dXJuXG4gICAgICB0aGlzLnJhdyA9IHJhbmdlLnZhbHVlXG4gICAgICB0aGlzLnNldCA9IFtbcmFuZ2VdXVxuICAgICAgdGhpcy5mb3JtYXQoKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgdGhpcy5sb29zZSA9ICEhb3B0aW9ucy5sb29zZVxuICAgIHRoaXMuaW5jbHVkZVByZXJlbGVhc2UgPSAhIW9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2VcblxuICAgIC8vIEZpcnN0LCBzcGxpdCBiYXNlZCBvbiBib29sZWFuIG9yIHx8XG4gICAgdGhpcy5yYXcgPSByYW5nZVxuICAgIHRoaXMuc2V0ID0gcmFuZ2VcbiAgICAgIC5zcGxpdCgnfHwnKVxuICAgICAgLy8gbWFwIHRoZSByYW5nZSB0byBhIDJkIGFycmF5IG9mIGNvbXBhcmF0b3JzXG4gICAgICAubWFwKHIgPT4gdGhpcy5wYXJzZVJhbmdlKHIudHJpbSgpKSlcbiAgICAgIC8vIHRocm93IG91dCBhbnkgY29tcGFyYXRvciBsaXN0cyB0aGF0IGFyZSBlbXB0eVxuICAgICAgLy8gdGhpcyBnZW5lcmFsbHkgbWVhbnMgdGhhdCBpdCB3YXMgbm90IGEgdmFsaWQgcmFuZ2UsIHdoaWNoIGlzIGFsbG93ZWRcbiAgICAgIC8vIGluIGxvb3NlIG1vZGUsIGJ1dCB3aWxsIHN0aWxsIHRocm93IGlmIHRoZSBXSE9MRSByYW5nZSBpcyBpbnZhbGlkLlxuICAgICAgLmZpbHRlcihjID0+IGMubGVuZ3RoKVxuXG4gICAgaWYgKCF0aGlzLnNldC5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgU2VtVmVyIFJhbmdlOiAke3JhbmdlfWApXG4gICAgfVxuXG4gICAgLy8gaWYgd2UgaGF2ZSBhbnkgdGhhdCBhcmUgbm90IHRoZSBudWxsIHNldCwgdGhyb3cgb3V0IG51bGwgc2V0cy5cbiAgICBpZiAodGhpcy5zZXQubGVuZ3RoID4gMSkge1xuICAgICAgLy8ga2VlcCB0aGUgZmlyc3Qgb25lLCBpbiBjYXNlIHRoZXkncmUgYWxsIG51bGwgc2V0c1xuICAgICAgY29uc3QgZmlyc3QgPSB0aGlzLnNldFswXVxuICAgICAgdGhpcy5zZXQgPSB0aGlzLnNldC5maWx0ZXIoYyA9PiAhaXNOdWxsU2V0KGNbMF0pKVxuICAgICAgaWYgKHRoaXMuc2V0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnNldCA9IFtmaXJzdF1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZXQubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBpZiB3ZSBoYXZlIGFueSB0aGF0IGFyZSAqLCB0aGVuIHRoZSByYW5nZSBpcyBqdXN0ICpcbiAgICAgICAgZm9yIChjb25zdCBjIG9mIHRoaXMuc2V0KSB7XG4gICAgICAgICAgaWYgKGMubGVuZ3RoID09PSAxICYmIGlzQW55KGNbMF0pKSB7XG4gICAgICAgICAgICB0aGlzLnNldCA9IFtjXVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmZvcm1hdCgpXG4gIH1cblxuICBmb3JtYXQgKCkge1xuICAgIHRoaXMucmFuZ2UgPSB0aGlzLnNldFxuICAgICAgLm1hcCgoY29tcHMpID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbXBzLmpvaW4oJyAnKS50cmltKClcbiAgICAgIH0pXG4gICAgICAuam9pbignfHwnKVxuICAgICAgLnRyaW0oKVxuICAgIHJldHVybiB0aGlzLnJhbmdlXG4gIH1cblxuICB0b1N0cmluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmFuZ2VcbiAgfVxuXG4gIHBhcnNlUmFuZ2UgKHJhbmdlKSB7XG4gICAgcmFuZ2UgPSByYW5nZS50cmltKClcblxuICAgIC8vIG1lbW9pemUgcmFuZ2UgcGFyc2luZyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgLy8gdGhpcyBpcyBhIHZlcnkgaG90IHBhdGgsIGFuZCBmdWxseSBkZXRlcm1pbmlzdGljLlxuICAgIGNvbnN0IG1lbW9PcHRzID0gT2JqZWN0LmtleXModGhpcy5vcHRpb25zKS5qb2luKCcsJylcbiAgICBjb25zdCBtZW1vS2V5ID0gYHBhcnNlUmFuZ2U6JHttZW1vT3B0c306JHtyYW5nZX1gXG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KG1lbW9LZXkpXG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIGNhY2hlZFxuICAgIH1cblxuICAgIGNvbnN0IGxvb3NlID0gdGhpcy5vcHRpb25zLmxvb3NlXG4gICAgLy8gYDEuMi4zIC0gMS4yLjRgID0+IGA+PTEuMi4zIDw9MS4yLjRgXG4gICAgY29uc3QgaHIgPSBsb29zZSA/IHJlW3QuSFlQSEVOUkFOR0VMT09TRV0gOiByZVt0LkhZUEhFTlJBTkdFXVxuICAgIHJhbmdlID0gcmFuZ2UucmVwbGFjZShociwgaHlwaGVuUmVwbGFjZSh0aGlzLm9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UpKVxuICAgIGRlYnVnKCdoeXBoZW4gcmVwbGFjZScsIHJhbmdlKVxuICAgIC8vIGA+IDEuMi4zIDwgMS4yLjVgID0+IGA+MS4yLjMgPDEuMi41YFxuICAgIHJhbmdlID0gcmFuZ2UucmVwbGFjZShyZVt0LkNPTVBBUkFUT1JUUklNXSwgY29tcGFyYXRvclRyaW1SZXBsYWNlKVxuICAgIGRlYnVnKCdjb21wYXJhdG9yIHRyaW0nLCByYW5nZSlcblxuICAgIC8vIGB+IDEuMi4zYCA9PiBgfjEuMi4zYFxuICAgIHJhbmdlID0gcmFuZ2UucmVwbGFjZShyZVt0LlRJTERFVFJJTV0sIHRpbGRlVHJpbVJlcGxhY2UpXG5cbiAgICAvLyBgXiAxLjIuM2AgPT4gYF4xLjIuM2BcbiAgICByYW5nZSA9IHJhbmdlLnJlcGxhY2UocmVbdC5DQVJFVFRSSU1dLCBjYXJldFRyaW1SZXBsYWNlKVxuXG4gICAgLy8gbm9ybWFsaXplIHNwYWNlc1xuICAgIHJhbmdlID0gcmFuZ2Uuc3BsaXQoL1xccysvKS5qb2luKCcgJylcblxuICAgIC8vIEF0IHRoaXMgcG9pbnQsIHRoZSByYW5nZSBpcyBjb21wbGV0ZWx5IHRyaW1tZWQgYW5kXG4gICAgLy8gcmVhZHkgdG8gYmUgc3BsaXQgaW50byBjb21wYXJhdG9ycy5cblxuICAgIGxldCByYW5nZUxpc3QgPSByYW5nZVxuICAgICAgLnNwbGl0KCcgJylcbiAgICAgIC5tYXAoY29tcCA9PiBwYXJzZUNvbXBhcmF0b3IoY29tcCwgdGhpcy5vcHRpb25zKSlcbiAgICAgIC5qb2luKCcgJylcbiAgICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgICAvLyA+PTAuMC4wIGlzIGVxdWl2YWxlbnQgdG8gKlxuICAgICAgLm1hcChjb21wID0+IHJlcGxhY2VHVEUwKGNvbXAsIHRoaXMub3B0aW9ucykpXG5cbiAgICBpZiAobG9vc2UpIHtcbiAgICAgIC8vIGluIGxvb3NlIG1vZGUsIHRocm93IG91dCBhbnkgdGhhdCBhcmUgbm90IHZhbGlkIGNvbXBhcmF0b3JzXG4gICAgICByYW5nZUxpc3QgPSByYW5nZUxpc3QuZmlsdGVyKGNvbXAgPT4ge1xuICAgICAgICBkZWJ1ZygnbG9vc2UgaW52YWxpZCBmaWx0ZXInLCBjb21wLCB0aGlzLm9wdGlvbnMpXG4gICAgICAgIHJldHVybiAhIWNvbXAubWF0Y2gocmVbdC5DT01QQVJBVE9STE9PU0VdKVxuICAgICAgfSlcbiAgICB9XG4gICAgZGVidWcoJ3JhbmdlIGxpc3QnLCByYW5nZUxpc3QpXG5cbiAgICAvLyBpZiBhbnkgY29tcGFyYXRvcnMgYXJlIHRoZSBudWxsIHNldCwgdGhlbiByZXBsYWNlIHdpdGggSlVTVCBudWxsIHNldFxuICAgIC8vIGlmIG1vcmUgdGhhbiBvbmUgY29tcGFyYXRvciwgcmVtb3ZlIGFueSAqIGNvbXBhcmF0b3JzXG4gICAgLy8gYWxzbywgZG9uJ3QgaW5jbHVkZSB0aGUgc2FtZSBjb21wYXJhdG9yIG1vcmUgdGhhbiBvbmNlXG4gICAgY29uc3QgcmFuZ2VNYXAgPSBuZXcgTWFwKClcbiAgICBjb25zdCBjb21wYXJhdG9ycyA9IHJhbmdlTGlzdC5tYXAoY29tcCA9PiBuZXcgQ29tcGFyYXRvcihjb21wLCB0aGlzLm9wdGlvbnMpKVxuICAgIGZvciAoY29uc3QgY29tcCBvZiBjb21wYXJhdG9ycykge1xuICAgICAgaWYgKGlzTnVsbFNldChjb21wKSkge1xuICAgICAgICByZXR1cm4gW2NvbXBdXG4gICAgICB9XG4gICAgICByYW5nZU1hcC5zZXQoY29tcC52YWx1ZSwgY29tcClcbiAgICB9XG4gICAgaWYgKHJhbmdlTWFwLnNpemUgPiAxICYmIHJhbmdlTWFwLmhhcygnJykpIHtcbiAgICAgIHJhbmdlTWFwLmRlbGV0ZSgnJylcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBbLi4ucmFuZ2VNYXAudmFsdWVzKCldXG4gICAgY2FjaGUuc2V0KG1lbW9LZXksIHJlc3VsdClcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBpbnRlcnNlY3RzIChyYW5nZSwgb3B0aW9ucykge1xuICAgIGlmICghKHJhbmdlIGluc3RhbmNlb2YgUmFuZ2UpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhIFJhbmdlIGlzIHJlcXVpcmVkJylcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXQuc29tZSgodGhpc0NvbXBhcmF0b3JzKSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBpc1NhdGlzZmlhYmxlKHRoaXNDb21wYXJhdG9ycywgb3B0aW9ucykgJiZcbiAgICAgICAgcmFuZ2Uuc2V0LnNvbWUoKHJhbmdlQ29tcGFyYXRvcnMpID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgaXNTYXRpc2ZpYWJsZShyYW5nZUNvbXBhcmF0b3JzLCBvcHRpb25zKSAmJlxuICAgICAgICAgICAgdGhpc0NvbXBhcmF0b3JzLmV2ZXJ5KCh0aGlzQ29tcGFyYXRvcikgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmFuZ2VDb21wYXJhdG9ycy5ldmVyeSgocmFuZ2VDb21wYXJhdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNDb21wYXJhdG9yLmludGVyc2VjdHMocmFuZ2VDb21wYXJhdG9yLCBvcHRpb25zKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIC8vIGlmIEFOWSBvZiB0aGUgc2V0cyBtYXRjaCBBTEwgb2YgaXRzIGNvbXBhcmF0b3JzLCB0aGVuIHBhc3NcbiAgdGVzdCAodmVyc2lvbikge1xuICAgIGlmICghdmVyc2lvbikge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2ZXJzaW9uID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmVyc2lvbiA9IG5ldyBTZW1WZXIodmVyc2lvbiwgdGhpcy5vcHRpb25zKVxuICAgICAgfSBjYXRjaCAoZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNldC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRlc3RTZXQodGhpcy5zZXRbaV0sIHZlcnNpb24sIHRoaXMub3B0aW9ucykpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gUmFuZ2VcblxuY29uc3QgTFJVID0gcmVxdWlyZSgnbHJ1LWNhY2hlJylcbmNvbnN0IGNhY2hlID0gbmV3IExSVSh7IG1heDogMTAwMCB9KVxuXG5jb25zdCBwYXJzZU9wdGlvbnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9wYXJzZS1vcHRpb25zJylcbmNvbnN0IENvbXBhcmF0b3IgPSByZXF1aXJlKCcuL2NvbXBhcmF0b3InKVxuY29uc3QgZGVidWcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9kZWJ1ZycpXG5jb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuL3NlbXZlcicpXG5jb25zdCB7XG4gIHJlLFxuICB0LFxuICBjb21wYXJhdG9yVHJpbVJlcGxhY2UsXG4gIHRpbGRlVHJpbVJlcGxhY2UsXG4gIGNhcmV0VHJpbVJlcGxhY2UsXG59ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcmUnKVxuXG5jb25zdCBpc051bGxTZXQgPSBjID0+IGMudmFsdWUgPT09ICc8MC4wLjAtMCdcbmNvbnN0IGlzQW55ID0gYyA9PiBjLnZhbHVlID09PSAnJ1xuXG4vLyB0YWtlIGEgc2V0IG9mIGNvbXBhcmF0b3JzIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGVyZVxuLy8gZXhpc3RzIGEgdmVyc2lvbiB3aGljaCBjYW4gc2F0aXNmeSBpdFxuY29uc3QgaXNTYXRpc2ZpYWJsZSA9IChjb21wYXJhdG9ycywgb3B0aW9ucykgPT4ge1xuICBsZXQgcmVzdWx0ID0gdHJ1ZVxuICBjb25zdCByZW1haW5pbmdDb21wYXJhdG9ycyA9IGNvbXBhcmF0b3JzLnNsaWNlKClcbiAgbGV0IHRlc3RDb21wYXJhdG9yID0gcmVtYWluaW5nQ29tcGFyYXRvcnMucG9wKClcblxuICB3aGlsZSAocmVzdWx0ICYmIHJlbWFpbmluZ0NvbXBhcmF0b3JzLmxlbmd0aCkge1xuICAgIHJlc3VsdCA9IHJlbWFpbmluZ0NvbXBhcmF0b3JzLmV2ZXJ5KChvdGhlckNvbXBhcmF0b3IpID0+IHtcbiAgICAgIHJldHVybiB0ZXN0Q29tcGFyYXRvci5pbnRlcnNlY3RzKG90aGVyQ29tcGFyYXRvciwgb3B0aW9ucylcbiAgICB9KVxuXG4gICAgdGVzdENvbXBhcmF0b3IgPSByZW1haW5pbmdDb21wYXJhdG9ycy5wb3AoKVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vLyBjb21wcmlzZWQgb2YgeHJhbmdlcywgdGlsZGVzLCBzdGFycywgYW5kIGd0bHQncyBhdCB0aGlzIHBvaW50LlxuLy8gYWxyZWFkeSByZXBsYWNlZCB0aGUgaHlwaGVuIHJhbmdlc1xuLy8gdHVybiBpbnRvIGEgc2V0IG9mIEpVU1QgY29tcGFyYXRvcnMuXG5jb25zdCBwYXJzZUNvbXBhcmF0b3IgPSAoY29tcCwgb3B0aW9ucykgPT4ge1xuICBkZWJ1ZygnY29tcCcsIGNvbXAsIG9wdGlvbnMpXG4gIGNvbXAgPSByZXBsYWNlQ2FyZXRzKGNvbXAsIG9wdGlvbnMpXG4gIGRlYnVnKCdjYXJldCcsIGNvbXApXG4gIGNvbXAgPSByZXBsYWNlVGlsZGVzKGNvbXAsIG9wdGlvbnMpXG4gIGRlYnVnKCd0aWxkZXMnLCBjb21wKVxuICBjb21wID0gcmVwbGFjZVhSYW5nZXMoY29tcCwgb3B0aW9ucylcbiAgZGVidWcoJ3hyYW5nZScsIGNvbXApXG4gIGNvbXAgPSByZXBsYWNlU3RhcnMoY29tcCwgb3B0aW9ucylcbiAgZGVidWcoJ3N0YXJzJywgY29tcClcbiAgcmV0dXJuIGNvbXBcbn1cblxuY29uc3QgaXNYID0gaWQgPT4gIWlkIHx8IGlkLnRvTG93ZXJDYXNlKCkgPT09ICd4JyB8fCBpZCA9PT0gJyonXG5cbi8vIH4sIH4+IC0tPiAqIChhbnksIGtpbmRhIHNpbGx5KVxuLy8gfjIsIH4yLngsIH4yLngueCwgfj4yLCB+PjIueCB+PjIueC54IC0tPiA+PTIuMC4wIDwzLjAuMC0wXG4vLyB+Mi4wLCB+Mi4wLngsIH4+Mi4wLCB+PjIuMC54IC0tPiA+PTIuMC4wIDwyLjEuMC0wXG4vLyB+MS4yLCB+MS4yLngsIH4+MS4yLCB+PjEuMi54IC0tPiA+PTEuMi4wIDwxLjMuMC0wXG4vLyB+MS4yLjMsIH4+MS4yLjMgLS0+ID49MS4yLjMgPDEuMy4wLTBcbi8vIH4xLjIuMCwgfj4xLjIuMCAtLT4gPj0xLjIuMCA8MS4zLjAtMFxuLy8gfjAuMC4xIC0tPiA+PTAuMC4xIDwwLjEuMC0wXG5jb25zdCByZXBsYWNlVGlsZGVzID0gKGNvbXAsIG9wdGlvbnMpID0+XG4gIGNvbXAudHJpbSgpLnNwbGl0KC9cXHMrLykubWFwKChjKSA9PiB7XG4gICAgcmV0dXJuIHJlcGxhY2VUaWxkZShjLCBvcHRpb25zKVxuICB9KS5qb2luKCcgJylcblxuY29uc3QgcmVwbGFjZVRpbGRlID0gKGNvbXAsIG9wdGlvbnMpID0+IHtcbiAgY29uc3QgciA9IG9wdGlvbnMubG9vc2UgPyByZVt0LlRJTERFTE9PU0VdIDogcmVbdC5USUxERV1cbiAgcmV0dXJuIGNvbXAucmVwbGFjZShyLCAoXywgTSwgbSwgcCwgcHIpID0+IHtcbiAgICBkZWJ1ZygndGlsZGUnLCBjb21wLCBfLCBNLCBtLCBwLCBwcilcbiAgICBsZXQgcmV0XG5cbiAgICBpZiAoaXNYKE0pKSB7XG4gICAgICByZXQgPSAnJ1xuICAgIH0gZWxzZSBpZiAoaXNYKG0pKSB7XG4gICAgICByZXQgPSBgPj0ke019LjAuMCA8JHsrTSArIDF9LjAuMC0wYFxuICAgIH0gZWxzZSBpZiAoaXNYKHApKSB7XG4gICAgICAvLyB+MS4yID09ID49MS4yLjAgPDEuMy4wLTBcbiAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4wIDwke019LiR7K20gKyAxfS4wLTBgXG4gICAgfSBlbHNlIGlmIChwcikge1xuICAgICAgZGVidWcoJ3JlcGxhY2VUaWxkZSBwcicsIHByKVxuICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cH0tJHtwclxuICAgICAgfSA8JHtNfS4keyttICsgMX0uMC0wYFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB+MS4yLjMgPT0gPj0xLjIuMyA8MS4zLjAtMFxuICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cFxuICAgICAgfSA8JHtNfS4keyttICsgMX0uMC0wYFxuICAgIH1cblxuICAgIGRlYnVnKCd0aWxkZSByZXR1cm4nLCByZXQpXG4gICAgcmV0dXJuIHJldFxuICB9KVxufVxuXG4vLyBeIC0tPiAqIChhbnksIGtpbmRhIHNpbGx5KVxuLy8gXjIsIF4yLngsIF4yLngueCAtLT4gPj0yLjAuMCA8My4wLjAtMFxuLy8gXjIuMCwgXjIuMC54IC0tPiA+PTIuMC4wIDwzLjAuMC0wXG4vLyBeMS4yLCBeMS4yLnggLS0+ID49MS4yLjAgPDIuMC4wLTBcbi8vIF4xLjIuMyAtLT4gPj0xLjIuMyA8Mi4wLjAtMFxuLy8gXjEuMi4wIC0tPiA+PTEuMi4wIDwyLjAuMC0wXG4vLyBeMC4wLjEgLS0+ID49MC4wLjEgPDAuMC4yLTBcbi8vIF4wLjEuMCAtLT4gPj0wLjEuMCA8MC4yLjAtMFxuY29uc3QgcmVwbGFjZUNhcmV0cyA9IChjb21wLCBvcHRpb25zKSA9PlxuICBjb21wLnRyaW0oKS5zcGxpdCgvXFxzKy8pLm1hcCgoYykgPT4ge1xuICAgIHJldHVybiByZXBsYWNlQ2FyZXQoYywgb3B0aW9ucylcbiAgfSkuam9pbignICcpXG5cbmNvbnN0IHJlcGxhY2VDYXJldCA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIGRlYnVnKCdjYXJldCcsIGNvbXAsIG9wdGlvbnMpXG4gIGNvbnN0IHIgPSBvcHRpb25zLmxvb3NlID8gcmVbdC5DQVJFVExPT1NFXSA6IHJlW3QuQ0FSRVRdXG4gIGNvbnN0IHogPSBvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlID8gJy0wJyA6ICcnXG4gIHJldHVybiBjb21wLnJlcGxhY2UociwgKF8sIE0sIG0sIHAsIHByKSA9PiB7XG4gICAgZGVidWcoJ2NhcmV0JywgY29tcCwgXywgTSwgbSwgcCwgcHIpXG4gICAgbGV0IHJldFxuXG4gICAgaWYgKGlzWChNKSkge1xuICAgICAgcmV0ID0gJydcbiAgICB9IGVsc2UgaWYgKGlzWChtKSkge1xuICAgICAgcmV0ID0gYD49JHtNfS4wLjAke3p9IDwkeytNICsgMX0uMC4wLTBgXG4gICAgfSBlbHNlIGlmIChpc1gocCkpIHtcbiAgICAgIGlmIChNID09PSAnMCcpIHtcbiAgICAgICAgcmV0ID0gYD49JHtNfS4ke219LjAke3p9IDwke019LiR7K20gKyAxfS4wLTBgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBgPj0ke019LiR7bX0uMCR7en0gPCR7K00gKyAxfS4wLjAtMGBcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByKSB7XG4gICAgICBkZWJ1ZygncmVwbGFjZUNhcmV0IHByJywgcHIpXG4gICAgICBpZiAoTSA9PT0gJzAnKSB7XG4gICAgICAgIGlmIChtID09PSAnMCcpIHtcbiAgICAgICAgICByZXQgPSBgPj0ke019LiR7bX0uJHtwfS0ke3ByXG4gICAgICAgICAgfSA8JHtNfS4ke219LiR7K3AgKyAxfS0wYFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4ke3B9LSR7cHJcbiAgICAgICAgICB9IDwke019LiR7K20gKyAxfS4wLTBgXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4ke3B9LSR7cHJcbiAgICAgICAgfSA8JHsrTSArIDF9LjAuMC0wYFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Zygnbm8gcHInKVxuICAgICAgaWYgKE0gPT09ICcwJykge1xuICAgICAgICBpZiAobSA9PT0gJzAnKSB7XG4gICAgICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cFxuICAgICAgICAgIH0ke3p9IDwke019LiR7bX0uJHsrcCArIDF9LTBgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cFxuICAgICAgICAgIH0ke3p9IDwke019LiR7K20gKyAxfS4wLTBgXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4ke3BcbiAgICAgICAgfSA8JHsrTSArIDF9LjAuMC0wYFxuICAgICAgfVxuICAgIH1cblxuICAgIGRlYnVnKCdjYXJldCByZXR1cm4nLCByZXQpXG4gICAgcmV0dXJuIHJldFxuICB9KVxufVxuXG5jb25zdCByZXBsYWNlWFJhbmdlcyA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIGRlYnVnKCdyZXBsYWNlWFJhbmdlcycsIGNvbXAsIG9wdGlvbnMpXG4gIHJldHVybiBjb21wLnNwbGl0KC9cXHMrLykubWFwKChjKSA9PiB7XG4gICAgcmV0dXJuIHJlcGxhY2VYUmFuZ2UoYywgb3B0aW9ucylcbiAgfSkuam9pbignICcpXG59XG5cbmNvbnN0IHJlcGxhY2VYUmFuZ2UgPSAoY29tcCwgb3B0aW9ucykgPT4ge1xuICBjb21wID0gY29tcC50cmltKClcbiAgY29uc3QgciA9IG9wdGlvbnMubG9vc2UgPyByZVt0LlhSQU5HRUxPT1NFXSA6IHJlW3QuWFJBTkdFXVxuICByZXR1cm4gY29tcC5yZXBsYWNlKHIsIChyZXQsIGd0bHQsIE0sIG0sIHAsIHByKSA9PiB7XG4gICAgZGVidWcoJ3hSYW5nZScsIGNvbXAsIHJldCwgZ3RsdCwgTSwgbSwgcCwgcHIpXG4gICAgY29uc3QgeE0gPSBpc1goTSlcbiAgICBjb25zdCB4bSA9IHhNIHx8IGlzWChtKVxuICAgIGNvbnN0IHhwID0geG0gfHwgaXNYKHApXG4gICAgY29uc3QgYW55WCA9IHhwXG5cbiAgICBpZiAoZ3RsdCA9PT0gJz0nICYmIGFueVgpIHtcbiAgICAgIGd0bHQgPSAnJ1xuICAgIH1cblxuICAgIC8vIGlmIHdlJ3JlIGluY2x1ZGluZyBwcmVyZWxlYXNlcyBpbiB0aGUgbWF0Y2gsIHRoZW4gd2UgbmVlZFxuICAgIC8vIHRvIGZpeCB0aGlzIHRvIC0wLCB0aGUgbG93ZXN0IHBvc3NpYmxlIHByZXJlbGVhc2UgdmFsdWVcbiAgICBwciA9IG9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgPyAnLTAnIDogJydcblxuICAgIGlmICh4TSkge1xuICAgICAgaWYgKGd0bHQgPT09ICc+JyB8fCBndGx0ID09PSAnPCcpIHtcbiAgICAgICAgLy8gbm90aGluZyBpcyBhbGxvd2VkXG4gICAgICAgIHJldCA9ICc8MC4wLjAtMCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5vdGhpbmcgaXMgZm9yYmlkZGVuXG4gICAgICAgIHJldCA9ICcqJ1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZ3RsdCAmJiBhbnlYKSB7XG4gICAgICAvLyB3ZSBrbm93IHBhdGNoIGlzIGFuIHgsIGJlY2F1c2Ugd2UgaGF2ZSBhbnkgeCBhdCBhbGwuXG4gICAgICAvLyByZXBsYWNlIFggd2l0aCAwXG4gICAgICBpZiAoeG0pIHtcbiAgICAgICAgbSA9IDBcbiAgICAgIH1cbiAgICAgIHAgPSAwXG5cbiAgICAgIGlmIChndGx0ID09PSAnPicpIHtcbiAgICAgICAgLy8gPjEgPT4gPj0yLjAuMFxuICAgICAgICAvLyA+MS4yID0+ID49MS4zLjBcbiAgICAgICAgZ3RsdCA9ICc+PSdcbiAgICAgICAgaWYgKHhtKSB7XG4gICAgICAgICAgTSA9ICtNICsgMVxuICAgICAgICAgIG0gPSAwXG4gICAgICAgICAgcCA9IDBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtID0gK20gKyAxXG4gICAgICAgICAgcCA9IDBcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChndGx0ID09PSAnPD0nKSB7XG4gICAgICAgIC8vIDw9MC43LnggaXMgYWN0dWFsbHkgPDAuOC4wLCBzaW5jZSBhbnkgMC43Lnggc2hvdWxkXG4gICAgICAgIC8vIHBhc3MuICBTaW1pbGFybHksIDw9Ny54IGlzIGFjdHVhbGx5IDw4LjAuMCwgZXRjLlxuICAgICAgICBndGx0ID0gJzwnXG4gICAgICAgIGlmICh4bSkge1xuICAgICAgICAgIE0gPSArTSArIDFcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtID0gK20gKyAxXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGd0bHQgPT09ICc8Jykge1xuICAgICAgICBwciA9ICctMCdcbiAgICAgIH1cblxuICAgICAgcmV0ID0gYCR7Z3RsdCArIE19LiR7bX0uJHtwfSR7cHJ9YFxuICAgIH0gZWxzZSBpZiAoeG0pIHtcbiAgICAgIHJldCA9IGA+PSR7TX0uMC4wJHtwcn0gPCR7K00gKyAxfS4wLjAtMGBcbiAgICB9IGVsc2UgaWYgKHhwKSB7XG4gICAgICByZXQgPSBgPj0ke019LiR7bX0uMCR7cHJcbiAgICAgIH0gPCR7TX0uJHsrbSArIDF9LjAtMGBcbiAgICB9XG5cbiAgICBkZWJ1ZygneFJhbmdlIHJldHVybicsIHJldClcblxuICAgIHJldHVybiByZXRcbiAgfSlcbn1cblxuLy8gQmVjYXVzZSAqIGlzIEFORC1lZCB3aXRoIGV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgY29tcGFyYXRvcixcbi8vIGFuZCAnJyBtZWFucyBcImFueSB2ZXJzaW9uXCIsIGp1c3QgcmVtb3ZlIHRoZSAqcyBlbnRpcmVseS5cbmNvbnN0IHJlcGxhY2VTdGFycyA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIGRlYnVnKCdyZXBsYWNlU3RhcnMnLCBjb21wLCBvcHRpb25zKVxuICAvLyBMb29zZW5lc3MgaXMgaWdub3JlZCBoZXJlLiAgc3RhciBpcyBhbHdheXMgYXMgbG9vc2UgYXMgaXQgZ2V0cyFcbiAgcmV0dXJuIGNvbXAudHJpbSgpLnJlcGxhY2UocmVbdC5TVEFSXSwgJycpXG59XG5cbmNvbnN0IHJlcGxhY2VHVEUwID0gKGNvbXAsIG9wdGlvbnMpID0+IHtcbiAgZGVidWcoJ3JlcGxhY2VHVEUwJywgY29tcCwgb3B0aW9ucylcbiAgcmV0dXJuIGNvbXAudHJpbSgpXG4gICAgLnJlcGxhY2UocmVbb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSA/IHQuR1RFMFBSRSA6IHQuR1RFMF0sICcnKVxufVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIHBhc3NlZCB0byBzdHJpbmcucmVwbGFjZShyZVt0LkhZUEhFTlJBTkdFXSlcbi8vIE0sIG0sIHBhdGNoLCBwcmVyZWxlYXNlLCBidWlsZFxuLy8gMS4yIC0gMy40LjUgPT4gPj0xLjIuMCA8PTMuNC41XG4vLyAxLjIuMyAtIDMuNCA9PiA+PTEuMi4wIDwzLjUuMC0wIEFueSAzLjQueCB3aWxsIGRvXG4vLyAxLjIgLSAzLjQgPT4gPj0xLjIuMCA8My41LjAtMFxuY29uc3QgaHlwaGVuUmVwbGFjZSA9IGluY1ByID0+ICgkMCxcbiAgZnJvbSwgZk0sIGZtLCBmcCwgZnByLCBmYixcbiAgdG8sIHRNLCB0bSwgdHAsIHRwciwgdGIpID0+IHtcbiAgaWYgKGlzWChmTSkpIHtcbiAgICBmcm9tID0gJydcbiAgfSBlbHNlIGlmIChpc1goZm0pKSB7XG4gICAgZnJvbSA9IGA+PSR7Zk19LjAuMCR7aW5jUHIgPyAnLTAnIDogJyd9YFxuICB9IGVsc2UgaWYgKGlzWChmcCkpIHtcbiAgICBmcm9tID0gYD49JHtmTX0uJHtmbX0uMCR7aW5jUHIgPyAnLTAnIDogJyd9YFxuICB9IGVsc2UgaWYgKGZwcikge1xuICAgIGZyb20gPSBgPj0ke2Zyb219YFxuICB9IGVsc2Uge1xuICAgIGZyb20gPSBgPj0ke2Zyb219JHtpbmNQciA/ICctMCcgOiAnJ31gXG4gIH1cblxuICBpZiAoaXNYKHRNKSkge1xuICAgIHRvID0gJydcbiAgfSBlbHNlIGlmIChpc1godG0pKSB7XG4gICAgdG8gPSBgPCR7K3RNICsgMX0uMC4wLTBgXG4gIH0gZWxzZSBpZiAoaXNYKHRwKSkge1xuICAgIHRvID0gYDwke3RNfS4keyt0bSArIDF9LjAtMGBcbiAgfSBlbHNlIGlmICh0cHIpIHtcbiAgICB0byA9IGA8PSR7dE19LiR7dG19LiR7dHB9LSR7dHByfWBcbiAgfSBlbHNlIGlmIChpbmNQcikge1xuICAgIHRvID0gYDwke3RNfS4ke3RtfS4keyt0cCArIDF9LTBgXG4gIH0gZWxzZSB7XG4gICAgdG8gPSBgPD0ke3RvfWBcbiAgfVxuXG4gIHJldHVybiAoYCR7ZnJvbX0gJHt0b31gKS50cmltKClcbn1cblxuY29uc3QgdGVzdFNldCA9IChzZXQsIHZlcnNpb24sIG9wdGlvbnMpID0+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIXNldFtpXS50ZXN0KHZlcnNpb24pKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBpZiAodmVyc2lvbi5wcmVyZWxlYXNlLmxlbmd0aCAmJiAhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSkge1xuICAgIC8vIEZpbmQgdGhlIHNldCBvZiB2ZXJzaW9ucyB0aGF0IGFyZSBhbGxvd2VkIHRvIGhhdmUgcHJlcmVsZWFzZXNcbiAgICAvLyBGb3IgZXhhbXBsZSwgXjEuMi4zLXByLjEgZGVzdWdhcnMgdG8gPj0xLjIuMy1wci4xIDwyLjAuMFxuICAgIC8vIFRoYXQgc2hvdWxkIGFsbG93IGAxLjIuMy1wci4yYCB0byBwYXNzLlxuICAgIC8vIEhvd2V2ZXIsIGAxLjIuNC1hbHBoYS5ub3RyZWFkeWAgc2hvdWxkIE5PVCBiZSBhbGxvd2VkLFxuICAgIC8vIGV2ZW4gdGhvdWdoIGl0J3Mgd2l0aGluIHRoZSByYW5nZSBzZXQgYnkgdGhlIGNvbXBhcmF0b3JzLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBkZWJ1ZyhzZXRbaV0uc2VtdmVyKVxuICAgICAgaWYgKHNldFtpXS5zZW12ZXIgPT09IENvbXBhcmF0b3IuQU5ZKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChzZXRbaV0uc2VtdmVyLnByZXJlbGVhc2UubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBhbGxvd2VkID0gc2V0W2ldLnNlbXZlclxuICAgICAgICBpZiAoYWxsb3dlZC5tYWpvciA9PT0gdmVyc2lvbi5tYWpvciAmJlxuICAgICAgICAgICAgYWxsb3dlZC5taW5vciA9PT0gdmVyc2lvbi5taW5vciAmJlxuICAgICAgICAgICAgYWxsb3dlZC5wYXRjaCA9PT0gdmVyc2lvbi5wYXRjaCkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBWZXJzaW9uIGhhcyBhIC1wcmUsIGJ1dCBpdCdzIG5vdCBvbmUgb2YgdGhlIG9uZXMgd2UgbGlrZS5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJjb25zdCBBTlkgPSBTeW1ib2woJ1NlbVZlciBBTlknKVxuLy8gaG9pc3RlZCBjbGFzcyBmb3IgY3ljbGljIGRlcGVuZGVuY3lcbmNsYXNzIENvbXBhcmF0b3Ige1xuICBzdGF0aWMgZ2V0IEFOWSAoKSB7XG4gICAgcmV0dXJuIEFOWVxuICB9XG5cbiAgY29uc3RydWN0b3IgKGNvbXAsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gcGFyc2VPcHRpb25zKG9wdGlvbnMpXG5cbiAgICBpZiAoY29tcCBpbnN0YW5jZW9mIENvbXBhcmF0b3IpIHtcbiAgICAgIGlmIChjb21wLmxvb3NlID09PSAhIW9wdGlvbnMubG9vc2UpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXAgPSBjb21wLnZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgZGVidWcoJ2NvbXBhcmF0b3InLCBjb21wLCBvcHRpb25zKVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICB0aGlzLmxvb3NlID0gISFvcHRpb25zLmxvb3NlXG4gICAgdGhpcy5wYXJzZShjb21wKVxuXG4gICAgaWYgKHRoaXMuc2VtdmVyID09PSBBTlkpIHtcbiAgICAgIHRoaXMudmFsdWUgPSAnJ1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZhbHVlID0gdGhpcy5vcGVyYXRvciArIHRoaXMuc2VtdmVyLnZlcnNpb25cbiAgICB9XG5cbiAgICBkZWJ1ZygnY29tcCcsIHRoaXMpXG4gIH1cblxuICBwYXJzZSAoY29tcCkge1xuICAgIGNvbnN0IHIgPSB0aGlzLm9wdGlvbnMubG9vc2UgPyByZVt0LkNPTVBBUkFUT1JMT09TRV0gOiByZVt0LkNPTVBBUkFUT1JdXG4gICAgY29uc3QgbSA9IGNvbXAubWF0Y2gocilcblxuICAgIGlmICghbSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBjb21wYXJhdG9yOiAke2NvbXB9YClcbiAgICB9XG5cbiAgICB0aGlzLm9wZXJhdG9yID0gbVsxXSAhPT0gdW5kZWZpbmVkID8gbVsxXSA6ICcnXG4gICAgaWYgKHRoaXMub3BlcmF0b3IgPT09ICc9Jykge1xuICAgICAgdGhpcy5vcGVyYXRvciA9ICcnXG4gICAgfVxuXG4gICAgLy8gaWYgaXQgbGl0ZXJhbGx5IGlzIGp1c3QgJz4nIG9yICcnIHRoZW4gYWxsb3cgYW55dGhpbmcuXG4gICAgaWYgKCFtWzJdKSB7XG4gICAgICB0aGlzLnNlbXZlciA9IEFOWVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbXZlciA9IG5ldyBTZW1WZXIobVsyXSwgdGhpcy5vcHRpb25zLmxvb3NlKVxuICAgIH1cbiAgfVxuXG4gIHRvU3RyaW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZVxuICB9XG5cbiAgdGVzdCAodmVyc2lvbikge1xuICAgIGRlYnVnKCdDb21wYXJhdG9yLnRlc3QnLCB2ZXJzaW9uLCB0aGlzLm9wdGlvbnMubG9vc2UpXG5cbiAgICBpZiAodGhpcy5zZW12ZXIgPT09IEFOWSB8fCB2ZXJzaW9uID09PSBBTlkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2ZXJzaW9uID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmVyc2lvbiA9IG5ldyBTZW1WZXIodmVyc2lvbiwgdGhpcy5vcHRpb25zKVxuICAgICAgfSBjYXRjaCAoZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNtcCh2ZXJzaW9uLCB0aGlzLm9wZXJhdG9yLCB0aGlzLnNlbXZlciwgdGhpcy5vcHRpb25zKVxuICB9XG5cbiAgaW50ZXJzZWN0cyAoY29tcCwgb3B0aW9ucykge1xuICAgIGlmICghKGNvbXAgaW5zdGFuY2VvZiBDb21wYXJhdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYSBDb21wYXJhdG9yIGlzIHJlcXVpcmVkJylcbiAgICB9XG5cbiAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICBsb29zZTogISFvcHRpb25zLFxuICAgICAgICBpbmNsdWRlUHJlcmVsZWFzZTogZmFsc2UsXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3BlcmF0b3IgPT09ICcnKSB7XG4gICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUmFuZ2UoY29tcC52YWx1ZSwgb3B0aW9ucykudGVzdCh0aGlzLnZhbHVlKVxuICAgIH0gZWxzZSBpZiAoY29tcC5vcGVyYXRvciA9PT0gJycpIHtcbiAgICAgIGlmIChjb21wLnZhbHVlID09PSAnJykge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSYW5nZSh0aGlzLnZhbHVlLCBvcHRpb25zKS50ZXN0KGNvbXAuc2VtdmVyKVxuICAgIH1cblxuICAgIGNvbnN0IHNhbWVEaXJlY3Rpb25JbmNyZWFzaW5nID1cbiAgICAgICh0aGlzLm9wZXJhdG9yID09PSAnPj0nIHx8IHRoaXMub3BlcmF0b3IgPT09ICc+JykgJiZcbiAgICAgIChjb21wLm9wZXJhdG9yID09PSAnPj0nIHx8IGNvbXAub3BlcmF0b3IgPT09ICc+JylcbiAgICBjb25zdCBzYW1lRGlyZWN0aW9uRGVjcmVhc2luZyA9XG4gICAgICAodGhpcy5vcGVyYXRvciA9PT0gJzw9JyB8fCB0aGlzLm9wZXJhdG9yID09PSAnPCcpICYmXG4gICAgICAoY29tcC5vcGVyYXRvciA9PT0gJzw9JyB8fCBjb21wLm9wZXJhdG9yID09PSAnPCcpXG4gICAgY29uc3Qgc2FtZVNlbVZlciA9IHRoaXMuc2VtdmVyLnZlcnNpb24gPT09IGNvbXAuc2VtdmVyLnZlcnNpb25cbiAgICBjb25zdCBkaWZmZXJlbnREaXJlY3Rpb25zSW5jbHVzaXZlID1cbiAgICAgICh0aGlzLm9wZXJhdG9yID09PSAnPj0nIHx8IHRoaXMub3BlcmF0b3IgPT09ICc8PScpICYmXG4gICAgICAoY29tcC5vcGVyYXRvciA9PT0gJz49JyB8fCBjb21wLm9wZXJhdG9yID09PSAnPD0nKVxuICAgIGNvbnN0IG9wcG9zaXRlRGlyZWN0aW9uc0xlc3NUaGFuID1cbiAgICAgIGNtcCh0aGlzLnNlbXZlciwgJzwnLCBjb21wLnNlbXZlciwgb3B0aW9ucykgJiZcbiAgICAgICh0aGlzLm9wZXJhdG9yID09PSAnPj0nIHx8IHRoaXMub3BlcmF0b3IgPT09ICc+JykgJiZcbiAgICAgICAgKGNvbXAub3BlcmF0b3IgPT09ICc8PScgfHwgY29tcC5vcGVyYXRvciA9PT0gJzwnKVxuICAgIGNvbnN0IG9wcG9zaXRlRGlyZWN0aW9uc0dyZWF0ZXJUaGFuID1cbiAgICAgIGNtcCh0aGlzLnNlbXZlciwgJz4nLCBjb21wLnNlbXZlciwgb3B0aW9ucykgJiZcbiAgICAgICh0aGlzLm9wZXJhdG9yID09PSAnPD0nIHx8IHRoaXMub3BlcmF0b3IgPT09ICc8JykgJiZcbiAgICAgICAgKGNvbXAub3BlcmF0b3IgPT09ICc+PScgfHwgY29tcC5vcGVyYXRvciA9PT0gJz4nKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIHNhbWVEaXJlY3Rpb25JbmNyZWFzaW5nIHx8XG4gICAgICBzYW1lRGlyZWN0aW9uRGVjcmVhc2luZyB8fFxuICAgICAgKHNhbWVTZW1WZXIgJiYgZGlmZmVyZW50RGlyZWN0aW9uc0luY2x1c2l2ZSkgfHxcbiAgICAgIG9wcG9zaXRlRGlyZWN0aW9uc0xlc3NUaGFuIHx8XG4gICAgICBvcHBvc2l0ZURpcmVjdGlvbnNHcmVhdGVyVGhhblxuICAgIClcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBhcmF0b3JcblxuY29uc3QgcGFyc2VPcHRpb25zID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcGFyc2Utb3B0aW9ucycpXG5jb25zdCB7IHJlLCB0IH0gPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9yZScpXG5jb25zdCBjbXAgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvY21wJylcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvZGVidWcnKVxuY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi9zZW12ZXInKVxuY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuL3JhbmdlJylcbiIsImNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5jb25zdCBzYXRpc2ZpZXMgPSAodmVyc2lvbiwgcmFuZ2UsIG9wdGlvbnMpID0+IHtcbiAgdHJ5IHtcbiAgICByYW5nZSA9IG5ldyBSYW5nZShyYW5nZSwgb3B0aW9ucylcbiAgfSBjYXRjaCAoZXIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gcmFuZ2UudGVzdCh2ZXJzaW9uKVxufVxubW9kdWxlLmV4cG9ydHMgPSBzYXRpc2ZpZXNcbiIsImNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5cbi8vIE1vc3RseSBqdXN0IGZvciB0ZXN0aW5nIGFuZCBsZWdhY3kgQVBJIHJlYXNvbnNcbmNvbnN0IHRvQ29tcGFyYXRvcnMgPSAocmFuZ2UsIG9wdGlvbnMpID0+XG4gIG5ldyBSYW5nZShyYW5nZSwgb3B0aW9ucykuc2V0XG4gICAgLm1hcChjb21wID0+IGNvbXAubWFwKGMgPT4gYy52YWx1ZSkuam9pbignICcpLnRyaW0oKS5zcGxpdCgnICcpKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvQ29tcGFyYXRvcnNcbiIsImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5cbmNvbnN0IG1heFNhdGlzZnlpbmcgPSAodmVyc2lvbnMsIHJhbmdlLCBvcHRpb25zKSA9PiB7XG4gIGxldCBtYXggPSBudWxsXG4gIGxldCBtYXhTViA9IG51bGxcbiAgbGV0IHJhbmdlT2JqID0gbnVsbFxuICB0cnkge1xuICAgIHJhbmdlT2JqID0gbmV3IFJhbmdlKHJhbmdlLCBvcHRpb25zKVxuICB9IGNhdGNoIChlcikge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgdmVyc2lvbnMuZm9yRWFjaCgodikgPT4ge1xuICAgIGlmIChyYW5nZU9iai50ZXN0KHYpKSB7XG4gICAgICAvLyBzYXRpc2ZpZXModiwgcmFuZ2UsIG9wdGlvbnMpXG4gICAgICBpZiAoIW1heCB8fCBtYXhTVi5jb21wYXJlKHYpID09PSAtMSkge1xuICAgICAgICAvLyBjb21wYXJlKG1heCwgdiwgdHJ1ZSlcbiAgICAgICAgbWF4ID0gdlxuICAgICAgICBtYXhTViA9IG5ldyBTZW1WZXIobWF4LCBvcHRpb25zKVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIG1heFxufVxubW9kdWxlLmV4cG9ydHMgPSBtYXhTYXRpc2Z5aW5nXG4iLCJjb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3NlbXZlcicpXG5jb25zdCBSYW5nZSA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvcmFuZ2UnKVxuY29uc3QgbWluU2F0aXNmeWluZyA9ICh2ZXJzaW9ucywgcmFuZ2UsIG9wdGlvbnMpID0+IHtcbiAgbGV0IG1pbiA9IG51bGxcbiAgbGV0IG1pblNWID0gbnVsbFxuICBsZXQgcmFuZ2VPYmogPSBudWxsXG4gIHRyeSB7XG4gICAgcmFuZ2VPYmogPSBuZXcgUmFuZ2UocmFuZ2UsIG9wdGlvbnMpXG4gIH0gY2F0Y2ggKGVyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICB2ZXJzaW9ucy5mb3JFYWNoKCh2KSA9PiB7XG4gICAgaWYgKHJhbmdlT2JqLnRlc3QodikpIHtcbiAgICAgIC8vIHNhdGlzZmllcyh2LCByYW5nZSwgb3B0aW9ucylcbiAgICAgIGlmICghbWluIHx8IG1pblNWLmNvbXBhcmUodikgPT09IDEpIHtcbiAgICAgICAgLy8gY29tcGFyZShtaW4sIHYsIHRydWUpXG4gICAgICAgIG1pbiA9IHZcbiAgICAgICAgbWluU1YgPSBuZXcgU2VtVmVyKG1pbiwgb3B0aW9ucylcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIHJldHVybiBtaW5cbn1cbm1vZHVsZS5leHBvcnRzID0gbWluU2F0aXNmeWluZ1xuIiwiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3JhbmdlJylcbmNvbnN0IGd0ID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2d0JylcblxuY29uc3QgbWluVmVyc2lvbiA9IChyYW5nZSwgbG9vc2UpID0+IHtcbiAgcmFuZ2UgPSBuZXcgUmFuZ2UocmFuZ2UsIGxvb3NlKVxuXG4gIGxldCBtaW52ZXIgPSBuZXcgU2VtVmVyKCcwLjAuMCcpXG4gIGlmIChyYW5nZS50ZXN0KG1pbnZlcikpIHtcbiAgICByZXR1cm4gbWludmVyXG4gIH1cblxuICBtaW52ZXIgPSBuZXcgU2VtVmVyKCcwLjAuMC0wJylcbiAgaWYgKHJhbmdlLnRlc3QobWludmVyKSkge1xuICAgIHJldHVybiBtaW52ZXJcbiAgfVxuXG4gIG1pbnZlciA9IG51bGxcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZS5zZXQubGVuZ3RoOyArK2kpIHtcbiAgICBjb25zdCBjb21wYXJhdG9ycyA9IHJhbmdlLnNldFtpXVxuXG4gICAgbGV0IHNldE1pbiA9IG51bGxcbiAgICBjb21wYXJhdG9ycy5mb3JFYWNoKChjb21wYXJhdG9yKSA9PiB7XG4gICAgICAvLyBDbG9uZSB0byBhdm9pZCBtYW5pcHVsYXRpbmcgdGhlIGNvbXBhcmF0b3IncyBzZW12ZXIgb2JqZWN0LlxuICAgICAgY29uc3QgY29tcHZlciA9IG5ldyBTZW1WZXIoY29tcGFyYXRvci5zZW12ZXIudmVyc2lvbilcbiAgICAgIHN3aXRjaCAoY29tcGFyYXRvci5vcGVyYXRvcikge1xuICAgICAgICBjYXNlICc+JzpcbiAgICAgICAgICBpZiAoY29tcHZlci5wcmVyZWxlYXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29tcHZlci5wYXRjaCsrXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbXB2ZXIucHJlcmVsZWFzZS5wdXNoKDApXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbXB2ZXIucmF3ID0gY29tcHZlci5mb3JtYXQoKVxuICAgICAgICAgIC8qIGZhbGx0aHJvdWdoICovXG4gICAgICAgIGNhc2UgJyc6XG4gICAgICAgIGNhc2UgJz49JzpcbiAgICAgICAgICBpZiAoIXNldE1pbiB8fCBndChjb21wdmVyLCBzZXRNaW4pKSB7XG4gICAgICAgICAgICBzZXRNaW4gPSBjb21wdmVyXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJzwnOlxuICAgICAgICBjYXNlICc8PSc6XG4gICAgICAgICAgLyogSWdub3JlIG1heGltdW0gdmVyc2lvbnMgKi9cbiAgICAgICAgICBicmVha1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBvcGVyYXRpb246ICR7Y29tcGFyYXRvci5vcGVyYXRvcn1gKVxuICAgICAgfVxuICAgIH0pXG4gICAgaWYgKHNldE1pbiAmJiAoIW1pbnZlciB8fCBndChtaW52ZXIsIHNldE1pbikpKSB7XG4gICAgICBtaW52ZXIgPSBzZXRNaW5cbiAgICB9XG4gIH1cblxuICBpZiAobWludmVyICYmIHJhbmdlLnRlc3QobWludmVyKSkge1xuICAgIHJldHVybiBtaW52ZXJcbiAgfVxuXG4gIHJldHVybiBudWxsXG59XG5tb2R1bGUuZXhwb3J0cyA9IG1pblZlcnNpb25cbiIsImNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5jb25zdCB2YWxpZFJhbmdlID0gKHJhbmdlLCBvcHRpb25zKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gUmV0dXJuICcqJyBpbnN0ZWFkIG9mICcnIHNvIHRoYXQgdHJ1dGhpbmVzcyB3b3Jrcy5cbiAgICAvLyBUaGlzIHdpbGwgdGhyb3cgaWYgaXQncyBpbnZhbGlkIGFueXdheVxuICAgIHJldHVybiBuZXcgUmFuZ2UocmFuZ2UsIG9wdGlvbnMpLnJhbmdlIHx8ICcqJ1xuICB9IGNhdGNoIChlcikge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRSYW5nZVxuIiwiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgQ29tcGFyYXRvciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvY29tcGFyYXRvcicpXG5jb25zdCB7IEFOWSB9ID0gQ29tcGFyYXRvclxuY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3JhbmdlJylcbmNvbnN0IHNhdGlzZmllcyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9zYXRpc2ZpZXMnKVxuY29uc3QgZ3QgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZ3QnKVxuY29uc3QgbHQgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvbHQnKVxuY29uc3QgbHRlID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2x0ZScpXG5jb25zdCBndGUgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZ3RlJylcblxuY29uc3Qgb3V0c2lkZSA9ICh2ZXJzaW9uLCByYW5nZSwgaGlsbywgb3B0aW9ucykgPT4ge1xuICB2ZXJzaW9uID0gbmV3IFNlbVZlcih2ZXJzaW9uLCBvcHRpb25zKVxuICByYW5nZSA9IG5ldyBSYW5nZShyYW5nZSwgb3B0aW9ucylcblxuICBsZXQgZ3RmbiwgbHRlZm4sIGx0Zm4sIGNvbXAsIGVjb21wXG4gIHN3aXRjaCAoaGlsbykge1xuICAgIGNhc2UgJz4nOlxuICAgICAgZ3RmbiA9IGd0XG4gICAgICBsdGVmbiA9IGx0ZVxuICAgICAgbHRmbiA9IGx0XG4gICAgICBjb21wID0gJz4nXG4gICAgICBlY29tcCA9ICc+PSdcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnPCc6XG4gICAgICBndGZuID0gbHRcbiAgICAgIGx0ZWZuID0gZ3RlXG4gICAgICBsdGZuID0gZ3RcbiAgICAgIGNvbXAgPSAnPCdcbiAgICAgIGVjb21wID0gJzw9J1xuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTXVzdCBwcm92aWRlIGEgaGlsbyB2YWwgb2YgXCI8XCIgb3IgXCI+XCInKVxuICB9XG5cbiAgLy8gSWYgaXQgc2F0aXNmaWVzIHRoZSByYW5nZSBpdCBpcyBub3Qgb3V0c2lkZVxuICBpZiAoc2F0aXNmaWVzKHZlcnNpb24sIHJhbmdlLCBvcHRpb25zKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gRnJvbSBub3cgb24sIHZhcmlhYmxlIHRlcm1zIGFyZSBhcyBpZiB3ZSdyZSBpbiBcImd0clwiIG1vZGUuXG4gIC8vIGJ1dCBub3RlIHRoYXQgZXZlcnl0aGluZyBpcyBmbGlwcGVkIGZvciB0aGUgXCJsdHJcIiBmdW5jdGlvbi5cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlLnNldC5sZW5ndGg7ICsraSkge1xuICAgIGNvbnN0IGNvbXBhcmF0b3JzID0gcmFuZ2Uuc2V0W2ldXG5cbiAgICBsZXQgaGlnaCA9IG51bGxcbiAgICBsZXQgbG93ID0gbnVsbFxuXG4gICAgY29tcGFyYXRvcnMuZm9yRWFjaCgoY29tcGFyYXRvcikgPT4ge1xuICAgICAgaWYgKGNvbXBhcmF0b3Iuc2VtdmVyID09PSBBTlkpIHtcbiAgICAgICAgY29tcGFyYXRvciA9IG5ldyBDb21wYXJhdG9yKCc+PTAuMC4wJylcbiAgICAgIH1cbiAgICAgIGhpZ2ggPSBoaWdoIHx8IGNvbXBhcmF0b3JcbiAgICAgIGxvdyA9IGxvdyB8fCBjb21wYXJhdG9yXG4gICAgICBpZiAoZ3Rmbihjb21wYXJhdG9yLnNlbXZlciwgaGlnaC5zZW12ZXIsIG9wdGlvbnMpKSB7XG4gICAgICAgIGhpZ2ggPSBjb21wYXJhdG9yXG4gICAgICB9IGVsc2UgaWYgKGx0Zm4oY29tcGFyYXRvci5zZW12ZXIsIGxvdy5zZW12ZXIsIG9wdGlvbnMpKSB7XG4gICAgICAgIGxvdyA9IGNvbXBhcmF0b3JcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gSWYgdGhlIGVkZ2UgdmVyc2lvbiBjb21wYXJhdG9yIGhhcyBhIG9wZXJhdG9yIHRoZW4gb3VyIHZlcnNpb25cbiAgICAvLyBpc24ndCBvdXRzaWRlIGl0XG4gICAgaWYgKGhpZ2gub3BlcmF0b3IgPT09IGNvbXAgfHwgaGlnaC5vcGVyYXRvciA9PT0gZWNvbXApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8vIElmIHRoZSBsb3dlc3QgdmVyc2lvbiBjb21wYXJhdG9yIGhhcyBhbiBvcGVyYXRvciBhbmQgb3VyIHZlcnNpb25cbiAgICAvLyBpcyBsZXNzIHRoYW4gaXQgdGhlbiBpdCBpc24ndCBoaWdoZXIgdGhhbiB0aGUgcmFuZ2VcbiAgICBpZiAoKCFsb3cub3BlcmF0b3IgfHwgbG93Lm9wZXJhdG9yID09PSBjb21wKSAmJlxuICAgICAgICBsdGVmbih2ZXJzaW9uLCBsb3cuc2VtdmVyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIGlmIChsb3cub3BlcmF0b3IgPT09IGVjb21wICYmIGx0Zm4odmVyc2lvbiwgbG93LnNlbXZlcikpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG91dHNpZGVcbiIsIi8vIERldGVybWluZSBpZiB2ZXJzaW9uIGlzIGdyZWF0ZXIgdGhhbiBhbGwgdGhlIHZlcnNpb25zIHBvc3NpYmxlIGluIHRoZSByYW5nZS5cbmNvbnN0IG91dHNpZGUgPSByZXF1aXJlKCcuL291dHNpZGUnKVxuY29uc3QgZ3RyID0gKHZlcnNpb24sIHJhbmdlLCBvcHRpb25zKSA9PiBvdXRzaWRlKHZlcnNpb24sIHJhbmdlLCAnPicsIG9wdGlvbnMpXG5tb2R1bGUuZXhwb3J0cyA9IGd0clxuIiwiY29uc3Qgb3V0c2lkZSA9IHJlcXVpcmUoJy4vb3V0c2lkZScpXG4vLyBEZXRlcm1pbmUgaWYgdmVyc2lvbiBpcyBsZXNzIHRoYW4gYWxsIHRoZSB2ZXJzaW9ucyBwb3NzaWJsZSBpbiB0aGUgcmFuZ2VcbmNvbnN0IGx0ciA9ICh2ZXJzaW9uLCByYW5nZSwgb3B0aW9ucykgPT4gb3V0c2lkZSh2ZXJzaW9uLCByYW5nZSwgJzwnLCBvcHRpb25zKVxubW9kdWxlLmV4cG9ydHMgPSBsdHJcbiIsImNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5jb25zdCBpbnRlcnNlY3RzID0gKHIxLCByMiwgb3B0aW9ucykgPT4ge1xuICByMSA9IG5ldyBSYW5nZShyMSwgb3B0aW9ucylcbiAgcjIgPSBuZXcgUmFuZ2UocjIsIG9wdGlvbnMpXG4gIHJldHVybiByMS5pbnRlcnNlY3RzKHIyKVxufVxubW9kdWxlLmV4cG9ydHMgPSBpbnRlcnNlY3RzXG4iLCIvLyBnaXZlbiBhIHNldCBvZiB2ZXJzaW9ucyBhbmQgYSByYW5nZSwgY3JlYXRlIGEgXCJzaW1wbGlmaWVkXCIgcmFuZ2Vcbi8vIHRoYXQgaW5jbHVkZXMgdGhlIHNhbWUgdmVyc2lvbnMgdGhhdCB0aGUgb3JpZ2luYWwgcmFuZ2UgZG9lc1xuLy8gSWYgdGhlIG9yaWdpbmFsIHJhbmdlIGlzIHNob3J0ZXIgdGhhbiB0aGUgc2ltcGxpZmllZCBvbmUsIHJldHVybiB0aGF0LlxuY29uc3Qgc2F0aXNmaWVzID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL3NhdGlzZmllcy5qcycpXG5jb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2NvbXBhcmUuanMnKVxubW9kdWxlLmV4cG9ydHMgPSAodmVyc2lvbnMsIHJhbmdlLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHNldCA9IFtdXG4gIGxldCBmaXJzdCA9IG51bGxcbiAgbGV0IHByZXYgPSBudWxsXG4gIGNvbnN0IHYgPSB2ZXJzaW9ucy5zb3J0KChhLCBiKSA9PiBjb21wYXJlKGEsIGIsIG9wdGlvbnMpKVxuICBmb3IgKGNvbnN0IHZlcnNpb24gb2Ygdikge1xuICAgIGNvbnN0IGluY2x1ZGVkID0gc2F0aXNmaWVzKHZlcnNpb24sIHJhbmdlLCBvcHRpb25zKVxuICAgIGlmIChpbmNsdWRlZCkge1xuICAgICAgcHJldiA9IHZlcnNpb25cbiAgICAgIGlmICghZmlyc3QpIHtcbiAgICAgICAgZmlyc3QgPSB2ZXJzaW9uXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgIHNldC5wdXNoKFtmaXJzdCwgcHJldl0pXG4gICAgICB9XG4gICAgICBwcmV2ID0gbnVsbFxuICAgICAgZmlyc3QgPSBudWxsXG4gICAgfVxuICB9XG4gIGlmIChmaXJzdCkge1xuICAgIHNldC5wdXNoKFtmaXJzdCwgbnVsbF0pXG4gIH1cblxuICBjb25zdCByYW5nZXMgPSBbXVxuICBmb3IgKGNvbnN0IFttaW4sIG1heF0gb2Ygc2V0KSB7XG4gICAgaWYgKG1pbiA9PT0gbWF4KSB7XG4gICAgICByYW5nZXMucHVzaChtaW4pXG4gICAgfSBlbHNlIGlmICghbWF4ICYmIG1pbiA9PT0gdlswXSkge1xuICAgICAgcmFuZ2VzLnB1c2goJyonKVxuICAgIH0gZWxzZSBpZiAoIW1heCkge1xuICAgICAgcmFuZ2VzLnB1c2goYD49JHttaW59YClcbiAgICB9IGVsc2UgaWYgKG1pbiA9PT0gdlswXSkge1xuICAgICAgcmFuZ2VzLnB1c2goYDw9JHttYXh9YClcbiAgICB9IGVsc2Uge1xuICAgICAgcmFuZ2VzLnB1c2goYCR7bWlufSAtICR7bWF4fWApXG4gICAgfVxuICB9XG4gIGNvbnN0IHNpbXBsaWZpZWQgPSByYW5nZXMuam9pbignIHx8ICcpXG4gIGNvbnN0IG9yaWdpbmFsID0gdHlwZW9mIHJhbmdlLnJhdyA9PT0gJ3N0cmluZycgPyByYW5nZS5yYXcgOiBTdHJpbmcocmFuZ2UpXG4gIHJldHVybiBzaW1wbGlmaWVkLmxlbmd0aCA8IG9yaWdpbmFsLmxlbmd0aCA/IHNpbXBsaWZpZWQgOiByYW5nZVxufVxuIiwiY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3JhbmdlLmpzJylcbmNvbnN0IENvbXBhcmF0b3IgPSByZXF1aXJlKCcuLi9jbGFzc2VzL2NvbXBhcmF0b3IuanMnKVxuY29uc3QgeyBBTlkgfSA9IENvbXBhcmF0b3JcbmNvbnN0IHNhdGlzZmllcyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9zYXRpc2ZpZXMuanMnKVxuY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9jb21wYXJlLmpzJylcblxuLy8gQ29tcGxleCByYW5nZSBgcjEgfHwgcjIgfHwgLi4uYCBpcyBhIHN1YnNldCBvZiBgUjEgfHwgUjIgfHwgLi4uYCBpZmY6XG4vLyAtIEV2ZXJ5IHNpbXBsZSByYW5nZSBgcjEsIHIyLCAuLi5gIGlzIGEgbnVsbCBzZXQsIE9SXG4vLyAtIEV2ZXJ5IHNpbXBsZSByYW5nZSBgcjEsIHIyLCAuLi5gIHdoaWNoIGlzIG5vdCBhIG51bGwgc2V0IGlzIGEgc3Vic2V0IG9mXG4vLyAgIHNvbWUgYFIxLCBSMiwgLi4uYFxuLy9cbi8vIFNpbXBsZSByYW5nZSBgYzEgYzIgLi4uYCBpcyBhIHN1YnNldCBvZiBzaW1wbGUgcmFuZ2UgYEMxIEMyIC4uLmAgaWZmOlxuLy8gLSBJZiBjIGlzIG9ubHkgdGhlIEFOWSBjb21wYXJhdG9yXG4vLyAgIC0gSWYgQyBpcyBvbmx5IHRoZSBBTlkgY29tcGFyYXRvciwgcmV0dXJuIHRydWVcbi8vICAgLSBFbHNlIGlmIGluIHByZXJlbGVhc2UgbW9kZSwgcmV0dXJuIGZhbHNlXG4vLyAgIC0gZWxzZSByZXBsYWNlIGMgd2l0aCBgWz49MC4wLjBdYFxuLy8gLSBJZiBDIGlzIG9ubHkgdGhlIEFOWSBjb21wYXJhdG9yXG4vLyAgIC0gaWYgaW4gcHJlcmVsZWFzZSBtb2RlLCByZXR1cm4gdHJ1ZVxuLy8gICAtIGVsc2UgcmVwbGFjZSBDIHdpdGggYFs+PTAuMC4wXWBcbi8vIC0gTGV0IEVRIGJlIHRoZSBzZXQgb2YgPSBjb21wYXJhdG9ycyBpbiBjXG4vLyAtIElmIEVRIGlzIG1vcmUgdGhhbiBvbmUsIHJldHVybiB0cnVlIChudWxsIHNldClcbi8vIC0gTGV0IEdUIGJlIHRoZSBoaWdoZXN0ID4gb3IgPj0gY29tcGFyYXRvciBpbiBjXG4vLyAtIExldCBMVCBiZSB0aGUgbG93ZXN0IDwgb3IgPD0gY29tcGFyYXRvciBpbiBjXG4vLyAtIElmIEdUIGFuZCBMVCwgYW5kIEdULnNlbXZlciA+IExULnNlbXZlciwgcmV0dXJuIHRydWUgKG51bGwgc2V0KVxuLy8gLSBJZiBhbnkgQyBpcyBhID0gcmFuZ2UsIGFuZCBHVCBvciBMVCBhcmUgc2V0LCByZXR1cm4gZmFsc2Vcbi8vIC0gSWYgRVFcbi8vICAgLSBJZiBHVCwgYW5kIEVRIGRvZXMgbm90IHNhdGlzZnkgR1QsIHJldHVybiB0cnVlIChudWxsIHNldClcbi8vICAgLSBJZiBMVCwgYW5kIEVRIGRvZXMgbm90IHNhdGlzZnkgTFQsIHJldHVybiB0cnVlIChudWxsIHNldClcbi8vICAgLSBJZiBFUSBzYXRpc2ZpZXMgZXZlcnkgQywgcmV0dXJuIHRydWVcbi8vICAgLSBFbHNlIHJldHVybiBmYWxzZVxuLy8gLSBJZiBHVFxuLy8gICAtIElmIEdULnNlbXZlciBpcyBsb3dlciB0aGFuIGFueSA+IG9yID49IGNvbXAgaW4gQywgcmV0dXJuIGZhbHNlXG4vLyAgIC0gSWYgR1QgaXMgPj0sIGFuZCBHVC5zZW12ZXIgZG9lcyBub3Qgc2F0aXNmeSBldmVyeSBDLCByZXR1cm4gZmFsc2Vcbi8vICAgLSBJZiBHVC5zZW12ZXIgaGFzIGEgcHJlcmVsZWFzZSwgYW5kIG5vdCBpbiBwcmVyZWxlYXNlIG1vZGVcbi8vICAgICAtIElmIG5vIEMgaGFzIGEgcHJlcmVsZWFzZSBhbmQgdGhlIEdULnNlbXZlciB0dXBsZSwgcmV0dXJuIGZhbHNlXG4vLyAtIElmIExUXG4vLyAgIC0gSWYgTFQuc2VtdmVyIGlzIGdyZWF0ZXIgdGhhbiBhbnkgPCBvciA8PSBjb21wIGluIEMsIHJldHVybiBmYWxzZVxuLy8gICAtIElmIExUIGlzIDw9LCBhbmQgTFQuc2VtdmVyIGRvZXMgbm90IHNhdGlzZnkgZXZlcnkgQywgcmV0dXJuIGZhbHNlXG4vLyAgIC0gSWYgR1Quc2VtdmVyIGhhcyBhIHByZXJlbGVhc2UsIGFuZCBub3QgaW4gcHJlcmVsZWFzZSBtb2RlXG4vLyAgICAgLSBJZiBubyBDIGhhcyBhIHByZXJlbGVhc2UgYW5kIHRoZSBMVC5zZW12ZXIgdHVwbGUsIHJldHVybiBmYWxzZVxuLy8gLSBFbHNlIHJldHVybiB0cnVlXG5cbmNvbnN0IHN1YnNldCA9IChzdWIsIGRvbSwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGlmIChzdWIgPT09IGRvbSkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBzdWIgPSBuZXcgUmFuZ2Uoc3ViLCBvcHRpb25zKVxuICBkb20gPSBuZXcgUmFuZ2UoZG9tLCBvcHRpb25zKVxuICBsZXQgc2F3Tm9uTnVsbCA9IGZhbHNlXG5cbiAgT1VURVI6IGZvciAoY29uc3Qgc2ltcGxlU3ViIG9mIHN1Yi5zZXQpIHtcbiAgICBmb3IgKGNvbnN0IHNpbXBsZURvbSBvZiBkb20uc2V0KSB7XG4gICAgICBjb25zdCBpc1N1YiA9IHNpbXBsZVN1YnNldChzaW1wbGVTdWIsIHNpbXBsZURvbSwgb3B0aW9ucylcbiAgICAgIHNhd05vbk51bGwgPSBzYXdOb25OdWxsIHx8IGlzU3ViICE9PSBudWxsXG4gICAgICBpZiAoaXNTdWIpIHtcbiAgICAgICAgY29udGludWUgT1VURVJcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gdGhlIG51bGwgc2V0IGlzIGEgc3Vic2V0IG9mIGV2ZXJ5dGhpbmcsIGJ1dCBudWxsIHNpbXBsZSByYW5nZXMgaW5cbiAgICAvLyBhIGNvbXBsZXggcmFuZ2Ugc2hvdWxkIGJlIGlnbm9yZWQuICBzbyBpZiB3ZSBzYXcgYSBub24tbnVsbCByYW5nZSxcbiAgICAvLyB0aGVuIHdlIGtub3cgdGhpcyBpc24ndCBhIHN1YnNldCwgYnV0IGlmIEVWRVJZIHNpbXBsZSByYW5nZSB3YXMgbnVsbCxcbiAgICAvLyB0aGVuIGl0IGlzIGEgc3Vic2V0LlxuICAgIGlmIChzYXdOb25OdWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWVcbn1cblxuY29uc3Qgc2ltcGxlU3Vic2V0ID0gKHN1YiwgZG9tLCBvcHRpb25zKSA9PiB7XG4gIGlmIChzdWIgPT09IGRvbSkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBpZiAoc3ViLmxlbmd0aCA9PT0gMSAmJiBzdWJbMF0uc2VtdmVyID09PSBBTlkpIHtcbiAgICBpZiAoZG9tLmxlbmd0aCA9PT0gMSAmJiBkb21bMF0uc2VtdmVyID09PSBBTlkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlKSB7XG4gICAgICBzdWIgPSBbbmV3IENvbXBhcmF0b3IoJz49MC4wLjAtMCcpXVxuICAgIH0gZWxzZSB7XG4gICAgICBzdWIgPSBbbmV3IENvbXBhcmF0b3IoJz49MC4wLjAnKV1cbiAgICB9XG4gIH1cblxuICBpZiAoZG9tLmxlbmd0aCA9PT0gMSAmJiBkb21bMF0uc2VtdmVyID09PSBBTlkpIHtcbiAgICBpZiAob3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgZG9tID0gW25ldyBDb21wYXJhdG9yKCc+PTAuMC4wJyldXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZXFTZXQgPSBuZXcgU2V0KClcbiAgbGV0IGd0LCBsdFxuICBmb3IgKGNvbnN0IGMgb2Ygc3ViKSB7XG4gICAgaWYgKGMub3BlcmF0b3IgPT09ICc+JyB8fCBjLm9wZXJhdG9yID09PSAnPj0nKSB7XG4gICAgICBndCA9IGhpZ2hlckdUKGd0LCBjLCBvcHRpb25zKVxuICAgIH0gZWxzZSBpZiAoYy5vcGVyYXRvciA9PT0gJzwnIHx8IGMub3BlcmF0b3IgPT09ICc8PScpIHtcbiAgICAgIGx0ID0gbG93ZXJMVChsdCwgYywgb3B0aW9ucylcbiAgICB9IGVsc2Uge1xuICAgICAgZXFTZXQuYWRkKGMuc2VtdmVyKVxuICAgIH1cbiAgfVxuXG4gIGlmIChlcVNldC5zaXplID4gMSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBsZXQgZ3RsdENvbXBcbiAgaWYgKGd0ICYmIGx0KSB7XG4gICAgZ3RsdENvbXAgPSBjb21wYXJlKGd0LnNlbXZlciwgbHQuc2VtdmVyLCBvcHRpb25zKVxuICAgIGlmIChndGx0Q29tcCA+IDApIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfSBlbHNlIGlmIChndGx0Q29tcCA9PT0gMCAmJiAoZ3Qub3BlcmF0b3IgIT09ICc+PScgfHwgbHQub3BlcmF0b3IgIT09ICc8PScpKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8vIHdpbGwgaXRlcmF0ZSBvbmUgb3IgemVybyB0aW1lc1xuICBmb3IgKGNvbnN0IGVxIG9mIGVxU2V0KSB7XG4gICAgaWYgKGd0ICYmICFzYXRpc2ZpZXMoZXEsIFN0cmluZyhndCksIG9wdGlvbnMpKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGlmIChsdCAmJiAhc2F0aXNmaWVzKGVxLCBTdHJpbmcobHQpLCBvcHRpb25zKSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGMgb2YgZG9tKSB7XG4gICAgICBpZiAoIXNhdGlzZmllcyhlcSwgU3RyaW5nKGMpLCBvcHRpb25zKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgbGV0IGhpZ2hlciwgbG93ZXJcbiAgbGV0IGhhc0RvbUxULCBoYXNEb21HVFxuICAvLyBpZiB0aGUgc3Vic2V0IGhhcyBhIHByZXJlbGVhc2UsIHdlIG5lZWQgYSBjb21wYXJhdG9yIGluIHRoZSBzdXBlcnNldFxuICAvLyB3aXRoIHRoZSBzYW1lIHR1cGxlIGFuZCBhIHByZXJlbGVhc2UsIG9yIGl0J3Mgbm90IGEgc3Vic2V0XG4gIGxldCBuZWVkRG9tTFRQcmUgPSBsdCAmJlxuICAgICFvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlICYmXG4gICAgbHQuc2VtdmVyLnByZXJlbGVhc2UubGVuZ3RoID8gbHQuc2VtdmVyIDogZmFsc2VcbiAgbGV0IG5lZWREb21HVFByZSA9IGd0ICYmXG4gICAgIW9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgJiZcbiAgICBndC5zZW12ZXIucHJlcmVsZWFzZS5sZW5ndGggPyBndC5zZW12ZXIgOiBmYWxzZVxuICAvLyBleGNlcHRpb246IDwxLjIuMy0wIGlzIHRoZSBzYW1lIGFzIDwxLjIuM1xuICBpZiAobmVlZERvbUxUUHJlICYmIG5lZWREb21MVFByZS5wcmVyZWxlYXNlLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgbHQub3BlcmF0b3IgPT09ICc8JyAmJiBuZWVkRG9tTFRQcmUucHJlcmVsZWFzZVswXSA9PT0gMCkge1xuICAgIG5lZWREb21MVFByZSA9IGZhbHNlXG4gIH1cblxuICBmb3IgKGNvbnN0IGMgb2YgZG9tKSB7XG4gICAgaGFzRG9tR1QgPSBoYXNEb21HVCB8fCBjLm9wZXJhdG9yID09PSAnPicgfHwgYy5vcGVyYXRvciA9PT0gJz49J1xuICAgIGhhc0RvbUxUID0gaGFzRG9tTFQgfHwgYy5vcGVyYXRvciA9PT0gJzwnIHx8IGMub3BlcmF0b3IgPT09ICc8PSdcbiAgICBpZiAoZ3QpIHtcbiAgICAgIGlmIChuZWVkRG9tR1RQcmUpIHtcbiAgICAgICAgaWYgKGMuc2VtdmVyLnByZXJlbGVhc2UgJiYgYy5zZW12ZXIucHJlcmVsZWFzZS5sZW5ndGggJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLm1ham9yID09PSBuZWVkRG9tR1RQcmUubWFqb3IgJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLm1pbm9yID09PSBuZWVkRG9tR1RQcmUubWlub3IgJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLnBhdGNoID09PSBuZWVkRG9tR1RQcmUucGF0Y2gpIHtcbiAgICAgICAgICBuZWVkRG9tR1RQcmUgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYy5vcGVyYXRvciA9PT0gJz4nIHx8IGMub3BlcmF0b3IgPT09ICc+PScpIHtcbiAgICAgICAgaGlnaGVyID0gaGlnaGVyR1QoZ3QsIGMsIG9wdGlvbnMpXG4gICAgICAgIGlmIChoaWdoZXIgPT09IGMgJiYgaGlnaGVyICE9PSBndCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGd0Lm9wZXJhdG9yID09PSAnPj0nICYmICFzYXRpc2ZpZXMoZ3Quc2VtdmVyLCBTdHJpbmcoYyksIG9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobHQpIHtcbiAgICAgIGlmIChuZWVkRG9tTFRQcmUpIHtcbiAgICAgICAgaWYgKGMuc2VtdmVyLnByZXJlbGVhc2UgJiYgYy5zZW12ZXIucHJlcmVsZWFzZS5sZW5ndGggJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLm1ham9yID09PSBuZWVkRG9tTFRQcmUubWFqb3IgJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLm1pbm9yID09PSBuZWVkRG9tTFRQcmUubWlub3IgJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLnBhdGNoID09PSBuZWVkRG9tTFRQcmUucGF0Y2gpIHtcbiAgICAgICAgICBuZWVkRG9tTFRQcmUgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYy5vcGVyYXRvciA9PT0gJzwnIHx8IGMub3BlcmF0b3IgPT09ICc8PScpIHtcbiAgICAgICAgbG93ZXIgPSBsb3dlckxUKGx0LCBjLCBvcHRpb25zKVxuICAgICAgICBpZiAobG93ZXIgPT09IGMgJiYgbG93ZXIgIT09IGx0KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobHQub3BlcmF0b3IgPT09ICc8PScgJiYgIXNhdGlzZmllcyhsdC5zZW12ZXIsIFN0cmluZyhjKSwgb3B0aW9ucykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICghYy5vcGVyYXRvciAmJiAobHQgfHwgZ3QpICYmIGd0bHRDb21wICE9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGVyZSB3YXMgYSA8IG9yID4sIGFuZCBub3RoaW5nIGluIHRoZSBkb20sIHRoZW4gbXVzdCBiZSBmYWxzZVxuICAvLyBVTkxFU1MgaXQgd2FzIGxpbWl0ZWQgYnkgYW5vdGhlciByYW5nZSBpbiB0aGUgb3RoZXIgZGlyZWN0aW9uLlxuICAvLyBFZywgPjEuMC4wIDwxLjAuMSBpcyBzdGlsbCBhIHN1YnNldCBvZiA8Mi4wLjBcbiAgaWYgKGd0ICYmIGhhc0RvbUxUICYmICFsdCAmJiBndGx0Q29tcCAhPT0gMCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKGx0ICYmIGhhc0RvbUdUICYmICFndCAmJiBndGx0Q29tcCAhPT0gMCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gd2UgbmVlZGVkIGEgcHJlcmVsZWFzZSByYW5nZSBpbiBhIHNwZWNpZmljIHR1cGxlLCBidXQgZGlkbid0IGdldCBvbmVcbiAgLy8gdGhlbiB0aGlzIGlzbid0IGEgc3Vic2V0LiAgZWcgPj0xLjIuMy1wcmUgaXMgbm90IGEgc3Vic2V0IG9mID49MS4wLjAsXG4gIC8vIGJlY2F1c2UgaXQgaW5jbHVkZXMgcHJlcmVsZWFzZXMgaW4gdGhlIDEuMi4zIHR1cGxlXG4gIGlmIChuZWVkRG9tR1RQcmUgfHwgbmVlZERvbUxUUHJlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG4vLyA+PTEuMi4zIGlzIGxvd2VyIHRoYW4gPjEuMi4zXG5jb25zdCBoaWdoZXJHVCA9IChhLCBiLCBvcHRpb25zKSA9PiB7XG4gIGlmICghYSkge1xuICAgIHJldHVybiBiXG4gIH1cbiAgY29uc3QgY29tcCA9IGNvbXBhcmUoYS5zZW12ZXIsIGIuc2VtdmVyLCBvcHRpb25zKVxuICByZXR1cm4gY29tcCA+IDAgPyBhXG4gICAgOiBjb21wIDwgMCA/IGJcbiAgICA6IGIub3BlcmF0b3IgPT09ICc+JyAmJiBhLm9wZXJhdG9yID09PSAnPj0nID8gYlxuICAgIDogYVxufVxuXG4vLyA8PTEuMi4zIGlzIGhpZ2hlciB0aGFuIDwxLjIuM1xuY29uc3QgbG93ZXJMVCA9IChhLCBiLCBvcHRpb25zKSA9PiB7XG4gIGlmICghYSkge1xuICAgIHJldHVybiBiXG4gIH1cbiAgY29uc3QgY29tcCA9IGNvbXBhcmUoYS5zZW12ZXIsIGIuc2VtdmVyLCBvcHRpb25zKVxuICByZXR1cm4gY29tcCA8IDAgPyBhXG4gICAgOiBjb21wID4gMCA/IGJcbiAgICA6IGIub3BlcmF0b3IgPT09ICc8JyAmJiBhLm9wZXJhdG9yID09PSAnPD0nID8gYlxuICAgIDogYVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN1YnNldFxuIiwiLy8ganVzdCBwcmUtbG9hZCBhbGwgdGhlIHN0dWZmIHRoYXQgaW5kZXguanMgbGF6aWx5IGV4cG9ydHNcbmNvbnN0IGludGVybmFsUmUgPSByZXF1aXJlKCcuL2ludGVybmFsL3JlJylcbmNvbnN0IGNvbnN0YW50cyA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvY29uc3RhbnRzJylcbmNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgaWRlbnRpZmllcnMgPSByZXF1aXJlKCcuL2ludGVybmFsL2lkZW50aWZpZXJzJylcbmNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvcGFyc2UnKVxuY29uc3QgdmFsaWQgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy92YWxpZCcpXG5jb25zdCBjbGVhbiA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2NsZWFuJylcbmNvbnN0IGluYyA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2luYycpXG5jb25zdCBkaWZmID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvZGlmZicpXG5jb25zdCBtYWpvciA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL21ham9yJylcbmNvbnN0IG1pbm9yID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvbWlub3InKVxuY29uc3QgcGF0Y2ggPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9wYXRjaCcpXG5jb25zdCBwcmVyZWxlYXNlID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvcHJlcmVsZWFzZScpXG5jb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvY29tcGFyZScpXG5jb25zdCByY29tcGFyZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL3Jjb21wYXJlJylcbmNvbnN0IGNvbXBhcmVMb29zZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2NvbXBhcmUtbG9vc2UnKVxuY29uc3QgY29tcGFyZUJ1aWxkID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvY29tcGFyZS1idWlsZCcpXG5jb25zdCBzb3J0ID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvc29ydCcpXG5jb25zdCByc29ydCA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL3Jzb3J0JylcbmNvbnN0IGd0ID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvZ3QnKVxuY29uc3QgbHQgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9sdCcpXG5jb25zdCBlcSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2VxJylcbmNvbnN0IG5lcSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL25lcScpXG5jb25zdCBndGUgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9ndGUnKVxuY29uc3QgbHRlID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvbHRlJylcbmNvbnN0IGNtcCA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2NtcCcpXG5jb25zdCBjb2VyY2UgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9jb2VyY2UnKVxuY29uc3QgQ29tcGFyYXRvciA9IHJlcXVpcmUoJy4vY2xhc3Nlcy9jb21wYXJhdG9yJylcbmNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi9jbGFzc2VzL3JhbmdlJylcbmNvbnN0IHNhdGlzZmllcyA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL3NhdGlzZmllcycpXG5jb25zdCB0b0NvbXBhcmF0b3JzID0gcmVxdWlyZSgnLi9yYW5nZXMvdG8tY29tcGFyYXRvcnMnKVxuY29uc3QgbWF4U2F0aXNmeWluZyA9IHJlcXVpcmUoJy4vcmFuZ2VzL21heC1zYXRpc2Z5aW5nJylcbmNvbnN0IG1pblNhdGlzZnlpbmcgPSByZXF1aXJlKCcuL3Jhbmdlcy9taW4tc2F0aXNmeWluZycpXG5jb25zdCBtaW5WZXJzaW9uID0gcmVxdWlyZSgnLi9yYW5nZXMvbWluLXZlcnNpb24nKVxuY29uc3QgdmFsaWRSYW5nZSA9IHJlcXVpcmUoJy4vcmFuZ2VzL3ZhbGlkJylcbmNvbnN0IG91dHNpZGUgPSByZXF1aXJlKCcuL3Jhbmdlcy9vdXRzaWRlJylcbmNvbnN0IGd0ciA9IHJlcXVpcmUoJy4vcmFuZ2VzL2d0cicpXG5jb25zdCBsdHIgPSByZXF1aXJlKCcuL3Jhbmdlcy9sdHInKVxuY29uc3QgaW50ZXJzZWN0cyA9IHJlcXVpcmUoJy4vcmFuZ2VzL2ludGVyc2VjdHMnKVxuY29uc3Qgc2ltcGxpZnlSYW5nZSA9IHJlcXVpcmUoJy4vcmFuZ2VzL3NpbXBsaWZ5JylcbmNvbnN0IHN1YnNldCA9IHJlcXVpcmUoJy4vcmFuZ2VzL3N1YnNldCcpXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcGFyc2UsXG4gIHZhbGlkLFxuICBjbGVhbixcbiAgaW5jLFxuICBkaWZmLFxuICBtYWpvcixcbiAgbWlub3IsXG4gIHBhdGNoLFxuICBwcmVyZWxlYXNlLFxuICBjb21wYXJlLFxuICByY29tcGFyZSxcbiAgY29tcGFyZUxvb3NlLFxuICBjb21wYXJlQnVpbGQsXG4gIHNvcnQsXG4gIHJzb3J0LFxuICBndCxcbiAgbHQsXG4gIGVxLFxuICBuZXEsXG4gIGd0ZSxcbiAgbHRlLFxuICBjbXAsXG4gIGNvZXJjZSxcbiAgQ29tcGFyYXRvcixcbiAgUmFuZ2UsXG4gIHNhdGlzZmllcyxcbiAgdG9Db21wYXJhdG9ycyxcbiAgbWF4U2F0aXNmeWluZyxcbiAgbWluU2F0aXNmeWluZyxcbiAgbWluVmVyc2lvbixcbiAgdmFsaWRSYW5nZSxcbiAgb3V0c2lkZSxcbiAgZ3RyLFxuICBsdHIsXG4gIGludGVyc2VjdHMsXG4gIHNpbXBsaWZ5UmFuZ2UsXG4gIHN1YnNldCxcbiAgU2VtVmVyLFxuICByZTogaW50ZXJuYWxSZS5yZSxcbiAgc3JjOiBpbnRlcm5hbFJlLnNyYyxcbiAgdG9rZW5zOiBpbnRlcm5hbFJlLnQsXG4gIFNFTVZFUl9TUEVDX1ZFUlNJT046IGNvbnN0YW50cy5TRU1WRVJfU1BFQ19WRVJTSU9OLFxuICBjb21wYXJlSWRlbnRpZmllcnM6IGlkZW50aWZpZXJzLmNvbXBhcmVJZGVudGlmaWVycyxcbiAgcmNvbXBhcmVJZGVudGlmaWVyczogaWRlbnRpZmllcnMucmNvbXBhcmVJZGVudGlmaWVycyxcbn1cbiIsIi8vIGltcG9ydCB7IFBMVUdJTl9TWVNfQUJTX1BBVEgsIFNDUklQVF9VUkwsIFZFUlNJT04sIFZFUlNJT05fVVJMIH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IFRZUEVTIH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IHsgXywgbG9nLCByZWxvYWRXaW5kb3csIHNob3dJbmZvTWVzc2FnZSB9IGZyb20gJy4uL3V0aWwnO1xyXG5pbXBvcnQgeyBpbmplY3QsIGluamVjdGFibGUgfSBmcm9tICdpbnZlcnNpZnknO1xyXG5pbXBvcnQgeyBQTFVHSU5fU1lTVEVNX0FVVE9fVVBEQVRFIH0gZnJvbSAnLi9wbHVnaW4tY29uZmlnJztcclxuaW1wb3J0IHsgSVN0b3JhZ2VNYW5hZ2VyLCBJU3lzdGVtTWFuYWdlciB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgRmlsZUNsaWVudCB9IGZyb20gJ0AvYXBpL2ZpbGUtYXBpJztcclxuaW1wb3J0IHsgbWlncmF0ZSB9IGZyb20gJ0AvdXRpbC9taWdyYXRlJztcclxuaW1wb3J0IHsgc2VydmVyQXBpIH0gZnJvbSAnQC9hcGknO1xyXG5pbXBvcnQgeyBTZW1WZXIgfSBmcm9tICdzZW12ZXInO1xyXG5pbXBvcnQgeyBOb3RpZmljYXRpb24gfSBmcm9tICdAL2ludGVybmFsL2NsYXNzZXMvbm90aWZpY2F0aW9uJztcclxuXHJcbi8vIGNvbnN0IHBsdWdpblNjcmlwdFBvc2l0aW9uID0gUExVR0lOX1NZU19BQlNfUEFUSDtcclxuXHJcbkBpbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFN5c3RlbU1hbmFnZXIgaW1wbGVtZW50cyBJU3lzdGVtTWFuYWdlciB7XHJcbiAgICBzdG9yYWdlTWFuZ2FnZXI6IElTdG9yYWdlTWFuYWdlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihAaW5qZWN0KFRZUEVTLlN0b3JhZ2VNYW5hZ2VyKSBzdG9yYWdlTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZU1hbmdhZ2VyID0gc3RvcmFnZU1hbmFnZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNhdmVUb0xvY2FsKHA6IHN0cmluZywgY29udGVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgRmlsZUNsaWVudC5nZXRJbnN0YW5jZUFwaSgpLmZpbGVBcGkucHV0RmlsZShwLCBjb250ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2NhbENhY2hlSW5pdCgpIHtcclxuICAgICAgICAvLyB0cnkge1xyXG4gICAgICAgIC8vICAgICBjb25zdCBwbHVnaW4gPSBGaWxlQ2xpZW50LmdldEluc3RhbmNlQXBpKCkuZmlsZUFwaS5nZXRGaWxlKHBsdWdpblNjcmlwdFBvc2l0aW9uKTtcclxuICAgICAgICAvLyAgICAgaWYgKHBsdWdpbiAhPT0gbnVsbCkge1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5kZWxheUF1dG9VcGdyYWRlKCk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyAgICAgbG9nKCdQbHVnaW4gc3lzdGVtIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBjb25zdCBzY3JpcHQgPSB3aW5kb3cuc2l5dWFuUGx1Z2luU2NyaXB0O1xyXG4gICAgICAgIC8vIGlmICghc2NyaXB0KSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gYXdhaXQgdGhpcy5zYXZlVG9Mb2NhbChwbHVnaW5TY3JpcHRQb3NpdGlvbiwgc2NyaXB0KTtcclxuICAgICAgICAvLyB0aGlzLmRlbGF5QXV0b1VwZ3JhZGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxheUF1dG9VcGdyYWRlKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXV0b1VwZGF0ZSA9IHRoaXMuc3RvcmFnZU1hbmdhZ2VyLmdldChQTFVHSU5fU1lTVEVNX0FVVE9fVVBEQVRFKTtcclxuICAgICAgICAgICAgaWYgKCFhdXRvVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBsb2coJ0F1dG8gVXBkYXRlIHNraXBwZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJ5VXBncmFkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdHJ5VXBncmFkZSgpIHtcclxuICAgICAgICAvLyBpZiAod2luZG93LnBsdWdpblN5c3RlbVNvdXJjZSA9PT0gJ2JhenphcicpIHtcclxuICAgICAgICAvLyAgICAgbG9nKCdQbHVnaW4gaW5zdGFsbGVkIGZyb20gYmF6emFyIHZlcnNpb24sIHVwZ3JhZGUgc2tpcCcpO1xyXG4gICAgICAgIC8vICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGxvZygnVHJ5IGdldHRpbmcgb25saW5lIHZlcnNpb24nKTtcclxuICAgICAgICAvLyBjb25zdCBvbmxpbmVWZXJzaW9uID0gYXdhaXQgdGhpcy5nZXRPbmxpbmVWZXJzaW9uKCk7XHJcbiAgICAgICAgLy8gaWYgKG9ubGluZVZlcnNpb24gIT09IFZFUlNJT04pIHtcclxuICAgICAgICAvLyAgICAgc2hvd0luZm9NZXNzYWdlKGDmj5Lku7bns7vnu5/ojrflj5bliLDmnIDmlrDniYjmnKwgJHtvbmxpbmVWZXJzaW9ufe+8jOWNs+WwhuiHquWKqOabtOaWsGApO1xyXG4gICAgICAgIC8vICAgICBsb2coJ09ubGluZSBWZXJzaW9uOiAnICsgb25saW5lVmVyc2lvbiArICcsIGxvY2FsIHZlcnNpb246ICcgKyBWRVJTSU9OKTtcclxuICAgICAgICAvLyAgICAgbG9nKCdEb3dubG9hZGluZyBuZXcgdmVyc2lvbiBvZiBQbHVnaW4gU3lzdGVtJyk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMudXBncmFkZSgpO1xyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIGxvZygnVmVyc2lvbiBpcyAnICsgVkVSU0lPTiArICcsIE9LJyk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldE9ubGluZVZlcnNpb24oKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIGZldGNoKFZFUlNJT05fVVJMLCB7IGNhY2hlOiAnbm8tY2FjaGUnIH0pLnRoZW4oKHJlcykgPT4gcmVzLnRleHQoKSk7XHJcbiAgICAgICAgcmV0dXJuIFZFUlNJT047XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBncmFkZSgpIHtcclxuICAgICAgICAvLyBjb25zdCBzY3JpcHQgPSBhd2FpdCBmZXRjaChTQ1JJUFRfVVJMLCB7IGNhY2hlOiAnbm8tY2FjaGUnIH0pLnRoZW4oKHJlcykgPT4gcmVzLnRleHQoKSk7XHJcbiAgICAgICAgLy8gaWYgKCFzY3JpcHQpIHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBtaWdyYXRlKCk7XHJcblxyXG4gICAgICAgIC8vIHNob3dJbmZvTWVzc2FnZSgn5o+S5Lu257O757uf5Y2H57qn5Lit77yM5Y2z5bCG6Ieq5Yqo6YeN6L29Li4uJyk7XHJcbiAgICAgICAgLy8gYXdhaXQgdGhpcy5zYXZlVG9Mb2NhbChwbHVnaW5TY3JpcHRQb3NpdGlvbiwgc2NyaXB0KTtcclxuICAgICAgICAvLyBsb2coJ1BsdWdpbiBzeXN0ZW0gdXBncmFkZWQsIHJlbG9hZGluZy4uLicpO1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gcmVsb2FkV2luZG93KCksIDMwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNvbXBhcmVXaWRnZXRWZXJzaW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHNlcnZlckFwaS5nZXRCYXp6YXJXaWRnZXQoKTtcclxuICAgICAgICBjb25zdCBwYWNrYWdlcyA9IHJlcy5wYWNrYWdlcztcclxuICAgICAgICBjb25zdCBwcyA9IHBhY2thZ2VzLmZpbmQoKHApID0+IHAubmFtZSA9PT0gJ+aPkuS7tuezu+e7nycpO1xyXG4gICAgICAgIGlmICghcHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsYXRlc3RWZXJzaW9uID0gcHMudmVyc2lvbjtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU2VtVmVyKFZFUlNJT04pLmNvbXBhcmUobGF0ZXN0VmVyc2lvbik7XHJcbiAgICAgICAgaWYgKHJlc3VsdCA8IDApIHtcclxuICAgICAgICAgICAgbmV3IE5vdGlmaWNhdGlvbih7IG1lc3NhZ2U6IF8oJ25ld192ZXJzaW9uX3dpZGdldCcpLCB0eXBlOiAnaW5mbycgfSkuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICcuLi9hcGkvcGx1Z2luJztcclxuaW1wb3J0IGFwaSBmcm9tICcuLi9hcGknO1xyXG5pbXBvcnQge1xyXG4gICAgSVBsdWdpbkNvbW1hbmQsXHJcbiAgICBJQ29tbWFuZE1hbmFnZXIsXHJcbiAgICBJUGx1Z2luLFxyXG4gICAgSVBsdWdpbkZpbGVNYW5hZ2VyLFxyXG4gICAgSVBsdWdpbkxvYWRlcixcclxuICAgIFBsdWdpbk1hbmlmZXN0LFxyXG4gICAgU2V0dGluZ1JlbmRlcixcclxuICAgIElTZXR0aW5nTWFuYWdlcixcclxufSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IGludGVybmFsUGx1Z2lucyB9IGZyb20gJy4uL2ludGVybmFsJztcclxuaW1wb3J0IHsgbG9nIH0gZnJvbSAnLi4vdXRpbCc7XHJcbmltcG9ydCB7IGluamVjdCwgaW5qZWN0YWJsZSB9IGZyb20gJ2ludmVyc2lmeSc7XHJcbmltcG9ydCB7IFRZUEVTIH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IHsgY29udGFpbmVyIH0gZnJvbSAnQC9jb250YWluZXInO1xyXG5pbXBvcnQgeyBJU3RvcmFnZU1hbmFnZXIgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IGVycm9yIH0gZnJvbSAnLi4vdXRpbCc7XHJcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcblxyXG5sZXQgY29tcG9uZW50czogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcclxuXHJcbkBpbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFBsdWdpbkxvYWRlciBpbXBsZW1lbnRzIElQbHVnaW5Mb2FkZXIge1xyXG4gICAgcGx1Z2luRmlsZU1hbmFnZXI6IElQbHVnaW5GaWxlTWFuYWdlcjtcclxuXHJcbiAgICBsb2FkZWRQbHVnaW5zOiBNYXA8c3RyaW5nLCBJUGx1Z2luPjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihAaW5qZWN0KFRZUEVTLlBsdWdpbkZpbGVNYW5hZ2VyKSBwbHVnaW5GaWxlTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMucGx1Z2luRmlsZU1hbmFnZXIgPSBwbHVnaW5GaWxlTWFuYWdlcjtcclxuICAgICAgICB0aGlzLmxvYWRlZFBsdWdpbnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZEVuYWJsZWRQbHVnaW5zKHBsdWdpbnM6IFBsdWdpbk1hbmlmZXN0W10pIHtcclxuICAgICAgICBpZiAoIXBsdWdpbnMgfHwgIXBsdWdpbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHBsdWdpbnMpIHtcclxuICAgICAgICAgICAgaWYgKCFwLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBsdWdpbihwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZEFsbEludGVybmFsUGx1Z2lucygpIHtcclxuICAgICAgICBpbnRlcm5hbFBsdWdpbnMuZm9yRWFjaChhc3luYyAocCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwbHVnID0gbmV3IHAucGx1Z2luKCk7XHJcbiAgICAgICAgICAgIGlmICghKHBsdWcgaW5zdGFuY2VvZiBQbHVnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHBsdWdpbiAke3AubmFtZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsb2coYExvYWQgaW50ZXJuYWwgcGx1Z2luOiAke3Aua2V5fSgke3AubmFtZX0pYCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQWRkaXRpb25hbE1ldGhvZChwbHVnLCBwLmtleSwgcC5uYW1lKTtcclxuICAgICAgICAgICAgYXdhaXQgcGx1Zy5vbmxvYWQoKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZWRQbHVnaW5zLnNldChwLmtleSwgcGx1Zyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZEFsbExvY2FsUGx1Z2lucygpIHtcclxuICAgICAgICBjb25zdCBwbHVnaW5zID0gYXdhaXQgdGhpcy5wbHVnaW5GaWxlTWFuYWdlci5nZXRBbGxQbHVnaW5zKCk7XHJcbiAgICAgICAgaWYgKCFwbHVnaW5zKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHBsdWdpbnMpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGx1Z2luKHApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkUGx1Z2luKHBsdWdpbjogUGx1Z2luTWFuaWZlc3QpIHtcclxuICAgICAgICBpZiAoIWNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVJlcXVpcmVkTW9kdWxlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXBsdWdpbi5lbmFibGVkIHx8ICghcGx1Z2luLnBsdWdpbiAmJiAhcGx1Z2luLnNjcmlwdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGx1Z2luLnBsdWdpbikge1xyXG4gICAgICAgICAgICAvLyBpbnRlcm5hbCBwbHVnaW5cclxuICAgICAgICAgICAgY29uc3QgcGx1ZyA9IG5ldyBwbHVnaW4ucGx1Z2luKCk7XHJcbiAgICAgICAgICAgIGlmICghKHBsdWcgaW5zdGFuY2VvZiBQbHVnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHBsdWdpbiAke3BsdWdpbi5uYW1lfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxvZyhgTG9hZCBpbnRlcm5hbCBwbHVnaW46ICR7cGx1Z2luLmtleX0oJHtwbHVnaW4ubmFtZX0pYCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQWRkaXRpb25hbE1ldGhvZChwbHVnLCBwbHVnaW4ua2V5LCBwbHVnaW4ubmFtZSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHBsdWcub25sb2FkKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkUGx1Z2lucy5zZXQocGx1Z2luLmtleSwgcGx1Zyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZXhwb3J0czogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xyXG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IHsgZXhwb3J0cyB9O1xyXG4gICAgICAgIGZ1bmN0aW9uIHJ1bihzY3JpcHQ6IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBldmFsKCcoZnVuY3Rpb24gYW5vbnltb3VzKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeycuY29uY2F0KHNjcmlwdCwgJ1xcbn0pXFxuLy8jIHNvdXJjZVVSTD0nKS5jb25jYXQobmFtZSwgJ1xcbicpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgX19yZXF1aXJlID0gKG5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50c1tuYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudHNbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBtb2R1bGUgJHtuYW1lfSBub3QgZm91bmRgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHBsdWdpbk5hbWUgPSBwbHVnaW4ua2V5O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJ1bihwbHVnaW4uc2NyaXB0LCBwbHVnaW4ua2V5KShfX3JlcXVpcmUsIG1vZHVsZSwgZXhwb3J0cyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBlcnJvcignRXJyb3IgcGx1Z2luOicgKyBwbHVnaW4ua2V5ICsgJyAtPicsIGUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBwbHVnaW5Db25zdHJ1Y3RvcjtcclxuICAgICAgICBpZiAoIShwbHVnaW5Db25zdHJ1Y3RvciA9IChtb2R1bGUuZXhwb3J0cyB8fCBleHBvcnRzKS5kZWZhdWx0IHx8IG1vZHVsZS5leHBvcnRzKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHBsdWdpbiAke3BsdWdpbk5hbWV9LiBObyBleHBvcnRzIGRldGVjdGVkLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwbHVnID0gbmV3IHBsdWdpbkNvbnN0cnVjdG9yKCk7XHJcbiAgICAgICAgaWYgKCEocGx1ZyBpbnN0YW5jZW9mIFBsdWdpbikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBwbHVnaW4gJHtwbHVnaW5OYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZEFkZGl0aW9uYWxNZXRob2QocGx1ZywgcGx1Z2luLmtleSwgcGx1Z2luTmFtZSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgcGx1Zy5vbmxvYWQoKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZWRQbHVnaW5zLnNldChwbHVnaW4ua2V5LCBwbHVnKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGVycm9yKCdFcnJvciBwbHVnaW46JyArIHBsdWdpbi5rZXkgKyAnIC0+JywgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVubG9hZFBsdWdpbihrZXk6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IHRoaXMubG9hZGVkUGx1Z2lucy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoIXBsdWdpbikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBsdWdpbi5vbnVubG9hZCgpO1xyXG4gICAgICAgIGNvbnRhaW5lci5nZXQ8SUNvbW1hbmRNYW5hZ2VyPihUWVBFUy5Db21tYW5kTWFuYWdlcikudW5yZWdpc3RlckNvbW1hbmRCeVBsdWdpbihrZXkpO1xyXG4gICAgICAgIGNvbnRhaW5lci5nZXQ8SVNldHRpbmdNYW5hZ2VyPihUWVBFUy5TZXR0aW5nTWFuYWdlcikudW5yZWdpc3RlclNldHRpbmcoa2V5KTtcclxuICAgICAgICB0aGlzLmxvYWRlZFBsdWdpbnMuZGVsZXRlKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdW5sb2FkVGhpcmRQYXJ0eVBsdWdpbnMocGx1Z2luczogUGx1Z2luTWFuaWZlc3RbXSkge1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBwbHVnaW5zLmZpbHRlcigocCkgPT4gcC5lbmFibGVkKS5tYXAoKHApID0+IHAua2V5KTtcclxuICAgICAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xyXG4gICAgICAgICAgICBsb2coYHVubG9hZCB0aGlyZCBwYXJ0eSBwbHVnaW46ICR7a31gKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51bmxvYWRQbHVnaW4oayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRUaGlyZFBhcnR5RW5hYmxlZFBsdWdpbnMocGx1Z2luczogUGx1Z2luTWFuaWZlc3RbXSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRFbmFibGVkUGx1Z2lucyhwbHVnaW5zKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2VuZXJhdGVSZXF1aXJlZE1vZHVsZXMoKSB7XHJcbiAgICAgICAgY29tcG9uZW50cyA9IHtcclxuICAgICAgICAgICAgc2l5dWFuOiBhcGksXHJcbiAgICAgICAgICAgIGF4aW9zOiBheGlvcyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkQWRkaXRpb25hbE1ldGhvZChwbHVnaW46IFBsdWdpbiwgcGx1Z2luS2V5OiBzdHJpbmcsIHBsdWdpbk5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIHBsdWdpbi5yZWdpc3RlckNvbW1hbmQgPSAoY29tbWFuZDogSVBsdWdpbkNvbW1hbmQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY20gPSBjb250YWluZXIuZ2V0PElDb21tYW5kTWFuYWdlcj4oVFlQRVMuQ29tbWFuZE1hbmFnZXIpO1xyXG4gICAgICAgICAgICBjbS5yZWdpc3RlckNvbW1hbmQoe1xyXG4gICAgICAgICAgICAgICAgLi4uY29tbWFuZCxcclxuICAgICAgICAgICAgICAgIHBsdWdpbjogcGx1Z2luS2V5LFxyXG4gICAgICAgICAgICAgICAgcGx1Z2luTmFtZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3Qgc20gPSBjb250YWluZXIuZ2V0PElTdG9yYWdlTWFuYWdlcj4oVFlQRVMuU3RvcmFnZU1hbmFnZXIpO1xyXG4gICAgICAgIHBsdWdpbi53cml0ZVN0b3JhZ2UgPSBhc3luYyAoZmlsZW5hbWU6IHN0cmluZywgY29udGVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzbS5zZXRQbHVnaW5TdG9yYWdlKHBsdWdpbktleSwgZmlsZW5hbWUsIGNvbnRlbnQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGx1Z2luLmxvYWRTdG9yYWdlID0gYXN5bmMgKGZpbGVuYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNtLmdldFBsdWdpblN0b3JhZ2UocGx1Z2luS2V5LCBmaWxlbmFtZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbHVnaW4ucmVnaXN0ZXJTZXR0aW5nUmVuZGVyID0gKHNldHRpbmdSZW5kZXI6IFNldHRpbmdSZW5kZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY20gPSBjb250YWluZXIuZ2V0PElTZXR0aW5nTWFuYWdlcj4oVFlQRVMuU2V0dGluZ01hbmFnZXIpO1xyXG4gICAgICAgICAgICBjbS5yZWdpc3RlclNldHRpbmcocGx1Z2luS2V5LCBzZXR0aW5nUmVuZGVyKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEZpbGVDbGllbnQgfSBmcm9tICdAL2FwaS9maWxlLWFwaSc7XHJcbmltcG9ydCB7IGluamVjdGFibGUgfSBmcm9tICdpbnZlcnNpZnknO1xyXG5pbXBvcnQgeyBQbHVnaW5NYW5pZmVzdCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgZXJyb3IsIGlzRXhpc3RzLCBsb2cgfSBmcm9tICcuLi91dGlsJztcclxuXHJcbmV4cG9ydCBjb25zdCBNQU5JRkVTVCA9ICdtYW5pZmVzdC5qc29uJztcclxuXHJcbmV4cG9ydCBjb25zdCBTQ1JJUFQgPSAnbWFpbi5qcyc7XHJcblxyXG5AaW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBQbHVnaW5GaWxlTWFuYWdlciB7XHJcbiAgICBhc3luYyBzY2FuUGx1Z2lucyhwbHVnaW5Gb2xkZXI6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBGaWxlQ2xpZW50LmdldEluc3RhbmNlQXBpKCkuZmlsZUFwaS5yZWFkRGlyKHBsdWdpbkZvbGRlcik7XHJcbiAgICAgICAgaWYgKCFyZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmaWxlcyA9IHJlcztcclxuICAgICAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBmIG9mIGZpbGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChmLm5hbWUuc3RhcnRzV2l0aCgnLicpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZi5pc0RpciAmJiAoYXdhaXQgaXNFeGlzdHMoYC9kYXRhL3BsdWdpbnMvJHtmLm5hbWV9L21hbmlmZXN0Lmpzb25gKSkgJiYgKGF3YWl0IGlzRXhpc3RzKGAvZGF0YS9wbHVnaW5zLyR7Zi5uYW1lfS9tYWluLmpzYCkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChgL2RhdGEvcGx1Z2lucy8ke2YubmFtZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEZpbGVDb250ZW50KGY6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgRmlsZUNsaWVudC5nZXRJbnN0YW5jZUFwaSgpLmZpbGVBcGkuZ2V0RmlsZShmKTtcclxuICAgICAgICByZXR1cm4gcmVzIHx8ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldE1hbmlmZXN0KG1hbmlmZXN0OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5nZXRGaWxlQ29udGVudChtYW5pZmVzdCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBlcnJvcignbG9hZGluZyBtYW5pZmVzdDogJyArIG1hbmlmZXN0LCBlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFNjcmlwdChzY3JpcHQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldEZpbGVDb250ZW50KHNjcmlwdCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0QWxsUGx1Z2lucygpOiBQcm9taXNlPFBsdWdpbk1hbmlmZXN0W10+IHtcclxuICAgICAgICBjb25zdCBwbHVnaW5zID0gYXdhaXQgdGhpcy5zY2FuUGx1Z2lucygnL2RhdGEvcGx1Z2lucycpO1xyXG4gICAgICAgIGlmICghcGx1Z2lucyB8fCAhcGx1Z2lucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbG9nKCdObyBwbHVnaW4gZm91bmQgaW4gJyArICcvZGF0YS9wbHVnaW5zJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVxID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHBsdWdpbnMpIHtcclxuICAgICAgICAgICAgbG9nKCdSZWFkaW5nIHBsdWdpbiBmcm9tIGZpbGVzeXN0ZW06ICcgKyBwKTtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5nZXRGb2xkZXJOYW1lKHApO1xyXG4gICAgICAgICAgICBjb25zdCBmID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW21hbmlmZXN0LCBzY3JpcHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0TWFuaWZlc3QoYCR7cH0vbWFuaWZlc3QuanNvbmApLCB0aGlzLmdldFNjcmlwdChgJHtwfS9tYWluLmpzYCldKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm1hbmlmZXN0LCBzY3JpcHQsIGVuYWJsZWQ6IGZhbHNlLCBrZXkgfTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxLnB1c2goZigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzdWx0OiBQbHVnaW5NYW5pZmVzdFtdID0gYXdhaXQgUHJvbWlzZS5hbGwocmVxKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0IHx8IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZvbGRlck5hbWUocCkge1xyXG4gICAgICAgIGNvbnN0IGYgPSBwLnNwbGl0KCcvJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGYubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYgKGZbaV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJRXZlbnRCdXMsIExpc3RlbmVyIH0gZnJvbSAnQC90eXBlcyc7XHJcbmltcG9ydCB7IGluamVjdGFibGUgfSBmcm9tICdpbnZlcnNpZnknO1xyXG5cclxuQGluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgRXZlbnRCdXMgaW1wbGVtZW50cyBJRXZlbnRCdXMge1xyXG4gICAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBMaXN0ZW5lcltdIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVycyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRMaXN0ZW5lcnM7XHJcbiAgICB9XHJcblxyXG4gICAgb24oZXZlbnROYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBMaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICghdGhpcy5ldmVudExpc3RlbmVyc1tldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHRoaXMub2ZmKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIG9mZihldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s/OiBMaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICghY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnROYW1lXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnROYW1lXS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudE5hbWVdW2ldID09PSBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyc1tldmVudE5hbWVdLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlbWl0KGV2ZW50TmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnROYW1lXS5mb3JFYWNoKChjYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2IoLi4uYXJncyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBUWVBFUyB9IGZyb20gJ0AvY29uZmlnJztcclxuaW1wb3J0IHsgQ29tbWFuZCwgSUNvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnQC90eXBlcyc7XHJcbi8vIHJvbWUtaWdub3JlIGxpbnQvc3VzcGljaW91cy9ub1NoYWRvd1Jlc3RyaWN0ZWROYW1lczogPGV4cGxhbmF0aW9uPlxyXG5pbXBvcnQgIHsgRXJyb3IsIGxvZywgV2FybmluZyB9IGZyb20gJ0AvdXRpbCc7XHJcbmltcG9ydCB7IGluamVjdCwgaW5qZWN0YWJsZSB9IGZyb20gJ2ludmVyc2lmeSc7XHJcbmltcG9ydCB7IFNob3J0Y3V0IH0gZnJvbSAnLi9zaG9ydGN1dCc7XHJcblxyXG5AaW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kTWFuYWdlciBpbXBsZW1lbnRzIElDb21tYW5kTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIHNob3J0Y3V0OiBTaG9ydGN1dDtcclxuICAgIHByaXZhdGUgY29tbWFuZExpc3Q6IENvbW1hbmRbXTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoQGluamVjdChUWVBFUy5TaG9ydGN1dCkgc2hvcnRjdXQpIHtcclxuICAgICAgICB0aGlzLmNvbW1hbmRMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5zaG9ydGN1dCA9IHNob3J0Y3V0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWdpc3RlckNvbW1hbmQoY29tbWFuZDogQ29tbWFuZCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5jb21tYW5kTGlzdC5zb21lKChjb20pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbS5wbHVnaW4gPT09IGNvbW1hbmQucGx1Z2luICYmIGNvbS5jb21tYW5kID09PSBjb21tYW5kLmNvbW1hbmQ7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0NvbW1hbmQgaXMgYWxyZWFkeSByZWdpc3RlcmVkLCBkbyBub3QgcmVnaXN0ZXIgY29tbWFuZCByZXBlYXRseScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGNvbW1hbmQuc2hvcnRjdXQgJiZcclxuICAgICAgICAgICAgdGhpcy5jb21tYW5kTGlzdC5zb21lKChjb20pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbS5zaG9ydGN1dCA9PT0gY29tbWFuZC5zaG9ydGN1dDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBXYXJuaW5nKCdzaG9ydGN1dCBoYXMgYWxyZWFkeSByZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tbWFuZExpc3QucHVzaChjb21tYW5kKTtcclxuICAgICAgICB0aGlzLnNob3J0Y3V0LnJlZ2lzdGVyS2V5Ym9hcmRFdmVudEZyb21QbHVnaW4oY29tbWFuZCk7XHJcbiAgICAgICAgbG9nKGBSZWdpc3RlciBwbHVnaW46ICR7Y29tbWFuZC5wbHVnaW59IGNvbW1hbmQ6ICR7Y29tbWFuZC5jb21tYW5kfWApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1bnJlZ2lzdGVyQ29tbWFuZEJ5UGx1Z2luKHBsdWdpbjogc3RyaW5nKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbW1hbmRMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChwbHVnaW4gPT09IHRoaXMuY29tbWFuZExpc3RbaV0ucGx1Z2luKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb20gPSB0aGlzLmNvbW1hbmRMaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgbG9nKGBVbnJlZ2lzdGVyIHBsdWdpbjogJHtwbHVnaW59IGNvbW1hbmQ6ICR7Y29tLmNvbW1hbmR9YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRMaXN0LnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb20uc2hvcnRjdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3J0Y3V0LnVucmVnaXN0ZXJLZXlib2FyZEV2ZW50KGNvbS5zaG9ydGN1dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVucmVnaXN0ZXJDb21tYW5kKGNvbW1hbmQ6IENvbW1hbmQpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29tbWFuZExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGNvbW1hbmQuY29tbWFuZCA9PT0gdGhpcy5jb21tYW5kTGlzdFtpXS5jb21tYW5kICYmIGNvbW1hbmQucGx1Z2luID09PSB0aGlzLmNvbW1hbmRMaXN0W2ldLnBsdWdpbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kTGlzdC5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3J0Y3V0LnJlZ2lzdGVyS2V5Ym9hcmRFdmVudEZyb21QbHVnaW4oY29tbWFuZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvbW1hbmRzKCk6IENvbW1hbmRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZExpc3Q7XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqISBcbiAqIGhvdGtleXMtanMgdjMuMTAuMSBcbiAqIEEgc2ltcGxlIG1pY3JvLWxpYnJhcnkgZm9yIGRlZmluaW5nIGFuZCBkaXNwYXRjaGluZyBrZXlib2FyZCBzaG9ydGN1dHMuIEl0IGhhcyBubyBkZXBlbmRlbmNpZXMuIFxuICogXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjIga2Vubnkgd29uZyA8d293b2hvb0BxcS5jb20+IFxuICogaHR0cDovL2pheXdjamxvdmUuZ2l0aHViLmlvL2hvdGtleXMgXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgXG4gKi9cblxudmFyIGlzZmYgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyA/IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdmaXJlZm94JykgPiAwIDogZmFsc2U7IC8vIOe7keWumuS6i+S7tlxuXG5mdW5jdGlvbiBhZGRFdmVudChvYmplY3QsIGV2ZW50LCBtZXRob2QsIHVzZUNhcHR1cmUpIHtcbiAgaWYgKG9iamVjdC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgb2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIG1ldGhvZCwgdXNlQ2FwdHVyZSk7XG4gIH0gZWxzZSBpZiAob2JqZWN0LmF0dGFjaEV2ZW50KSB7XG4gICAgb2JqZWN0LmF0dGFjaEV2ZW50KFwib25cIi5jb25jYXQoZXZlbnQpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBtZXRob2Qod2luZG93LmV2ZW50KTtcbiAgICB9KTtcbiAgfVxufSAvLyDkv67ppbDplK7ovazmjaLmiJDlr7nlupTnmoTplK7noIFcblxuXG5mdW5jdGlvbiBnZXRNb2RzKG1vZGlmaWVyLCBrZXkpIHtcbiAgdmFyIG1vZHMgPSBrZXkuc2xpY2UoMCwga2V5Lmxlbmd0aCAtIDEpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kcy5sZW5ndGg7IGkrKykge1xuICAgIG1vZHNbaV0gPSBtb2RpZmllclttb2RzW2ldLnRvTG93ZXJDYXNlKCldO1xuICB9XG5cbiAgcmV0dXJuIG1vZHM7XG59IC8vIOWkhOeQhuS8oOeahGtleeWtl+espuS4sui9rOaNouaIkOaVsOe7hFxuXG5cbmZ1bmN0aW9uIGdldEtleXMoa2V5KSB7XG4gIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykga2V5ID0gJyc7XG4gIGtleSA9IGtleS5yZXBsYWNlKC9cXHMvZywgJycpOyAvLyDljLnphY3ku7vkvZXnqbrnmb3lrZfnrKYs5YyF5ous56m65qC844CB5Yi26KGo56ym44CB5o2i6aG156ym562J562JXG5cbiAgdmFyIGtleXMgPSBrZXkuc3BsaXQoJywnKTsgLy8g5ZCM5pe26K6+572u5aSa5Liq5b+r5o236ZSu77yM5LulJywn5YiG5YmyXG5cbiAgdmFyIGluZGV4ID0ga2V5cy5sYXN0SW5kZXhPZignJyk7IC8vIOW/q+aNt+mUruWPr+iDveWMheWQqycsJ++8jOmcgOeJueauiuWkhOeQhlxuXG4gIGZvciAoOyBpbmRleCA+PSAwOykge1xuICAgIGtleXNbaW5kZXggLSAxXSArPSAnLCc7XG4gICAga2V5cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGluZGV4ID0ga2V5cy5sYXN0SW5kZXhPZignJyk7XG4gIH1cblxuICByZXR1cm4ga2V5cztcbn0gLy8g5q+U6L6D5L+u6aWw6ZSu55qE5pWw57uEXG5cblxuZnVuY3Rpb24gY29tcGFyZUFycmF5KGExLCBhMikge1xuICB2YXIgYXJyMSA9IGExLmxlbmd0aCA+PSBhMi5sZW5ndGggPyBhMSA6IGEyO1xuICB2YXIgYXJyMiA9IGExLmxlbmd0aCA+PSBhMi5sZW5ndGggPyBhMiA6IGExO1xuICB2YXIgaXNJbmRleCA9IHRydWU7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIxLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFycjIuaW5kZXhPZihhcnIxW2ldKSA9PT0gLTEpIGlzSW5kZXggPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBpc0luZGV4O1xufVxuXG52YXIgX2tleU1hcCA9IHtcbiAgYmFja3NwYWNlOiA4LFxuICAn4oyrJzogOCxcbiAgdGFiOiA5LFxuICBjbGVhcjogMTIsXG4gIGVudGVyOiAxMyxcbiAgJ+KGqSc6IDEzLFxuICByZXR1cm46IDEzLFxuICBlc2M6IDI3LFxuICBlc2NhcGU6IDI3LFxuICBzcGFjZTogMzIsXG4gIGxlZnQ6IDM3LFxuICB1cDogMzgsXG4gIHJpZ2h0OiAzOSxcbiAgZG93bjogNDAsXG4gIGRlbDogNDYsXG4gIGRlbGV0ZTogNDYsXG4gIGluczogNDUsXG4gIGluc2VydDogNDUsXG4gIGhvbWU6IDM2LFxuICBlbmQ6IDM1LFxuICBwYWdldXA6IDMzLFxuICBwYWdlZG93bjogMzQsXG4gIGNhcHNsb2NrOiAyMCxcbiAgbnVtXzA6IDk2LFxuICBudW1fMTogOTcsXG4gIG51bV8yOiA5OCxcbiAgbnVtXzM6IDk5LFxuICBudW1fNDogMTAwLFxuICBudW1fNTogMTAxLFxuICBudW1fNjogMTAyLFxuICBudW1fNzogMTAzLFxuICBudW1fODogMTA0LFxuICBudW1fOTogMTA1LFxuICBudW1fbXVsdGlwbHk6IDEwNixcbiAgbnVtX2FkZDogMTA3LFxuICBudW1fZW50ZXI6IDEwOCxcbiAgbnVtX3N1YnRyYWN0OiAxMDksXG4gIG51bV9kZWNpbWFsOiAxMTAsXG4gIG51bV9kaXZpZGU6IDExMSxcbiAgJ+KHqic6IDIwLFxuICAnLCc6IDE4OCxcbiAgJy4nOiAxOTAsXG4gICcvJzogMTkxLFxuICAnYCc6IDE5MixcbiAgJy0nOiBpc2ZmID8gMTczIDogMTg5LFxuICAnPSc6IGlzZmYgPyA2MSA6IDE4NyxcbiAgJzsnOiBpc2ZmID8gNTkgOiAxODYsXG4gICdcXCcnOiAyMjIsXG4gICdbJzogMjE5LFxuICAnXSc6IDIyMSxcbiAgJ1xcXFwnOiAyMjBcbn07IC8vIE1vZGlmaWVyIEtleXNcblxudmFyIF9tb2RpZmllciA9IHtcbiAgLy8gc2hpZnRLZXlcbiAgJ+KHpyc6IDE2LFxuICBzaGlmdDogMTYsXG4gIC8vIGFsdEtleVxuICAn4oylJzogMTgsXG4gIGFsdDogMTgsXG4gIG9wdGlvbjogMTgsXG4gIC8vIGN0cmxLZXlcbiAgJ+KMgyc6IDE3LFxuICBjdHJsOiAxNyxcbiAgY29udHJvbDogMTcsXG4gIC8vIG1ldGFLZXlcbiAgJ+KMmCc6IDkxLFxuICBjbWQ6IDkxLFxuICBjb21tYW5kOiA5MVxufTtcbnZhciBtb2RpZmllck1hcCA9IHtcbiAgMTY6ICdzaGlmdEtleScsXG4gIDE4OiAnYWx0S2V5JyxcbiAgMTc6ICdjdHJsS2V5JyxcbiAgOTE6ICdtZXRhS2V5JyxcbiAgc2hpZnRLZXk6IDE2LFxuICBjdHJsS2V5OiAxNyxcbiAgYWx0S2V5OiAxOCxcbiAgbWV0YUtleTogOTFcbn07XG52YXIgX21vZHMgPSB7XG4gIDE2OiBmYWxzZSxcbiAgMTg6IGZhbHNlLFxuICAxNzogZmFsc2UsXG4gIDkxOiBmYWxzZVxufTtcbnZhciBfaGFuZGxlcnMgPSB7fTsgLy8gRjF+RjEyIHNwZWNpYWwga2V5XG5cbmZvciAodmFyIGsgPSAxOyBrIDwgMjA7IGsrKykge1xuICBfa2V5TWFwW1wiZlwiLmNvbmNhdChrKV0gPSAxMTEgKyBrO1xufVxuXG52YXIgX2Rvd25LZXlzID0gW107IC8vIOiusOW9leaRgeS4i+eahOe7keWumumUrlxuXG52YXIgd2luTGlzdGVuZEZvY3VzID0gZmFsc2U7IC8vIHdpbmRvd+aYr+WQpuW3sue7j+ebkeWQrOS6hmZvY3Vz5LqL5Lu2XG5cbnZhciBfc2NvcGUgPSAnYWxsJzsgLy8g6buY6K6k54Ot6ZSu6IyD5Zu0XG5cbnZhciBlbGVtZW50SGFzQmluZEV2ZW50ID0gW107IC8vIOW3sue7keWumuS6i+S7tueahOiKgueCueiusOW9lVxuLy8g6L+U5Zue6ZSu56CBXG5cbnZhciBjb2RlID0gZnVuY3Rpb24gY29kZSh4KSB7XG4gIHJldHVybiBfa2V5TWFwW3gudG9Mb3dlckNhc2UoKV0gfHwgX21vZGlmaWVyW3gudG9Mb3dlckNhc2UoKV0gfHwgeC50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XG59O1xuXG52YXIgZ2V0S2V5ID0gZnVuY3Rpb24gZ2V0S2V5KHgpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKF9rZXlNYXApLmZpbmQoZnVuY3Rpb24gKGspIHtcbiAgICByZXR1cm4gX2tleU1hcFtrXSA9PT0geDtcbiAgfSk7XG59O1xuXG52YXIgZ2V0TW9kaWZpZXIgPSBmdW5jdGlvbiBnZXRNb2RpZmllcih4KSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhfbW9kaWZpZXIpLmZpbmQoZnVuY3Rpb24gKGspIHtcbiAgICByZXR1cm4gX21vZGlmaWVyW2tdID09PSB4O1xuICB9KTtcbn07IC8vIOiuvue9ruiOt+WPluW9k+WJjeiMg+WbtO+8iOm7mOiupOS4uifmiYDmnIkn77yJXG5cblxuZnVuY3Rpb24gc2V0U2NvcGUoc2NvcGUpIHtcbiAgX3Njb3BlID0gc2NvcGUgfHwgJ2FsbCc7XG59IC8vIOiOt+WPluW9k+WJjeiMg+WbtFxuXG5cbmZ1bmN0aW9uIGdldFNjb3BlKCkge1xuICByZXR1cm4gX3Njb3BlIHx8ICdhbGwnO1xufSAvLyDojrflj5bmkYHkuIvnu5HlrprplK7nmoTplK7lgLxcblxuXG5mdW5jdGlvbiBnZXRQcmVzc2VkS2V5Q29kZXMoKSB7XG4gIHJldHVybiBfZG93bktleXMuc2xpY2UoMCk7XG59XG5cbmZ1bmN0aW9uIGdldFByZXNzZWRLZXlTdHJpbmcoKSB7XG4gIHJldHVybiBfZG93bktleXMubWFwKGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuIGdldEtleShjKSB8fCBnZXRNb2RpZmllcihjKSB8fCBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xuICB9KTtcbn0gLy8g6KGo5Y2V5o6n5Lu25o6n5Lu25Yik5patIOi/lOWbniBCb29sZWFuXG4vLyBob3RrZXkgaXMgZWZmZWN0aXZlIG9ubHkgd2hlbiBmaWx0ZXIgcmV0dXJuIHRydWVcblxuXG5mdW5jdGlvbiBmaWx0ZXIoZXZlbnQpIHtcbiAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50O1xuICB2YXIgdGFnTmFtZSA9IHRhcmdldC50YWdOYW1lO1xuICB2YXIgZmxhZyA9IHRydWU7IC8vIGlnbm9yZTogaXNDb250ZW50RWRpdGFibGUgPT09ICd0cnVlJywgPGlucHV0PiBhbmQgPHRleHRhcmVhPiB3aGVuIHJlYWRPbmx5IHN0YXRlIGlzIGZhbHNlLCA8c2VsZWN0PlxuXG4gIGlmICh0YXJnZXQuaXNDb250ZW50RWRpdGFibGUgfHwgKHRhZ05hbWUgPT09ICdJTlBVVCcgfHwgdGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCB0YWdOYW1lID09PSAnU0VMRUNUJykgJiYgIXRhcmdldC5yZWFkT25seSkge1xuICAgIGZsYWcgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBmbGFnO1xufSAvLyDliKTmlq3mkYHkuIvnmoTplK7mmK/lkKbkuLrmn5DkuKrplK7vvIzov5Tlm550cnVl5oiW6ICFZmFsc2VcblxuXG5mdW5jdGlvbiBpc1ByZXNzZWQoa2V5Q29kZSkge1xuICBpZiAodHlwZW9mIGtleUNvZGUgPT09ICdzdHJpbmcnKSB7XG4gICAga2V5Q29kZSA9IGNvZGUoa2V5Q29kZSk7IC8vIOi9rOaNouaIkOmUrueggVxuICB9XG5cbiAgcmV0dXJuIF9kb3duS2V5cy5pbmRleE9mKGtleUNvZGUpICE9PSAtMTtcbn0gLy8g5b6q546v5Yig6ZmkaGFuZGxlcnPkuK3nmoTmiYDmnIkgc2NvcGUo6IyD5Zu0KVxuXG5cbmZ1bmN0aW9uIGRlbGV0ZVNjb3BlKHNjb3BlLCBuZXdTY29wZSkge1xuICB2YXIgaGFuZGxlcnM7XG4gIHZhciBpOyAvLyDmsqHmnInmjIflrppzY29wZe+8jOiOt+WPlnNjb3BlXG5cbiAgaWYgKCFzY29wZSkgc2NvcGUgPSBnZXRTY29wZSgpO1xuXG4gIGZvciAodmFyIGtleSBpbiBfaGFuZGxlcnMpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9oYW5kbGVycywga2V5KSkge1xuICAgICAgaGFuZGxlcnMgPSBfaGFuZGxlcnNba2V5XTtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IGhhbmRsZXJzLmxlbmd0aDspIHtcbiAgICAgICAgaWYgKGhhbmRsZXJzW2ldLnNjb3BlID09PSBzY29wZSkgaGFuZGxlcnMuc3BsaWNlKGksIDEpO2Vsc2UgaSsrO1xuICAgICAgfVxuICAgIH1cbiAgfSAvLyDlpoLmnpxzY29wZeiiq+WIoOmZpO+8jOWwhnNjb3Bl6YeN572u5Li6YWxsXG5cblxuICBpZiAoZ2V0U2NvcGUoKSA9PT0gc2NvcGUpIHNldFNjb3BlKG5ld1Njb3BlIHx8ICdhbGwnKTtcbn0gLy8g5riF6Zmk5L+u6aWw6ZSuXG5cblxuZnVuY3Rpb24gY2xlYXJNb2RpZmllcihldmVudCkge1xuICB2YXIga2V5ID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaCB8fCBldmVudC5jaGFyQ29kZTtcblxuICB2YXIgaSA9IF9kb3duS2V5cy5pbmRleE9mKGtleSk7IC8vIOS7juWIl+ihqOS4rea4hemZpOaMieWOi+i/h+eahOmUrlxuXG5cbiAgaWYgKGkgPj0gMCkge1xuICAgIF9kb3duS2V5cy5zcGxpY2UoaSwgMSk7XG4gIH0gLy8g54m55q6K5aSE55CGIGNtbWFuZCDplK7vvIzlnKggY21tYW5kIOe7hOWQiOW/q+aNt+mUriBrZXl1cCDlj6rmiafooYzkuIDmrKHnmoTpl67pophcblxuXG4gIGlmIChldmVudC5rZXkgJiYgZXZlbnQua2V5LnRvTG93ZXJDYXNlKCkgPT09ICdtZXRhJykge1xuICAgIF9kb3duS2V5cy5zcGxpY2UoMCwgX2Rvd25LZXlzLmxlbmd0aCk7XG4gIH0gLy8g5L+u6aWw6ZSuIHNoaWZ0S2V5IGFsdEtleSBjdHJsS2V5IChjb21tYW5kfHxtZXRhS2V5KSDmuIXpmaRcblxuXG4gIGlmIChrZXkgPT09IDkzIHx8IGtleSA9PT0gMjI0KSBrZXkgPSA5MTtcblxuICBpZiAoa2V5IGluIF9tb2RzKSB7XG4gICAgX21vZHNba2V5XSA9IGZhbHNlOyAvLyDlsIbkv67ppbDplK7ph43nva7kuLpmYWxzZVxuXG4gICAgZm9yICh2YXIgayBpbiBfbW9kaWZpZXIpIHtcbiAgICAgIGlmIChfbW9kaWZpZXJba10gPT09IGtleSkgaG90a2V5c1trXSA9IGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB1bmJpbmQoa2V5c0luZm8pIHtcbiAgLy8gdW5iaW5kKCksIHVuYmluZCBhbGwga2V5c1xuICBpZiAodHlwZW9mIGtleXNJbmZvID09PSAndW5kZWZpbmVkJykge1xuICAgIE9iamVjdC5rZXlzKF9oYW5kbGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gZGVsZXRlIF9oYW5kbGVyc1trZXldO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoa2V5c0luZm8pKSB7XG4gICAgLy8gc3VwcG9ydCBsaWtlIDogdW5iaW5kKFt7a2V5OiAnY3RybCthJywgc2NvcGU6ICdzMSd9LCB7a2V5OiAnY3RybC1hJywgc2NvcGU6ICdzMicsIHNwbGl0S2V5OiAnLSd9XSlcbiAgICBrZXlzSW5mby5mb3JFYWNoKGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICBpZiAoaW5mby5rZXkpIGVhY2hVbmJpbmQoaW5mbyk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGtleXNJbmZvID09PSAnb2JqZWN0Jykge1xuICAgIC8vIHN1cHBvcnQgbGlrZSB1bmJpbmQoe2tleTogJ2N0cmwrYSwgY3RybCtiJywgc2NvcGU6J2FiYyd9KVxuICAgIGlmIChrZXlzSW5mby5rZXkpIGVhY2hVbmJpbmQoa2V5c0luZm8pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBrZXlzSW5mbyA9PT0gJ3N0cmluZycpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICAvLyBzdXBwb3J0IG9sZCBtZXRob2RcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgdmFyIHNjb3BlID0gYXJnc1swXSxcbiAgICAgICAgbWV0aG9kID0gYXJnc1sxXTtcblxuICAgIGlmICh0eXBlb2Ygc2NvcGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG1ldGhvZCA9IHNjb3BlO1xuICAgICAgc2NvcGUgPSAnJztcbiAgICB9XG5cbiAgICBlYWNoVW5iaW5kKHtcbiAgICAgIGtleToga2V5c0luZm8sXG4gICAgICBzY29wZTogc2NvcGUsXG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHNwbGl0S2V5OiAnKydcbiAgICB9KTtcbiAgfVxufSAvLyDop6PpmaTnu5Hlrprmn5DkuKrojIPlm7TnmoTlv6vmjbfplK5cblxuXG52YXIgZWFjaFVuYmluZCA9IGZ1bmN0aW9uIGVhY2hVbmJpbmQoX3JlZikge1xuICB2YXIga2V5ID0gX3JlZi5rZXksXG4gICAgICBzY29wZSA9IF9yZWYuc2NvcGUsXG4gICAgICBtZXRob2QgPSBfcmVmLm1ldGhvZCxcbiAgICAgIF9yZWYkc3BsaXRLZXkgPSBfcmVmLnNwbGl0S2V5LFxuICAgICAgc3BsaXRLZXkgPSBfcmVmJHNwbGl0S2V5ID09PSB2b2lkIDAgPyAnKycgOiBfcmVmJHNwbGl0S2V5O1xuICB2YXIgbXVsdGlwbGVLZXlzID0gZ2V0S2V5cyhrZXkpO1xuICBtdWx0aXBsZUtleXMuZm9yRWFjaChmdW5jdGlvbiAob3JpZ2luS2V5KSB7XG4gICAgdmFyIHVuYmluZEtleXMgPSBvcmlnaW5LZXkuc3BsaXQoc3BsaXRLZXkpO1xuICAgIHZhciBsZW4gPSB1bmJpbmRLZXlzLmxlbmd0aDtcbiAgICB2YXIgbGFzdEtleSA9IHVuYmluZEtleXNbbGVuIC0gMV07XG4gICAgdmFyIGtleUNvZGUgPSBsYXN0S2V5ID09PSAnKicgPyAnKicgOiBjb2RlKGxhc3RLZXkpO1xuICAgIGlmICghX2hhbmRsZXJzW2tleUNvZGVdKSByZXR1cm47IC8vIOWIpOaWreaYr+WQpuS8oOWFpeiMg+WbtO+8jOayoeacieWwseiOt+WPluiMg+WbtFxuXG4gICAgaWYgKCFzY29wZSkgc2NvcGUgPSBnZXRTY29wZSgpO1xuICAgIHZhciBtb2RzID0gbGVuID4gMSA/IGdldE1vZHMoX21vZGlmaWVyLCB1bmJpbmRLZXlzKSA6IFtdO1xuICAgIF9oYW5kbGVyc1trZXlDb2RlXSA9IF9oYW5kbGVyc1trZXlDb2RlXS5maWx0ZXIoZnVuY3Rpb24gKHJlY29yZCkge1xuICAgICAgLy8g6YCa6L+H5Ye95pWw5Yik5pat77yM5piv5ZCm6Kej6Zmk57uR5a6a77yM5Ye95pWw55u4562J55u05o6l6L+U5ZueXG4gICAgICB2YXIgaXNNYXRjaGluZ01ldGhvZCA9IG1ldGhvZCA/IHJlY29yZC5tZXRob2QgPT09IG1ldGhvZCA6IHRydWU7XG4gICAgICByZXR1cm4gIShpc01hdGNoaW5nTWV0aG9kICYmIHJlY29yZC5zY29wZSA9PT0gc2NvcGUgJiYgY29tcGFyZUFycmF5KHJlY29yZC5tb2RzLCBtb2RzKSk7XG4gICAgfSk7XG4gIH0pO1xufTsgLy8g5a+555uR5ZCs5a+55bqU5b+r5o236ZSu55qE5Zue6LCD5Ye95pWw6L+b6KGM5aSE55CGXG5cblxuZnVuY3Rpb24gZXZlbnRIYW5kbGVyKGV2ZW50LCBoYW5kbGVyLCBzY29wZSwgZWxlbWVudCkge1xuICBpZiAoaGFuZGxlci5lbGVtZW50ICE9PSBlbGVtZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG1vZGlmaWVyc01hdGNoOyAvLyDnnIvlroPmmK/lkKblnKjlvZPliY3ojIPlm7RcblxuICBpZiAoaGFuZGxlci5zY29wZSA9PT0gc2NvcGUgfHwgaGFuZGxlci5zY29wZSA9PT0gJ2FsbCcpIHtcbiAgICAvLyDmo4Dmn6XmmK/lkKbljLnphY3kv67ppbDnrKbvvIjlpoLmnpzmnInov5Tlm550cnVl77yJXG4gICAgbW9kaWZpZXJzTWF0Y2ggPSBoYW5kbGVyLm1vZHMubGVuZ3RoID4gMDtcblxuICAgIGZvciAodmFyIHkgaW4gX21vZHMpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX21vZHMsIHkpKSB7XG4gICAgICAgIGlmICghX21vZHNbeV0gJiYgaGFuZGxlci5tb2RzLmluZGV4T2YoK3kpID4gLTEgfHwgX21vZHNbeV0gJiYgaGFuZGxlci5tb2RzLmluZGV4T2YoK3kpID09PSAtMSkge1xuICAgICAgICAgIG1vZGlmaWVyc01hdGNoID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIOiwg+eUqOWkhOeQhueoi+W6j++8jOWmguaenOaYr+S/rumlsOmUruS4jeWBmuWkhOeQhlxuXG5cbiAgICBpZiAoaGFuZGxlci5tb2RzLmxlbmd0aCA9PT0gMCAmJiAhX21vZHNbMTZdICYmICFfbW9kc1sxOF0gJiYgIV9tb2RzWzE3XSAmJiAhX21vZHNbOTFdIHx8IG1vZGlmaWVyc01hdGNoIHx8IGhhbmRsZXIuc2hvcnRjdXQgPT09ICcqJykge1xuICAgICAgaWYgKGhhbmRsZXIubWV0aG9kKGV2ZW50LCBoYW5kbGVyKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmIChldmVudC5jYW5jZWxCdWJibGUpIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59IC8vIOWkhOeQhmtleWRvd27kuovku7ZcblxuXG5mdW5jdGlvbiBkaXNwYXRjaChldmVudCwgZWxlbWVudCkge1xuICB2YXIgYXN0ZXJpc2sgPSBfaGFuZGxlcnNbJyonXTtcbiAgdmFyIGtleSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2ggfHwgZXZlbnQuY2hhckNvZGU7IC8vIOihqOWNleaOp+S7tui/h+a7pCDpu5jorqTooajljZXmjqfku7bkuI3op6blj5Hlv6vmjbfplK5cblxuICBpZiAoIWhvdGtleXMuZmlsdGVyLmNhbGwodGhpcywgZXZlbnQpKSByZXR1cm47IC8vIEdlY2tvKEZpcmVmb3gp55qEY29tbWFuZOmUruWAvDIyNO+8jOWcqFdlYmtpdChDaHJvbWUp5Lit5L+d5oyB5LiA6Ie0XG4gIC8vIFdlYmtpdOW3puWPsyBjb21tYW5kIOmUruWAvOS4jeS4gOagt1xuXG4gIGlmIChrZXkgPT09IDkzIHx8IGtleSA9PT0gMjI0KSBrZXkgPSA5MTtcbiAgLyoqXG4gICAqIENvbGxlY3QgYm91bmQga2V5c1xuICAgKiBJZiBhbiBJbnB1dCBNZXRob2QgRWRpdG9yIGlzIHByb2Nlc3Npbmcga2V5IGlucHV0IGFuZCB0aGUgZXZlbnQgaXMga2V5ZG93biwgcmV0dXJuIDIyOS5cbiAgICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjUwNDM5MzQvaXMtaXQtb2stdG8taWdub3JlLWtleWRvd24tZXZlbnRzLXdpdGgta2V5Y29kZS0yMjlcbiAgICogaHR0cDovL2xpc3RzLnczLm9yZy9BcmNoaXZlcy9QdWJsaWMvd3d3LWRvbS8yMDEwSnVsU2VwL2F0dC0wMTgyL2tleUNvZGUtc3BlYy5odG1sXG4gICAqL1xuXG4gIGlmIChfZG93bktleXMuaW5kZXhPZihrZXkpID09PSAtMSAmJiBrZXkgIT09IDIyOSkgX2Rvd25LZXlzLnB1c2goa2V5KTtcbiAgLyoqXG4gICAqIEplc3QgdGVzdCBjYXNlcyBhcmUgcmVxdWlyZWQuXG4gICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICovXG5cbiAgWydjdHJsS2V5JywgJ2FsdEtleScsICdzaGlmdEtleScsICdtZXRhS2V5J10uZm9yRWFjaChmdW5jdGlvbiAoa2V5TmFtZSkge1xuICAgIHZhciBrZXlOdW0gPSBtb2RpZmllck1hcFtrZXlOYW1lXTtcblxuICAgIGlmIChldmVudFtrZXlOYW1lXSAmJiBfZG93bktleXMuaW5kZXhPZihrZXlOdW0pID09PSAtMSkge1xuICAgICAgX2Rvd25LZXlzLnB1c2goa2V5TnVtKTtcbiAgICB9IGVsc2UgaWYgKCFldmVudFtrZXlOYW1lXSAmJiBfZG93bktleXMuaW5kZXhPZihrZXlOdW0pID4gLTEpIHtcbiAgICAgIF9kb3duS2V5cy5zcGxpY2UoX2Rvd25LZXlzLmluZGV4T2Yoa2V5TnVtKSwgMSk7XG4gICAgfSBlbHNlIGlmIChrZXlOYW1lID09PSAnbWV0YUtleScgJiYgZXZlbnRba2V5TmFtZV0gJiYgX2Rvd25LZXlzLmxlbmd0aCA9PT0gMykge1xuICAgICAgLyoqXG4gICAgICAgKiBGaXggaWYgQ29tbWFuZCBpcyBwcmVzc2VkOlxuICAgICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICovXG4gICAgICBpZiAoIShldmVudC5jdHJsS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmFsdEtleSkpIHtcbiAgICAgICAgX2Rvd25LZXlzID0gX2Rvd25LZXlzLnNsaWNlKF9kb3duS2V5cy5pbmRleE9mKGtleU51bSkpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gIGlmIChrZXkgaW4gX21vZHMpIHtcbiAgICBfbW9kc1trZXldID0gdHJ1ZTsgLy8g5bCG54m55q6K5a2X56ym55qEa2V55rOo5YaM5YiwIGhvdGtleXMg5LiKXG5cbiAgICBmb3IgKHZhciBrIGluIF9tb2RpZmllcikge1xuICAgICAgaWYgKF9tb2RpZmllcltrXSA9PT0ga2V5KSBob3RrZXlzW2tdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIWFzdGVyaXNrKSByZXR1cm47XG4gIH0gLy8g5bCGIG1vZGlmaWVyTWFwIOmHjOmdoueahOS/rumlsOmUrue7keWumuWIsCBldmVudCDkuK1cblxuXG4gIGZvciAodmFyIGUgaW4gX21vZHMpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9tb2RzLCBlKSkge1xuICAgICAgX21vZHNbZV0gPSBldmVudFttb2RpZmllck1hcFtlXV07XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vamF5d2NqbG92ZS9ob3RrZXlzL3B1bGwvMTI5XG4gICAqIFRoaXMgc29sdmVzIHRoZSBpc3N1ZSBpbiBGaXJlZm94IG9uIFdpbmRvd3Mgd2hlcmUgaG90a2V5cyBjb3JyZXNwb25kaW5nIHRvIHNwZWNpYWwgY2hhcmFjdGVycyB3b3VsZCBub3QgdHJpZ2dlci5cbiAgICogQW4gZXhhbXBsZSBvZiB0aGlzIGlzIGN0cmwrYWx0K20gb24gYSBTd2VkaXNoIGtleWJvYXJkIHdoaWNoIGlzIHVzZWQgdG8gdHlwZSDOvC5cbiAgICogQnJvd3NlciBzdXBwb3J0OiBodHRwczovL2Nhbml1c2UuY29tLyNmZWF0PWtleWJvYXJkZXZlbnQtZ2V0bW9kaWZpZXJzdGF0ZVxuICAgKi9cblxuXG4gIGlmIChldmVudC5nZXRNb2RpZmllclN0YXRlICYmICEoZXZlbnQuYWx0S2V5ICYmICFldmVudC5jdHJsS2V5KSAmJiBldmVudC5nZXRNb2RpZmllclN0YXRlKCdBbHRHcmFwaCcpKSB7XG4gICAgaWYgKF9kb3duS2V5cy5pbmRleE9mKDE3KSA9PT0gLTEpIHtcbiAgICAgIF9kb3duS2V5cy5wdXNoKDE3KTtcbiAgICB9XG5cbiAgICBpZiAoX2Rvd25LZXlzLmluZGV4T2YoMTgpID09PSAtMSkge1xuICAgICAgX2Rvd25LZXlzLnB1c2goMTgpO1xuICAgIH1cblxuICAgIF9tb2RzWzE3XSA9IHRydWU7XG4gICAgX21vZHNbMThdID0gdHJ1ZTtcbiAgfSAvLyDojrflj5bojIPlm7Qg6buY6K6k5Li6IGBhbGxgXG5cblxuICB2YXIgc2NvcGUgPSBnZXRTY29wZSgpOyAvLyDlr7nku7vkvZXlv6vmjbfplK7pg73pnIDopoHlgZrnmoTlpITnkIZcblxuICBpZiAoYXN0ZXJpc2spIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzdGVyaXNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYXN0ZXJpc2tbaV0uc2NvcGUgPT09IHNjb3BlICYmIChldmVudC50eXBlID09PSAna2V5ZG93bicgJiYgYXN0ZXJpc2tbaV0ua2V5ZG93biB8fCBldmVudC50eXBlID09PSAna2V5dXAnICYmIGFzdGVyaXNrW2ldLmtleXVwKSkge1xuICAgICAgICBldmVudEhhbmRsZXIoZXZlbnQsIGFzdGVyaXNrW2ldLCBzY29wZSwgZWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9IC8vIGtleSDkuI3lnKggX2hhbmRsZXJzIOS4rei/lOWbnlxuXG5cbiAgaWYgKCEoa2V5IGluIF9oYW5kbGVycykpIHJldHVybjtcblxuICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgX2hhbmRsZXJzW2tleV0ubGVuZ3RoOyBfaSsrKSB7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdrZXlkb3duJyAmJiBfaGFuZGxlcnNba2V5XVtfaV0ua2V5ZG93biB8fCBldmVudC50eXBlID09PSAna2V5dXAnICYmIF9oYW5kbGVyc1trZXldW19pXS5rZXl1cCkge1xuICAgICAgaWYgKF9oYW5kbGVyc1trZXldW19pXS5rZXkpIHtcbiAgICAgICAgdmFyIHJlY29yZCA9IF9oYW5kbGVyc1trZXldW19pXTtcbiAgICAgICAgdmFyIHNwbGl0S2V5ID0gcmVjb3JkLnNwbGl0S2V5O1xuICAgICAgICB2YXIga2V5U2hvcnRjdXQgPSByZWNvcmQua2V5LnNwbGl0KHNwbGl0S2V5KTtcbiAgICAgICAgdmFyIF9kb3duS2V5c0N1cnJlbnQgPSBbXTsgLy8g6K6w5b2V5b2T5YmN5oyJ6ZSu6ZSu5YC8XG5cbiAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBrZXlTaG9ydGN1dC5sZW5ndGg7IGErKykge1xuICAgICAgICAgIF9kb3duS2V5c0N1cnJlbnQucHVzaChjb2RlKGtleVNob3J0Y3V0W2FdKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX2Rvd25LZXlzQ3VycmVudC5zb3J0KCkuam9pbignJykgPT09IF9kb3duS2V5cy5zb3J0KCkuam9pbignJykpIHtcbiAgICAgICAgICAvLyDmib7liLDlpITnkIblhoXlrrlcbiAgICAgICAgICBldmVudEhhbmRsZXIoZXZlbnQsIHJlY29yZCwgc2NvcGUsIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59IC8vIOWIpOaWrSBlbGVtZW50IOaYr+WQpuW3sue7j+e7keWumuS6i+S7tlxuXG5cbmZ1bmN0aW9uIGlzRWxlbWVudEJpbmQoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudEhhc0JpbmRFdmVudC5pbmRleE9mKGVsZW1lbnQpID4gLTE7XG59XG5cbmZ1bmN0aW9uIGhvdGtleXMoa2V5LCBvcHRpb24sIG1ldGhvZCkge1xuICBfZG93bktleXMgPSBbXTtcbiAgdmFyIGtleXMgPSBnZXRLZXlzKGtleSk7IC8vIOmcgOimgeWkhOeQhueahOW/q+aNt+mUruWIl+ihqFxuXG4gIHZhciBtb2RzID0gW107XG4gIHZhciBzY29wZSA9ICdhbGwnOyAvLyBzY29wZem7mOiupOS4umFsbO+8jOaJgOacieiMg+WbtOmDveacieaViFxuXG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQ7IC8vIOW/q+aNt+mUruS6i+S7tue7keWumuiKgueCuVxuXG4gIHZhciBpID0gMDtcbiAgdmFyIGtleXVwID0gZmFsc2U7XG4gIHZhciBrZXlkb3duID0gdHJ1ZTtcbiAgdmFyIHNwbGl0S2V5ID0gJysnO1xuICB2YXIgY2FwdHVyZSA9IGZhbHNlOyAvLyDlr7nkuLrorr7lrprojIPlm7TnmoTliKTmlq1cblxuICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG1ldGhvZCA9IG9wdGlvbjtcbiAgfVxuXG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob3B0aW9uKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICBpZiAob3B0aW9uLnNjb3BlKSBzY29wZSA9IG9wdGlvbi5zY29wZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgaWYgKG9wdGlvbi5lbGVtZW50KSBlbGVtZW50ID0gb3B0aW9uLmVsZW1lbnQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIGlmIChvcHRpb24ua2V5dXApIGtleXVwID0gb3B0aW9uLmtleXVwOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICBpZiAob3B0aW9uLmtleWRvd24gIT09IHVuZGVmaW5lZCkga2V5ZG93biA9IG9wdGlvbi5rZXlkb3duOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICBpZiAob3B0aW9uLmNhcHR1cmUgIT09IHVuZGVmaW5lZCkgY2FwdHVyZSA9IG9wdGlvbi5jYXB0dXJlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbi5zcGxpdEtleSA9PT0gJ3N0cmluZycpIHNwbGl0S2V5ID0gb3B0aW9uLnNwbGl0S2V5OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIH1cblxuICBpZiAodHlwZW9mIG9wdGlvbiA9PT0gJ3N0cmluZycpIHNjb3BlID0gb3B0aW9uOyAvLyDlr7nkuo7mr4/kuKrlv6vmjbfplK7ov5vooYzlpITnkIZcblxuICBmb3IgKDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBrZXlzW2ldLnNwbGl0KHNwbGl0S2V5KTsgLy8g5oyJ6ZSu5YiX6KGoXG5cbiAgICBtb2RzID0gW107IC8vIOWmguaenOaYr+e7hOWQiOW/q+aNt+mUruWPluW+l+e7hOWQiOW/q+aNt+mUrlxuXG4gICAgaWYgKGtleS5sZW5ndGggPiAxKSBtb2RzID0gZ2V0TW9kcyhfbW9kaWZpZXIsIGtleSk7IC8vIOWwhumdnuS/rumlsOmUrui9rOWMluS4uumUrueggVxuXG4gICAga2V5ID0ga2V5W2tleS5sZW5ndGggLSAxXTtcbiAgICBrZXkgPSBrZXkgPT09ICcqJyA/ICcqJyA6IGNvZGUoa2V5KTsgLy8gKuihqOekuuWMuemFjeaJgOacieW/q+aNt+mUrlxuICAgIC8vIOWIpOaWrWtleeaYr+WQpuWcqF9oYW5kbGVyc+S4re+8jOS4jeWcqOWwsei1i+S4gOS4quepuuaVsOe7hFxuXG4gICAgaWYgKCEoa2V5IGluIF9oYW5kbGVycykpIF9oYW5kbGVyc1trZXldID0gW107XG5cbiAgICBfaGFuZGxlcnNba2V5XS5wdXNoKHtcbiAgICAgIGtleXVwOiBrZXl1cCxcbiAgICAgIGtleWRvd246IGtleWRvd24sXG4gICAgICBzY29wZTogc2NvcGUsXG4gICAgICBtb2RzOiBtb2RzLFxuICAgICAgc2hvcnRjdXQ6IGtleXNbaV0sXG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIGtleToga2V5c1tpXSxcbiAgICAgIHNwbGl0S2V5OiBzcGxpdEtleSxcbiAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcbiAgICB9KTtcbiAgfSAvLyDlnKjlhajlsYBkb2N1bWVudOS4iuiuvue9ruW/q+aNt+mUrlxuXG5cbiAgaWYgKHR5cGVvZiBlbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiAhaXNFbGVtZW50QmluZChlbGVtZW50KSAmJiB3aW5kb3cpIHtcbiAgICBlbGVtZW50SGFzQmluZEV2ZW50LnB1c2goZWxlbWVudCk7XG4gICAgYWRkRXZlbnQoZWxlbWVudCwgJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZGlzcGF0Y2goZSwgZWxlbWVudCk7XG4gICAgfSwgY2FwdHVyZSk7XG5cbiAgICBpZiAoIXdpbkxpc3RlbmRGb2N1cykge1xuICAgICAgd2luTGlzdGVuZEZvY3VzID0gdHJ1ZTtcbiAgICAgIGFkZEV2ZW50KHdpbmRvdywgJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfZG93bktleXMgPSBbXTtcbiAgICAgIH0sIGNhcHR1cmUpO1xuICAgIH1cblxuICAgIGFkZEV2ZW50KGVsZW1lbnQsICdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBkaXNwYXRjaChlLCBlbGVtZW50KTtcbiAgICAgIGNsZWFyTW9kaWZpZXIoZSk7XG4gICAgfSwgY2FwdHVyZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJpZ2dlcihzaG9ydGN1dCkge1xuICB2YXIgc2NvcGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdhbGwnO1xuICBPYmplY3Qua2V5cyhfaGFuZGxlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBkYXRhTGlzdCA9IF9oYW5kbGVyc1trZXldLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0uc2NvcGUgPT09IHNjb3BlICYmIGl0ZW0uc2hvcnRjdXQgPT09IHNob3J0Y3V0O1xuICAgIH0pO1xuXG4gICAgZGF0YUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5tZXRob2QpIHtcbiAgICAgICAgZGF0YS5tZXRob2QoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbnZhciBfYXBpID0ge1xuICBnZXRQcmVzc2VkS2V5U3RyaW5nOiBnZXRQcmVzc2VkS2V5U3RyaW5nLFxuICBzZXRTY29wZTogc2V0U2NvcGUsXG4gIGdldFNjb3BlOiBnZXRTY29wZSxcbiAgZGVsZXRlU2NvcGU6IGRlbGV0ZVNjb3BlLFxuICBnZXRQcmVzc2VkS2V5Q29kZXM6IGdldFByZXNzZWRLZXlDb2RlcyxcbiAgaXNQcmVzc2VkOiBpc1ByZXNzZWQsXG4gIGZpbHRlcjogZmlsdGVyLFxuICB0cmlnZ2VyOiB0cmlnZ2VyLFxuICB1bmJpbmQ6IHVuYmluZCxcbiAga2V5TWFwOiBfa2V5TWFwLFxuICBtb2RpZmllcjogX21vZGlmaWVyLFxuICBtb2RpZmllck1hcDogbW9kaWZpZXJNYXBcbn07XG5cbmZvciAodmFyIGEgaW4gX2FwaSkge1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9hcGksIGEpKSB7XG4gICAgaG90a2V5c1thXSA9IF9hcGlbYV07XG4gIH1cbn1cblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHZhciBfaG90a2V5cyA9IHdpbmRvdy5ob3RrZXlzO1xuXG4gIGhvdGtleXMubm9Db25mbGljdCA9IGZ1bmN0aW9uIChkZWVwKSB7XG4gICAgaWYgKGRlZXAgJiYgd2luZG93LmhvdGtleXMgPT09IGhvdGtleXMpIHtcbiAgICAgIHdpbmRvdy5ob3RrZXlzID0gX2hvdGtleXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhvdGtleXM7XG4gIH07XG5cbiAgd2luZG93LmhvdGtleXMgPSBob3RrZXlzO1xufVxuXG5leHBvcnQgeyBob3RrZXlzIGFzIGRlZmF1bHQgfTtcbiIsImltcG9ydCB7IFRZUEVTIH0gZnJvbSAnQC9jb25maWcnO1xyXG5pbXBvcnQgeyBDb21tYW5kLCBJRXZlbnRCdXMsIElTaG9ydGN1dCB9IGZyb20gJ0AvdHlwZXMnO1xyXG5pbXBvcnQgeyBsb2cgfSBmcm9tICdAL3V0aWwnO1xyXG5pbXBvcnQgaG90a2V5cyBmcm9tICdob3RrZXlzLWpzJztcclxuaW1wb3J0IHsgaW5qZWN0LCBpbmplY3RhYmxlIH0gZnJvbSAnaW52ZXJzaWZ5JztcclxuXHJcbmhvdGtleXMuZmlsdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5AaW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBTaG9ydGN1dCBpbXBsZW1lbnRzIElTaG9ydGN1dCB7XHJcbiAgICBwcml2YXRlIGV2ZW50QnVzOiBJRXZlbnRCdXM7XHJcblxyXG4gICAgcHJpdmF0ZSBvcHRpb24gPSB7XHJcbiAgICAgICAgY2FwdHVyZTogdHJ1ZSxcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKEBpbmplY3QoVFlQRVMuRXZlbnRCdXMpIGV2ZW50QnVzOiBJRXZlbnRCdXMpIHtcclxuICAgICAgICBsb2coJ0luaXRpYWxpemUgc2hvcnRjdXQgc3Vic3lzdGVtJyk7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cyA9IGV2ZW50QnVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWdpc3RlcktleWJvYXJkRXZlbnQoc2hvcnRjdXQ6IHN0cmluZywgY2FsbGJhY2s6IChlOiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaG90a2V5cyhzaG9ydGN1dCwgdGhpcy5vcHRpb24sIGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKHNob3J0Y3V0LnRvU3RyaW5nKCksIGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5yZWdpc3RlcktleWJvYXJkRXZlbnQoc2hvcnRjdXQ6IHN0cmluZykge1xyXG4gICAgICAgIGhvdGtleXMudW5iaW5kKHNob3J0Y3V0KTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9mZihzaG9ydGN1dC50b1N0cmluZygpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVnaXN0ZXJLZXlib2FyZEV2ZW50RnJvbVBsdWdpbihjb21tYW5kOiBDb21tYW5kKSB7XHJcbiAgICAgICAgaWYgKGNvbW1hbmQuc2hvcnRjdXQgJiYgY29tbWFuZC5jYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyS2V5Ym9hcmRFdmVudChjb21tYW5kLnNob3J0Y3V0LCBjb21tYW5kLmNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVucmVnaXN0ZXJLZXlib2FyZEV2ZW50RnJvbVBsdWdpbihjb21tYW5kOiBDb21tYW5kKSB7XHJcbiAgICAgICAgaWYgKGNvbW1hbmQuc2hvcnRjdXQgJiYgY29tbWFuZC5jYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJLZXlib2FyZEV2ZW50KGNvbW1hbmQuc2hvcnRjdXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBpbmplY3RhYmxlIH0gZnJvbSAnaW52ZXJzaWZ5JztcclxuaW1wb3J0IHsgSVNldHRpbmdNYW5hZ2VyLCBTZXR0aW5nUmVuZGVyIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuQGluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgU2V0dGluZ01hbmFnZXIgaW1wbGVtZW50cyBJU2V0dGluZ01hbmFnZXIge1xyXG4gICAgc2V0dGluZ1JlbmRlcnM6IE1hcDxzdHJpbmcsIFNldHRpbmdSZW5kZXI+O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdSZW5kZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyU2V0dGluZyhwbHVnaW5LZXk6IHN0cmluZywgc2V0dGluZ1JlbmRlcjogU2V0dGluZ1JlbmRlcikge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ1JlbmRlcnMuc2V0KHBsdWdpbktleSwgc2V0dGluZ1JlbmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgdW5yZWdpc3RlclNldHRpbmcoa2V5OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdSZW5kZXJzLmRlbGV0ZShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNldHRpbmdSZW5kZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdDogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IFNldHRpbmdSZW5kZXIgfT4gPSBbXTtcclxuICAgICAgICB0aGlzLnNldHRpbmdSZW5kZXJzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBrZXksIHZhbHVlIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSAnaW52ZXJzaWZ5JztcclxuaW1wb3J0IHsgU3RvcmFnZU1hbmFnZXIgfSBmcm9tICcuL2NvcmUvc3RvcmFnZS1tYW5hZ2VyJztcclxuaW1wb3J0IHsgUGx1Z2luU3lzdGVtIH0gZnJvbSAnLi9jb3JlJztcclxuaW1wb3J0IHsgVFlQRVMgfSBmcm9tICcuL2NvbmZpZyc7XHJcbmltcG9ydCB7IFN5c3RlbU1hbmFnZXIgfSBmcm9tICcuL2NvcmUvc3lzdGVtLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBQbHVnaW5Mb2FkZXIgfSBmcm9tICcuL2NvcmUvbG9hZGVyJztcclxuaW1wb3J0IHsgUGx1Z2luRmlsZU1hbmFnZXIgfSBmcm9tICcuL2NvcmUvcGx1Z2luLWZpbGUtbWFuYWdlcic7XHJcbmltcG9ydCB7XHJcbiAgICBJU3RvcmFnZU1hbmFnZXIsXHJcbiAgICBJU3lzdGVtTWFuYWdlcixcclxuICAgIElQbHVnaW5TeXN0ZW0sXHJcbiAgICBJUGx1Z2luTG9hZGVyLFxyXG4gICAgSVBsdWdpbkZpbGVNYW5hZ2VyLFxyXG4gICAgSUV2ZW50QnVzLFxyXG4gICAgSVNob3J0Y3V0LFxyXG4gICAgSUNvbW1hbmRNYW5hZ2VyLFxyXG4gICAgSVN0b3JlLFxyXG4gICAgSVNldHRpbmdNYW5hZ2VyLFxyXG59IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJy4vY29yZS9ldmVudC1idXMnO1xyXG5pbXBvcnQgeyBDb21tYW5kTWFuYWdlciB9IGZyb20gJy4vY29yZS9jb21tYW5kLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBTaG9ydGN1dCB9IGZyb20gJy4vY29yZS9zaG9ydGN1dCc7XHJcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSAnLi9jb3JlL3N0b3JlJztcclxuaW1wb3J0IHsgU2V0dGluZ01hbmFnZXIgfSBmcm9tICcuL2NvcmUvc2V0dGluZy1tYW5hZ2VyJztcclxuXHJcbmNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb250YWluZXIoKTtcclxuY29udGFpbmVyLmJpbmQ8SVN0b3JhZ2VNYW5hZ2VyPihUWVBFUy5TdG9yYWdlTWFuYWdlcikudG8oU3RvcmFnZU1hbmFnZXIpLmluU2luZ2xldG9uU2NvcGUoKTtcclxuY29udGFpbmVyLmJpbmQ8SVN5c3RlbU1hbmFnZXI+KFRZUEVTLlN5c3RlbU1hbmFnZXIpLnRvKFN5c3RlbU1hbmFnZXIpLmluU2luZ2xldG9uU2NvcGUoKTtcclxuY29udGFpbmVyLmJpbmQ8SVBsdWdpblN5c3RlbT4oVFlQRVMuUGx1Z2luU3lzdGVtKS50byhQbHVnaW5TeXN0ZW0pLmluU2luZ2xldG9uU2NvcGUoKTtcclxuY29udGFpbmVyLmJpbmQ8SVBsdWdpbkxvYWRlcj4oVFlQRVMuUGx1Z2luTG9hZGVyKS50byhQbHVnaW5Mb2FkZXIpLmluU2luZ2xldG9uU2NvcGUoKTtcclxuY29udGFpbmVyLmJpbmQ8SVBsdWdpbkZpbGVNYW5hZ2VyPihUWVBFUy5QbHVnaW5GaWxlTWFuYWdlcikudG8oUGx1Z2luRmlsZU1hbmFnZXIpLmluU2luZ2xldG9uU2NvcGUoKTtcclxuY29udGFpbmVyLmJpbmQ8SUV2ZW50QnVzPihUWVBFUy5FdmVudEJ1cykudG8oRXZlbnRCdXMpO1xyXG5jb250YWluZXIuYmluZDxJU2hvcnRjdXQ+KFRZUEVTLlNob3J0Y3V0KS50byhTaG9ydGN1dCkuaW5TaW5nbGV0b25TY29wZSgpO1xyXG5jb250YWluZXIuYmluZDxJQ29tbWFuZE1hbmFnZXI+KFRZUEVTLkNvbW1hbmRNYW5hZ2VyKS50byhDb21tYW5kTWFuYWdlcikuaW5TaW5nbGV0b25TY29wZSgpO1xyXG5jb250YWluZXIuYmluZDxJU3RvcmU+KFRZUEVTLlN0b3JlKS50byhTdG9yZSkuaW5TaW5nbGV0b25TY29wZSgpO1xyXG5jb250YWluZXIuYmluZDxJU2V0dGluZ01hbmFnZXI+KFRZUEVTLlNldHRpbmdNYW5hZ2VyKS50byhTZXR0aW5nTWFuYWdlcikuaW5TaW5nbGV0b25TY29wZSgpO1xyXG5cclxuZXhwb3J0IHsgY29udGFpbmVyIH07XHJcbiIsImltcG9ydCAncmVmbGVjdC1tZXRhZGF0YSc7XHJcblxyXG5pbXBvcnQgeyBWRVJTSU9OIH0gZnJvbSAnLi9jb25maWcnO1xyXG5pbXBvcnQgeyBsb2cgfSBmcm9tICcuL3V0aWwnO1xyXG5pbXBvcnQgeyBjb250YWluZXIgfSBmcm9tICcuL2NvbnRhaW5lcic7XHJcbmltcG9ydCB7IFRZUEVTIH0gZnJvbSAnLi9jb25maWcnO1xyXG5pbXBvcnQgeyBJUGx1Z2luU3lzdGVtIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5mdW5jdGlvbiBpbml0UGx1Z2luU3lzdGVtKCkge1xyXG4gICAgaWYgKCF3aW5kb3cucGx1Z2luU3lzdGVtKSB7XHJcbiAgICAgICAgbG9nKCdTaXl1YW4gUGx1Z2luIFN5c3RlbSBsb2FkaW5nLi4uJyk7XHJcbiAgICAgICAgd2luZG93LnBsdWdpblN5c3RlbVZlcnNpb24gPSBWRVJTSU9OO1xyXG4gICAgICAgIHdpbmRvdy5wbHVnaW5TeXN0ZW0gPSBjb250YWluZXIuZ2V0PElQbHVnaW5TeXN0ZW0+KFRZUEVTLlBsdWdpblN5c3RlbSkuaW5pdCgpO1xyXG4gICAgICAgIHdpbmRvdy5wbHVnaW5TeXN0ZW1Jb2NDb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IGluaXRQbHVnaW5TeXN0ZW0gfTtcclxuZXhwb3J0IGRlZmF1bHQgaW5pdFBsdWdpblN5c3RlbTtcclxuIl0sIm5hbWVzIjpbIlJlZmxlY3QiLCJmYWN0b3J5IiwiZ2xvYmFsIiwiTWV0YWRhdGEiLCJQIiwiaGFzT3duIiwiX2EiLCJpdGVyYXRvciIsImsiLCJwcm90b3R5cGUiLCJNYXBJdGVyYXRvciIsImVycm9yIiwiTWFwIiwiZ2V0S2V5IiwiaW5zZXJ0IiwiXyIsIlNldCIsIldlYWtNYXAiLCJWRVJTSU9OIiwicmVxdWVzdCIsInVybCIsInRyYW5zYWN0aW9ucyIsInNxbCIsIm5hbWUiLCJpZCIsInRleHQiLCJzZXJ2ZXJBcGkucHVzaEVyck1zZyIsInNlcnZlckFwaS5wdXNoTXNnIiwidCIsImEiLCJlIiwibCIsInAiLCJjIiwicmVzb2x2ZSIsImIiLCJkZXNjcmlwdG9ycyIsImZpbHRlciIsImhhc093blByb3BlcnR5Iiwibm9vcCIsImNvZGUiLCJjb25maWciLCJlbmNvZGUiLCJhcHBlbmQiLCJ0b1N0cmluZyIsIlVSTFNlYXJjaFBhcmFtcyIsIkZvcm1EYXRhIiwiQmxvYiIsImlzRm9ybURhdGEiLCJpc0ZpbGVMaXN0IiwidHJhbnNpdGlvbmFsIiwic2VsZiIsImRlZmF1bHRzIiwiQXhpb3NIZWFkZXJzIiwidmFsaWRhdGVTdGF0dXMiLCJzdGFuZGFyZEJyb3dzZXJFbnYiLCJpc1VSTFNhbWVPcmlnaW4iLCJub25TdGFuZGFyZEJyb3dzZXJFbnYiLCJhZGFwdGVycyIsIm1lcmdlIiwidmFsaWRhdG9ycyIsInZhbGlkYXRvciIsInZlcnNpb24iLCJvcHRzIiwiSW50ZXJjZXB0b3JNYW5hZ2VyIiwiZm9yRWFjaE1ldGhvZE5vRGF0YSIsImZvckVhY2hNZXRob2RXaXRoRGF0YSIsImRlZmF1bHRDb25maWciLCJBeGlvcyIsImluc3RhbmNlIiwiQ2FuY2VsVG9rZW4iLCJIdHRwU3RhdHVzQ29kZSIsIkxvZ2dlckZhY3RvcnkiLCJMb2dMZXZlbEVudW0iLCJheGlvcyIsIkVycm9yIiwiQmluZGluZyIsIk1ldGFkYXRhUmVhZGVyIiwiTUVUQURBVEFfS0VZLlBBUkFNX1RZUEVTIiwiTUVUQURBVEFfS0VZLlRBR0dFRCIsIk1FVEFEQVRBX0tFWS5UQUdHRURfUFJPUCIsIkVSUk9SX01TR1MuU1RBQ0tfT1ZFUkZMT1ciLCJjb250YWluZXIiLCJnZXRCaW5kaW5ncyIsIkVSUk9SX01TR1MuQ0lSQ1VMQVJfREVQRU5ERU5DWSIsIkNvbnRleHQiLCJwbGFuIiwiTUVUQURBVEFfS0VZLk5BTUVEX1RBRyIsIlBsYW4iLCJMYXp5U2VydmljZUlkZW50aWZlciIsIlF1ZXJ5YWJsZVN0cmluZyIsIlRhcmdldCIsIk1FVEFEQVRBX0tFWS5NVUxUSV9JTkpFQ1RfVEFHIiwiTUVUQURBVEFfS0VZLk5PTl9DVVNUT01fVEFHX0tFWVMiLCJNRVRBREFUQV9LRVkuT1BUSU9OQUxfVEFHIiwiX19zcHJlYWRBcnJheSIsInRoaXMiLCJFUlJPUl9NU0dTLk1JU1NJTkdfSU5KRUNUQUJMRV9BTk5PVEFUSU9OIiwiaXNPYmplY3QiLCJpc0Z1bmN0aW9uIiwiaXNVbmRlZmluZWQiLCJFUlJPUl9NU0dTLk1JU1NJTkdfSU5KRUNUX0FOTk9UQVRJT04iLCJpbmplY3QiLCJNRVRBREFUQV9LRVkuVU5NQU5BR0VEX1RBRyIsIk1FVEFEQVRBX0tFWS5JTkpFQ1RfVEFHIiwiTUVUQURBVEFfS0VZLk5BTUVfVEFHIiwiUmVxdWVzdCIsIkVSUk9SX01TR1MuTk9UX1JFR0lTVEVSRUQiLCJFUlJPUl9NU0dTLkFNQklHVU9VU19NQVRDSCIsIkVSUk9SX01TR1MuQVJHVU1FTlRTX0xFTkdUSF9NSVNNQVRDSCIsIl9fYXdhaXRlciIsIl9fZ2VuZXJhdG9yIiwiRmFjdG9yeVR5cGUiLCJFUlJPUl9NU0dTLklOVkFMSURfQklORElOR19UWVBFIiwiX19hc3NpZ24iLCJNRVRBREFUQV9LRVkuUE9TVF9DT05TVFJVQ1QiLCJNRVRBREFUQV9LRVkuUFJFX0RFU1RST1kiLCJFUlJPUl9NU0dTLkNJUkNVTEFSX0RFUEVOREVOQ1lfSU5fRkFDVE9SWSIsIkJpbmRpbmdXaGVuU3ludGF4IiwiQmluZGluZ09uU3ludGF4IiwiQmluZGluZ1doZW5PblN5bnRheCIsIkJpbmRpbmdJblN5bnRheCIsIkJpbmRpbmdJbldoZW5PblN5bnRheCIsIkJpbmRpbmdUb1N5bnRheCIsIkVSUk9SX01TR1MuSU5WQUxJRF9UT19TRUxGX1ZBTFVFIiwiRVJST1JfTVNHUy5JTlZBTElEX0ZVTkNUSU9OX0JJTkRJTkciLCJDb250YWluZXJTbmFwc2hvdCIsIkxvb2t1cCIsIkVSUk9SX01TR1MuTlVMTF9BUkdVTUVOVCIsIkVSUk9SX01TR1MuS0VZX05PVF9GT1VORCIsIk1vZHVsZUFjdGl2YXRpb25TdG9yZSIsIkNvbnRhaW5lciIsIkVSUk9SX01TR1MuQ09OVEFJTkVSX09QVElPTlNfTVVTVF9CRV9BTl9PQkpFQ1QiLCJFUlJPUl9NU0dTLkNPTlRBSU5FUl9PUFRJT05TX0lOVkFMSURfREVGQVVMVF9TQ09QRSIsIkVSUk9SX01TR1MuQ09OVEFJTkVSX09QVElPTlNfSU5WQUxJRF9BVVRPX0JJTkRfSU5KRUNUQUJMRSIsIkVSUk9SX01TR1MuQ09OVEFJTkVSX09QVElPTlNfSU5WQUxJRF9TS0lQX0JBU0VfQ0hFQ0siLCJtb2R1bGUiLCJFUlJPUl9NU0dTLk5PX01PUkVfU05BUFNIT1RTX0FWQUlMQUJMRSIsIkVSUk9SX01TR1MuT05fREVBQ1RJVkFUSU9OX0VSUk9SIiwiRVJST1JfTVNHUy5JTlZBTElEX01JRERMRVdBUkVfUkVUVVJOIiwiRVJST1JfTVNHUy5MQVpZX0lOX1NZTkMiLCJFUlJPUl9NU0dTLkFTWU5DX1VOQklORF9SRVFVSVJFRCIsIkVSUk9SX01TR1MuQ0FOTk9UX1VOQklORCIsIkVSUk9SX01TR1MuSU5WQUxJRF9ERUNPUkFUT1JfT1BFUkFUSU9OIiwiRVJST1JfTVNHUy5EVVBMSUNBVEVEX01FVEFEQVRBIiwibSIsIkVSUk9SU19NU0dTLkRVUExJQ0FURURfSU5KRUNUQUJMRV9ERUNPUkFUT1IiLCJNRVRBREFUQV9LRVkuREVTSUdOX1BBUkFNX1RZUEVTIiwiZWxlbWVudCIsImRldGFjaCIsImNyZWF0ZV9mcmFnbWVudCIsImN0eCIsImNyZWF0ZV9pZl9ibG9ja18xIiwiY3JlYXRlX2lmX2Jsb2NrIiwiQ29tbWFuZFBhbmVsX19TdmVsdGVDb21wb25lbnRfIiwidW5pbnN0YWxsIiwicGx1Z2luIiwiX19kZWNvcmF0ZUNsYXNzIiwiX19kZWNvcmF0ZVBhcmFtIiwiY3JlYXRlX2lmX2Jsb2NrXzQiLCJjcmVhdGVfaWZfYmxvY2tfMyIsImNyZWF0ZV9pZl9ibG9ja18yIiwiZGlzcGF0Y2giLCJsb2FkaW5nIiwicmVhZG1lIiwiZ29CYWNrIiwicmVuZGVyIiwiU2V0dGluZ0NvbW1vbiIsIlNldHRpbmdMaXN0IiwiU2V0dGluZ1N0b3JlIiwiY2xpZW50QXBpLmFkZFRvb2xiYXJSaWdodCIsIlNldHRpbmdzIiwiaXNIaWdoU3Vycm9nYXRlIiwiaXNMb3dTdXJyb2dhdGUiLCJ0cnVuY2F0ZSIsImdldExlbmd0aCIsImJyb3dzZXIiLCJyZXF1aXJlJCQwIiwicmVxdWlyZSQkMSIsImFsbCIsInNhbml0aXplIiwiaW50ZXJuYWxQbHVnaW5zIiwiTUFYX0xFTkdUSCIsIk1BWF9TQUZFX0lOVEVHRVIiLCJjb25zdGFudHMiLCJkZWJ1ZyIsIk1BWF9TQUZFX0NPTVBPTkVOVF9MRU5HVEgiLCJleHBvcnRzIiwicmUiLCJSIiwicGFyc2VPcHRpb25zIiwiY29tcGFyZUlkZW50aWZpZXJzIiwiaWRlbnRpZmllcnMiLCJyZXF1aXJlJCQyIiwicmVxdWlyZSQkMyIsInJlcXVpcmUkJDQiLCJTZW1WZXIiLCJzZW12ZXIiLCJwYXJzZSIsInZhbGlkIiwiY2xlYW4iLCJpbmMiLCJjb21wYXJlIiwiZXEiLCJkaWZmIiwibWFqb3IiLCJtaW5vciIsInBhdGNoIiwicHJlcmVsZWFzZSIsInJjb21wYXJlIiwiY29tcGFyZUxvb3NlIiwiY29tcGFyZUJ1aWxkIiwic29ydCIsInJzb3J0IiwiZ3QiLCJsdCIsIm5lcSIsImd0ZSIsImx0ZSIsInJlcXVpcmUkJDUiLCJjbXAiLCJjb2VyY2UiLCJ0cmltIiwiUmFuZ2UiLCJyYW5nZSIsIkNvbXBhcmF0b3IiLCJNIiwieiIsIkFOWSIsInNhdGlzZmllcyIsInRvQ29tcGFyYXRvcnMiLCJtYXhTYXRpc2Z5aW5nIiwibWluU2F0aXNmeWluZyIsIm1pblZlcnNpb24iLCJjb21wYXJhdG9yIiwidmFsaWRSYW5nZSIsInJlcXVpcmUkJDYiLCJyZXF1aXJlJCQ3Iiwib3V0c2lkZSIsImd0ciIsImx0ciIsImludGVyc2VjdHMiLCJzdWJzZXQiLCJyZXF1aXJlJCQ4IiwicmVxdWlyZSQkOSIsInJlcXVpcmUkJDEwIiwicmVxdWlyZSQkMTEiLCJyZXF1aXJlJCQxMiIsInJlcXVpcmUkJDEzIiwicmVxdWlyZSQkMTQiLCJyZXF1aXJlJCQxNSIsInJlcXVpcmUkJDE2IiwicmVxdWlyZSQkMTciLCJyZXF1aXJlJCQxOCIsInJlcXVpcmUkJDE5IiwicmVxdWlyZSQkMjAiLCJyZXF1aXJlJCQyMSIsInJlcXVpcmUkJDIyIiwicmVxdWlyZSQkMjMiLCJyZXF1aXJlJCQyNCIsInJlcXVpcmUkJDI1IiwicmVxdWlyZSQkMjYiLCJyZXF1aXJlJCQyNyIsInJlcXVpcmUkJDI4IiwicmVxdWlyZSQkMjkiLCJyZXF1aXJlJCQzMCIsInJlcXVpcmUkJDMxIiwicmVxdWlyZSQkMzIiLCJyZXF1aXJlJCQzMyIsInJlcXVpcmUkJDM0IiwicmVxdWlyZSQkMzUiLCJyZXF1aXJlJCQzNiIsInJlcXVpcmUkJDM3IiwicmVxdWlyZSQkMzgiLCJyZXF1aXJlJCQzOSIsInJlcXVpcmUkJDQwIiwic2VydmVyQXBpLmdldEJhenphcldpZGdldCIsInBsdWciLCJwbHVnaW5OYW1lIiwic2NyaXB0Iiwic2hvcnRjdXQiLCJnZXRNb2RpZmllciIsImVhY2hVbmJpbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFjQSxJQUFJQTtBQUFBQSxDQUNILFNBQVVBLFVBQVM7QUFHaEIsR0FBQyxTQUFVQyxVQUFTO0FBQ2hCLFFBQUksT0FBTyxPQUFPQyxtQkFBVyxXQUFXQSxpQkFDcEMsT0FBTyxTQUFTLFdBQVcsT0FDdkIsT0FBTyxTQUFTLFdBQVcsT0FDdkIsU0FBUyxjQUFjO0FBQ25DLFFBQUksV0FBVyxhQUFhRixRQUFPO0FBQ25DLFFBQUksT0FBTyxLQUFLLFlBQVksYUFBYTtBQUNyQyxXQUFLLFVBQVVB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
