{
	"ID": "20201204181006-7bkppue",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20201204181006-7bkppue",
		"title": "模板片段",
		"type": "doc",
		"updated": "20230820185615"
	},
	"Children": [
		{
			"ID": "20210428214921-3rfhrt6",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210428214921-3rfhrt6",
				"updated": "20210428214924"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "概述"
				}
			]
		},
		{
			"ID": "20210104091309-h61sdjr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210104091309-h61sdjr",
				"updated": "20210428230754"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "模板片段"
				},
				{
					"Type": "NodeText",
					"Data": "用于在光标插入符位置快速插入之前设置好的文本内容，支持变量。"
				},
				{
					"Type": "NodeText",
					"Data": "模板片段"
				},
				{
					"Type": "NodeText",
					"Data": "使用 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": ".md"
				},
				{
					"Type": "NodeText",
					"Data": " 后缀文件，存放在工作空间 data/templates 文件夹下。"
				}
			]
		},
		{
			"ID": "20210104091309-fhb549c",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210104091309-fhb549c"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "编写模板"
				}
			]
		},
		{
			"ID": "20210104091309-siekt4x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210104091309-siekt4x",
				"updated": "20210502204926"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "模板使用的是 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "https://golang.org/pkg/text/template/",
					"TextMarkTextContent": "Go 编程语言的文本模板"
				},
				{
					"Type": "NodeText",
					"Data": "进行实现，如果你对此有了解的话，可以实现一些程序逻辑在里面，比如比较逻辑、迭代逻辑等。另外，为了避免语法冲突，模板语法使用 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": ".action{action}"
				},
				{
					"Type": "NodeText",
					"Data": "（而不是 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "{{action}}"
				},
				{
					"Type": "NodeText",
					"Data": "）。"
				}
			]
		},
		{
			"ID": "20210104091309-mvyh081",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210104091309-mvyh081",
				"updated": "20230820185615"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们通过开源项目 Sprig (github repo: Masterminds/sprig) 内置了一些变量和函数来丰富模板。比如可通过 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": ".action{now | date \u0026quot;2006-01-02 15:04:05\u0026quot;}"
				},
				{
					"Type": "NodeText",
					"Data": "​ 来渲染当前时间，更多用法请参考 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "http://masterminds.github.io/sprig/",
					"TextMarkTextContent": "Sprig 帮助文档"
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20210104091309-vnxe81t",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210104091309-vnxe81t",
				"updated": "20210428223417"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "关于日期时间格式化有个细节需要"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "tag",
					"TextMarkTextContent": "注意"
				},
				{
					"Type": "NodeText",
					"Data": "：Go 编程语言的格式化比较特殊：不是使用 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "yyyy-MM-dd HH:mm:ss"
				},
				{
					"Type": "NodeText",
					"Data": "，而是使用 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "2006-01-02 15:04:05"
				},
				{
					"Type": "NodeText",
					"Data": " 这个固定时间格式（"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "https://www.zhihu.com/question/366830553",
					"TextMarkTextContent": "知乎讨论"
				},
				{
					"Type": "NodeText",
					"Data": "）。"
				}
			]
		},
		{
			"ID": "20210104091309-os47lco",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210104091309-os47lco"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "除了 Sprig 内置的变量和函数，还支持如下变量和函数："
				}
			]
		},
		{
			"ID": "20210104091309-gjkg3u5",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20210104091309-gjkg3u5",
				"updated": "20220605170311"
			},
			"Children": [
				{
					"ID": "20210104091309-p88fqma",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20210104091309-p88fqma"
					},
					"Children": [
						{
							"ID": "20210131155558-loq0tt3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210131155558-loq0tt3",
								"updated": "20210502204955"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "title"
								},
								{
									"Type": "NodeText",
									"Data": "：该变量用于插入当前文档名。比如模板内容为 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "# .action{.title}"
								},
								{
									"Type": "NodeText",
									"Data": "，则调用后会以一级标题语法插入到当前文档内容中"
								}
							]
						}
					]
				},
				{
					"ID": "20210221131427-rfs2tcl",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20210221131427-rfs2tcl"
					},
					"Children": [
						{
							"ID": "20210221131427-mx22ukt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210221131427-mx22ukt",
								"updated": "20210428223457"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "id"
								},
								{
									"Type": "NodeText",
									"Data": "：该变量用于插入当前文档 ID"
								}
							]
						}
					]
				},
				{
					"ID": "20211213120720-ulwzg6f",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20211213120720-ulwzg6f"
					},
					"Children": [
						{
							"ID": "20211213120720-bm8xbwm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20211213120720-bm8xbwm",
								"updated": "20211213120746"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "name"
								},
								{
									"Type": "NodeText",
									"Data": "：该变量用于插入当前文档命名"
								}
							]
						}
					]
				},
				{
					"ID": "20211213120748-0uhzrha",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20211213120748-0uhzrha",
						"updated": "20220605170311"
					},
					"Children": [
						{
							"ID": "20211213120748-72e95wc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20211213120748-72e95wc",
								"updated": "20220605170311"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "alias"
								},
								{
									"Type": "NodeText",
									"Data": "：该变量用于插入当前文档别名"
								}
							]
						}
					]
				},
				{
					"ID": "20210121193601-uwo8s5h",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20210121193601-uwo8s5h"
					},
					"Children": [
						{
							"ID": "20210131155558-ghlchbx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210131155558-ghlchbx",
								"updated": "20210504092933"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "queryBlocks"
								},
								{
									"Type": "NodeText",
									"Data": "：该函数用于查询数据库，返回值为 blocks 列表，参数为 SQL 语句："
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": ".action{sql \"SELECT * FROM blocks LIMIT 7\"}"
								}
							]
						}
					]
				},
				{
					"ID": "20210504093313-4aoyxd0",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20210504093313-4aoyxd0"
					},
					"Children": [
						{
							"ID": "20210504093313-ya53o58",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210504093313-ya53o58",
								"updated": "20210504093332"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "querySpans"
								},
								{
									"Type": "NodeText",
									"Data": "：该函数用于查询数据库，返回值为 spans 列表，参数为 SQL 语句："
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": ".action{sql \"SELECT * FROM spans LIMIT 7\"}"
								}
							]
						}
					]
				},
				{
					"ID": "20211213120813-ppm3j85",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20211213120813-ppm3j85",
						"updated": "20211213121154"
					},
					"Children": [
						{
							"ID": "20211213120813-9ynpjax",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20211213120813-9ynpjax",
								"updated": "20211213121154"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "parseTime"
								},
								{
									"Type": "NodeText",
									"Data": "：该函数用于将时间格式的字符串解析为 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "time.Time"
								},
								{
									"Type": "NodeText",
									"Data": " 类型，以便使用更多格式化方法渲染该时间"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210604111213-774ll6c",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210604111213-774ll6c",
				"updated": "20210604111557"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "queryBlocks"
				},
				{
					"Type": "NodeText",
					"Data": " 和 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "querySpans"
				},
				{
					"Type": "NodeText",
					"Data": " 支持类似 SQL 预编译语句的变参列表，方便传入参数："
				}
			]
		},
		{
			"ID": "20210604111446-p6vadfc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20210604111446-p6vadfc",
				"updated": "20210604111632"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"ID": "20220307091943-diuexe8",
					"Type": "NodeCodeBlockCode",
					"Data": ".action{$today := now | date \"20060102150405\"}\n.action{$blocks :=queryBlocks \"SELECT * FROM blocks WHERE content LIKE '?' AND updated \u003e '?' LIMIT ?\" \"%foo%\" $today \"3\"}\n",
					"Properties": {
						"id": "20220307091943-diuexe8"
					}
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20210104091309-h71ogwf",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210104091309-h71ogwf"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "调用模板"
				}
			]
		},
		{
			"ID": "20210104091309-l9wcdtk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210104091309-l9wcdtk",
				"updated": "20210428221604"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在光标插入符位置，通过 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "/"
				},
				{
					"Type": "NodeText",
					"Data": " 选择模板来触发模板搜索，找到需要插入的模板后回车即可。"
				}
			]
		},
		{
			"ID": "20210104091309-2p68yju",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210104091309-2p68yju"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "一个示例"
				}
			]
		},
		{
			"ID": "20210104091309-9ppkq6j",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "cGxhaW50ZXh0",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210104091309-9ppkq6j"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "cGxhaW50ZXh0"
				},
				{
					"ID": "20220307091943-k77h7sb",
					"Type": "NodeCodeBlockCode",
					"Data": ".action{$before := (div (now.Sub (toDate \"2006-01-02\" \"2020-02-19\")).Hours 24)}\n\n.action{$after := (div ((toDate \"2006-01-02\" \"2048-02-19\").Sub now).Hours 24)}\n今天是 `.action{now | date \"2006-01-02\"}`。\n\n* 距离 `2020-02-19` 已经过去 `.action{$before}` 天\n* 距离 `2048-02-19` 还剩 `.action{$after}` 天\n",
					"Properties": {
						"id": "20220307091943-k77h7sb"
					}
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210104091309-06sv04x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210104091309-06sv04x"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "$before"
				},
				{
					"Type": "NodeText",
					"Data": " 和 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "$after"
				},
				{
					"Type": "NodeText",
					"Data": " 定义了两个变量，分别记录当前日期距离 2020 年和 2048 年的天数。"
				}
			]
		},
		{
			"ID": "20210131162925-p51ey8q",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210131162925-p51ey8q"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "上架模板集市"
				}
			]
		},
		{
			"ID": "20221114172717-fu9oalt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221114172717-fu9oalt",
				"updated": "20230820184212"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "请参考"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "https://b3log.org/siyuan/community.html",
					"TextMarkTextContent": "社区集市仓库"
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		}
	]
}